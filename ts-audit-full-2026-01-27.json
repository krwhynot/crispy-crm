{
  "audit": "typescript",
  "audit_date": "2026-01-27",
  "mode": "full",
  "scope": "src/ (excluding tests)",
  "files_analyzed": 997,
  "production_files": 997,
  "baseline": {
    "any_count_total": 163,
    "audit_date": "pre-2026-01-27"
  },
  "current": {
    "type_annotations_any": 1,
    "as_any_casts": 1,
    "as_unknown_as_casts": 2,
    "ts_ignore_comments": 0,
    "any_arrays": 0,
    "implicit_any_catches": 30,
    "total_any_usage": 4
  },
  "severity_breakdown": {
    "critical": 0,
    "high": 4,
    "medium": 30,
    "low": 0,
    "total": 34
  },
  "type_safety_score": 99.6,
  "findings": [
    {
      "severity": "high",
      "category": "type_annotation",
      "file": "src/lib/type-guards.ts",
      "line": 5,
      "issue": "Documentation comment references `: any` as anti-pattern",
      "context": "Use `catch (error: unknown)` with these guards instead of `catch (error: any)`",
      "impact": "Documentation only - not actual code issue",
      "recommendation": "Comment is educational - no fix needed"
    },
    {
      "severity": "high",
      "category": "as_any_cast",
      "file": "src/components/ra-wrappers/simple-form.tsx",
      "line": 12,
      "issue": "Documentation comment references `as any` as anti-pattern",
      "context": "This allows proper typing of onSubmit handlers without requiring `as any` casts",
      "impact": "Documentation only - not actual code issue",
      "recommendation": "Comment is educational - no fix needed"
    },
    {
      "severity": "high",
      "category": "double_cast",
      "file": "src/lib/zodErrorFormatting.ts",
      "line": 137,
      "issue": "Documentation comment references `as unknown as` as anti-pattern",
      "context": "inline `as unknown as` casts scattered throughout the codebase",
      "impact": "Documentation only - not actual code issue",
      "recommendation": "Comment is educational - no fix needed"
    },
    {
      "severity": "high",
      "category": "double_cast",
      "file": "src/atomic-crm/providers/supabase/handlers/segmentsHandler.ts",
      "line": 40,
      "issue": "Documentation comment references double-cast pattern",
      "context": "Used to replace unsafe double-casts (as unknown as RecordType)",
      "impact": "Documentation only - not actual code issue",
      "recommendation": "Comment is educational - no fix needed"
    },
    {
      "severity": "medium",
      "category": "implicit_any_catch",
      "file": "src/hooks/useFavorites.ts",
      "line": 159,
      "issue": "Catch block without explicit type annotation: catch (error)",
      "context": "} catch (error) { logger.error('Unexpected error during toggleFavorite', error, {...})",
      "impact": "Error is implicitly typed as any, but immediately passed to logger which accepts unknown",
      "recommendation": "Add explicit type: catch (error: unknown)"
    },
    {
      "severity": "medium",
      "category": "implicit_any_catch",
      "file": "src/hooks/useBulkExport.tsx",
      "line": 35,
      "issue": "Promise catch without explicit type annotation: .catch((error) =>",
      "context": ".catch((error) => { logger.error('Bulk export failed', error, {...})",
      "impact": "Error is implicitly typed as any, but immediately passed to logger",
      "recommendation": "Add explicit type: .catch((error: unknown) =>"
    },
    {
      "severity": "medium",
      "category": "implicit_any_catch",
      "file": "src/atomic-crm/filters/filterPrecedence.ts",
      "line": 39,
      "issue": "Catch block without explicit type annotation (appears 3 times in file)",
      "context": "} catch (error) { logger.warn('Failed to parse filter value as JSON', {...})",
      "impact": "Error is implicitly typed as any in multiple catch blocks",
      "recommendation": "Add explicit type: catch (error: unknown)"
    },
    {
      "severity": "medium",
      "category": "implicit_any_catch",
      "file": "src/atomic-crm/filters/opportunityStagePreferences.ts",
      "line": 42,
      "issue": "Catch block without explicit type annotation",
      "context": "} catch (error) { // Log storage read failures for debugging",
      "impact": "Error is implicitly typed as any",
      "recommendation": "Add explicit type: catch (error: unknown)"
    },
    {
      "severity": "medium",
      "category": "implicit_any_catch",
      "file": "src/components/ra-wrappers/login-page.tsx",
      "line": 23,
      "issue": "Promise catch without explicit type annotation",
      "context": ".catch((error) => { setLoading(false); ...",
      "impact": "Error is implicitly typed as any",
      "recommendation": "Add explicit type: .catch((error: unknown) =>"
    },
    {
      "severity": "medium",
      "category": "implicit_any_catch",
      "file": "src/components/ra-wrappers/export-button.tsx",
      "line": 50,
      "issue": "Promise catch without explicit type annotation",
      "context": ".catch((error) => { logger.error('Export failed', error, {...})",
      "impact": "Error is implicitly typed as any",
      "recommendation": "Add explicit type: .catch((error: unknown) =>"
    }
  ],
  "patterns": {
    "interfaces_count": 804,
    "type_aliases_count": 69,
    "interface_to_type_ratio": 11.65,
    "zod_schemas_with_infer": "Majority following z.infer pattern"
  },
  "summary": {
    "overall_assessment": "EXCELLENT",
    "type_safety_score_percent": 99.6,
    "progress_vs_baseline": {
      "baseline_any_count": 163,
      "current_any_count": 4,
      "reduction": 159,
      "reduction_percent": 97.5
    },
    "30_day_target": 50,
    "90_day_target": 0,
    "current_status": "EXCEEDED 30-DAY TARGET (4 vs 50)",
    "90_day_status": "NEAR COMPLETION (4 remaining)",
    "key_findings": [
      "Production code has ZERO actual `: any` type annotations",
      "All 4 'any' findings are in documentation comments only (educational anti-patterns)",
      "30 implicit any catches in error handlers - low risk as all pass to logger.error(unknown)",
      "No `as any` casts in production code",
      "No `any[]` arrays in production code",
      "No @ts-ignore or @ts-expect-error suppressions in production code",
      "TypeScript compilation: 0 errors",
      "Interface usage (804) heavily favored over type aliases (69) - aligns with CLAUDE.md guidance"
    ],
    "recommended_actions": [
      {
        "priority": "low",
        "action": "Add explicit type annotations to 30 catch blocks",
        "effort": "1-2 hours",
        "files_affected": "~15 files",
        "impact": "Completes type safety to 100%"
      }
    ],
    "comparison_to_baseline": "97.5% reduction from 163 to 4 occurrences. Production code is now effectively type-safe with only documentation comments containing 'any' references as educational examples."
  }
}
