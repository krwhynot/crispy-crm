{
  "domain": "process",
  "description": "Skills for planning, execution, and auditing workflows",
  "skills": {
    "writing-plans": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "high",
      "description": "Plan authoring skill with quality gates and AI estimation. Creates implementation plans that zero-context agents can execute. Integrates with mcp__zen__consensus for effort/risk estimation.",
      "requiredSkills": ["enforcing-principles", "verification-before-completion"],
      "promptTriggers": {
        "keywords": [
          "write-plan",
          "write plan",
          "implementation plan",
          "design plan",
          "feature plan",
          "create plan",
          "plan for",
          "planning",
          "break down",
          "task breakdown"
        ],
        "intentPatterns": [
          "(write|create|draft|design).*?plan",
          "plan.*?(for|to).*?(implement|build|add|create)",
          "(break|split).*?(down|into).*?tasks?",
          "how.*?(would|should).*?(implement|build|approach)"
        ]
      }
    },
    "executing-plans": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "high",
      "description": "Plan execution skill with intelligent agent routing, subagent parallelization, checkpoint/rollback, and TodoWrite tracking. Routes tasks to specialized agents (test-fixer, form-builder, etc.) based on keywords.",
      "requiredSkills": ["verification-before-completion", "enforcing-principles"],
      "promptTriggers": {
        "keywords": [
          "execute-plan",
          "execute plan",
          "run plan",
          "implement plan",
          "start plan",
          "begin plan",
          "parallel execution",
          "subagent",
          "task swarm",
          "agent routing"
        ],
        "intentPatterns": [
          "(execute|run|start|begin|implement).*?plan",
          "plan.*?(execute|run|start|begin|implement)",
          "(dispatch|launch|spawn).*?(agent|task|subagent)",
          "parallel.*?(execution|implementation|tasks?)"
        ]
      }
    },
    "deep-audit": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "high",
      "description": "Comprehensive full-stack codebase audit for Crispy CRM. Phased approach: Phase 1 (Critical: security, data integrity, runtime errors), Phase 2 (Improvements: code quality, UI/UX, performance), Phase 3 (Polish: tests, docs, DX). Generates markdown report and auto-creates todos.",
      "requiredSkills": ["enforcing-principles", "ui-ux-design-principles"],
      "promptTriggers": {
        "keywords": [
          "audit",
          "deep audit",
          "codebase audit",
          "code audit",
          "quality check",
          "quality audit",
          "codebase review",
          "full review",
          "comprehensive review",
          "security audit",
          "security review",
          "after refactoring",
          "refactoring complete",
          "feature complete",
          "new feature done",
          "ready for review",
          "pre-release",
          "before release",
          "health check",
          "codebase health"
        ],
        "intentPatterns": [
          "(audit|review|check).*?(codebase|code|project|feature|security|quality)",
          "(deep|full|comprehensive|thorough).*?(audit|review|check|analysis)",
          "(run|do|perform|start).*?audit",
          "(feature|refactoring|changes?).*?(complete|done|finished).*?(review|audit|check)",
          "(before|pre).*?(release|deploy|ship).*?(audit|review|check)",
          "(check|review|audit).*?(everything|all|full)",
          "how.*?(healthy|quality|secure).*?(codebase|code|project)",
          "(security|data|ui|ux|performance).*?audit"
        ]
      },
      "fileTriggers": {
        "pathPatterns": [
          "src/atomic-crm/**/*.tsx",
          "src/atomic-crm/**/*.ts",
          "src/atomic-crm/providers/**/*.ts",
          "src/atomic-crm/validation/**/*.ts",
          "supabase/migrations/**/*.sql",
          "supabase/functions/**/*.ts"
        ]
      },
      "outputConfig": {
        "reportPath": "docs/audits/",
        "reportFormat": "YYYY-MM-DD-audit.md",
        "autoCreateTodos": true,
        "todoScope": "all"
      }
    },
    "audit-rls-soft-delete": {
      "type": "audit",
      "enforcement": "suggest",
      "priority": "high",
      "description": "Audit RLS policies for soft-delete filtering. Use when checking security policies, debugging 'deleted records visible' issues, or reviewing migrations.",
      "promptTriggers": {
        "keywords": [
          "rls audit",
          "policy audit",
          "soft delete audit",
          "deleted records visible",
          "security audit rls",
          "check rls",
          "audit policies"
        ],
        "intentPatterns": [
          "(audit|check|review).*?(rls|policy|policies)",
          "(deleted|soft.?delete).*?(visible|showing|appearing)",
          "rls.*?(soft.?delete|deleted_at)"
        ]
      },
      "fileTriggers": {
        "pathPatterns": [
          "supabase/migrations/**/*.sql"
        ],
        "contentPatterns": [
          "CREATE POLICY.*SELECT",
          "deleted_at"
        ]
      }
    },
    "audit-summary-views": {
      "type": "audit",
      "enforcement": "suggest",
      "priority": "high",
      "description": "Audit *_summary views for required columns and consistency. Use when creating views, debugging 'column not found' errors, or reviewing schema.",
      "promptTriggers": {
        "keywords": [
          "view audit",
          "summary view",
          "column not found",
          "missing column",
          "schema audit views",
          "view columns",
          "sync view"
        ],
        "intentPatterns": [
          "(audit|check|review).*?(view|views|summary)",
          "(column|field).*?(not found|missing)",
          "(view|summary).*?(out of sync|missing|columns)"
        ]
      },
      "fileTriggers": {
        "pathPatterns": [
          "supabase/migrations/**/*.sql"
        ],
        "contentPatterns": [
          "CREATE.*VIEW.*_summary",
          "information_schema.columns"
        ]
      }
    },
    "validate-props": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "medium",
      "description": "Enforce Zod props validation for UI components. Use when creating forms, SlideOvers, or high-churn components.",
      "promptTriggers": {
        "keywords": [
          "props validation",
          "component props",
          "SlideOver props",
          "form props",
          "validate props",
          "props schema",
          "ui-props"
        ],
        "intentPatterns": [
          "(validate|check|define).*?props",
          "(component|form|slideover).*?props.*?(type|schema|validation)",
          "props.*?(zod|schema|validation)"
        ]
      },
      "fileTriggers": {
        "pathPatterns": [
          "src/atomic-crm/**/*SlideOver*.tsx",
          "src/atomic-crm/validation/ui-props.ts"
        ],
        "contentPatterns": [
          "slideOverPropsSchema",
          "z\\.infer.*Props"
        ]
      }
    }
  }
}
