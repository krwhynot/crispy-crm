# Phase 3 Report: Decisions & Cleanup Plan

**Date:**
**Auditor:** Claude Code (Opus 4.6, Docker local + Supabase MCP cloud)
**Mode:** PLAN MODE (Read-Only)
**Lens:** supabase-postgres-best-practices
**Status:** IN PROGRESS

---

## 1) Phase 2 Assertion Verification

| Assertion | Status | Notes |
|-----------|--------|-------|
| Drift classifications still accurate | | |
| Dependency graphs complete | | |
| Operational failures still present | | |
| No new migrations since Phase 2 | | |
| Risk register items current | | |

---

## 2) Legacy Object Decision Table

| Object | Type | Decision | Reasoning | Business Impact if Wrong | Tech Risk | Rollback | Confidence | Blockers |
|--------|------|----------|-----------|--------------------------|-----------|----------|------------|----------|

---

## 3) Canonical Structure Declaration

### Task Model (Canonical)

<!-- Definitive statement of where tasks live and how they work -->

### Timeline Model (Canonical)

<!-- What feeds entity_timeline and how -->

### Digest Path (Canonical)

```
[Full chain from cron to user notification]
```

### Dashboard Path (Canonical)

```
[Full chain from cron to dashboard_snapshots]
```

### Compatibility-Only Objects

| Object | Purpose | Removal Timeline | Removal Blockers |
|--------|---------|------------------|------------------|

---

## 4) Phased Cleanup Plan

### Tier A: Safety & Observability (Zero Risk)

| # | Action | Environment | Validation Check | Depends On |
|---|--------|-------------|------------------|------------|

### Tier B: Low-Risk Fixes (Easily Reversible)

| # | Action | Environment | Rollback | Validation Check | Depends On |
|---|--------|-------------|----------|------------------|------------|

### Tier C: Medium-Risk Deprecations (Reversible with Effort)

| # | Action | Environment | Rollback | Validation Check | Depends On |
|---|--------|-------------|----------|------------------|------------|

### Tier D: High-Risk Removals (Require Backup)

| # | Action | Environment | Rollback | Validation Check | Depends On | Backup Step |
|---|--------|-------------|----------|------------------|------------|-------------|

### Stop/Go Gates

| Gate | Between | Go Condition | No-Go Action |
|------|---------|--------------|--------------|
| Gate 1 | Tier A -> B | All Tier A validated | Fix Tier A failures |
| Gate 2 | Tier B -> C | All Tier B validated | Fix Tier B failures |
| Gate 3 | Tier C -> D | All Tier C validated, backups confirmed | Fix Tier C failures |

---

## 5) Rollback Procedures

### Tier A Rollback

<!-- Nothing to roll back, but document how to verify no impact -->

### Tier B Rollback

<!-- Step-by-step reversal procedures -->

### Tier C Rollback

<!-- Step-by-step reversal procedures -->

### Tier D Rollback

<!-- Backup restoration procedures with state impact analysis -->

---

## 6) Validation Checklists

### Tier A Validation

- [ ]
- [ ]

### Tier B Validation

- [ ]
- [ ]

### Tier C Validation

- [ ]
- [ ]

### Tier D Validation

- [ ]
- [ ]

---

## 7) Sequencing Diagram

<!-- Dependency-aware ordering: which actions can run in parallel,
     which must be sequential, which have cross-tier dependencies -->

---

## 8) Updated Risk Register

| ID | Severity | Finding | Source | Status | Mitigation |
|----|----------|---------|--------|--------|------------|

---

## 9) Multiple-Choice Questions

### [Q1]

A)
B)
C)

**Selected:**
**Reason:**

### [Q2]

A)
B)
C)

**Selected:**
**Reason:**

---

*Generated by Claude Code (Opus 4.6) - Phase 3 Database Audit*
