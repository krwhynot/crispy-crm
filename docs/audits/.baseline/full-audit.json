{
  "lastAudit": "2026-01-11",
  "lastAuditTime": "02:19",
  "mode": "quick",
  "duration_minutes": 15,
  "totals": {
    "critical": 8,
    "high": 45,
    "medium": 96
  },
  "by_category": {
    "security": { "critical": 1, "high": 2, "medium": 4 },
    "data-integrity": { "critical": 4, "high": 6, "medium": 3 },
    "error-handling": { "critical": 0, "high": 1, "medium": 16 },
    "db-hardening": { "critical": 0, "high": 4, "medium": 8 },
    "stale-state": { "critical": 0, "high": 3, "medium": 8 },
    "workflow-gaps": { "critical": 0, "high": 2, "medium": 5 },
    "architecture": { "critical": 0, "high": 5, "medium": 4 },
    "typescript": { "critical": 0, "high": 8, "medium": 25 },
    "accessibility": { "critical": 0, "high": 6, "medium": 10 },
    "performance": { "critical": 2, "high": 4, "medium": 5 },
    "code-quality": { "critical": 1, "high": 4, "medium": 8 }
  },
  "critical_findings": [
    {
      "source_audit": "security",
      "id": "SEC-001",
      "severity": "critical",
      "check": "Environment Files in Git",
      "location": ".env, .env.local",
      "description": "Environment files tracked in repository with sensitive keys",
      "firstSeen": "2026-01-11",
      "status": "open"
    },
    {
      "source_audit": "data-integrity",
      "id": "DI-001",
      "severity": "critical",
      "check": "Hard DELETE in merge function",
      "location": "supabase/migrations/20251123215857_fix_merge_function.sql:62",
      "description": "merge_duplicate_contacts uses hard DELETE on contacts",
      "firstSeen": "2026-01-10",
      "status": "open"
    },
    {
      "source_audit": "data-integrity",
      "id": "DI-002",
      "severity": "critical",
      "check": "Hard DELETE in merge function",
      "location": "supabase/migrations/20251123214721_add_contact_duplicates.sql:101",
      "description": "Duplicate merge function with hard DELETE",
      "firstSeen": "2026-01-10",
      "status": "open"
    },
    {
      "source_audit": "data-integrity",
      "id": "DI-003",
      "severity": "critical",
      "check": "Hard DELETE on opportunities",
      "location": "supabase/migrations/20251117032253_fix_referential_integrity.sql:21",
      "description": "Data cleanup uses hard DELETE on opportunities",
      "firstSeen": "2026-01-11",
      "status": "open"
    },
    {
      "source_audit": "data-integrity",
      "id": "DI-004",
      "severity": "critical",
      "check": "Hard DELETE on activities",
      "location": "supabase/migrations/20251202062000_add_sample_activities.sql:11",
      "description": "Orphaned activity cleanup uses hard DELETE",
      "firstSeen": "2026-01-11",
      "status": "open"
    },
    {
      "source_audit": "performance",
      "id": "PERF-001",
      "severity": "critical",
      "check": "Sequential API calls",
      "location": "src/atomic-crm/opportunities/hooks/useBulkActionsState.ts:85-97",
      "description": "Sequential await in for-loop for bulk updates instead of Promise.all()",
      "firstSeen": "2026-01-11",
      "status": "open"
    },
    {
      "source_audit": "performance",
      "id": "PERF-002",
      "severity": "critical",
      "check": "Sequential API calls",
      "location": "src/atomic-crm/services/products.service.ts:140-142",
      "description": "Sequential creates in loop for product_distributors",
      "firstSeen": "2026-01-11",
      "status": "open"
    },
    {
      "source_audit": "code-quality",
      "id": "CQ-001",
      "severity": "critical",
      "check": "Backup file in repository",
      "location": "src/atomic-crm/validation/opportunities.ts.bak",
      "description": "Tracked backup file (740 lines) should not be in git",
      "firstSeen": "2026-01-11",
      "status": "open"
    }
  ],
  "strangler_fig_status": {
    "unifiedDataProvider_lines": 0,
    "composedDataProvider_lines": 255,
    "handler_count": 38,
    "status": "COMPLETED"
  },
  "feature_compliance": {
    "compliant": 7,
    "partial": 1,
    "incomplete": 0
  },
  "db_consistency": {
    "orphaned_opportunities": 0,
    "invalid_stages": 0,
    "unlinked_contacts": 0
  },
  "excellence_areas": [
    "Strangler Fig: 100% COMPLETE - 38 composed handlers",
    "TypeScript: 98% type safety score",
    "Design System: Semantic colors throughout",
    "Touch Targets: WCAG compliant (44px minimum)",
    "Feature Structure: 7/8 features fully compliant",
    "React Optimization: 166 files with useMemo/useCallback",
    "Critical Issue Reduction: 81% decrease from previous audit"
  ],
  "trend": {
    "direction": "SIGNIFICANTLY_IMPROVING",
    "note": "Critical issues reduced from 43 to 8 (-81%). High issues reduced from 70 to 45 (-36%). More granular detection increased medium issues but overall quality improved.",
    "previous_total": 182,
    "current_total": 149,
    "delta": -33
  }
}
