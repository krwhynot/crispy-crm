{
  "lastAudit": "2026-01-23T00:00:00Z",
  "composedDataProviderLines": 260,
  "unifiedProviderLines": 0,
  "findings": {
    "critical": 0,
    "high": 7,
    "medium": 1
  },
  "knownIssues": [
    {
      "id": "H001-1",
      "file": "src/atomic-crm/providers/supabase/authProvider.ts",
      "line": 164,
      "check": "H001",
      "description": "Sales query missing deleted_at filter",
      "status": "requires_fix"
    },
    {
      "id": "H001-2",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 147,
      "check": "H001",
      "description": "Activities query missing deleted_at filter (may be intentional for GDPR)",
      "status": "needs_verification"
    },
    {
      "id": "H001-3",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 160,
      "check": "H001",
      "description": "Contact notes query missing deleted_at filter",
      "status": "needs_verification"
    },
    {
      "id": "H001-4",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 195,
      "check": "H001",
      "description": "Organizations query missing deleted_at filter",
      "status": "needs_verification"
    },
    {
      "id": "H001-5",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 207,
      "check": "H001",
      "description": "Organization notes query missing deleted_at filter",
      "status": "needs_verification"
    },
    {
      "id": "H001-6",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 234,
      "check": "H001",
      "description": "Opportunities query missing deleted_at filter",
      "status": "needs_verification"
    },
    {
      "id": "H001-7",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 244,
      "check": "H001",
      "description": "Opportunity notes query missing deleted_at filter",
      "status": "needs_verification"
    },
    {
      "id": "H004",
      "file": "src/atomic-crm/providers/supabase/extensions/*",
      "line": 0,
      "check": "H004",
      "description": "Type-only Supabase imports (safe, acknowledged)",
      "status": "acknowledged"
    },
    {
      "id": "M001",
      "file": "src/atomic-crm/providers/supabase/handlers/*",
      "line": 0,
      "check": "M001",
      "description": "No explicit TransformService imports in handlers - field stripping may rely on callbacks",
      "status": "needs_verification"
    }
  ],
  "databaseChecks": {
    "viewTableDuality": {
      "totalTables": 28,
      "tablesWithViews": 4,
      "missingViewsCount": 24,
      "coreViewsPresent": [
        "contacts -> contacts_summary",
        "opportunities -> opportunities_summary",
        "organizations -> organizations_summary",
        "products -> products_summary"
      ]
    },
    "softDeleteConsistency": {
      "totalTables": 28,
      "tablesWithDeletedAt": 25,
      "missingDeletedAtCount": 3,
      "tablesMissingDeletedAt": ["task_id_mapping", "test_user_metadata", "tutorial_progress"],
      "complianceRate": "89.3%"
    },
    "orphanedRecords": 0,
    "deprecatedPatternsFound": 0
  },
  "stranglerFigStatus": {
    "migrationComplete": true,
    "composedHandlers": 39,
    "legacyProviderLines": 0
  }
}
