{
  "lastAudit": "2026-01-19T17:48:00Z",
  "composedDataProviderLines": 260,
  "unifiedProviderLines": 0,
  "findings": {
    "critical": 0,
    "high": 7,
    "medium": 1
  },
  "knownIssues": [
    {
      "id": "H001-1",
      "file": "src/atomic-crm/providers/supabase/authProvider.ts",
      "line": 164,
      "check": "H001",
      "description": "Sales query missing deleted_at filter",
      "status": "requires_fix"
    },
    {
      "id": "H001-2",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 143,
      "check": "H001",
      "description": "Activities query missing deleted_at filter (may be intentional for GDPR)",
      "status": "needs_verification"
    },
    {
      "id": "H001-3",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 156,
      "check": "H001",
      "description": "Contact notes query missing deleted_at filter",
      "status": "needs_verification"
    },
    {
      "id": "H001-4",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 191,
      "check": "H001",
      "description": "Organizations query missing deleted_at filter",
      "status": "needs_verification"
    },
    {
      "id": "H001-5",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 203,
      "check": "H001",
      "description": "Organization notes query missing deleted_at filter",
      "status": "needs_verification"
    },
    {
      "id": "H001-6",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 230,
      "check": "H001",
      "description": "Opportunities query missing deleted_at filter",
      "status": "needs_verification"
    },
    {
      "id": "H001-7",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 240,
      "check": "H001",
      "description": "Opportunity notes query missing deleted_at filter",
      "status": "needs_verification"
    },
    {
      "id": "M001",
      "file": "src/atomic-crm/providers/supabase/handlers/*",
      "line": 0,
      "check": "M001",
      "description": "No explicit TransformService imports in handlers - field stripping may rely on callbacks",
      "status": "needs_verification"
    }
  ],
  "databaseChecks": {
    "viewTableDuality": {
      "totalTables": 27,
      "tablesWithViews": 4,
      "missingViewsCount": 23,
      "tablesWithViews": [
        "contacts -> contacts_summary",
        "opportunities -> opportunities_summary",
        "organizations -> organizations_summary",
        "products -> products_summary"
      ]
    },
    "softDeleteConsistency": {
      "totalTables": 27,
      "tablesWithDeletedAt": 22,
      "missingDeletedAtCount": 5,
      "tablesMissingDeletedAt": [
        "audit_trail",
        "dashboard_snapshots",
        "migration_history",
        "test_user_metadata",
        "tutorial_progress"
      ]
    },
    "orphanedRecords": 0
  }
}
