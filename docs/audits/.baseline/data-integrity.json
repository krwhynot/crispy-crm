{
  "lastAudit": "2026-01-23T00:00:00Z",
  "composedDataProviderLines": 260,
  "unifiedProviderLines": 0,
  "findings": {
    "critical": 0,
    "high": 0,
    "medium": 1
  },
  "knownIssues": [
    {
      "id": "H001-1",
      "file": "src/atomic-crm/providers/supabase/authProvider.ts",
      "line": 167,
      "check": "H001",
      "description": "Sales query - verified to have deleted_at filter",
      "status": "resolved"
    },
    {
      "id": "H001-2",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 147,
      "check": "H001",
      "description": "Activities query - GDPR cleanup documented exception (lines 134-136)",
      "status": "acknowledged_exception"
    },
    {
      "id": "H001-3",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 160,
      "check": "H001",
      "description": "Contact notes query - GDPR cleanup documented exception",
      "status": "acknowledged_exception"
    },
    {
      "id": "H001-4",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 195,
      "check": "H001",
      "description": "Organizations query - single-record fetch by ID (N/A)",
      "status": "not_applicable"
    },
    {
      "id": "H001-5",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 207,
      "check": "H001",
      "description": "Organization notes query - GDPR cleanup documented exception",
      "status": "acknowledged_exception"
    },
    {
      "id": "H001-6",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 239,
      "check": "H001",
      "description": "Opportunities query - verified to have deleted_at filter at line 239",
      "status": "resolved"
    },
    {
      "id": "H001-7",
      "file": "src/atomic-crm/providers/supabase/utils/storageCleanup.ts",
      "line": 244,
      "check": "H001",
      "description": "Opportunity notes query - GDPR cleanup documented exception",
      "status": "acknowledged_exception"
    },
    {
      "id": "H004",
      "file": "src/atomic-crm/providers/supabase/extensions/*",
      "line": 0,
      "check": "H004",
      "description": "Type-only Supabase imports (safe, acknowledged)",
      "status": "acknowledged"
    },
    {
      "id": "M001",
      "file": "src/atomic-crm/providers/supabase/handlers/*",
      "line": 0,
      "check": "M001",
      "description": "No explicit TransformService imports - field stripping via lifecycle callbacks (works correctly)",
      "status": "acknowledged"
    }
  ],
  "databaseChecks": {
    "viewTableDuality": {
      "totalTables": 28,
      "tablesWithViews": 4,
      "missingViewsCount": 24,
      "coreViewsPresent": [
        "contacts -> contacts_summary",
        "opportunities -> opportunities_summary",
        "organizations -> organizations_summary",
        "products -> products_summary"
      ]
    },
    "softDeleteConsistency": {
      "totalTables": 28,
      "tablesWithDeletedAt": 25,
      "missingDeletedAtCount": 3,
      "tablesMissingDeletedAt": ["task_id_mapping", "test_user_metadata", "tutorial_progress"],
      "complianceRate": "89.3%"
    },
    "orphanedRecords": 0,
    "deprecatedPatternsFound": 0
  },
  "stranglerFigStatus": {
    "migrationComplete": true,
    "composedHandlers": 39,
    "legacyProviderLines": 0
  },
  "verificationNotes": {
    "lastVerified": "2026-01-23",
    "verifiedBy": "Manual code review",
    "gdprExceptionDocumented": "storageCleanup.ts lines 134-136 document intentional omission of deleted_at filter for GDPR Right to be Forgotten compliance"
  }
}
