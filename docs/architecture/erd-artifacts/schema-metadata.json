{
  "generated_at": "2026-02-09T08:52:42.862Z",
  "summary": {
    "total_tables": 28,
    "total_foreign_keys": 78,
    "total_indexes": 192,
    "total_rls_policies": 107
  },
  "tables": [
    {
      "name": "activities",
      "row_count": 503,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('activities_id_seq'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "activity_type",
          "type": "USER-DEFINED",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "type",
          "type": "USER-DEFINED",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "subject",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 4
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 5
        },
        {
          "name": "activity_date",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 6
        },
        {
          "name": "duration_minutes",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 7
        },
        {
          "name": "contact_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 8
        },
        {
          "name": "organization_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "opportunity_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 10
        },
        {
          "name": "follow_up_required",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "position": 11
        },
        {
          "name": "follow_up_date",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 12
        },
        {
          "name": "follow_up_notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 13
        },
        {
          "name": "outcome",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 14
        },
        {
          "name": "sentiment",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 10,
          "position": 15
        },
        {
          "name": "attachments",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 16
        },
        {
          "name": "location",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 17
        },
        {
          "name": "attendees",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 18
        },
        {
          "name": "tags",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 19
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 20
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 21
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": "get_current_sales_id()",
          "max_length": null,
          "position": 22
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 23
        },
        {
          "name": "related_task_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 24
        },
        {
          "name": "sample_status",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 25
        },
        {
          "name": "due_date",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 26
        },
        {
          "name": "reminder_date",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 27
        },
        {
          "name": "completed",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "position": 28
        },
        {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 29
        },
        {
          "name": "priority",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": "'medium'::priority_level",
          "max_length": null,
          "position": 30
        },
        {
          "name": "sales_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 31
        },
        {
          "name": "snooze_until",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 32
        },
        {
          "name": "overdue_notified_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 33
        },
        {
          "name": "updated_by",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 34
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "activities_contact_id_fkey",
          "column": "contact_id",
          "references_table": "contacts",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "activities_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "activities_opportunity_id_fkey",
          "column": "opportunity_id",
          "references_table": "opportunities",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "activities_organization_id_fkey",
          "column": "organization_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "activities_related_task_id_fkey",
          "column": "related_task_id",
          "references_table": "activities",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "activities_sales_id_fkey",
          "column": "sales_id",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "activities_updated_by_fkey",
          "column": "updated_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "activities_pkey",
          "definition": "CREATE UNIQUE INDEX activities_pkey ON public.activities USING btree (id)"
        },
        {
          "name": "idx_activities_activity_date_active",
          "definition": "CREATE INDEX idx_activities_activity_date_active ON public.activities USING btree (activity_date) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_activities_activity_date_not_deleted",
          "definition": "CREATE INDEX idx_activities_activity_date_not_deleted ON public.activities USING btree (activity_date DESC) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_activities_contact",
          "definition": "CREATE INDEX idx_activities_contact ON public.activities USING btree (contact_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_activities_created_by",
          "definition": "CREATE INDEX idx_activities_created_by ON public.activities USING btree (created_by) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_activities_due_date",
          "definition": "CREATE INDEX idx_activities_due_date ON public.activities USING btree (due_date) WHERE ((activity_type = 'task'::activity_type) AND (deleted_at IS NULL))"
        },
        {
          "name": "idx_activities_opportunity",
          "definition": "CREATE INDEX idx_activities_opportunity ON public.activities USING btree (opportunity_id) WHERE ((deleted_at IS NULL) AND (opportunity_id IS NOT NULL))"
        },
        {
          "name": "idx_activities_organization_id",
          "definition": "CREATE INDEX idx_activities_organization_id ON public.activities USING btree (organization_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_activities_overdue_notification",
          "definition": "CREATE INDEX idx_activities_overdue_notification ON public.activities USING btree (due_date, overdue_notified_at) WHERE ((activity_type = 'task'::activity_type) AND (completed = false) AND (due_date IS NOT NULL) AND (deleted_at IS NULL))"
        },
        {
          "name": "idx_activities_related_task_id",
          "definition": "CREATE INDEX idx_activities_related_task_id ON public.activities USING btree (related_task_id) WHERE ((related_task_id IS NOT NULL) AND (deleted_at IS NULL))"
        },
        {
          "name": "idx_activities_sales_id",
          "definition": "CREATE INDEX idx_activities_sales_id ON public.activities USING btree (sales_id) WHERE ((activity_type = 'task'::activity_type) AND (deleted_at IS NULL))"
        },
        {
          "name": "idx_activities_sales_id_rls",
          "definition": "CREATE INDEX idx_activities_sales_id_rls ON public.activities USING btree (sales_id) WHERE ((sales_id IS NOT NULL) AND (deleted_at IS NULL))"
        },
        {
          "name": "idx_activities_snooze_until",
          "definition": "CREATE INDEX idx_activities_snooze_until ON public.activities USING btree (snooze_until) WHERE ((activity_type = 'task'::activity_type) AND (snooze_until IS NOT NULL) AND (deleted_at IS NULL))"
        },
        {
          "name": "idx_activities_task_completed",
          "definition": "CREATE INDEX idx_activities_task_completed ON public.activities USING btree (completed, due_date) WHERE ((activity_type = 'task'::activity_type) AND (deleted_at IS NULL))"
        },
        {
          "name": "idx_activities_type",
          "definition": "CREATE INDEX idx_activities_type ON public.activities USING btree (activity_type, type) WHERE (deleted_at IS NULL)"
        }
      ],
      "rls_policies": [
        {
          "name": "activities_delete",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "activities_insert",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "activities_select",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "activities_update",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "audit_trail",
      "row_count": 75029,
      "has_soft_delete": false,
      "columns": [
        {
          "name": "audit_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 1
        },
        {
          "name": "table_name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "record_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "field_name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 4
        },
        {
          "name": "old_value",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 5
        },
        {
          "name": "new_value",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 6
        },
        {
          "name": "changed_by",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 7
        },
        {
          "name": "changed_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 8
        }
      ],
      "primary_key": "{audit_id}",
      "foreign_keys": [
        {
          "constraint_name": "audit_trail_changed_by_fkey",
          "column": "changed_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "audit_trail_pkey",
          "definition": "CREATE UNIQUE INDEX audit_trail_pkey ON public.audit_trail USING btree (audit_id)"
        },
        {
          "name": "idx_audit_trail_table_record",
          "definition": "CREATE INDEX idx_audit_trail_table_record ON public.audit_trail USING btree (table_name, record_id, changed_at DESC)"
        }
      ],
      "rls_policies": [
        {
          "name": "audit_trail_admin_manager_only",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        }
      ]
    },
    {
      "name": "contact_notes",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('\"contactNotes_id_seq\"'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "contact_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "text",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "sales_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 5
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 6
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 7
        },
        {
          "name": "date",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 8
        },
        {
          "name": "updated_by",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": "get_current_sales_id()",
          "max_length": null,
          "position": 10
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 11
        },
        {
          "name": "attachments",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "max_length": null,
          "position": 12
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "contact_notes_contact_id_fkey",
          "column": "contact_id",
          "references_table": "contacts",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "contact_notes_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "contact_notes_sales_id_fkey",
          "column": "sales_id",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "contact_notes_updated_by_fkey",
          "column": "updated_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "contact_notes_pkey",
          "definition": "CREATE UNIQUE INDEX contact_notes_pkey ON public.contact_notes USING btree (id)"
        },
        {
          "name": "idx_contact_notes_contact_date",
          "definition": "CREATE INDEX idx_contact_notes_contact_date ON public.contact_notes USING btree (contact_id, date DESC) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_contact_notes_contact_id",
          "definition": "CREATE INDEX idx_contact_notes_contact_id ON public.contact_notes USING btree (contact_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_contact_notes_created_at",
          "definition": "CREATE INDEX idx_contact_notes_created_at ON public.contact_notes USING btree (created_at DESC) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_contact_notes_created_by",
          "definition": "CREATE INDEX idx_contact_notes_created_by ON public.contact_notes USING btree (created_by) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_contact_notes_sales_id",
          "definition": "CREATE INDEX idx_contact_notes_sales_id ON public.contact_notes USING btree (sales_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_contactnotes_deleted_at",
          "definition": "CREATE INDEX idx_contactnotes_deleted_at ON public.contact_notes USING btree (deleted_at) WHERE (deleted_at IS NULL)"
        }
      ],
      "rls_policies": [
        {
          "name": "contact_notes_delete_owner_or_privileged",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "contact_notes_insert_owner",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "contact_notes_select_role_based",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "contact_notes_update_owner_or_privileged",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        },
        {
          "name": "delete_contact_notes",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "delete_contact_notes_privileged_only",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "update_contact_notes_owner_or_privileged",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "contacts",
      "row_count": 2007,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('contacts_id_seq'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "first_name",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "last_name",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 4
        },
        {
          "name": "email",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "max_length": null,
          "position": 5
        },
        {
          "name": "phone",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "max_length": null,
          "position": 6
        },
        {
          "name": "title",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 7
        },
        {
          "name": "department",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 8
        },
        {
          "name": "address",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "city",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 10
        },
        {
          "name": "state",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 11
        },
        {
          "name": "postal_code",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 12
        },
        {
          "name": "country",
          "type": "text",
          "nullable": true,
          "default": "'USA'::text",
          "max_length": null,
          "position": 13
        },
        {
          "name": "birthday",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 14
        },
        {
          "name": "linkedin_url",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 15
        },
        {
          "name": "twitter_handle",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 16
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 17
        },
        {
          "name": "sales_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 18
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 19
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 20
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": "get_current_sales_id()",
          "max_length": null,
          "position": 21
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 22
        },
        {
          "name": "search_tsv",
          "type": "tsvector",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 23
        },
        {
          "name": "first_seen",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 24
        },
        {
          "name": "last_seen",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 25
        },
        {
          "name": "gender",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 26
        },
        {
          "name": "tags",
          "type": "ARRAY",
          "nullable": true,
          "default": "'{}'::bigint[]",
          "max_length": null,
          "position": 27
        },
        {
          "name": "organization_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 28
        },
        {
          "name": "updated_by",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 29
        },
        {
          "name": "status",
          "type": "text",
          "nullable": true,
          "default": "'cold'::text",
          "max_length": null,
          "position": 30
        },
        {
          "name": "district_code",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 31
        },
        {
          "name": "territory_name",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 32
        },
        {
          "name": "manager_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 33
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "contacts_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "contacts_manager_id_fkey",
          "column": "manager_id",
          "references_table": "contacts",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "contacts_organization_id_fkey",
          "column": "organization_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "RESTRICT",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "contacts_sales_id_fkey",
          "column": "sales_id",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "contacts_updated_by_fkey",
          "column": "updated_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "contacts_pkey",
          "definition": "CREATE UNIQUE INDEX contacts_pkey ON public.contacts USING btree (id)"
        },
        {
          "name": "idx_contacts_created_by",
          "definition": "CREATE INDEX idx_contacts_created_by ON public.contacts USING btree (created_by) WHERE (created_by IS NOT NULL)"
        },
        {
          "name": "idx_contacts_deleted_at",
          "definition": "CREATE INDEX idx_contacts_deleted_at ON public.contacts USING btree (deleted_at) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_contacts_district",
          "definition": "CREATE INDEX idx_contacts_district ON public.contacts USING btree (district_code) WHERE (district_code IS NOT NULL)"
        },
        {
          "name": "idx_contacts_first_name_trgm",
          "definition": "CREATE INDEX idx_contacts_first_name_trgm ON public.contacts USING gin (first_name gin_trgm_ops) WHERE ((deleted_at IS NULL) AND (first_name IS NOT NULL))"
        },
        {
          "name": "idx_contacts_last_name_trgm",
          "definition": "CREATE INDEX idx_contacts_last_name_trgm ON public.contacts USING gin (last_name gin_trgm_ops) WHERE ((deleted_at IS NULL) AND (last_name IS NOT NULL))"
        },
        {
          "name": "idx_contacts_manager",
          "definition": "CREATE INDEX idx_contacts_manager ON public.contacts USING btree (manager_id) WHERE (manager_id IS NOT NULL)"
        },
        {
          "name": "idx_contacts_name_trgm",
          "definition": "CREATE INDEX idx_contacts_name_trgm ON public.contacts USING gin (name gin_trgm_ops) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_contacts_organization_id",
          "definition": "CREATE INDEX idx_contacts_organization_id ON public.contacts USING btree (organization_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_contacts_sales_id",
          "definition": "CREATE INDEX idx_contacts_sales_id ON public.contacts USING btree (sales_id)"
        },
        {
          "name": "idx_contacts_search_tsv",
          "definition": "CREATE INDEX idx_contacts_search_tsv ON public.contacts USING gin (search_tsv)"
        },
        {
          "name": "idx_contacts_unique_org_name",
          "definition": "CREATE UNIQUE INDEX idx_contacts_unique_org_name ON public.contacts USING btree (organization_id, name) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_contacts_updated_by",
          "definition": "CREATE INDEX idx_contacts_updated_by ON public.contacts USING btree (updated_by) WHERE (updated_by IS NOT NULL)"
        }
      ],
      "rls_policies": [
        {
          "name": "contacts_delete_owner_or_privileged",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "contacts_insert_owner",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "contacts_select_all",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "contacts_update_owner_or_privileged",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        },
        {
          "name": "delete_contacts",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        }
      ]
    },
    {
      "name": "dashboard_snapshots",
      "row_count": 0,
      "has_soft_delete": false,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('dashboard_snapshots_id_seq'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "snapshot_date",
          "type": "date",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "sales_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "activities_count",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "max_length": null,
          "position": 4
        },
        {
          "name": "tasks_completed_count",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "max_length": null,
          "position": 5
        },
        {
          "name": "deals_moved_count",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "max_length": null,
          "position": 6
        },
        {
          "name": "open_opportunities_count",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "max_length": null,
          "position": 7
        },
        {
          "name": "total_opportunities_count",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "max_length": null,
          "position": 8
        },
        {
          "name": "overdue_tasks_count",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "max_length": null,
          "position": 9
        },
        {
          "name": "activities_this_week_count",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "max_length": null,
          "position": 10
        },
        {
          "name": "stale_deals_count",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "max_length": null,
          "position": 11
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 12
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "dashboard_snapshots_sales_id_fkey",
          "column": "sales_id",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "dashboard_snapshots_pkey",
          "definition": "CREATE UNIQUE INDEX dashboard_snapshots_pkey ON public.dashboard_snapshots USING btree (id)"
        },
        {
          "name": "idx_dashboard_snapshots_date",
          "definition": "CREATE INDEX idx_dashboard_snapshots_date ON public.dashboard_snapshots USING btree (snapshot_date DESC)"
        },
        {
          "name": "idx_dashboard_snapshots_sales_date",
          "definition": "CREATE INDEX idx_dashboard_snapshots_sales_date ON public.dashboard_snapshots USING btree (sales_id, snapshot_date DESC)"
        },
        {
          "name": "unique_snapshot_per_user_per_date",
          "definition": "CREATE UNIQUE INDEX unique_snapshot_per_user_per_date ON public.dashboard_snapshots USING btree (sales_id, snapshot_date)"
        }
      ],
      "rls_policies": [
        {
          "name": "authenticated_select_dashboard_snapshots",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        }
      ]
    },
    {
      "name": "distributor_principal_authorizations",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 1
        },
        {
          "name": "distributor_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "principal_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "is_authorized",
          "type": "boolean",
          "nullable": false,
          "default": "true",
          "max_length": null,
          "position": 4
        },
        {
          "name": "authorization_date",
          "type": "date",
          "nullable": true,
          "default": "CURRENT_DATE",
          "max_length": null,
          "position": 5
        },
        {
          "name": "expiration_date",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 6
        },
        {
          "name": "territory_restrictions",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 7
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 8
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 9
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 10
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": "get_current_sales_id()",
          "max_length": null,
          "position": 11
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 12
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "distributor_principal_authorizations_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "distributor_principal_authorizations_distributor_id_fkey",
          "column": "distributor_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "distributor_principal_authorizations_principal_id_fkey",
          "column": "principal_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "distributor_principal_authorizations_pkey",
          "definition": "CREATE UNIQUE INDEX distributor_principal_authorizations_pkey ON public.distributor_principal_authorizations USING btree (id)"
        },
        {
          "name": "idx_dpa_distributor_id_partial",
          "definition": "CREATE INDEX idx_dpa_distributor_id_partial ON public.distributor_principal_authorizations USING btree (distributor_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_dpa_principal_id_partial",
          "definition": "CREATE INDEX idx_dpa_principal_id_partial ON public.distributor_principal_authorizations USING btree (principal_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "uq_distributor_principal_authorization",
          "definition": "CREATE UNIQUE INDEX uq_distributor_principal_authorization ON public.distributor_principal_authorizations USING btree (distributor_id, principal_id)"
        }
      ],
      "rls_policies": [
        {
          "name": "authenticated_delete_distributor_principal_authorizations",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "authenticated_insert_distributor_principal_authorizations",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "authenticated_select_distributor_principal_authorizations",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "authenticated_update_distributor_principal_authorizations",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "interaction_participants",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('interaction_participants_id_seq'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "activity_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "contact_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "organization_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 4
        },
        {
          "name": "role",
          "type": "character varying",
          "nullable": true,
          "default": "'participant'::character varying",
          "max_length": 20,
          "position": 5
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 6
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 7
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 8
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 10
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "interaction_participants_activity_id_fkey",
          "column": "activity_id",
          "references_table": "activities",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "interaction_participants_contact_id_fkey",
          "column": "contact_id",
          "references_table": "contacts",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "interaction_participants_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_interaction_participants_activity",
          "definition": "CREATE INDEX idx_interaction_participants_activity ON public.interaction_participants USING btree (activity_id)"
        },
        {
          "name": "idx_interaction_participants_activity_id_partial",
          "definition": "CREATE INDEX idx_interaction_participants_activity_id_partial ON public.interaction_participants USING btree (activity_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_interaction_participants_contact",
          "definition": "CREATE INDEX idx_interaction_participants_contact ON public.interaction_participants USING btree (contact_id)"
        },
        {
          "name": "idx_interaction_participants_contact_id_partial",
          "definition": "CREATE INDEX idx_interaction_participants_contact_id_partial ON public.interaction_participants USING btree (contact_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_interaction_participants_created_by",
          "definition": "CREATE INDEX idx_interaction_participants_created_by ON public.interaction_participants USING btree (created_by) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_interaction_participants_deleted_at",
          "definition": "CREATE INDEX idx_interaction_participants_deleted_at ON public.interaction_participants USING btree (deleted_at) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_interaction_participants_organization",
          "definition": "CREATE INDEX idx_interaction_participants_organization ON public.interaction_participants USING btree (organization_id)"
        },
        {
          "name": "interaction_participants_pkey",
          "definition": "CREATE UNIQUE INDEX interaction_participants_pkey ON public.interaction_participants USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "interaction_participants_delete_policy",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "interaction_participants_insert_owner",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "interaction_participants_select_policy",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "interaction_participants_update_policy",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "migration_history",
      "row_count": 0,
      "has_soft_delete": false,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('migration_history_id_seq'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "phase_number",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "phase_name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'pending'::text",
          "max_length": null,
          "position": 4
        },
        {
          "name": "started_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 5
        },
        {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 6
        },
        {
          "name": "error_message",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 7
        },
        {
          "name": "rollback_sql",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 8
        },
        {
          "name": "rows_affected",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 10
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [],
      "indexes": [
        {
          "name": "migration_history_pkey",
          "definition": "CREATE UNIQUE INDEX migration_history_pkey ON public.migration_history USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "authenticated_select_migration_history",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        }
      ]
    },
    {
      "name": "notifications",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 1
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "message",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 4
        },
        {
          "name": "entity_type",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 5
        },
        {
          "name": "entity_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 6
        },
        {
          "name": "read",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "position": 7
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 8
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 10
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [],
      "indexes": [
        {
          "name": "notifications_pkey",
          "definition": "CREATE UNIQUE INDEX notifications_pkey ON public.notifications USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "authenticated_select_own_notifications",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "authenticated_update_own_notifications",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        },
        {
          "name": "service_delete_old_notifications",
          "permissive": "PERMISSIVE",
          "roles": "{service_role}",
          "command": "DELETE"
        },
        {
          "name": "service_insert_notifications",
          "permissive": "PERMISSIVE",
          "roles": "{service_role}",
          "command": "INSERT"
        }
      ]
    },
    {
      "name": "opportunities",
      "row_count": 372,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('opportunities_id_seq'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "stage",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": "'new_lead'::opportunity_stage",
          "max_length": null,
          "position": 4
        },
        {
          "name": "status",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": "'active'::opportunity_status",
          "max_length": null,
          "position": 5
        },
        {
          "name": "priority",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": "'medium'::priority_level",
          "max_length": null,
          "position": 6
        },
        {
          "name": "index",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 7
        },
        {
          "name": "estimated_close_date",
          "type": "date",
          "nullable": true,
          "default": "(CURRENT_DATE + '90 days'::interval)",
          "max_length": null,
          "position": 8
        },
        {
          "name": "actual_close_date",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "customer_organization_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 10
        },
        {
          "name": "principal_organization_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 11
        },
        {
          "name": "distributor_organization_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 12
        },
        {
          "name": "founding_interaction_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 13
        },
        {
          "name": "stage_manual",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "position": 14
        },
        {
          "name": "status_manual",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "position": 15
        },
        {
          "name": "next_action",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 16
        },
        {
          "name": "next_action_date",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 17
        },
        {
          "name": "competition",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 18
        },
        {
          "name": "decision_criteria",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 19
        },
        {
          "name": "contact_ids",
          "type": "ARRAY",
          "nullable": true,
          "default": "'{}'::bigint[]",
          "max_length": null,
          "position": 20
        },
        {
          "name": "opportunity_owner_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 21
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 22
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 23
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": "get_current_sales_id()",
          "max_length": null,
          "position": 24
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 25
        },
        {
          "name": "search_tsv",
          "type": "tsvector",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 26
        },
        {
          "name": "tags",
          "type": "ARRAY",
          "nullable": true,
          "default": "'{}'::text[]",
          "max_length": null,
          "position": 27
        },
        {
          "name": "account_manager_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 28
        },
        {
          "name": "lead_source",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 29
        },
        {
          "name": "updated_by",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 30
        },
        {
          "name": "campaign",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 31
        },
        {
          "name": "related_opportunity_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 32
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 33
        },
        {
          "name": "stage_changed_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 34
        },
        {
          "name": "win_reason",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 35
        },
        {
          "name": "loss_reason",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 36
        },
        {
          "name": "close_reason_notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 37
        },
        {
          "name": "version",
          "type": "integer",
          "nullable": false,
          "default": "1",
          "max_length": null,
          "position": 38
        },
        {
          "name": "primary_contact_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 39
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "fk_opportunities_principal_organization",
          "column": "principal_organization_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "RESTRICT",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunities_account_manager_id_fkey",
          "column": "account_manager_id",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunities_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunities_customer_organization_id_fkey",
          "column": "customer_organization_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "RESTRICT",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunities_distributor_organization_id_fkey",
          "column": "distributor_organization_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunities_founding_interaction_id_fkey",
          "column": "founding_interaction_id",
          "references_table": "activities",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunities_opportunity_owner_id_fkey",
          "column": "opportunity_owner_id",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunities_primary_contact_id_fkey",
          "column": "primary_contact_id",
          "references_table": "contacts",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunities_related_opportunity_id_fkey",
          "column": "related_opportunity_id",
          "references_table": "opportunities",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunities_updated_by_fkey",
          "column": "updated_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_opportunities_account_manager",
          "definition": "CREATE INDEX idx_opportunities_account_manager ON public.opportunities USING btree (account_manager_id)"
        },
        {
          "name": "idx_opportunities_closed_stage_reason",
          "definition": "CREATE INDEX idx_opportunities_closed_stage_reason ON public.opportunities USING btree (stage, win_reason, loss_reason) WHERE (stage = ANY (ARRAY['closed_won'::opportunity_stage, 'closed_lost'::opportunity_stage]))"
        },
        {
          "name": "idx_opportunities_created_by",
          "definition": "CREATE INDEX idx_opportunities_created_by ON public.opportunities USING btree (created_by) WHERE (created_by IS NOT NULL)"
        },
        {
          "name": "idx_opportunities_customer_org",
          "definition": "CREATE INDEX idx_opportunities_customer_org ON public.opportunities USING btree (customer_organization_id)"
        },
        {
          "name": "idx_opportunities_customer_organization_id",
          "definition": "CREATE INDEX idx_opportunities_customer_organization_id ON public.opportunities USING btree (customer_organization_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunities_deleted_at",
          "definition": "CREATE INDEX idx_opportunities_deleted_at ON public.opportunities USING btree (deleted_at) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunities_distributor_organization_id",
          "definition": "CREATE INDEX idx_opportunities_distributor_organization_id ON public.opportunities USING btree (distributor_organization_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunities_estimated_close",
          "definition": "CREATE INDEX idx_opportunities_estimated_close ON public.opportunities USING btree (estimated_close_date)"
        },
        {
          "name": "idx_opportunities_founding_interaction_id",
          "definition": "CREATE INDEX idx_opportunities_founding_interaction_id ON public.opportunities USING btree (founding_interaction_id) WHERE (founding_interaction_id IS NOT NULL)"
        },
        {
          "name": "idx_opportunities_id_not_deleted",
          "definition": "CREATE INDEX idx_opportunities_id_not_deleted ON public.opportunities USING btree (id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunities_id_version",
          "definition": "CREATE INDEX idx_opportunities_id_version ON public.opportunities USING btree (id, version)"
        },
        {
          "name": "idx_opportunities_name_trgm_gist",
          "definition": "CREATE INDEX idx_opportunities_name_trgm_gist ON public.opportunities USING gist (name gist_trgm_ops) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunities_owner_id",
          "definition": "CREATE INDEX idx_opportunities_owner_id ON public.opportunities USING btree (opportunity_owner_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunities_primary_contact_id",
          "definition": "CREATE INDEX idx_opportunities_primary_contact_id ON public.opportunities USING btree (primary_contact_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunities_principal_created",
          "definition": "CREATE INDEX idx_opportunities_principal_created ON public.opportunities USING btree (principal_organization_id, created_at DESC) WHERE ((deleted_at IS NULL) AND (account_manager_id IS NOT NULL))"
        },
        {
          "name": "idx_opportunities_principal_org",
          "definition": "CREATE INDEX idx_opportunities_principal_org ON public.opportunities USING btree (principal_organization_id) WHERE (principal_organization_id IS NOT NULL)"
        },
        {
          "name": "idx_opportunities_principal_org_id_restrict",
          "definition": "CREATE INDEX idx_opportunities_principal_org_id_restrict ON public.opportunities USING btree (principal_organization_id) WHERE ((deleted_at IS NULL) AND (principal_organization_id IS NOT NULL))"
        },
        {
          "name": "idx_opportunities_priority",
          "definition": "CREATE INDEX idx_opportunities_priority ON public.opportunities USING btree (priority)"
        },
        {
          "name": "idx_opportunities_search_tsv",
          "definition": "CREATE INDEX idx_opportunities_search_tsv ON public.opportunities USING gin (search_tsv)"
        },
        {
          "name": "idx_opportunities_stage_active",
          "definition": "CREATE INDEX idx_opportunities_stage_active ON public.opportunities USING btree (stage) WHERE ((deleted_at IS NULL) AND (stage <> ALL (ARRAY['closed_won'::opportunity_stage, 'closed_lost'::opportunity_stage])))"
        },
        {
          "name": "idx_opportunities_status",
          "definition": "CREATE INDEX idx_opportunities_status ON public.opportunities USING btree (status) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunities_updated_at_active",
          "definition": "CREATE INDEX idx_opportunities_updated_at_active ON public.opportunities USING btree (updated_at) WHERE ((deleted_at IS NULL) AND (stage <> ALL (ARRAY['closed_won'::opportunity_stage, 'closed_lost'::opportunity_stage])))"
        },
        {
          "name": "idx_opportunities_updated_by",
          "definition": "CREATE INDEX idx_opportunities_updated_by ON public.opportunities USING btree (updated_by) WHERE (updated_by IS NOT NULL)"
        },
        {
          "name": "opportunities_pkey",
          "definition": "CREATE UNIQUE INDEX opportunities_pkey ON public.opportunities USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "delete_opportunities",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "insert_opportunities",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "opportunities_select_all",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "opportunities_update_dual_ownership",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "opportunity_contacts",
      "row_count": 369,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 1
        },
        {
          "name": "opportunity_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "contact_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "role",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 50,
          "position": 4
        },
        {
          "name": "is_primary",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "position": 5
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 6
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 7
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 8
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 9
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "opportunity_contacts_contact_id_fkey",
          "column": "contact_id",
          "references_table": "contacts",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunity_contacts_opportunity_id_fkey",
          "column": "opportunity_id",
          "references_table": "opportunities",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_opportunity_contacts_contact_id",
          "definition": "CREATE INDEX idx_opportunity_contacts_contact_id ON public.opportunity_contacts USING btree (contact_id)"
        },
        {
          "name": "idx_opportunity_contacts_contact_id_partial",
          "definition": "CREATE INDEX idx_opportunity_contacts_contact_id_partial ON public.opportunity_contacts USING btree (contact_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunity_contacts_deleted_at",
          "definition": "CREATE INDEX idx_opportunity_contacts_deleted_at ON public.opportunity_contacts USING btree (deleted_at) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunity_contacts_opportunity_id",
          "definition": "CREATE INDEX idx_opportunity_contacts_opportunity_id ON public.opportunity_contacts USING btree (opportunity_id)"
        },
        {
          "name": "idx_opportunity_contacts_opportunity_id_partial",
          "definition": "CREATE INDEX idx_opportunity_contacts_opportunity_id_partial ON public.opportunity_contacts USING btree (opportunity_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "opportunity_contacts_pkey",
          "definition": "CREATE UNIQUE INDEX opportunity_contacts_pkey ON public.opportunity_contacts USING btree (id)"
        },
        {
          "name": "unique_opportunity_contact",
          "definition": "CREATE UNIQUE INDEX unique_opportunity_contact ON public.opportunity_contacts USING btree (opportunity_id, contact_id)"
        }
      ],
      "rls_policies": [
        {
          "name": "Users can delete opportunity_contacts",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "Users can insert opportunity_contacts",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "Users can update opportunity_contacts",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        },
        {
          "name": "opportunity_contacts_select_through_opportunities",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        }
      ]
    },
    {
      "name": "opportunity_notes",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('\"opportunityNotes_id_seq\"'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "opportunity_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "text",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "sales_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 5
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 6
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 7
        },
        {
          "name": "date",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 8
        },
        {
          "name": "updated_by",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": "get_current_sales_id()",
          "max_length": null,
          "position": 10
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 11
        },
        {
          "name": "attachments",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "max_length": null,
          "position": 12
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "opportunity_notes_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunity_notes_opportunity_id_fkey",
          "column": "opportunity_id",
          "references_table": "opportunities",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunity_notes_sales_id_fkey",
          "column": "sales_id",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunity_notes_updated_by_fkey",
          "column": "updated_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_opportunity_notes_created_at",
          "definition": "CREATE INDEX idx_opportunity_notes_created_at ON public.opportunity_notes USING btree (created_at DESC) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunity_notes_created_by",
          "definition": "CREATE INDEX idx_opportunity_notes_created_by ON public.opportunity_notes USING btree (created_by) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunity_notes_opportunity_date",
          "definition": "CREATE INDEX idx_opportunity_notes_opportunity_date ON public.opportunity_notes USING btree (opportunity_id, date DESC) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunity_notes_opportunity_id",
          "definition": "CREATE INDEX idx_opportunity_notes_opportunity_id ON public.opportunity_notes USING btree (opportunity_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunity_notes_sales_id",
          "definition": "CREATE INDEX idx_opportunity_notes_sales_id ON public.opportunity_notes USING btree (sales_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "opportunity_notes_pkey",
          "definition": "CREATE UNIQUE INDEX opportunity_notes_pkey ON public.opportunity_notes USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "delete_opportunity_notes",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "opportunity_notes_insert_owner",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "opportunity_notes_select_role_based",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "opportunity_notes_update_owner_or_privileged",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "opportunity_participants",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('opportunity_participants_id_seq'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "opportunity_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "organization_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "role",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 20,
          "position": 4
        },
        {
          "name": "is_primary",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "position": 5
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 8
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 9
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 10
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 11
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 12
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "opportunity_participants_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunity_participants_opportunity_id_fkey",
          "column": "opportunity_id",
          "references_table": "opportunities",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_opportunity_participants_created_by",
          "definition": "CREATE INDEX idx_opportunity_participants_created_by ON public.opportunity_participants USING btree (created_by) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunity_participants_opp_id",
          "definition": "CREATE INDEX idx_opportunity_participants_opp_id ON public.opportunity_participants USING btree (opportunity_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunity_participants_role",
          "definition": "CREATE INDEX idx_opportunity_participants_role ON public.opportunity_participants USING btree (role) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "opportunity_participants_pkey",
          "definition": "CREATE UNIQUE INDEX opportunity_participants_pkey ON public.opportunity_participants USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "opportunity_participants_delete_policy",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "opportunity_participants_insert_owner",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "opportunity_participants_select_policy",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "opportunity_participants_update_policy",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "opportunity_products",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('opportunity_products_id_seq'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "opportunity_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "product_id_reference",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "product_name",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 4
        },
        {
          "name": "product_category",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 5
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 6
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 7
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 8
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": "get_current_sales_id()",
          "max_length": null,
          "position": 10
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "opportunity_products_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunity_products_opportunity_id_fkey",
          "column": "opportunity_id",
          "references_table": "opportunities",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "opportunity_products_product_id_reference_fkey",
          "column": "product_id_reference",
          "references_table": "products",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_opportunity_products_deleted_at",
          "definition": "CREATE INDEX idx_opportunity_products_deleted_at ON public.opportunity_products USING btree (deleted_at) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunity_products_opp_id_deleted",
          "definition": "CREATE INDEX idx_opportunity_products_opp_id_deleted ON public.opportunity_products USING btree (opportunity_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_opportunity_products_opportunity_id",
          "definition": "CREATE INDEX idx_opportunity_products_opportunity_id ON public.opportunity_products USING btree (opportunity_id)"
        },
        {
          "name": "idx_opportunity_products_product_id_reference",
          "definition": "CREATE INDEX idx_opportunity_products_product_id_reference ON public.opportunity_products USING btree (product_id_reference)"
        },
        {
          "name": "idx_opportunity_products_unique_active",
          "definition": "CREATE UNIQUE INDEX idx_opportunity_products_unique_active ON public.opportunity_products USING btree (opportunity_id, product_id_reference) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "opportunity_products_pkey",
          "definition": "CREATE UNIQUE INDEX opportunity_products_pkey ON public.opportunity_products USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "opportunity_products_delete_authenticated",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "opportunity_products_insert_authenticated",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "opportunity_products_select_all",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "opportunity_products_update_authenticated",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "organization_distributors",
      "row_count": 673,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 1
        },
        {
          "name": "organization_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "distributor_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "is_primary",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "position": 4
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 5
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 6
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 7
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": "get_current_sales_id()",
          "max_length": null,
          "position": 8
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "organization_distributors_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "organization_distributors_distributor_id_fkey",
          "column": "distributor_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "organization_distributors_organization_id_fkey",
          "column": "organization_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_org_distributors_dist_id",
          "definition": "CREATE INDEX idx_org_distributors_dist_id ON public.organization_distributors USING btree (distributor_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_org_distributors_org_id",
          "definition": "CREATE INDEX idx_org_distributors_org_id ON public.organization_distributors USING btree (organization_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_org_distributors_primary",
          "definition": "CREATE INDEX idx_org_distributors_primary ON public.organization_distributors USING btree (organization_id, distributor_id) WHERE ((deleted_at IS NULL) AND (is_primary = true))"
        },
        {
          "name": "idx_organization_distributors_unique_active",
          "definition": "CREATE UNIQUE INDEX idx_organization_distributors_unique_active ON public.organization_distributors USING btree (organization_id, distributor_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_organization_one_primary_distributor",
          "definition": "CREATE UNIQUE INDEX idx_organization_one_primary_distributor ON public.organization_distributors USING btree (organization_id) WHERE ((is_primary = true) AND (deleted_at IS NULL))"
        },
        {
          "name": "organization_distributors_pkey",
          "definition": "CREATE UNIQUE INDEX organization_distributors_pkey ON public.organization_distributors USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "authenticated_delete_organization_distributors",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "authenticated_insert_organization_distributors",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "authenticated_select_organization_distributors",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "authenticated_update_organization_distributors",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        },
        {
          "name": "select_organization_distributors_visible",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        }
      ]
    },
    {
      "name": "organization_notes",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('\"organizationNotes_id_seq\"'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "organization_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "text",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "attachments",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "max_length": null,
          "position": 4
        },
        {
          "name": "sales_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 5
        },
        {
          "name": "date",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 6
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 7
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 8
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "updated_by",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 10
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "organization_notes_organization_id_fkey",
          "column": "organization_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "organization_notes_sales_id_fkey",
          "column": "sales_id",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "organization_notes_updated_by_fkey",
          "column": "updated_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_organization_notes_org_date",
          "definition": "CREATE INDEX idx_organization_notes_org_date ON public.organization_notes USING btree (organization_id, date DESC) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_organization_notes_organization_id",
          "definition": "CREATE INDEX idx_organization_notes_organization_id ON public.organization_notes USING btree (organization_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_organization_notes_sales_id",
          "definition": "CREATE INDEX idx_organization_notes_sales_id ON public.organization_notes USING btree (sales_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "organization_notes_pkey",
          "definition": "CREATE UNIQUE INDEX organization_notes_pkey ON public.organization_notes USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "delete_organization_notes",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "organization_notes_insert_owner",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "organization_notes_select_role_based",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "organization_notes_update_owner_or_privileged",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "organizations",
      "row_count": 2369,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('organizations_id_seq'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "priority",
          "type": "character varying",
          "nullable": true,
          "default": "'C'::character varying",
          "max_length": 1,
          "position": 7
        },
        {
          "name": "website",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 8
        },
        {
          "name": "address",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "city",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 10
        },
        {
          "name": "state",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 11
        },
        {
          "name": "postal_code",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 12
        },
        {
          "name": "phone",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 13
        },
        {
          "name": "email",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 14
        },
        {
          "name": "logo_url",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 15
        },
        {
          "name": "linkedin_url",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 16
        },
        {
          "name": "employee_count",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 18
        },
        {
          "name": "founded_year",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 19
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 20
        },
        {
          "name": "sales_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 21
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 22
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 23
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": "get_current_sales_id()",
          "max_length": null,
          "position": 24
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 25
        },
        {
          "name": "import_session_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 26
        },
        {
          "name": "search_tsv",
          "type": "tsvector",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 27
        },
        {
          "name": "context_links",
          "type": "jsonb",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 28
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 29
        },
        {
          "name": "tax_identifier",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 30
        },
        {
          "name": "segment_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 31
        },
        {
          "name": "updated_by",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 32
        },
        {
          "name": "parent_organization_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 33
        },
        {
          "name": "playbook_category_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 34
        },
        {
          "name": "cuisine",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 35
        },
        {
          "name": "needs_review",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 36
        },
        {
          "name": "organization_type",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": "'prospect'::organization_type",
          "max_length": null,
          "position": 38
        },
        {
          "name": "org_scope",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 39
        },
        {
          "name": "is_operating_entity",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "max_length": null,
          "position": 40
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'active'::text",
          "max_length": null,
          "position": 41
        },
        {
          "name": "status_reason",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 42
        },
        {
          "name": "billing_street",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 43
        },
        {
          "name": "billing_city",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 44
        },
        {
          "name": "billing_state",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 45
        },
        {
          "name": "billing_postal_code",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 46
        },
        {
          "name": "billing_country",
          "type": "text",
          "nullable": true,
          "default": "'US'::text",
          "max_length": null,
          "position": 47
        },
        {
          "name": "shipping_street",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 48
        },
        {
          "name": "shipping_city",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 49
        },
        {
          "name": "shipping_state",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 50
        },
        {
          "name": "shipping_postal_code",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 51
        },
        {
          "name": "shipping_country",
          "type": "text",
          "nullable": true,
          "default": "'US'::text",
          "max_length": null,
          "position": 52
        },
        {
          "name": "payment_terms",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 53
        },
        {
          "name": "credit_limit",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 54
        },
        {
          "name": "territory",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 55
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "organizations_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "organizations_parent_organization_id_fkey",
          "column": "parent_organization_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "organizations_playbook_category_id_fkey",
          "column": "playbook_category_id",
          "references_table": "segments",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "organizations_sales_id_fkey",
          "column": "sales_id",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "organizations_segment_id_fkey",
          "column": "segment_id",
          "references_table": "segments",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "organizations_updated_by_fkey",
          "column": "updated_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_companies_priority",
          "definition": "CREATE INDEX idx_companies_priority ON public.organizations USING btree (priority)"
        },
        {
          "name": "idx_companies_sales_id",
          "definition": "CREATE INDEX idx_companies_sales_id ON public.organizations USING btree (sales_id)"
        },
        {
          "name": "idx_organizations_created_by",
          "definition": "CREATE INDEX idx_organizations_created_by ON public.organizations USING btree (created_by) WHERE (created_by IS NOT NULL)"
        },
        {
          "name": "idx_organizations_created_by_active",
          "definition": "CREATE INDEX idx_organizations_created_by_active ON public.organizations USING btree (created_by) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_organizations_cuisine",
          "definition": "CREATE INDEX idx_organizations_cuisine ON public.organizations USING btree (cuisine) WHERE ((cuisine IS NOT NULL) AND (deleted_at IS NULL))"
        },
        {
          "name": "idx_organizations_id_not_deleted",
          "definition": "CREATE INDEX idx_organizations_id_not_deleted ON public.organizations USING btree (id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_organizations_name",
          "definition": "CREATE INDEX idx_organizations_name ON public.organizations USING btree (name) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_organizations_name_trgm",
          "definition": "CREATE INDEX idx_organizations_name_trgm ON public.organizations USING gin (name gin_trgm_ops) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_organizations_needs_review",
          "definition": "CREATE INDEX idx_organizations_needs_review ON public.organizations USING btree (needs_review) WHERE ((needs_review IS NOT NULL) AND (deleted_at IS NULL))"
        },
        {
          "name": "idx_organizations_parent_organization_id",
          "definition": "CREATE INDEX idx_organizations_parent_organization_id ON public.organizations USING btree (parent_organization_id) WHERE (parent_organization_id IS NOT NULL)"
        },
        {
          "name": "idx_organizations_playbook_category_id",
          "definition": "CREATE INDEX idx_organizations_playbook_category_id ON public.organizations USING btree (playbook_category_id) WHERE ((playbook_category_id IS NOT NULL) AND (deleted_at IS NULL))"
        },
        {
          "name": "idx_organizations_sales_id_active",
          "definition": "CREATE INDEX idx_organizations_sales_id_active ON public.organizations USING btree (sales_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_organizations_search_tsv",
          "definition": "CREATE INDEX idx_organizations_search_tsv ON public.organizations USING gin (search_tsv) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_organizations_segment_id",
          "definition": "CREATE INDEX idx_organizations_segment_id ON public.organizations USING btree (segment_id) WHERE (segment_id IS NOT NULL)"
        },
        {
          "name": "idx_organizations_updated_by",
          "definition": "CREATE INDEX idx_organizations_updated_by ON public.organizations USING btree (updated_by) WHERE (updated_by IS NOT NULL)"
        },
        {
          "name": "idx_orgs_operating",
          "definition": "CREATE INDEX idx_orgs_operating ON public.organizations USING btree (is_operating_entity) WHERE (is_operating_entity = true)"
        },
        {
          "name": "idx_orgs_org_scope",
          "definition": "CREATE INDEX idx_orgs_org_scope ON public.organizations USING btree (org_scope) WHERE (org_scope IS NOT NULL)"
        },
        {
          "name": "idx_orgs_organization_type",
          "definition": "CREATE INDEX idx_orgs_organization_type ON public.organizations USING btree (organization_type) WHERE (organization_type IS NOT NULL)"
        },
        {
          "name": "idx_orgs_parent_organization_id",
          "definition": "CREATE INDEX idx_orgs_parent_organization_id ON public.organizations USING btree (parent_organization_id)"
        },
        {
          "name": "idx_orgs_status",
          "definition": "CREATE INDEX idx_orgs_status ON public.organizations USING btree (status, status_reason) WHERE (status IS NOT NULL)"
        },
        {
          "name": "idx_orgs_territory",
          "definition": "CREATE INDEX idx_orgs_territory ON public.organizations USING btree (territory) WHERE (territory IS NOT NULL)"
        },
        {
          "name": "organizations_name_unique_idx",
          "definition": "CREATE UNIQUE INDEX organizations_name_unique_idx ON public.organizations USING btree (lower(name)) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "organizations_pkey",
          "definition": "CREATE UNIQUE INDEX organizations_pkey ON public.organizations USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "organizations_delete_owner_or_admin",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "organizations_insert_owner",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "organizations_select_all",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "organizations_update_role_based",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "product_distributor_authorizations",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 1
        },
        {
          "name": "product_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "distributor_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "is_authorized",
          "type": "boolean",
          "nullable": false,
          "default": "true",
          "max_length": null,
          "position": 4
        },
        {
          "name": "authorization_date",
          "type": "date",
          "nullable": true,
          "default": "CURRENT_DATE",
          "max_length": null,
          "position": 5
        },
        {
          "name": "expiration_date",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 6
        },
        {
          "name": "special_pricing",
          "type": "jsonb",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 7
        },
        {
          "name": "territory_restrictions",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 8
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 10
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 11
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": "get_current_sales_id()",
          "max_length": null,
          "position": 12
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 13
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "product_distributor_authorizations_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "product_distributor_authorizations_distributor_id_fkey",
          "column": "distributor_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "product_distributor_authorizations_product_id_fkey",
          "column": "product_id",
          "references_table": "products",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_pda_distributor_id_partial",
          "definition": "CREATE INDEX idx_pda_distributor_id_partial ON public.product_distributor_authorizations USING btree (distributor_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_pda_product_id_partial",
          "definition": "CREATE INDEX idx_pda_product_id_partial ON public.product_distributor_authorizations USING btree (product_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_product_distributor_auth_active",
          "definition": "CREATE INDEX idx_product_distributor_auth_active ON public.product_distributor_authorizations USING btree (product_id, distributor_id) WHERE ((deleted_at IS NULL) AND (is_authorized = true))"
        },
        {
          "name": "idx_product_distributor_auth_deleted_at",
          "definition": "CREATE INDEX idx_product_distributor_auth_deleted_at ON public.product_distributor_authorizations USING btree (deleted_at) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "product_distributor_authorizations_pkey",
          "definition": "CREATE UNIQUE INDEX product_distributor_authorizations_pkey ON public.product_distributor_authorizations USING btree (id)"
        },
        {
          "name": "uq_product_distributor_authorization",
          "definition": "CREATE UNIQUE INDEX uq_product_distributor_authorization ON public.product_distributor_authorizations USING btree (product_id, distributor_id)"
        }
      ],
      "rls_policies": [
        {
          "name": "authenticated_delete_product_distributor_authorizations",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "authenticated_insert_product_distributor_authorizations",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "authenticated_select_product_distributor_authorizations",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "authenticated_update_product_distributor_authorizations",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "product_distributors",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "product_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 1
        },
        {
          "name": "distributor_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "vendor_item_number",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'pending'::text",
          "max_length": null,
          "position": 4
        },
        {
          "name": "valid_from",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 5
        },
        {
          "name": "valid_to",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 6
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 7
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 8
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 9
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 10
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": "get_current_sales_id()",
          "max_length": null,
          "position": 11
        },
        {
          "name": "updated_by",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 12
        }
      ],
      "primary_key": "{product_id,distributor_id}",
      "foreign_keys": [
        {
          "constraint_name": "fk_product_distributors_created_by",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "fk_product_distributors_distributor",
          "column": "distributor_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "fk_product_distributors_product",
          "column": "product_id",
          "references_table": "products",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "product_distributors_updated_by_fkey",
          "column": "updated_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_product_dist_active",
          "definition": "CREATE INDEX idx_product_dist_active ON public.product_distributors USING btree (distributor_id, status) WHERE (status = 'active'::text)"
        },
        {
          "name": "idx_product_dist_status",
          "definition": "CREATE INDEX idx_product_dist_status ON public.product_distributors USING btree (status)"
        },
        {
          "name": "idx_product_dist_vendor_item",
          "definition": "CREATE INDEX idx_product_dist_vendor_item ON public.product_distributors USING btree (vendor_item_number) WHERE (vendor_item_number IS NOT NULL)"
        },
        {
          "name": "idx_product_distributors_deleted_at",
          "definition": "CREATE INDEX idx_product_distributors_deleted_at ON public.product_distributors USING btree (deleted_at) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_product_distributors_distributor_id",
          "definition": "CREATE INDEX idx_product_distributors_distributor_id ON public.product_distributors USING btree (distributor_id)"
        },
        {
          "name": "idx_product_distributors_distributor_id_partial",
          "definition": "CREATE INDEX idx_product_distributors_distributor_id_partial ON public.product_distributors USING btree (distributor_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_product_distributors_product_id",
          "definition": "CREATE INDEX idx_product_distributors_product_id ON public.product_distributors USING btree (product_id)"
        },
        {
          "name": "idx_product_distributors_product_id_partial",
          "definition": "CREATE INDEX idx_product_distributors_product_id_partial ON public.product_distributors USING btree (product_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "product_distributors_pkey",
          "definition": "CREATE UNIQUE INDEX product_distributors_pkey ON public.product_distributors USING btree (product_id, distributor_id)"
        }
      ],
      "rls_policies": [
        {
          "name": "product_distributors_delete_dual_auth",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "product_distributors_insert_dual_auth",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "product_distributors_select_dual_auth",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "product_distributors_service_role_bypass",
          "permissive": "PERMISSIVE",
          "roles": "{service_role}",
          "command": "ALL"
        },
        {
          "name": "product_distributors_update_dual_auth",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "products",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('products_id_seq'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "principal_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 4
        },
        {
          "name": "status",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": "'active'::product_status",
          "max_length": null,
          "position": 8
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 14
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 15
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": "get_current_sales_id()",
          "max_length": null,
          "position": 16
        },
        {
          "name": "updated_by",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 17
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 18
        },
        {
          "name": "search_tsv",
          "type": "tsvector",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 19
        },
        {
          "name": "manufacturer_part_number",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 22
        },
        {
          "name": "category",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 24
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "products_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "products_updated_by_fkey",
          "column": "updated_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_products_created_by_active",
          "definition": "CREATE INDEX idx_products_created_by_active ON public.products USING btree (created_by) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_products_search_tsv",
          "definition": "CREATE INDEX idx_products_search_tsv ON public.products USING gin (search_tsv)"
        },
        {
          "name": "idx_products_status",
          "definition": "CREATE INDEX idx_products_status ON public.products USING btree (status) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "products_pkey",
          "definition": "CREATE UNIQUE INDEX products_pkey ON public.products USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "delete_products",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "products_insert_privileged",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "products_update_privileged",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        },
        {
          "name": "select_products",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        }
      ]
    },
    {
      "name": "sales",
      "row_count": 4,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('sales_id_seq'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 3
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 4
        },
        {
          "name": "first_name",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 5
        },
        {
          "name": "last_name",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 6
        },
        {
          "name": "email",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 7
        },
        {
          "name": "phone",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 8
        },
        {
          "name": "avatar_url",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "is_admin",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "position": 10
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 11
        },
        {
          "name": "disabled",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "position": 12
        },
        {
          "name": "role",
          "type": "USER-DEFINED",
          "nullable": false,
          "default": "'rep'::user_role",
          "max_length": null,
          "position": 13
        },
        {
          "name": "administrator",
          "type": "boolean",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 14
        },
        {
          "name": "timezone",
          "type": "text",
          "nullable": true,
          "default": "'America/Chicago'::text",
          "max_length": null,
          "position": 15
        },
        {
          "name": "digest_opt_in",
          "type": "boolean",
          "nullable": false,
          "default": "true",
          "max_length": null,
          "position": 16
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_sales_disabled",
          "definition": "CREATE INDEX idx_sales_disabled ON public.sales USING btree (disabled) WHERE (disabled = false)"
        },
        {
          "name": "idx_sales_unique_non_user",
          "definition": "CREATE UNIQUE INDEX idx_sales_unique_non_user ON public.sales USING btree (first_name, last_name) WHERE ((user_id IS NULL) AND (deleted_at IS NULL))"
        },
        {
          "name": "idx_sales_user_id",
          "definition": "CREATE INDEX idx_sales_user_id ON public.sales USING btree (user_id) WHERE (user_id IS NOT NULL)"
        },
        {
          "name": "sales_pkey",
          "definition": "CREATE UNIQUE INDEX sales_pkey ON public.sales USING btree (id)"
        },
        {
          "name": "sales_user_id_key",
          "definition": "CREATE UNIQUE INDEX sales_user_id_key ON public.sales USING btree (user_id)"
        }
      ],
      "rls_policies": [
        {
          "name": "delete_sales",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "insert_sales",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "select_sales",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "service_role_full_access",
          "permissive": "PERMISSIVE",
          "roles": "{service_role}",
          "command": "ALL"
        },
        {
          "name": "update_sales",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "segments",
      "row_count": 40,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "position": 1
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 3
        },
        {
          "name": "created_by",
          "type": "uuid",
          "nullable": false,
          "default": "auth.uid()",
          "max_length": null,
          "position": 4
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 5
        },
        {
          "name": "segment_type",
          "type": "text",
          "nullable": true,
          "default": "'playbook'::text",
          "max_length": null,
          "position": 6
        },
        {
          "name": "parent_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 7
        },
        {
          "name": "display_order",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "max_length": null,
          "position": 8
        },
        {
          "name": "ui_group",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 10
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "segments_parent_id_fkey",
          "column": "parent_id",
          "references_table": "segments",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_segments_parent",
          "definition": "CREATE INDEX idx_segments_parent ON public.segments USING btree (parent_id) WHERE (parent_id IS NOT NULL)"
        },
        {
          "name": "idx_segments_type",
          "definition": "CREATE INDEX idx_segments_type ON public.segments USING btree (segment_type)"
        },
        {
          "name": "industries_pkey",
          "definition": "CREATE UNIQUE INDEX industries_pkey ON public.segments USING btree (id)"
        },
        {
          "name": "segments_name_case_insensitive_idx",
          "definition": "CREATE UNIQUE INDEX segments_name_case_insensitive_idx ON public.segments USING btree (lower(name)) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "segments_name_type_case_insensitive_idx",
          "definition": "CREATE UNIQUE INDEX segments_name_type_case_insensitive_idx ON public.segments USING btree (lower(name), segment_type) WHERE (deleted_at IS NULL)"
        }
      ],
      "rls_policies": [
        {
          "name": "segments_delete_admin",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "segments_insert_privileged",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "segments_update_privileged",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        },
        {
          "name": "select_segments",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        }
      ]
    },
    {
      "name": "tags",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('tags_id_seq'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "color",
          "type": "text",
          "nullable": true,
          "default": "'blue-500'::text",
          "max_length": null,
          "position": 3
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 4
        },
        {
          "name": "usage_count",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "max_length": null,
          "position": 5
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 6
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 7
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 8
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_tags_deleted_at",
          "definition": "CREATE INDEX idx_tags_deleted_at ON public.tags USING btree (deleted_at) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "tags_name_key",
          "definition": "CREATE UNIQUE INDEX tags_name_key ON public.tags USING btree (name)"
        },
        {
          "name": "tags_pkey",
          "definition": "CREATE UNIQUE INDEX tags_pkey ON public.tags USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "authenticated_select_tags",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "delete_tags_admin",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "tags_insert_privileged",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "update_tags_admin",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "task_id_mapping",
      "row_count": 6,
      "has_soft_delete": false,
      "columns": [
        {
          "name": "old_task_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 1
        },
        {
          "name": "new_activity_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "migrated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 3
        }
      ],
      "primary_key": "{old_task_id}",
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_task_id_mapping_new_id",
          "definition": "CREATE INDEX idx_task_id_mapping_new_id ON public.task_id_mapping USING btree (new_activity_id)"
        },
        {
          "name": "task_id_mapping_pkey",
          "definition": "CREATE UNIQUE INDEX task_id_mapping_pkey ON public.task_id_mapping USING btree (old_task_id)"
        }
      ],
      "rls_policies": [
        {
          "name": "task_id_mapping_admin_select",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        }
      ]
    },
    {
      "name": "tasks_deprecated",
      "row_count": 6,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('tasks_deprecated_id_seq'::regclass)",
          "max_length": null,
          "position": 1
        },
        {
          "name": "title",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "due_date",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 4
        },
        {
          "name": "reminder_date",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 5
        },
        {
          "name": "completed",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "position": 6
        },
        {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 7
        },
        {
          "name": "priority",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": "'medium'::priority_level",
          "max_length": null,
          "position": 8
        },
        {
          "name": "contact_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "opportunity_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 10
        },
        {
          "name": "sales_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 11
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 12
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 13
        },
        {
          "name": "type",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": "'Call'::task_type",
          "max_length": null,
          "position": 14
        },
        {
          "name": "created_by",
          "type": "bigint",
          "nullable": true,
          "default": "get_current_sales_id()",
          "max_length": null,
          "position": 15
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 16
        },
        {
          "name": "overdue_notified_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 17
        },
        {
          "name": "organization_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 18
        },
        {
          "name": "snooze_until",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 19
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "tasks_contact_id_fkey",
          "column": "contact_id",
          "references_table": "contacts",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "tasks_created_by_fkey",
          "column": "created_by",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "tasks_opportunity_id_fkey",
          "column": "opportunity_id",
          "references_table": "opportunities",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "tasks_organization_id_fkey",
          "column": "organization_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "tasks_sales_id_fkey",
          "column": "sales_id",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "NO ACTION",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_tasks_contact_id",
          "definition": "CREATE INDEX idx_tasks_contact_id ON public.tasks_deprecated USING btree (contact_id)"
        },
        {
          "name": "idx_tasks_entry_date",
          "definition": "CREATE INDEX idx_tasks_entry_date ON public.tasks_deprecated USING btree (due_date DESC) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_tasks_opportunity_id",
          "definition": "CREATE INDEX idx_tasks_opportunity_id ON public.tasks_deprecated USING btree (opportunity_id)"
        },
        {
          "name": "idx_tasks_organization_id",
          "definition": "CREATE INDEX idx_tasks_organization_id ON public.tasks_deprecated USING btree (organization_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_tasks_sales_due_date_incomplete",
          "definition": "CREATE INDEX idx_tasks_sales_due_date_incomplete ON public.tasks_deprecated USING btree (sales_id, due_date) WHERE (completed = false)"
        },
        {
          "name": "idx_tasks_sales_id",
          "definition": "CREATE INDEX idx_tasks_sales_id ON public.tasks_deprecated USING btree (sales_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_tasks_sales_id_not_completed",
          "definition": "CREATE INDEX idx_tasks_sales_id_not_completed ON public.tasks_deprecated USING btree (sales_id) WHERE ((completed_at IS NULL) AND (deleted_at IS NULL))"
        },
        {
          "name": "idx_tasks_snooze_until",
          "definition": "CREATE INDEX idx_tasks_snooze_until ON public.tasks_deprecated USING btree (snooze_until) WHERE (snooze_until IS NOT NULL)"
        },
        {
          "name": "tasks_pkey",
          "definition": "CREATE UNIQUE INDEX tasks_pkey ON public.tasks_deprecated USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "deprecated_no_insert",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "deprecated_no_update",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        },
        {
          "name": "insert_tasks_self_or_mgr",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "tasks_delete_policy",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "tasks_deprecated_read_only",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "tasks_insert_policy",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "update_tasks_owner_or_privileged",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "test_user_metadata",
      "row_count": 0,
      "has_soft_delete": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "position": 1
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "role",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 3
        },
        {
          "name": "created_by",
          "type": "text",
          "nullable": true,
          "default": "'automated_script'::text",
          "max_length": null,
          "position": 4
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 5
        },
        {
          "name": "last_sync_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 6
        },
        {
          "name": "test_data_counts",
          "type": "jsonb",
          "nullable": true,
          "default": "'{\"notes\": 0, \"tasks\": 0, \"contacts\": 0, \"activities\": 0, \"opportunities\": 0, \"organizations\": 0}'::jsonb",
          "max_length": null,
          "position": 7
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [],
      "indexes": [
        {
          "name": "test_user_metadata_pkey",
          "definition": "CREATE UNIQUE INDEX test_user_metadata_pkey ON public.test_user_metadata USING btree (id)"
        },
        {
          "name": "unique_user_id",
          "definition": "CREATE UNIQUE INDEX unique_user_id ON public.test_user_metadata USING btree (user_id)"
        }
      ],
      "rls_policies": [
        {
          "name": "Test metadata readable by authenticated users",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "Test metadata writable by service role",
          "permissive": "PERMISSIVE",
          "roles": "{service_role}",
          "command": "ALL"
        }
      ]
    },
    {
      "name": "tutorial_progress",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 1
        },
        {
          "name": "sales_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "organization_completed",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "position": 3
        },
        {
          "name": "contact_completed",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "position": 4
        },
        {
          "name": "opportunity_completed",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "position": 5
        },
        {
          "name": "activity_completed",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "position": 6
        },
        {
          "name": "task_completed",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "position": 7
        },
        {
          "name": "created_organization_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 8
        },
        {
          "name": "created_contact_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        },
        {
          "name": "created_opportunity_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 10
        },
        {
          "name": "created_activity_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 11
        },
        {
          "name": "created_task_id",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 12
        },
        {
          "name": "dismissed",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "position": 13
        },
        {
          "name": "dismissed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 14
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 15
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 16
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 17
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [
        {
          "constraint_name": "tutorial_progress_created_activity_id_fkey",
          "column": "created_activity_id",
          "references_table": "activities",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "tutorial_progress_created_contact_id_fkey",
          "column": "created_contact_id",
          "references_table": "contacts",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "tutorial_progress_created_opportunity_id_fkey",
          "column": "created_opportunity_id",
          "references_table": "opportunities",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "tutorial_progress_created_organization_id_fkey",
          "column": "created_organization_id",
          "references_table": "organizations",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "tutorial_progress_created_task_id_fkey",
          "column": "created_task_id",
          "references_table": "tasks_deprecated",
          "references_column": "id",
          "on_delete": "SET NULL",
          "on_update": "NO ACTION"
        },
        {
          "constraint_name": "tutorial_progress_sales_id_fkey",
          "column": "sales_id",
          "references_table": "sales",
          "references_column": "id",
          "on_delete": "CASCADE",
          "on_update": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_tutorial_progress_created_activity_id",
          "definition": "CREATE INDEX idx_tutorial_progress_created_activity_id ON public.tutorial_progress USING btree (created_activity_id)"
        },
        {
          "name": "idx_tutorial_progress_created_contact_id",
          "definition": "CREATE INDEX idx_tutorial_progress_created_contact_id ON public.tutorial_progress USING btree (created_contact_id)"
        },
        {
          "name": "idx_tutorial_progress_created_opportunity_id",
          "definition": "CREATE INDEX idx_tutorial_progress_created_opportunity_id ON public.tutorial_progress USING btree (created_opportunity_id)"
        },
        {
          "name": "idx_tutorial_progress_created_organization_id",
          "definition": "CREATE INDEX idx_tutorial_progress_created_organization_id ON public.tutorial_progress USING btree (created_organization_id)"
        },
        {
          "name": "idx_tutorial_progress_created_task_id",
          "definition": "CREATE INDEX idx_tutorial_progress_created_task_id ON public.tutorial_progress USING btree (created_task_id)"
        },
        {
          "name": "idx_tutorial_progress_sales_id",
          "definition": "CREATE INDEX idx_tutorial_progress_sales_id ON public.tutorial_progress USING btree (sales_id)"
        },
        {
          "name": "tutorial_progress_pkey",
          "definition": "CREATE UNIQUE INDEX tutorial_progress_pkey ON public.tutorial_progress USING btree (id)"
        },
        {
          "name": "unique_sales_tutorial",
          "definition": "CREATE UNIQUE INDEX unique_sales_tutorial ON public.tutorial_progress USING btree (sales_id)"
        }
      ],
      "rls_policies": [
        {
          "name": "insert_tutorial_progress",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "select_tutorial_progress",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "update_tutorial_progress",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    },
    {
      "name": "user_favorites",
      "row_count": 0,
      "has_soft_delete": true,
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 1
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 2
        },
        {
          "name": "entity_type",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 50,
          "position": 3
        },
        {
          "name": "entity_id",
          "type": "bigint",
          "nullable": false,
          "default": null,
          "max_length": null,
          "position": 4
        },
        {
          "name": "display_name",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 255,
          "position": 5
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "position": 6
        },
        {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 7
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "position": 8
        },
        {
          "name": "updated_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "position": 9
        }
      ],
      "primary_key": "{id}",
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_user_favorites_deleted_at",
          "definition": "CREATE INDEX idx_user_favorites_deleted_at ON public.user_favorites USING btree (deleted_at) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_user_favorites_unique_active",
          "definition": "CREATE UNIQUE INDEX idx_user_favorites_unique_active ON public.user_favorites USING btree (user_id, entity_type, entity_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "idx_user_favorites_user_id",
          "definition": "CREATE INDEX idx_user_favorites_user_id ON public.user_favorites USING btree (user_id) WHERE (deleted_at IS NULL)"
        },
        {
          "name": "user_favorites_pkey",
          "definition": "CREATE UNIQUE INDEX user_favorites_pkey ON public.user_favorites USING btree (id)"
        }
      ],
      "rls_policies": [
        {
          "name": "delete_own",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "DELETE"
        },
        {
          "name": "insert_own",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "INSERT"
        },
        {
          "name": "select_own",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "SELECT"
        },
        {
          "name": "update_own",
          "permissive": "PERMISSIVE",
          "roles": "{authenticated}",
          "command": "UPDATE"
        }
      ]
    }
  ]
}