{"version":3,"file":"chunk-a4jA-31v.js","sources":["../../src/hooks/useSlideOverState.ts","../../src/hooks/useKeyboardShortcuts.ts","../../src/components/layouts/ResourceSlideOver.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\n\n/**\n * Hook for managing slide-over state with URL synchronization\n *\n * Manages:\n * - State: slideOverId, isOpen, mode ('view' | 'edit')\n * - URL sync: Read/write ?view=123 or ?edit=123 query params (hash-based routing)\n * - Browser navigation: Handle back/forward buttons (popstate/hashchange listener)\n * - ESC key: Close slide-over on ESC press\n *\n * @returns Object with state and control functions\n */\nexport interface UseSlideOverStateReturn {\n  slideOverId: number | null;\n  isOpen: boolean;\n  mode: \"view\" | \"edit\";\n  openSlideOver: (id: number, initialMode?: \"view\" | \"edit\") => void;\n  closeSlideOver: () => void;\n  setMode: (mode: \"view\" | \"edit\") => void;\n  toggleMode: () => void;\n}\n\n/**\n * Helper to extract query params from hash-based URL\n * For URLs like: #/contacts?view=123 or #/contacts?filter={}&view=123\n */\nfunction getHashParams(): URLSearchParams {\n  const hash = window.location.hash;\n  const queryIndex = hash.indexOf(\"?\");\n  if (queryIndex === -1) return new URLSearchParams();\n  return new URLSearchParams(hash.slice(queryIndex + 1));\n}\n\n/**\n * Helper to update query params in hash-based URL\n */\nfunction setHashParams(params: URLSearchParams): string {\n  const hash = window.location.hash;\n  const queryIndex = hash.indexOf(\"?\");\n  const basePath = queryIndex === -1 ? hash : hash.slice(0, queryIndex);\n  const paramString = params.toString();\n  return paramString ? `${basePath}?${paramString}` : basePath;\n}\n\nexport function useSlideOverState(): UseSlideOverStateReturn {\n  const [slideOverId, setSlideOverId] = useState<number | null>(null);\n  const [isOpen, setIsOpen] = useState(false);\n  const [mode, setMode] = useState<\"view\" | \"edit\">(\"view\");\n\n  // Parse URL params on initial load to support deep linking (hash-based routing)\n  useEffect(() => {\n    const params = getHashParams();\n    const viewId = params.get(\"view\");\n    const editId = params.get(\"edit\");\n\n    if (viewId) {\n      setSlideOverId(Number(viewId));\n      setMode(\"view\");\n      setIsOpen(true);\n    } else if (editId) {\n      setSlideOverId(Number(editId));\n      setMode(\"edit\");\n      setIsOpen(true);\n    }\n  }, []); // Run once on mount\n\n  // Define closeSlideOver early so it can be used in effects\n  const closeSlideOver = useCallback(() => {\n    setIsOpen(false);\n    setSlideOverId(null);\n    // Remove slide-over params from URL (hash-based routing)\n    const params = getHashParams();\n    params.delete(\"view\");\n    params.delete(\"edit\");\n    const newHash = setHashParams(params);\n    window.history.pushState(null, \"\", newHash);\n  }, []);\n\n  // Listen to browser back/forward navigation and hash changes\n  useEffect(() => {\n    const handleHashChange = () => {\n      const params = getHashParams();\n      const viewId = params.get(\"view\");\n      const editId = params.get(\"edit\");\n\n      if (viewId) {\n        setSlideOverId(Number(viewId));\n        setMode(\"view\");\n        setIsOpen(true);\n      } else if (editId) {\n        setSlideOverId(Number(editId));\n        setMode(\"edit\");\n        setIsOpen(true);\n      } else {\n        // No params means slide-over should be closed\n        setIsOpen(false);\n        setSlideOverId(null);\n      }\n    };\n\n    window.addEventListener(\"popstate\", handleHashChange);\n    window.addEventListener(\"hashchange\", handleHashChange);\n    return () => {\n      window.removeEventListener(\"popstate\", handleHashChange);\n      window.removeEventListener(\"hashchange\", handleHashChange);\n    };\n  }, []);\n\n  // Handle ESC key to close slide-over\n  useEffect(() => {\n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\" && isOpen) {\n        closeSlideOver();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleEsc);\n    return () => window.removeEventListener(\"keydown\", handleEsc);\n  }, [isOpen, closeSlideOver]);\n\n  const openSlideOver = (id: number, initialMode: \"view\" | \"edit\" = \"view\") => {\n    setSlideOverId(id);\n    setMode(initialMode);\n    setIsOpen(true);\n    // Update URL for deep linking and browser history (hash-based routing)\n    const params = getHashParams();\n    // Clear both view and edit params first\n    params.delete(\"view\");\n    params.delete(\"edit\");\n    // Set the new param\n    params.set(initialMode, String(id));\n    const newHash = setHashParams(params);\n    window.history.pushState(null, \"\", newHash);\n  };\n\n  const toggleMode = () => {\n    const newMode = mode === \"view\" ? \"edit\" : \"view\";\n    setMode(newMode);\n    // Update URL when mode changes (hash-based routing)\n    if (slideOverId) {\n      const params = getHashParams();\n      params.delete(\"view\");\n      params.delete(\"edit\");\n      params.set(newMode, String(slideOverId));\n      const newHash = setHashParams(params);\n      window.history.replaceState(null, \"\", newHash);\n    }\n  };\n\n  return { slideOverId, isOpen, mode, openSlideOver, closeSlideOver, setMode, toggleMode };\n}\n","import { useEffect, useCallback } from \"react\";\n\n/**\n * Detect if running on Mac for Cmd vs Ctrl\n */\nconst isMac = () => {\n  return typeof window !== \"undefined\" && /Mac|iPhone|iPod|iPad/.test(navigator.platform);\n};\n\n/**\n * Check if the modifier key (Cmd on Mac, Ctrl elsewhere) is pressed\n */\nconst isModifierPressed = (event: KeyboardEvent): boolean => {\n  return isMac() ? event.metaKey : event.ctrlKey;\n};\n\n/**\n * Check if target element should prevent shortcuts\n * Returns true if shortcuts should be blocked\n */\nconst shouldPreventShortcut = (target: EventTarget | null): boolean => {\n  if (!(target instanceof HTMLElement)) return false;\n\n  const tagName = target.tagName.toLowerCase();\n  const isContentEditable = target.isContentEditable;\n\n  // Block shortcuts in inputs, textareas, and contenteditable elements\n  if (tagName === \"input\" || tagName === \"textarea\" || isContentEditable) {\n    return true;\n  }\n\n  // Check if inside a contenteditable parent\n  let element: HTMLElement | null = target;\n  while (element) {\n    if (element.isContentEditable) return true;\n    element = element.parentElement;\n  }\n\n  return false;\n};\n\n/**\n * Check if element is a textarea or contenteditable\n */\nconst isTextarea = (target: EventTarget | null): boolean => {\n  if (!(target instanceof HTMLElement)) return false;\n  return target.tagName.toLowerCase() === \"textarea\" || target.isContentEditable;\n};\n\n/**\n * Check if an element is a form\n */\nconst isInForm = (target: EventTarget | null): boolean => {\n  if (!(target instanceof HTMLElement)) return false;\n  return target.closest(\"form\") !== null;\n};\n\nexport interface KeyboardShortcutHandlers {\n  onSave?: () => void;\n  onNew?: () => void;\n  onSearch?: () => void;\n  onCancel?: () => void;\n  onSubmit?: () => void;\n  onDelete?: () => void;\n  /** Arrow up handler for list navigation */\n  onArrowUp?: () => void;\n  /** Arrow down handler for list navigation */\n  onArrowDown?: () => void;\n  /** Enter handler for opening selected item */\n  onEnter?: () => void;\n}\n\n/**\n * Global keyboard shortcut handler hook\n *\n * Implements keyboard shortcuts with cross-platform support and context awareness:\n * - Ctrl/Cmd + S: Save form\n * - Ctrl/Cmd + N: New record\n * - Ctrl/Cmd + K or /: Focus search\n * - Escape: Cancel/close modal\n * - Enter: Submit form or open selected item (not in textarea)\n * - Delete: Delete selected (with confirmation)\n * - Arrow Up/Down: Navigate list items\n *\n * @param handlers - Object with handler functions for each shortcut\n */\nexport const useKeyboardShortcuts = (handlers: KeyboardShortcutHandlers = {}) => {\n  const handleKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      const { key } = event;\n      const target = event.target;\n\n      // Ctrl/Cmd + S: Save\n      if (key === \"s\" && isModifierPressed(event)) {\n        // Only in forms\n        if (isInForm(target)) {\n          event.preventDefault();\n          handlers.onSave?.();\n        }\n        return;\n      }\n\n      // Ctrl/Cmd + N: New record\n      if (key === \"n\" && isModifierPressed(event)) {\n        // Don't prevent if in input fields\n        if (!shouldPreventShortcut(target)) {\n          event.preventDefault();\n          handlers.onNew?.();\n        }\n        return;\n      }\n\n      // Ctrl/Cmd + K or /: Focus search\n      if ((key === \"k\" && isModifierPressed(event)) || key === \"/\") {\n        // Don't prevent if in input fields\n        if (!shouldPreventShortcut(target)) {\n          event.preventDefault();\n          handlers.onSearch?.();\n\n          // Focus the search input if it exists\n          const searchInput = document.querySelector<HTMLInputElement>(\n            'input[type=\"search\"], input[placeholder*=\"Search\" i]'\n          );\n          searchInput?.focus();\n        }\n        return;\n      }\n\n      // Escape: Cancel/close modal\n      if (key === \"Escape\") {\n        handlers.onCancel?.();\n        // Let default behavior also work (closing modals, etc.)\n        return;\n      }\n\n      // Enter: Submit form (not in textarea)\n      if (key === \"Enter\") {\n        // Only in forms, not in textareas\n        if (isInForm(target) && !isTextarea(target)) {\n          // Let default form submit happen, but also call handler\n          handlers.onSubmit?.();\n        }\n        return;\n      }\n\n      // Delete: Delete selected (with confirmation)\n      if (key === \"Delete\") {\n        // Only if not in input/textarea\n        if (!shouldPreventShortcut(target)) {\n          handlers.onDelete?.();\n        }\n        return;\n      }\n\n      // Arrow Up: Navigate list up\n      if (key === \"ArrowUp\") {\n        // Only if not in input/textarea\n        if (!shouldPreventShortcut(target) && handlers.onArrowUp) {\n          event.preventDefault();\n          handlers.onArrowUp();\n        }\n        return;\n      }\n\n      // Arrow Down: Navigate list down\n      if (key === \"ArrowDown\") {\n        // Only if not in input/textarea\n        if (!shouldPreventShortcut(target) && handlers.onArrowDown) {\n          event.preventDefault();\n          handlers.onArrowDown();\n        }\n        return;\n      }\n\n      // Enter: Open selected item (when not in form)\n      if (key === \"Enter\" && !isInForm(target) && !shouldPreventShortcut(target)) {\n        if (handlers.onEnter) {\n          event.preventDefault();\n          handlers.onEnter();\n        }\n        return;\n      }\n    },\n    [handlers]\n  );\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", handleKeyDown);\n\n    return () => {\n      document.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [handleKeyDown]);\n\n  return {\n    isMac: isMac(),\n    modifierKey: isMac() ? \"⌘\" : \"Ctrl\",\n  };\n};\n\n/**\n * Format keyboard shortcut for display in tooltips\n *\n * @example\n * formatShortcut(\"n\", true) // \"⌘N\" on Mac, \"Ctrl+N\" on Windows\n * formatShortcut(\"Escape\") // \"Esc\"\n * formatShortcut(\"ArrowDown\") // \"↓\"\n */\nexport function formatShortcut(key: string, withModifier = false, withShift = false): string {\n  const mac = isMac();\n  const parts: string[] = [];\n\n  if (withModifier) {\n    parts.push(mac ? \"⌘\" : \"Ctrl\");\n  }\n  if (withShift) {\n    parts.push(mac ? \"⇧\" : \"Shift\");\n  }\n\n  // Format special keys\n  const keyDisplay =\n    key === \"Escape\"\n      ? \"Esc\"\n      : key === \"ArrowDown\"\n        ? \"↓\"\n        : key === \"ArrowUp\"\n          ? \"↑\"\n          : key === \"ArrowLeft\"\n            ? \"←\"\n            : key === \"ArrowRight\"\n              ? \"→\"\n              : key === \"Delete\"\n                ? \"Del\"\n                : key.toUpperCase();\n\n  parts.push(keyDisplay);\n\n  return mac ? parts.join(\"\") : parts.join(\"+\");\n}\n","import React, { useState } from \"react\";\nimport { useGetOne } from \"react-admin\";\nimport { PencilIcon, XIcon } from \"lucide-react\";\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetFooter } from \"@/components/ui/sheet\";\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\";\nimport { Button } from \"@/components/ui/button\";\nimport { SlideOverSkeleton } from \"@/components/ui/list-skeleton\";\nimport { Tooltip, TooltipTrigger, TooltipContent } from \"@/components/ui/tooltip\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useKeyboardShortcuts, formatShortcut } from \"@/hooks/useKeyboardShortcuts\";\n\n/**\n * Props passed to each tab component\n */\nexport interface TabComponentProps {\n  record: any;\n  mode: \"view\" | \"edit\";\n  onModeToggle?: () => void;\n  /** Whether this tab is currently active - use to enable/disable data fetching */\n  isActiveTab: boolean;\n}\n\n/**\n * Configuration for a single tab in the slide-over\n */\nexport interface TabConfig {\n  key: string;\n  label: string;\n  component: React.ComponentType<TabComponentProps>;\n  icon?: React.ComponentType<{ className?: string }>;\n  /**\n   * Function to compute count badge value from record.\n   * Return undefined/null/0 to hide badge.\n   * @example countFromRecord: (record) => record.nb_notes\n   */\n  countFromRecord?: (record: any) => number | undefined | null;\n}\n\n/**\n * Props for the ResourceSlideOver component\n */\nexport interface ResourceSlideOverProps {\n  /** Resource name (e.g., \"contacts\", \"organizations\") */\n  resource: string;\n  /** ID of record to display */\n  recordId: number | null;\n  /** Slide-over visibility */\n  isOpen: boolean;\n  /** Close handler */\n  onClose: () => void;\n  /** Current mode (default: 'view') */\n  mode?: \"view\" | \"edit\";\n  /** Mode toggle handler */\n  onModeToggle?: () => void;\n  /** Resource-specific tab configuration */\n  tabs: TabConfig[];\n  /** Optional record representation function (defaults to record.name) */\n  recordRepresentation?: (record: any) => string;\n  /**\n   * Optional breadcrumb component to render above the title.\n   * Receives the record as a prop for dynamic breadcrumb generation.\n   */\n  breadcrumbComponent?: React.ComponentType<{ record: any }>;\n  /**\n   * Optional custom skeleton component for loading state.\n   * Defaults to generic SlideOverSkeleton if not provided.\n   * Use resource-specific skeletons (ContactDetailSkeleton, OrganizationDetailSkeleton)\n   * for better visual matching during load.\n   */\n  loadingSkeleton?: React.ComponentType;\n}\n\n/**\n * Generic slide-over panel for viewing and editing resources.\n *\n * Based on Dashboard V2's RightSlideOver, this component provides a consistent\n * pattern for displaying record details in a side panel with tabbed navigation.\n *\n * Features:\n * - Two modes: view (read-only) and edit (form fields)\n * - Tabbed interface with custom tab components\n * - Data fetching via React Admin's useGetOne\n * - Focus trap and ARIA attributes for accessibility\n * - Slide-in animation from right\n *\n * **Edit Mode Responsibility:**\n * This component only manages the mode state (view/edit) and passes it to tab\n * components. Tab components are responsible for:\n * - Rendering edit forms when mode === 'edit'\n * - Handling their own save/cancel logic\n * - Managing form state and validation\n * - Calling onModeToggle() after successful save\n *\n * The wrapper does NOT handle save operations - it only provides the UI shell\n * and mode toggle functionality.\n *\n * @example\n * ```tsx\n * const contactTabs: TabConfig[] = [\n *   { key: 'details', label: 'Details', component: ContactDetailsTab },\n *   { key: 'activities', label: 'Activities', component: ContactActivitiesTab },\n * ];\n *\n * <ResourceSlideOver\n *   resource=\"contacts\"\n *   recordId={123}\n *   isOpen={true}\n *   onClose={() => setIsOpen(false)}\n *   mode=\"view\"\n *   onModeToggle={() => setMode(mode === 'view' ? 'edit' : 'view')}\n *   tabs={contactTabs}\n * />\n * ```\n */\nexport function ResourceSlideOver({\n  resource,\n  recordId,\n  isOpen,\n  onClose,\n  mode = \"view\",\n  onModeToggle,\n  tabs,\n  recordRepresentation,\n  breadcrumbComponent: BreadcrumbComponent,\n  loadingSkeleton: LoadingSkeleton = SlideOverSkeleton,\n}: ResourceSlideOverProps) {\n  const [activeTab, setActiveTab] = useState(tabs[0]?.key || \"\");\n\n  // Keyboard shortcuts for slide-over navigation\n  useKeyboardShortcuts({\n    onCancel: isOpen ? onClose : undefined,\n    // Future: Add onSave handler when edit forms support it\n  });\n\n  // Fetch record data\n  const { data: record, isLoading } = useGetOne(\n    resource,\n    { id: recordId! },\n    { enabled: !!recordId }\n  );\n\n  // Get record title\n  const getRecordTitle = () => {\n    if (isLoading) return \"Loading...\";\n    if (!record) return \"Record Details\";\n    if (recordRepresentation) return recordRepresentation(record);\n    return record.name || record.title || `${resource} #${recordId}`;\n  };\n\n  /**\n   * NOTE: This wrapper component does NOT handle save operations.\n   * Tab components receive the `mode` prop and are responsible for:\n   * 1. Rendering edit forms when mode === 'edit'\n   * 2. Implementing their own save/cancel handlers\n   * 3. Managing form state and validation\n   * 4. Calling onModeToggle() after successful save to return to view mode\n   *\n   * This separation of concerns keeps the wrapper generic and allows\n   * each tab to implement domain-specific edit logic.\n   */\n\n  // Reset active tab when slide-over opens\n  // Note: Depend on tabs[0]?.key (primitive) instead of tabs array to avoid\n  // unnecessary re-runs when parent passes inline array literals\n  const firstTabKey = tabs[0]?.key;\n  React.useEffect(() => {\n    if (isOpen && firstTabKey) {\n      setActiveTab(firstTabKey);\n    }\n  }, [isOpen, firstTabKey]);\n\n  return (\n    <Sheet open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <SheetContent\n        side=\"right\"\n        className=\"w-[78vw] min-w-[576px] max-w-[1024px] bg-card shadow-md p-0 flex flex-col\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"slide-over-title\"\n      >\n        {!recordId ? (\n          <div className=\"flex-1 flex items-center justify-center\">\n            <p className=\"text-muted-foreground\">Select a record to view details</p>\n          </div>\n        ) : (\n          <>\n            {/* Header with optional breadcrumb, title, mode toggle, and close button */}\n            <SheetHeader className=\"!p-0 border-b border-border px-4 py-2 gap-1 flex flex-col shrink-0\">\n              {/* Breadcrumb row (optional) */}\n              {BreadcrumbComponent && record && !isLoading && (\n                <div className=\"mb-1\">\n                  <BreadcrumbComponent record={record} />\n                </div>\n              )}\n\n              {/* Title and actions row */}\n              <div className=\"flex flex-row items-center justify-between min-h-[28px] pr-10\">\n                <SheetTitle id=\"slide-over-title\" className=\"text-base font-semibold\">\n                  {getRecordTitle()}\n                </SheetTitle>\n\n                {/* Mode toggle button (if handler provided) */}\n                {onModeToggle && (\n                  <Tooltip>\n                    <TooltipTrigger asChild>\n                      <Button\n                        variant=\"ghost\"\n                        onClick={onModeToggle}\n                        className=\"h-11 px-3 text-sm\"\n                        aria-label={mode === \"view\" ? \"Switch to edit mode\" : \"Switch to view mode\"}\n                      >\n                        {mode === \"view\" ? (\n                          <>\n                            <PencilIcon className=\"size-4 mr-1\" />\n                            Edit\n                          </>\n                        ) : (\n                          <>\n                            <XIcon className=\"size-4 mr-1\" />\n                            Cancel\n                          </>\n                        )}\n                      </Button>\n                    </TooltipTrigger>\n                    <TooltipContent side=\"bottom\">\n                      {mode === \"view\"\n                        ? \"Edit record\"\n                        : `Cancel editing (${formatShortcut(\"Escape\")})`}\n                    </TooltipContent>\n                  </Tooltip>\n                )}\n              </div>\n            </SheetHeader>\n\n            {/* Tabbed content area */}\n            <Tabs\n              value={activeTab}\n              onValueChange={setActiveTab}\n              className=\"flex-1 flex flex-col overflow-hidden\"\n            >\n              <TabsList className=\"border-b border-border h-11 rounded-none bg-transparent p-0 w-full justify-start gap-1 px-2\">\n                {tabs.map((tab) => {\n                  // Compute count badge value if function provided\n                  const count = record && tab.countFromRecord ? tab.countFromRecord(record) : null;\n                  const showBadge = count != null && count > 0;\n\n                  return (\n                    <Tooltip key={tab.key}>\n                      <TooltipTrigger asChild>\n                        <TabsTrigger\n                          value={tab.key}\n                          className=\"h-11 min-w-11 px-2 rounded-none data-[state=active]:border-b-2 data-[state=active]:border-primary flex items-center justify-center gap-1 relative\"\n                          aria-label={showBadge ? `${tab.label} (${count})` : tab.label}\n                        >\n                          {tab.icon ? (\n                            <tab.icon className=\"size-5\" />\n                          ) : (\n                            <span className=\"text-sm font-medium\">{tab.label.charAt(0)}</span>\n                          )}\n                          {showBadge && (\n                            <Badge\n                              variant=\"secondary\"\n                              className=\"h-5 min-w-5 px-1.5 text-xs font-medium\"\n                            >\n                              {count > 99 ? \"99+\" : count}\n                            </Badge>\n                          )}\n                        </TabsTrigger>\n                      </TooltipTrigger>\n                      <TooltipContent side=\"bottom\" sideOffset={4}>\n                        {showBadge ? `${tab.label} (${count})` : tab.label}\n                      </TooltipContent>\n                    </Tooltip>\n                  );\n                })}\n              </TabsList>\n\n              {/* Tab content panels - only render active tab's component for performance */}\n              {tabs.map((tab) => {\n                const TabComponent = tab.component;\n                const isActive = activeTab === tab.key;\n\n                return (\n                  <TabsContent\n                    key={tab.key}\n                    value={tab.key}\n                    className=\"flex-1 overflow-y-auto p-6 m-0\"\n                  >\n                    {/* Only mount TabComponent when this tab is active to avoid:\n                        1. Unnecessary React component tree creation\n                        2. useEffect hooks firing in hidden tabs\n                        3. Memory allocation for unused tab state */}\n                    {isActive && (\n                      <>\n                        {isLoading ? (\n                          <LoadingSkeleton />\n                        ) : record ? (\n                          <TabComponent\n                            record={record}\n                            mode={mode}\n                            onModeToggle={onModeToggle}\n                            isActiveTab={isActive}\n                          />\n                        ) : (\n                          <p className=\"text-muted-foreground\">Record not found</p>\n                        )}\n                      </>\n                    )}\n                  </TabsContent>\n                );\n              })}\n            </Tabs>\n\n            {/* Footer message (edit mode only) */}\n            {mode === \"edit\" && (\n              <SheetFooter className=\"border-t border-border p-4 flex flex-row gap-2 justify-end items-center\">\n                <Button variant=\"outline\" onClick={onModeToggle} className=\"h-11 px-4\">\n                  Cancel\n                </Button>\n                <Button type=\"submit\" form=\"slide-over-edit-form\" className=\"h-11 px-4\">\n                  Save Changes\n                </Button>\n              </SheetFooter>\n            )}\n          </>\n        )}\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":["getHashParams","hash","window","location","queryIndex","indexOf","URLSearchParams","slice","setHashParams","params","basePath","paramString","toString","useSlideOverState","slideOverId","setSlideOverId","useState","isOpen","setIsOpen","mode","setMode","useEffect","viewId","get","editId","Number","closeSlideOver","useCallback","delete","newHash","history","pushState","handleHashChange","__name","addEventListener","removeEventListener","handleEsc","e","key","openSlideOver","id","initialMode","set","String","toggleMode","newMode","replaceState","isMac","test","navigator","platform","isModifierPressed","event","metaKey","ctrlKey","shouldPreventShortcut","target","HTMLElement","tagName","toLowerCase","isContentEditable","element","parentElement","isTextarea","isInForm","closest","useKeyboardShortcuts","handlers","handleKeyDown","preventDefault","onSave","onNew","onSearch","searchInput","document","querySelector","focus","onEnter","onArrowDown","onArrowUp","onDelete","onSubmit","onCancel","modifierKey","formatShortcut","withModifier","withShift","mac","parts","push","join","ResourceSlideOver","resource","recordId","onClose","onModeToggle","tabs","recordRepresentation","breadcrumbComponent","BreadcrumbComponent","loadingSkeleton","LoadingSkeleton","SlideOverSkeleton","activeTab","setActiveTab","data","record","isLoading","useGetOne","enabled","getRecordTitle","name","title","firstTabKey","React","jsx","Sheet","open","onOpenChange","children","SheetContent","side","className","role","jsxs","Fragment","SheetHeader","SheetTitle","Tooltip","TooltipTrigger","asChild","Button","variant","onClick","PencilIcon","XIcon","TooltipContent","Tabs","value","onValueChange","TabsList","map","tab","count","countFromRecord","showBadge","TabsTrigger","label","icon","charAt","Badge","sideOffset","TabComponent","component","isActive","TabsContent","isActiveTab","SheetFooter","type","form"],"mappings":"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"}