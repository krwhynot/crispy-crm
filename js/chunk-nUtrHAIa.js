var e=Object.defineProperty,a=(a,s)=>e(a,"name",{value:s,configurable:!0});import{aF as s,G as t,l,aG as r,av as o,ae as n,j as i,H as c}from"./chunk-ByJg_QQB.js";import{r as u}from"./chunk-1NZFT-6z.js";import{br as h,F as d,H as m,bs as p,B as x,s as j,I as f,J as b}from"../assets/index-BoLku8RR.js";import{C,a as g,c as v,d as y,e as V}from"./chunk-CMQLDEz_.js";import{P as T,a as N,b as k}from"./chunk-C_u3nriX.js";import{as as F,C as w}from"./chunk-Bc6KM1xM.js";const S=a(e=>{const{filterToQuery:S=I,inputText:H,create:L,createValue:q,createLabel:O,createHintValue:R,createItemLabel:A,onCreate:D,optionText:G}=e,{allChoices:P=[],source:Q,resource:B,isFromReference:E,setFilters:J}=s(e),{id:$,field:_,isRequired:z}=t({...e,source:Q}),K=l(),{placeholder:M=K("ra.action.search",{_:"Search..."})}=e,U=r(B),{getChoiceText:W,getChoiceValue:X}=o({optionText:e.optionText??(E?U:"name"),optionValue:e.optionValue??"id",disableValue:e.disableValue,translateChoice:e.translateChoice??!E}),[Y,Z]=u.useState(""),[ee,ae]=u.useState(!1),se=P.find(e=>X(e)===_.value),te=u.useCallback(e=>"function"==typeof H?H(e):void 0!==H?H:W(e),[H,W]),le=n(e=>{ae(e),e||J(S(""))}),re=u.useCallback(e=>{if(_.value===X(e)&&!z)return _.onChange(""),Z(""),E&&J(S("")),void ae(!1);_.onChange(X(e)),ae(!1)},[_,X,z,Z,E,J,S,ae]),{getCreateItem:oe,handleChange:ne,createElement:ie,getOptionDisabled:ce}=h({create:L,createLabel:O,createValue:q,createHintValue:R,createItemLabel:A,onCreate:D,handleChange:re,optionText:G,filter:Y}),ue=!L&&!D||""===Y&&!O?null:oe(Y);let he=P;return ue&&(he=[...he,ue]),i.jsxs(i.Fragment,{children:[i.jsxs(d,{className:e.className,id:$,name:Q,children:[!1!==e.label&&i.jsx(m,{children:i.jsx(c,{label:e.label,source:e.source??Q,resource:B,isRequired:z})}),i.jsx(p,{children:i.jsxs(T,{open:ee,onOpenChange:le,children:[i.jsx(N,{asChild:!0,children:i.jsxs(x,{variant:"outline",role:"combobox","aria-expanded":ee,className:"w-full justify-between h-auto py-1.75 font-normal",children:[se?te(se):i.jsx("span",{className:"text-muted-foreground",children:M}),i.jsx(F,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(k,{className:"w-full p-0",side:"bottom",align:"start",children:i.jsxs(C,{shouldFilter:!E,children:[i.jsx(g,{placeholder:"Search...",value:Y,onValueChange:a(e=>{Z(e),E&&J(S(e))},"onValueChange")}),i.jsx(v,{children:"No matching item found."}),i.jsx(y,{className:"max-h-[280px] overflow-y-auto",children:he.map(e=>{const s=!!ue&&e?.id===ue.id,t=ce(e);return i.jsxs(V,{value:s?`?${Y}?`:X(e),onSelect:a(()=>ne(e),"onSelect"),disabled:t,children:[i.jsx(w,{className:j("mr-2 h-4 w-4",_.value===X(e)?"opacity-100":"opacity-0")}),W(s?ue:e)]},X(e))})})]})})]})}),i.jsx(f,{helperText:e.helperText}),i.jsx(b,{})]}),ie]})},"AutocompleteInput"),I=a(e=>({q:e}),"DefaultFilterToQuery");export{S as A};
