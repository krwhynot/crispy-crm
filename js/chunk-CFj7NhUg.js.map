{"version":3,"file":"chunk-CFj7NhUg.js","sources":["../../src/atomic-crm/opportunities/constants/stageConstants.ts"],"sourcesContent":["/**\n * Centralized constants for food service opportunity pipeline stages\n * Replaces hardcoded stage definitions across components\n *\n * MFB Sales Process Mapping (PRD Section 7.4):\n * The CRM pipeline stages align with MFB's established 7-phase sales process.\n * This mapping provides contextual guidance for reps transitioning from Excel.\n */\n\n// P1 consolidation: Import type from canonical validation schema\nimport type { OpportunityStageValue } from \"@/atomic-crm/validation/opportunities\";\n\n// Re-export for backward compatibility with existing imports\nexport type { OpportunityStageValue } from \"@/atomic-crm/validation/opportunities\";\n\n/**\n * MFB Sales Process Phase information\n * Maps pipeline stages to the broader 7-phase methodology\n */\nexport interface MfbPhaseInfo {\n  phase: string; // e.g., \"Phase 2\", \"Phase 3A\"\n  name: string; // e.g., \"Planning\", \"Target Distributors\"\n  context: string; // Tooltip text explaining what typically happens\n}\n\nexport interface OpportunityStage {\n  value: OpportunityStageValue; // Now typed to canonical enum\n  label: string;\n  color: string;\n  description: string;\n  elevation: 1 | 2 | 3; // Visual depth: 1=subtle, 2=medium, 3=prominent\n  mfbPhase: MfbPhaseInfo; // MFB 7-phase process mapping (PRD Section 7.4)\n}\n\nexport const OPPORTUNITY_STAGES: OpportunityStage[] = [\n  {\n    value: \"new_lead\",\n    label: \"New Lead\",\n    color: \"var(--info-subtle)\",\n    description:\n      \"New prospect identified. Research the operator's menu, identify which principal products fit, and prepare your pitch.\",\n    elevation: 3, // Prominent - new opportunities should stand out\n    mfbPhase: {\n      phase: \"Phase 2\",\n      name: \"Planning\",\n      context:\n        \"Phase 2 activities typically happen here: defining parameters, setting goals, and analyzing distributor landscape.\",\n    },\n  },\n  {\n    value: \"initial_outreach\",\n    label: \"Initial Outreach\",\n    color: \"var(--tag-teal-bg)\",\n    description:\n      \"First contact made. Introduce MFB and relevant principals, qualify interest, and schedule a follow-up call or visit.\",\n    elevation: 2, // Medium - active engagement\n    mfbPhase: {\n      phase: \"Phase 3A\",\n      name: \"Target Distributors\",\n      context:\n        \"Phase 3A activities typically happen here: intro emails, presentations, and operator call coordination.\",\n    },\n  },\n  {\n    value: \"sample_visit_offered\",\n    label: \"Sample/Visit Offered\",\n    color: \"var(--warning-subtle)\",\n    description:\n      \"Product sample sent or site visit scheduled. Follow up within 3-5 days to gather feedbackâ€”this is a critical stage.\",\n    elevation: 2, // Medium - active opportunity\n    mfbPhase: {\n      phase: \"Phase 3A\",\n      name: \"Target Distributors\",\n      context:\n        \"Phase 3A activities typically happen here: sample coordination and site visit scheduling with targeted distributors.\",\n    },\n  },\n  {\n    value: \"feedback_logged\",\n    label: \"Feedback Logged\",\n    color: \"var(--tag-blue-bg)\",\n    description:\n      \"Operator feedback recorded. Evaluate fit, address concerns, and determine if a formal demo or pricing discussion is warranted.\",\n    elevation: 2, // Medium - active analysis\n    mfbPhase: {\n      phase: \"Phase 3B\",\n      name: \"Stocking Distributors\",\n      context:\n        \"Phase 3B activities typically happen here: creating stock lists and developing marketing campaigns.\",\n    },\n  },\n  {\n    value: \"demo_scheduled\",\n    label: \"Demo Scheduled\",\n    color: \"var(--success-subtle)\",\n    description:\n      \"Final product demonstration or tasting scheduled. Confirm distributor availability and prepare pricing/terms for close.\",\n    elevation: 3, // Prominent - important milestone\n    mfbPhase: {\n      phase: \"Phase 3B\",\n      name: \"Stocking Distributors\",\n      context:\n        \"Phase 3B activities typically happen here: setting appointments and finalizing stock arrangements.\",\n    },\n  },\n  {\n    value: \"closed_won\",\n    label: \"Closed - Won\",\n    color: \"var(--success-strong)\",\n    description:\n      \"Deal won! First purchase order placed. Ensure distributor authorization is active and hand off to account management.\",\n    elevation: 2, // Medium - completed but notable\n    mfbPhase: {\n      phase: \"Phase 5\",\n      name: \"Ongoing Activities\",\n      context:\n        \"Phase 5 activities begin here: annual/quarterly goals, promotions, DSR training, and food show planning.\",\n    },\n  },\n  {\n    value: \"closed_lost\",\n    label: \"Closed - Lost\",\n    color: \"var(--error-subtle)\",\n    description:\n      \"Opportunity lost. Review the loss reason and consider re-engagement after 90 days if circumstances change.\",\n    elevation: 1, // Subtle - less emphasis on lost deals\n    mfbPhase: {\n      phase: \"Phase 4\",\n      name: \"Measuring Results\",\n      context:\n        \"Phase 4 review applies here: analyze loss reasons for corrective actions and future opportunity improvement.\",\n    },\n  },\n];\n\n// Helper functions for stage management\nexport function getOpportunityStageLabel(stageValue: string): string {\n  const stage = OPPORTUNITY_STAGES.find((s) => s.value === stageValue);\n  return stage?.label || stageValue;\n}\n\nexport function getOpportunityStageColor(stageValue: string): string {\n  const stage = OPPORTUNITY_STAGES.find((s) => s.value === stageValue);\n  return stage?.color || \"var(--muted)\";\n}\n\nexport function getOpportunityStageDescription(stageValue: string): string {\n  const stage = OPPORTUNITY_STAGES.find((s) => s.value === stageValue);\n  return stage?.description || \"\";\n}\n\nexport function getOpportunityStageElevation(stageValue: string): 1 | 2 | 3 {\n  const stage = OPPORTUNITY_STAGES.find((s) => s.value === stageValue);\n  return stage?.elevation || 2; // Default to medium elevation\n}\n\n/**\n * Get the MFB 7-phase process mapping for a stage (PRD Section 7.4)\n * Returns null if stage not found\n */\nexport function getOpportunityMfbPhase(stageValue: string): MfbPhaseInfo | null {\n  const stage = OPPORTUNITY_STAGES.find((s) => s.value === stageValue);\n  return stage?.mfbPhase || null;\n}\n\nexport function isActiveStage(stageValue: string): boolean {\n  return ![\"closed_won\", \"closed_lost\"].includes(stageValue);\n}\n\nexport function isClosedStage(stageValue: string): boolean {\n  return [\"closed_won\", \"closed_lost\"].includes(stageValue);\n}\n\n// Legacy compatibility function for existing components\nexport function findOpportunityLabel(\n  opportunityStages: { value: string; label: string }[],\n  opportunityValue: string\n): string {\n  return getOpportunityStageLabel(opportunityValue);\n}\n\n// Export stages in format compatible with React Admin SelectInput choices\nexport const OPPORTUNITY_STAGE_CHOICES = OPPORTUNITY_STAGES.map((stage) => ({\n  id: stage.value,\n  name: stage.label,\n}));\n\n// Export stages in legacy format for backward compatibility\nexport const OPPORTUNITY_STAGES_LEGACY = OPPORTUNITY_STAGES.map((stage) => ({\n  value: stage.value,\n  label: stage.label,\n}));\n"],"names":["OPPORTUNITY_STAGES","value","label","color","description","elevation","mfbPhase","phase","name","context","getOpportunityStageLabel","stageValue","stage","find","s","getOpportunityStageColor","getOpportunityStageDescription","getOpportunityStageElevation","getOpportunityMfbPhase","__name","OPPORTUNITY_STAGE_CHOICES","map","id","OPPORTUNITY_STAGES_LEGACY"],"mappings":"2EAkCO,MAAMA,EAAyC,CACpD,CACEC,MAAO,WACPC,MAAO,WACPC,MAAO,qBACPC,YACE,wHACFC,UAAW,EACXC,SAAU,CACRC,MAAO,UACPC,KAAM,WACNC,QACE,uHAGN,CACER,MAAO,mBACPC,MAAO,mBACPC,MAAO,qBACPC,YACE,uHACFC,UAAW,EACXC,SAAU,CACRC,MAAO,WACPC,KAAM,sBACNC,QACE,4GAGN,CACER,MAAO,uBACPC,MAAO,uBACPC,MAAO,wBACPC,YACE,sHACFC,UAAW,EACXC,SAAU,CACRC,MAAO,WACPC,KAAM,sBACNC,QACE,yHAGN,CACER,MAAO,kBACPC,MAAO,kBACPC,MAAO,qBACPC,YACE,iIACFC,UAAW,EACXC,SAAU,CACRC,MAAO,WACPC,KAAM,wBACNC,QACE,wGAGN,CACER,MAAO,iBACPC,MAAO,iBACPC,MAAO,wBACPC,YACE,0HACFC,UAAW,EACXC,SAAU,CACRC,MAAO,WACPC,KAAM,wBACNC,QACE,uGAGN,CACER,MAAO,aACPC,MAAO,eACPC,MAAO,wBACPC,YACE,wHACFC,UAAW,EACXC,SAAU,CACRC,MAAO,UACPC,KAAM,qBACNC,QACE,6GAGN,CACER,MAAO,cACPC,MAAO,gBACPC,MAAO,sBACPC,YACE,6GACFC,UAAW,EACXC,SAAU,CACRC,MAAO,UACPC,KAAM,oBACNC,QACE,kHAMD,SAASC,EAAyBC,GACvC,MAAMC,EAAQZ,EAAmBa,KAAMC,GAAMA,EAAEb,QAAUU,GACzD,OAAOC,GAAOV,OAASS,CACzB,CAEO,SAASI,EAAyBJ,GACvC,MAAMC,EAAQZ,EAAmBa,KAAMC,GAAMA,EAAEb,QAAUU,GACzD,OAAOC,GAAOT,OAAS,cACzB,CAEO,SAASa,EAA+BL,GAC7C,MAAMC,EAAQZ,EAAmBa,KAAMC,GAAMA,EAAEb,QAAUU,GACzD,OAAOC,GAAOR,aAAe,EAC/B,CAEO,SAASa,EAA6BN,GAC3C,MAAMC,EAAQZ,EAAmBa,KAAMC,GAAMA,EAAEb,QAAUU,GACzD,OAAOC,GAAOP,WAAa,CAC7B,CAMO,SAASa,EAAuBP,GACrC,MAAMC,EAAQZ,EAAmBa,KAAMC,GAAMA,EAAEb,QAAUU,GACzD,OAAOC,GAAON,UAAY,IAC5B,CA3BgBa,EAAAT,EAAA,4BAKAS,EAAAJ,EAAA,4BAKAI,EAAAH,EAAA,kCAKAG,EAAAF,EAAA,gCASAE,EAAAD,EAAA,0BAsBT,MAAME,EAA4BpB,EAAmBqB,IAAKT,IAAA,CAC/DU,GAAIV,EAAMX,MACVO,KAAMI,EAAMV,SAIDqB,EAA4BvB,EAAmBqB,IAAKT,IAAA,CAC/DX,MAAOW,EAAMX,MACbC,MAAOU,EAAMV"}