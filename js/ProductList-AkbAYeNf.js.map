{"version":3,"file":"ProductList-AkbAYeNf.js","sources":["../../src/atomic-crm/products/ProductListFilter.tsx","../../src/atomic-crm/products/ProductDetailsTab.tsx","../../src/atomic-crm/products/ProductRelationshipsTab.tsx","../../src/atomic-crm/products/ProductSlideOver.tsx","../../src/atomic-crm/products/ProductEmpty.tsx","../../src/atomic-crm/products/productFilterConfig.ts","../../src/atomic-crm/products/ProductList.tsx"],"sourcesContent":["import { Package, Tag, Building2 } from \"lucide-react\";\nimport { FilterLiveForm, useGetList } from \"ra-core\";\n\nimport { ToggleFilterButton } from \"@/components/admin/toggle-filter-button\";\nimport { SearchInput } from \"@/components/admin/search-input\";\nimport { FilterCategory } from \"../filters/FilterCategory\";\nimport type { Organization } from \"../types\";\n\n// Interface for the data returned by our database view\ninterface Category {\n  id: string;\n  name: string;\n}\n\nexport const ProductListFilter = () => {\n  // Fetch principal organizations dynamically\n  const { data: principals } = useGetList<Organization>(\n    \"organizations\",\n    {\n      filter: { organization_type: \"principal\" },\n      pagination: { page: 1, perPage: 100 },\n      sort: { field: \"name\", order: \"ASC\" },\n    },\n    {\n      // Categories and principals don't change often - cache for 5 minutes\n      staleTime: 5 * 60 * 1000,\n      gcTime: 15 * 60 * 1000,\n      refetchOnWindowFocus: false,\n    }\n  );\n\n  // Fetch unique categories directly from the database view\n  // This is much more efficient than fetching all products\n  const { data: categories, isLoading: isLoadingCategories } = useGetList<Category>(\n    \"distinct_product_categories\",\n    {\n      pagination: { page: 1, perPage: 100 },\n      sort: { field: \"name\", order: \"ASC\" },\n    },\n    {\n      // Categories change infrequently, so we can cache for longer\n      staleTime: 5 * 60 * 1000,\n      gcTime: 15 * 60 * 1000,\n      refetchOnWindowFocus: false,\n    }\n  );\n\n  const productStatuses = [\n    { id: \"active\", name: \"Active\" },\n    { id: \"discontinued\", name: \"Discontinued\" },\n    { id: \"coming_soon\", name: \"Coming Soon\" },\n  ];\n\n  return (\n    <div className=\"flex flex-col gap-4\">\n      <FilterLiveForm>\n        <SearchInput source=\"q\" placeholder=\"Search products...\" />\n      </FilterLiveForm>\n\n      <FilterCategory icon={<Tag className=\"h-4 w-4\" />} label=\"Product Status\">\n        {productStatuses.map((status) => (\n          <ToggleFilterButton\n            key={status.id}\n            className=\"w-full justify-between\"\n            label={status.name}\n            value={{ status: status.id }}\n          />\n        ))}\n      </FilterCategory>\n\n      <FilterCategory icon={<Package className=\"h-4 w-4\" />} label=\"Category\">\n        {isLoadingCategories ? (\n          <div className=\"text-sm text-muted-foreground px-3 py-1\">Loading...</div>\n        ) : (\n          categories?.map((category) => (\n            <ToggleFilterButton\n              key={category.id}\n              className=\"w-full justify-between\"\n              label={category.name}\n              value={{ category: category.id }}\n            />\n          ))\n        )}\n      </FilterCategory>\n\n      {principals && principals.length > 0 && (\n        <FilterCategory icon={<Building2 className=\"h-4 w-4\" />} label=\"Principal/Supplier\">\n          {principals.map((principal) => (\n            <ToggleFilterButton\n              key={principal.id}\n              className=\"w-full justify-between\"\n              label={principal.name}\n              value={{ principal_id: principal.id }}\n            />\n          ))}\n        </FilterCategory>\n      )}\n    </div>\n  );\n};\n","import { useUpdate, useNotify, RecordContextProvider } from \"ra-core\";\nimport { Form } from \"react-admin\";\nimport { ReferenceField } from \"@/components/admin/reference-field\";\nimport { TextField } from \"@/components/admin/text-field\";\nimport { TextInput } from \"@/components/admin/text-input\";\nimport { SelectInput } from \"@/components/admin/select-input\";\nimport { ReferenceInput } from \"@/components/admin/reference-input\";\nimport { AutocompleteInput } from \"@/components/admin/autocomplete-input\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { AsideSection } from \"@/components/ui\";\nimport { PRODUCT_STATUSES, PRODUCT_CATEGORIES } from \"../validation/products\";\n\nconst DISTRIBUTOR_CODE_LABELS: Record<string, string> = {\n  usf_code: \"US Foods\",\n  sysco_code: \"Sysco\",\n  gfs_code: \"GFS\",\n  pfg_code: \"PFG\",\n  greco_code: \"Greco\",\n  gofo_code: \"GOFO\",\n  rdp_code: \"RDP\",\n  wilkens_code: \"Wilkens\",\n};\n\ninterface Product {\n  id: number;\n  name: string;\n  description?: string | null;\n  category: string;\n  status: \"active\" | \"discontinued\" | \"coming_soon\";\n  principal_id: number;\n  certifications?: string[] | null;\n  allergens?: string[] | null;\n  ingredients?: string | null;\n  nutritional_info?: Record<string, any> | null;\n  marketing_description?: string | null;\n  usf_code?: string | null;\n  sysco_code?: string | null;\n  gfs_code?: string | null;\n  pfg_code?: string | null;\n  greco_code?: string | null;\n  gofo_code?: string | null;\n  rdp_code?: string | null;\n  wilkens_code?: string | null;\n  created_at?: string | null;\n  updated_at?: string | null;\n  created_by?: number | null;\n  updated_by?: number | null;\n}\n\ninterface ProductDetailsTabProps {\n  record: Product;\n  mode: \"view\" | \"edit\";\n  onModeToggle?: () => void;\n}\n\nfunction hasDistributorCodes(record: any): boolean {\n  return Object.keys(DISTRIBUTOR_CODE_LABELS).some(\n    (key) => record[key as keyof typeof record]\n  );\n}\n\n/**\n * Details tab for ProductSlideOver.\n *\n * **View Mode**: Displays core product fields:\n * - Name\n * - Description\n * - Category (badge)\n * - Status (badge with semantic colors)\n * - Principal Organization (link)\n *\n * **Edit Mode**: Full form with save/cancel buttons\n */\nexport function ProductDetailsTab({ record, mode, onModeToggle }: ProductDetailsTabProps) {\n  const [update] = useUpdate();\n  const notify = useNotify();\n\n  // Handle save in edit mode\n  const handleSave = async (data: Partial<Product>) => {\n    try {\n      await update(\"products\", {\n        id: record.id,\n        data,\n        previousData: record,\n      });\n      notify(\"Product updated successfully\", { type: \"success\" });\n      onModeToggle?.(); // Return to view mode after successful save\n    } catch (error) {\n      notify(\"Error updating product\", { type: \"error\" });\n      console.error(\"Save error:\", error);\n    }\n  };\n\n  if (mode === \"edit\") {\n    // Transform categories and statuses for SelectInput\n    const productCategories = PRODUCT_CATEGORIES.map((category) => ({\n      id: category,\n      name: category\n        .split(\"_\")\n        .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n        .join(\" \"),\n    }));\n\n    const productStatuses = PRODUCT_STATUSES.map((status) => ({\n      id: status,\n      name: status\n        .split(\"_\")\n        .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n        .join(\" \"),\n    }));\n\n    const handleCreateCategory = (categoryName?: string) => {\n      if (!categoryName) return;\n      return { id: categoryName, name: categoryName };\n    };\n\n    return (\n      <RecordContextProvider value={record}>\n        <Form id=\"slide-over-edit-form\" onSubmit={handleSave} record={record}>\n          <div className=\"space-y-6\">\n            <div className=\"space-y-4\">\n              <TextInput source=\"name\" label=\"Product Name\" />\n              <TextInput source=\"description\" label=\"Description\" multiline rows={3} />\n\n              <AutocompleteInput\n                source=\"category\"\n                label=\"Category\"\n                choices={productCategories}\n                onCreate={handleCreateCategory}\n                createItemLabel=\"Add custom category: %{item}\"\n              />\n\n              <SelectInput source=\"status\" label=\"Status\" choices={productStatuses} />\n\n              <ReferenceInput\n                source=\"principal_id\"\n                reference=\"organizations\"\n                label=\"Principal/Supplier\"\n                filter={{ organization_type: \"principal\" }}\n              >\n                <AutocompleteInput optionText=\"name\" />\n              </ReferenceInput>\n            </div>\n          </div>\n        </Form>\n      </RecordContextProvider>\n    );\n  }\n\n  // View mode - display all product fields\n  return (\n    <RecordContextProvider value={record}>\n      <div className=\"space-y-6\">\n        {/* Product Info Section */}\n        <AsideSection title=\"Product Details\">\n          <Card>\n            <CardContent className=\"p-4 space-y-3\">\n              <div>\n                <h3 className=\"text-lg font-semibold\">{record.name}</h3>\n              </div>\n\n              {record.description && (\n                <div>\n                  <p className=\"text-sm whitespace-pre-wrap\">{record.description}</p>\n                </div>\n              )}\n\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm text-muted-foreground\">Category:</span>\n                <Badge variant=\"outline\">\n                  {record.category\n                    .split(\"_\")\n                    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n                    .join(\" \")}\n                </Badge>\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm text-muted-foreground\">Status:</span>\n                <StatusBadge status={record.status} />\n              </div>\n            </CardContent>\n          </Card>\n        </AsideSection>\n\n        {/* Principal Section */}\n        <AsideSection title=\"Principal/Supplier\">\n          <Card>\n            <CardContent className=\"p-4\">\n              <ReferenceField source=\"principal_id\" reference=\"organizations\" link=\"show\">\n                <TextField source=\"name\" className=\"font-medium\" />\n              </ReferenceField>\n            </CardContent>\n          </Card>\n        </AsideSection>\n\n        {/* Distributor Codes Section */}\n        {hasDistributorCodes(record) && (\n          <AsideSection title=\"Distributor Codes\">\n            <Card>\n              <CardContent className=\"p-4\">\n                <div className=\"grid grid-cols-2 gap-2 p-3 bg-muted/50 rounded-md\">\n                  {Object.entries(DISTRIBUTOR_CODE_LABELS).map(([field, label]) => {\n                    const value = record[field as keyof typeof record];\n                    if (!value) return null;\n                    return (\n                      <div key={field} className=\"flex justify-between\">\n                        <span className=\"text-sm text-muted-foreground\">{label}:</span>\n                        <span className=\"text-sm font-mono\">{value}</span>\n                      </div>\n                    );\n                  })}\n                </div>\n              </CardContent>\n            </Card>\n          </AsideSection>\n        )}\n      </div>\n    </RecordContextProvider>\n  );\n}\n\n/**\n * StatusBadge - Display product status with semantic colors\n */\nfunction StatusBadge({ status }: { status: string }) {\n  let variant: \"default\" | \"secondary\" | \"destructive\" | \"outline\" = \"default\";\n\n  switch (status) {\n    case \"active\":\n      variant = \"default\";\n      break;\n    case \"discontinued\":\n      variant = \"destructive\";\n      break;\n    case \"coming_soon\":\n      variant = \"secondary\";\n      break;\n    default:\n      variant = \"outline\";\n  }\n\n  return (\n    <Badge variant={variant}>\n      {status\n        .split(\"_\")\n        .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n        .join(\" \")}\n    </Badge>\n  );\n}\n","import { Building2 } from \"lucide-react\";\nimport { RecordContextProvider, useGetList } from \"ra-core\";\nimport { ReferenceField } from \"@/components/admin/reference-field\";\nimport { TextField } from \"@/components/admin/text-field\";\nimport { DateField } from \"@/components/admin/date-field\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { AsideSection } from \"@/components/ui\";\n\ninterface Product {\n  id: number;\n  name: string;\n  principal_id?: number | null;\n  created_at?: string | null;\n  updated_at?: string | null;\n}\n\ninterface ProductRelationshipsTabProps {\n  record: Product;\n  mode: \"view\" | \"edit\";\n}\n\n/**\n * Relationships tab for ProductSlideOver.\n *\n * **Read-only tab** showing:\n * - Principal Organization (if exists)\n * - Related Opportunities (opportunities using this product)\n * - Created/Updated timestamps\n *\n * No edit mode - relationships are managed via Details tab or opportunity forms.\n */\nexport function ProductRelationshipsTab({ record }: ProductRelationshipsTabProps) {\n  // Fetch opportunities that include this product\n  const { data: opportunityProducts, isLoading: isLoadingOpportunities } = useGetList(\n    \"opportunity_products\",\n    {\n      filter: { product_id_reference: record.id },\n      pagination: { page: 1, perPage: 100 },\n      sort: { field: \"created_at\", order: \"DESC\" },\n    }\n  );\n\n  return (\n    <RecordContextProvider value={record}>\n      <div className=\"space-y-6\">\n        {/* Principal Organization */}\n        {record.principal_id && (\n          <AsideSection title=\"Principal/Supplier\">\n            <Card>\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center gap-2\">\n                  <Building2 className=\"size-4 text-muted-foreground\" />\n                  <ReferenceField source=\"principal_id\" reference=\"organizations\" link=\"show\">\n                    <TextField source=\"name\" className=\"font-medium\" />\n                  </ReferenceField>\n                </div>\n              </CardContent>\n            </Card>\n          </AsideSection>\n        )}\n\n        {/* Related Opportunities */}\n        <AsideSection title=\"Related Opportunities\">\n          <Card>\n            <CardContent className=\"p-4\">\n              {isLoadingOpportunities && (\n                <div className=\"text-sm text-muted-foreground\">Loading opportunities...</div>\n              )}\n\n              {!isLoadingOpportunities &&\n                (!opportunityProducts || opportunityProducts.length === 0) && (\n                  <div className=\"text-sm text-muted-foreground\">\n                    No opportunities using this product yet.\n                  </div>\n                )}\n\n              {!isLoadingOpportunities && opportunityProducts && opportunityProducts.length > 0 && (\n                <div className=\"space-y-2\">\n                  {opportunityProducts.map((oppProduct: any) => (\n                    <div\n                      key={oppProduct.id}\n                      className=\"border-b border-border pb-2 last:border-0 last:pb-0\"\n                    >\n                      <RecordContextProvider value={oppProduct}>\n                        <ReferenceField\n                          source=\"opportunity_id\"\n                          reference=\"opportunities\"\n                          link=\"show\"\n                        >\n                          <TextField source=\"title\" className=\"text-sm font-medium\" />\n                        </ReferenceField>\n                        {oppProduct.notes && (\n                          <p className=\"text-xs text-muted-foreground mt-1\">{oppProduct.notes}</p>\n                        )}\n                      </RecordContextProvider>\n                    </div>\n                  ))}\n                  {opportunityProducts.length > 5 && (\n                    <div className=\"text-xs text-muted-foreground pt-2\">\n                      Showing {opportunityProducts.length} opportunit\n                      {opportunityProducts.length === 1 ? \"y\" : \"ies\"}\n                    </div>\n                  )}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </AsideSection>\n\n        {/* Metadata */}\n        <AsideSection title=\"Metadata\">\n          <div className=\"space-y-2\">\n            {record.created_at && (\n              <div className=\"text-sm\">\n                <span className=\"text-muted-foreground\">Created on </span>\n                <DateField\n                  source=\"created_at\"\n                  options={{ year: \"numeric\", month: \"long\", day: \"numeric\" }}\n                />\n              </div>\n            )}\n\n            {record.updated_at && (\n              <div className=\"text-sm\">\n                <span className=\"text-muted-foreground\">Last updated on </span>\n                <DateField\n                  source=\"updated_at\"\n                  options={{ year: \"numeric\", month: \"long\", day: \"numeric\" }}\n                />\n              </div>\n            )}\n          </div>\n        </AsideSection>\n      </div>\n    </RecordContextProvider>\n  );\n}\n","import { PackageIcon, Link2Icon } from \"lucide-react\";\nimport type { TabConfig } from \"@/components/layouts/ResourceSlideOver\";\nimport { ResourceSlideOver } from \"@/components/layouts/ResourceSlideOver\";\nimport { ProductDetailsTab } from \"./ProductDetailsTab\";\nimport { ProductRelationshipsTab } from \"./ProductRelationshipsTab\";\n\ninterface ProductSlideOverProps {\n  recordId: number | null;\n  isOpen: boolean;\n  onClose: () => void;\n  mode: \"view\" | \"edit\";\n  onModeToggle: () => void;\n}\n\n/**\n * ProductSlideOver - Slide-over panel for viewing and editing products\n *\n * Features:\n * - Details tab: Core product fields (name, description, category, status, principal)\n * - Relationships tab: Related organizations and opportunities\n * - View/Edit mode toggle\n * - URL synchronization\n * - ESC key to close\n *\n * Design:\n * - 40vw width (480-720px)\n * - Slide-in from right\n * - Two tabs with icons\n */\nexport function ProductSlideOver({\n  recordId,\n  isOpen,\n  onClose,\n  mode,\n  onModeToggle,\n}: ProductSlideOverProps) {\n  // Tab configuration\n  const tabs: TabConfig[] = [\n    {\n      key: \"details\",\n      label: \"Details\",\n      component: ProductDetailsTab,\n      icon: PackageIcon,\n    },\n    {\n      key: \"relationships\",\n      label: \"Relationships\",\n      component: ProductRelationshipsTab,\n      icon: Link2Icon,\n    },\n  ];\n\n  // Record representation function\n  const recordRepresentation = (record: any) => {\n    return record.name || `Product #${record.id}`;\n  };\n\n  return (\n    <ResourceSlideOver\n      resource=\"products\"\n      recordId={recordId}\n      isOpen={isOpen}\n      onClose={onClose}\n      mode={mode}\n      onModeToggle={onModeToggle}\n      tabs={tabs}\n      recordRepresentation={recordRepresentation}\n    />\n  );\n}\n","import { Package } from \"lucide-react\";\nimport { CreateButton } from \"@/components/admin/create-button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\n\nexport const ProductEmpty = () => {\n  return (\n    <Card className=\"max-w-md mx-auto mt-16\">\n      <CardContent className=\"flex flex-col items-center justify-center p-8 text-center\">\n        <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4\">\n          <Package className=\"w-8 h-8 text-primary\" />\n        </div>\n        <h3 className=\"text-lg font-semibold mb-2\">No Products Yet</h3>\n        <p className=\"text-sm text-muted-foreground mb-6\">\n          Start building your product catalog. Add your first product to track inventory and sales\n          opportunities.\n        </p>\n        <CreateButton label=\"Add First Product\" />\n      </CardContent>\n    </Card>\n  );\n};\n","/**\n * Product Filter Configuration\n *\n * Defines how product filters are displayed in the FilterChipBar.\n *\n * @module products/productFilterConfig\n */\n\nimport { validateFilterConfig } from \"../filters/filterConfigSchema\";\n\n/**\n * Product status choices\n * Matches ProductListFilter.tsx status options\n */\nconst PRODUCT_STATUS_CHOICES = [\n  { id: \"active\", name: \"Active\" },\n  { id: \"discontinued\", name: \"Discontinued\" },\n  { id: \"coming_soon\", name: \"Coming Soon\" },\n];\n\n/**\n * Filter configuration for Products list\n *\n * Matches filters available in ProductListFilter.tsx:\n * - status: Product availability status\n * - category: Product category (from distinct_product_categories view)\n * - principal_id: Principal organization reference\n */\nexport const PRODUCT_FILTER_CONFIG = validateFilterConfig([\n  {\n    key: \"status\",\n    label: \"Status\",\n    type: \"select\",\n    choices: PRODUCT_STATUS_CHOICES,\n  },\n  {\n    key: \"category\",\n    label: \"Category\",\n    type: \"select\",\n    // Uses useCategoryNames hook to resolve names from distinct_product_categories view\n    reference: \"categories\",\n  },\n  {\n    key: \"principal_id\",\n    label: \"Principal\",\n    type: \"reference\",\n    reference: \"organizations\",\n  },\n]);\n","import { useGetIdentity, useListContext } from \"ra-core\";\nimport { FunctionField } from \"react-admin\";\nimport { List } from \"@/components/admin/list\";\nimport { TextField } from \"@/components/admin/text-field\";\nimport { ReferenceField } from \"@/components/admin/reference-field\";\nimport { CreateButton } from \"@/components/admin/create-button\";\nimport { SortButton } from \"@/components/admin/sort-button\";\nimport { FloatingCreateButton } from \"@/components/admin/FloatingCreateButton\";\nimport { BulkActionsToolbar } from \"@/components/admin/bulk-actions-toolbar\";\nimport { StandardListLayout } from \"@/components/layouts/StandardListLayout\";\nimport { PremiumDatagrid } from \"@/components/admin/PremiumDatagrid\";\nimport { ProductListSkeleton } from \"@/components/ui/list-skeleton\";\nimport { TopToolbar } from \"../layout/TopToolbar\";\nimport { useSlideOverState } from \"@/hooks/useSlideOverState\";\nimport { useListKeyboardNavigation } from \"@/hooks/useListKeyboardNavigation\";\nimport { useFilterCleanup } from \"../hooks/useFilterCleanup\";\nimport { FilterChipBar } from \"../filters\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Package } from \"lucide-react\";\nimport { COLUMN_VISIBILITY } from \"../utils/listPatterns\";\nimport { ProductListFilter } from \"./ProductListFilter\";\nimport { ProductSlideOver } from \"./ProductSlideOver\";\nimport { ProductEmpty } from \"./ProductEmpty\";\nimport { PRODUCT_FILTER_CONFIG } from \"./productFilterConfig\";\nimport { PageTutorialTrigger } from \"../tutorial\";\n\nconst DISTRIBUTOR_CODE_LABELS: Record<string, string> = {\n  usf_code: \"USF\",\n  sysco_code: \"Sysco\",\n  gfs_code: \"GFS\",\n  pfg_code: \"PFG\",\n  greco_code: \"Greco\",\n  gofo_code: \"GOFO\",\n  rdp_code: \"RDP\",\n  wilkens_code: \"Wilkens\",\n};\n\nfunction hasDistributorCodes(record: any): boolean {\n  return Object.keys(DISTRIBUTOR_CODE_LABELS).some(\n    (field) => record[field]\n  );\n}\n\nfunction DistributorCodesPopover({ record }: { record: any }) {\n  if (!hasDistributorCodes(record)) {\n    return <span className=\"text-muted-foreground\">—</span>;\n  }\n\n  const codes = Object.entries(DISTRIBUTOR_CODE_LABELS)\n    .filter(([field]) => record[field])\n    .map(([field, label]) => ({ label, value: record[field] }));\n\n  return (\n    <Popover>\n      <PopoverTrigger asChild>\n        <button className=\"flex items-center gap-1 text-primary hover:text-primary/80\">\n          <Package className=\"h-4 w-4\" />\n          <span className=\"text-xs\">{codes.length} codes</span>\n        </button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-64\">\n        <div className=\"space-y-2\">\n          <h4 className=\"font-medium text-sm\">Distributor Codes</h4>\n          <div className=\"space-y-1\">\n            {codes.map(({ label, value }) => (\n              <div key={label} className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">{label}:</span>\n                <span className=\"font-mono\">{value}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\n/**\n * ProductList - Standard list page for Product records\n *\n * Follows ContactList reference pattern:\n * - Identity-aware rendering with skeleton loading\n * - Keyboard navigation with slide-over integration\n * - BulkActionsToolbar for selection operations\n * - Responsive columns using COLUMN_VISIBILITY semantic presets\n */\nexport const ProductList = () => {\n  const { data: identity, isPending: isIdentityPending } = useGetIdentity();\n  const { slideOverId, isOpen, mode, openSlideOver, closeSlideOver, toggleMode } =\n    useSlideOverState();\n\n  // Clean up stale cached filters from localStorage\n  useFilterCleanup(\"products\");\n\n  if (isIdentityPending) {\n    return <ProductListSkeleton />;\n  }\n  if (!identity) {\n    return null;\n  }\n\n  return (\n    <>\n      <div data-tutorial=\"products-list\">\n        <List\n          title={false}\n          actions={<ProductListActions />}\n          perPage={25}\n          sort={{ field: \"name\", order: \"ASC\" }}\n        >\n          <ProductListLayout openSlideOver={openSlideOver} isSlideOverOpen={isOpen} />\n          <FloatingCreateButton />\n        </List>\n      </div>\n      <ProductSlideOver\n        recordId={slideOverId}\n        isOpen={isOpen}\n        mode={mode}\n        onClose={closeSlideOver}\n        onModeToggle={toggleMode}\n      />\n      <PageTutorialTrigger chapter=\"products\" position=\"bottom-left\" />\n    </>\n  );\n};\n\n/**\n * ProductListLayout - Handles loading, empty states, and datagrid rendering\n */\nconst ProductListLayout = ({\n  openSlideOver,\n  isSlideOverOpen,\n}: {\n  openSlideOver: (id: number, mode: \"view\" | \"edit\") => void;\n  isSlideOverOpen: boolean;\n}) => {\n  const { data, isPending, filterValues } = useListContext();\n\n  // Keyboard navigation for list rows\n  // Disabled when slide-over is open to prevent conflicts\n  const { focusedIndex } = useListKeyboardNavigation({\n    onSelect: (id) => openSlideOver(Number(id), \"view\"),\n    enabled: !isSlideOverOpen,\n  });\n\n  const hasFilters = filterValues && Object.keys(filterValues).length > 0;\n\n  // Show skeleton during initial load\n  if (isPending) {\n    return (\n      <StandardListLayout resource=\"products\" filterComponent={<ProductListFilter />}>\n        <ProductListSkeleton />\n      </StandardListLayout>\n    );\n  }\n\n  if (!data?.length && !hasFilters) {\n    return <ProductEmpty />;\n  }\n\n  return (\n    <>\n      <StandardListLayout resource=\"products\" filterComponent={<ProductListFilter />}>\n        <FilterChipBar filterConfig={PRODUCT_FILTER_CONFIG} />\n        <PremiumDatagrid\n          onRowClick={(id) => openSlideOver(Number(id), \"view\")}\n          focusedIndex={focusedIndex}\n        >\n          {/* Column 1: Product Name - Primary identifier (sortable) - always visible */}\n          <TextField source=\"name\" label=\"Product Name\" {...COLUMN_VISIBILITY.alwaysVisible} />\n\n          {/* Column 2: Distributor Codes - Popover display (non-sortable) - always visible */}\n          <FunctionField\n            label=\"Dist. Codes\"\n            sortable={false}\n            render={(record: any) => <DistributorCodesPopover record={record} />}\n            {...COLUMN_VISIBILITY.alwaysVisible}\n          />\n\n          {/* Column 3: Category - Classification badge (sortable) - always visible */}\n          <FunctionField\n            label=\"Category\"\n            sortBy=\"category\"\n            render={(record: any) => <CategoryBadge category={record.category} />}\n            {...COLUMN_VISIBILITY.alwaysVisible}\n          />\n\n          {/* Column 4: Status - Lifecycle badge (sortable) - always visible */}\n          <FunctionField\n            label=\"Status\"\n            sortBy=\"status\"\n            render={(record: any) => <StatusBadge status={record.status} />}\n            {...COLUMN_VISIBILITY.alwaysVisible}\n          />\n\n          {/* Column 5: Principal - Organization reference (sortable) - hidden on tablet/mobile */}\n          <ReferenceField\n            source=\"principal_id\"\n            reference=\"organizations\"\n            label=\"Principal\"\n            link={false}\n            sortable\n            {...COLUMN_VISIBILITY.desktopOnly}\n          >\n            <TextField source=\"name\" />\n          </ReferenceField>\n\n          {/* Column 6: Certifications - Badges list (non-sortable) - hidden on tablet/mobile */}\n          <FunctionField\n            label=\"Certifications\"\n            sortable={false}\n            render={(record: any) => <CertificationBadges certifications={record.certifications} />}\n            {...COLUMN_VISIBILITY.desktopOnly}\n          />\n        </PremiumDatagrid>\n      </StandardListLayout>\n      <BulkActionsToolbar />\n    </>\n  );\n};\n\n/**\n * ProductListActions - TopToolbar with sort and create actions\n */\nconst ProductListActions = () => (\n  <TopToolbar>\n    <SortButton fields={[\"name\", \"category\", \"status\"]} />\n    <span data-tutorial=\"create-product-btn\">\n      <CreateButton />\n    </span>\n  </TopToolbar>\n);\n\n/**\n * CategoryBadge - Display product category with proper formatting\n */\nfunction CategoryBadge({ category }: { category: string }) {\n  return <Badge variant=\"outline\">{formatSnakeCase(category)}</Badge>;\n}\n\n/**\n * StatusBadge - Display product status with semantic colors\n */\nfunction StatusBadge({ status }: { status: string }) {\n  let variant: \"default\" | \"secondary\" | \"destructive\" | \"outline\" = \"default\";\n\n  switch (status) {\n    case \"active\":\n      variant = \"default\";\n      break;\n    case \"discontinued\":\n      variant = \"destructive\";\n      break;\n    case \"coming_soon\":\n      variant = \"secondary\";\n      break;\n    default:\n      variant = \"outline\";\n  }\n\n  return <Badge variant={variant}>{formatSnakeCase(status)}</Badge>;\n}\n\n/**\n * CertificationBadges - Display up to 3 certifications with overflow indicator\n */\nfunction CertificationBadges({ certifications }: { certifications?: string[] }) {\n  if (!certifications || certifications.length === 0) {\n    return <span className=\"text-muted-foreground\">—</span>;\n  }\n\n  return (\n    <div className=\"flex gap-1 flex-wrap\">\n      {certifications.slice(0, 3).map((cert, index) => (\n        <Badge key={index} variant=\"outline\" className=\"text-xs\">\n          {cert}\n        </Badge>\n      ))}\n      {certifications.length > 3 && (\n        <Badge variant=\"secondary\" className=\"text-xs\">\n          +{certifications.length - 3}\n        </Badge>\n      )}\n    </div>\n  );\n}\n\n/**\n * Format snake_case string to Title Case\n */\nfunction formatSnakeCase(value: string): string {\n  return value\n    .split(\"_\")\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(\" \");\n}\n\nexport default ProductList;\n"],"names":["ProductListFilter","__name","data","principals","useGetList","filter","organization_type","pagination","page","perPage","sort","field","order","staleTime","gcTime","refetchOnWindowFocus","categories","isLoading","isLoadingCategories","jsxs","className","children","jsx","FilterLiveForm","SearchInput","source","placeholder","FilterCategory","icon","Tag","label","id","name","map","status","ToggleFilterButton","value","Package","category","length","Building2","principal","principal_id","DISTRIBUTOR_CODE_LABELS","usf_code","sysco_code","gfs_code","pfg_code","greco_code","gofo_code","rdp_code","wilkens_code","hasDistributorCodes","record","Object","keys","some","key","ProductDetailsTab","mode","onModeToggle","update","useUpdate","notify","useNotify","handleSave","previousData","type","error","productCategories","PRODUCT_CATEGORIES","split","word","charAt","toUpperCase","slice","join","productStatuses","PRODUCT_STATUSES","handleCreateCategory","categoryName","RecordContextProvider","Form","onSubmit","TextInput","multiline","rows","AutocompleteInput","choices","onCreate","createItemLabel","SelectInput","ReferenceInput","reference","optionText","AsideSection","title","Card","CardContent","description","Badge","variant","StatusBadge","ReferenceField","link","TextField","entries","ProductRelationshipsTab","opportunityProducts","isLoadingOpportunities","product_id_reference","oppProduct","notes","created_at","DateField","options","year","month","day","updated_at","ProductSlideOver","recordId","isOpen","onClose","tabs","component","PackageIcon","Link2Icon","recordRepresentation","ResourceSlideOver","resource","ProductEmpty","CreateButton","PRODUCT_FILTER_CONFIG","validateFilterConfig","DistributorCodesPopover","codes","Popover","PopoverTrigger","asChild","PopoverContent","ProductList","identity","isPending","isIdentityPending","useGetIdentity","slideOverId","openSlideOver","closeSlideOver","toggleMode","useSlideOverState","useFilterCleanup","ProductListSkeleton","Fragment","List","actions","ProductListActions","ProductListLayout","isSlideOverOpen","FloatingCreateButton","PageTutorialTrigger","chapter","position","filterValues","useListContext","focusedIndex","useListKeyboardNavigation","onSelect","Number","enabled","hasFilters","StandardListLayout","filterComponent","FilterChipBar","filterConfig","PremiumDatagrid","onRowClick","COLUMN_VISIBILITY","alwaysVisible","FunctionField","sortable","render","sortBy","CategoryBadge","desktopOnly","CertificationBadges","certifications","BulkActionsToolbar","TopToolbar","SortButton","fields","formatSnakeCase","cert","index"],"mappings":"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"}