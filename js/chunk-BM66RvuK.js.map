{"version":3,"file":"chunk-BM66RvuK.js","sources":["../../src/components/admin/cancel-button.tsx","../../src/components/admin/simple-form.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport { CircleX } from \"lucide-react\";\nimport { Translate } from \"ra-core\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useFormState } from \"react-hook-form\";\n\nimport { Button } from \"../ui/button\";\n\ninterface CancelButtonProps extends React.ComponentProps<\"button\"> {\n  /**\n   * Skip dirty state check. Use when CancelButton is outside a Form context\n   * or when you want to allow navigation without confirmation.\n   * @default false\n   */\n  skipDirtyCheck?: boolean;\n}\n\n/**\n * CancelButton - Navigation button with dirty state protection\n *\n * When used inside a Form context (react-hook-form), this button will:\n * - Check if the form has unsaved changes via isDirty\n * - Show a browser confirmation dialog before navigating away\n * - Prevent accidental data loss\n *\n * Use skipDirtyCheck={true} when used outside form context.\n */\nexport function CancelButton({ skipDirtyCheck = false, ...props }: CancelButtonProps) {\n  const navigate = useNavigate();\n\n  // Get form state for dirty check\n  // Note: Must be inside FormProvider context. Use skipDirtyCheck=true if not.\n  const { isDirty } = useFormState({ disabled: skipDirtyCheck });\n\n  const handleCancel = useCallback(() => {\n    if (!skipDirtyCheck && isDirty) {\n      const confirmed = window.confirm(\n        \"You have unsaved changes. Are you sure you want to leave?\"\n      );\n      if (!confirmed) return;\n    }\n    navigate(-1);\n  }, [skipDirtyCheck, isDirty, navigate]);\n\n  return (\n    <Button\n      type=\"button\"\n      variant=\"ghost\"\n      onClick={handleCancel}\n      className=\"cursor-pointer\"\n      {...props}\n    >\n      <CircleX />\n      <Translate i18nKey=\"ra.action.cancel\">Cancel</Translate>\n    </Button>\n  );\n}\n","import * as React from \"react\";\nimport type { ReactNode } from \"react\";\nimport { Children } from \"react\";\nimport { Form, type FormProps } from \"ra-core\";\nimport { cn } from \"@/lib/utils\";\nimport { CancelButton } from \"@/components/admin/cancel-button\";\nimport { SaveButton } from \"@/components/admin/form\";\n\nexport const SimpleForm = ({\n  children,\n  className,\n  toolbar = defaultFormToolbar,\n  ...rest\n}: {\n  children: ReactNode;\n  className?: string;\n  toolbar?: ReactNode;\n} & FormProps) => (\n  <Form className={cn(`flex flex-col gap-4 w-full max-w-lg`, className)} {...rest}>\n    {children}\n    {toolbar}\n  </Form>\n);\n\nexport const FormToolbar = ({ children, className, ...rest }: FormToolbarProps) => (\n  <div\n    {...rest}\n    className={cn(\n      \"sticky mt-6 mb-4 pt-4 pb-4 px-6 md:block md:pt-2 md:pb-0 bottom-0 bg-card\",\n      className\n    )}\n    role=\"toolbar\"\n  >\n    {Children.count(children) === 0 ? (\n      <div className=\"flex flex-row gap-2 justify-end\">\n        <CancelButton />\n        <SaveButton />\n      </div>\n    ) : (\n      children\n    )}\n  </div>\n);\n\nexport interface FormToolbarProps extends React.HTMLAttributes<HTMLDivElement> {\n  children?: ReactNode;\n  className?: string;\n}\n\nconst defaultFormToolbar = <FormToolbar />;\n"],"names":["CancelButton","skipDirtyCheck","props","navigate","useNavigate","isDirty","useFormState","disabled","handleCancel","useCallback","window","confirm","jsxs","Button","type","variant","onClick","className","children","jsx","CircleX","Translate","i18nKey","__name","SimpleForm","toolbar","defaultFormToolbar","rest","Form","cn","FormToolbar","role","Children","count","SaveButton"],"mappings":"8TA2BO,SAASA,GAAaC,eAAEA,GAAiB,KAAUC,IACxD,MAAMC,EAAWC,KAIXC,QAAEA,GAAYC,EAAa,CAAEC,SAAUN,IAEvCO,EAAeC,EAAAA,YAAY,KAC/B,IAAKR,GAAkBI,EAAS,CAI9B,IAHkBK,OAAOC,QACvB,6DAEc,MAClB,CACAR,GAAS,IACR,CAACF,EAAgBI,EAASF,IAE7B,OACES,EAAAA,KAACC,EAAA,CACCC,KAAK,SACLC,QAAQ,QACRC,QAASR,EACTS,UAAU,oBACNf,EAEJgB,SAAA,CAAAC,EAAAA,IAACC,EAAA,IACDD,EAAAA,IAACE,EAAA,CAAUC,QAAQ,mBAAmBJ,SAAA,aAG5C,CA7BgBK,EAAAvB,EAAA,gBCnBT,MAAMwB,EAAaD,EAAA,EACxBL,WACAD,YACAQ,UAAUC,KACPC,KAMHf,OAACgB,GAAKX,UAAWY,EAAG,sCAAuCZ,MAAgBU,EACxET,SAAA,CAAAA,EACAO,KAZqB,cAgBbK,MAAiBZ,WAAUD,eAAcU,KACpDR,EAAAA,IAAC,MAAA,IACKQ,EACJV,UAAWY,EACT,4EACAZ,GAEFc,KAAK,UAEJb,SAA6B,IAA7Bc,EAAAA,SAASC,MAAMf,GACdN,EAAAA,KAAC,MAAA,CAAIK,UAAU,kCACbC,SAAA,CAAAC,EAAAA,IAACnB,EAAA,UACAkC,EAAA,CAAA,MAGHhB,IAfqB,eAyBrBQ,QAAsBI,EAAA"}