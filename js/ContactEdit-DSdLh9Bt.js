var e=Object.defineProperty,s=(s,a)=>e(s,"name",{value:a,configurable:!0});import{P as a,u as t,Q as n,j as i,i as l,W as r,$ as o,at as c,J as d,ax as m,a0 as u,ay as h,ak as x,ar as p,U as j,az as g,aA as f,au as v,aB as k}from"./chunk-ByJg_QQB.js";import{D as y,e as w,f as b,g as C,h as N,L as _,i as S,j as T,k as D,m as E,M as A,N as F,n as M,R as O,t as P,p as R,B as z,u as I,U as q,V as L,W as $,X as V,Y as U,T as K,w as W,q as B,s as Q,Z as X,$ as Y,a0 as H,a1 as J,a2 as Z,a3 as G,a4 as ee,a5 as se,d as ae,r as te,C as ne,a as ie}from"../assets/index-BoLku8RR.js";import{R as le}from"./chunk-CFwunwMO.js";import{A as re}from"./chunk-nUtrHAIa.js";import{R as oe}from"./chunk-D6FmavVW.js";import{S as ce}from"./chunk-C5fZsuMg.js";import{r as de}from"./chunk-1NZFT-6z.js";import{c as me}from"./chunk-X0dz3Jmp.js";import{a5 as ue,ak as he,f as xe,g as pe,X as je,al as ge,z as fe,ac as ve,ad as ke}from"./chunk-Bc6KM1xM.js";import{R as ye}from"./chunk-DbeoRBEW.js";import{D as we}from"./chunk-DkiUngdk.js";import{C as be}from"./chunk-Dn-NAOCt.js";import Ce from"./TaskEdit-yVnWErbT.js";import{m as Ne,n as _e,o as Se,s as Te,q as De,r as Ee,t as Ae,d as Fe}from"./chunk-DwAffUXc.js";import{d as Me,F as Oe}from"./chunk-JxeXaC9i.js";import{a as Pe}from"./chunk-Cw2QhEKy.js";import{g as Re,n as ze,S as Ie}from"./chunk-B_VTrDwS.js";import{F as qe}from"./chunk-DpghI3EP.js";import{A as Le,E as $e}from"./chunk-l1wHq9zq.js";import{E as Ve}from"./chunk-DfGVVS-c.js";import{R as Ue}from"./chunk-Sp4WOLwD.js";import{S as Ke}from"./chunk-BI4rbfTW.js";import{A as We}from"./chunk-BY7AmvEs.js";import"./chunk-CRKBdUTG.js";import{S as Be}from"./chunk-j7Lqvg-1.js";import{C as Qe}from"./chunk-B8xrZQJc.js";import{F as Xe}from"./chunk-C0lbEKTL.js";import"./chunk-knA4lag3.js";import"./chunk-Tyyhsnez.js";import"./chunk-XoqkUGE_.js";import"./chunk-CMQLDEz_.js";import"./chunk-C_u3nriX.js";import"./chunk-B9H_70fs.js";import"./chunk-Dc4zIuSl.js";import"./chunk-B1s-jt27.js";import"./chunk-6VRQ4sAj.js";import"./chunk-BM66RvuK.js";import"./chunk-acJ-0OJh.js";import"./chunk-B5Y5c6gs.js";import"./chunk-DhfTvo06.js";import"./chunk-C4sNritB.js";import"./chunk-DsNwAyt-.js";const Ye={Communication:[{value:"call",label:"Call"},{value:"email",label:"Email"},{value:"check_in",label:"Check-in"},{value:"social",label:"Social"}],Meetings:[{value:"meeting",label:"Meeting"},{value:"demo",label:"Demo"},{value:"site_visit",label:"Site Visit"},{value:"trade_show",label:"Trade Show"}],Documentation:[{value:"proposal",label:"Proposal"},{value:"contract_review",label:"Contract Review"},{value:"follow_up",label:"Follow-up"},{value:"note",label:"Note"},{value:"sample",label:"Sample"}]},He={Call:"call",Email:"email",Meeting:"meeting","Follow-up":"follow_up",Demo:"demo",Proposal:"proposal",Other:"check_in"},Je=s(e=>{const s=e.toLowerCase();return s.includes("call")||s.includes("phone")?"call":s.includes("email")||s.includes("mail")?"email":s.includes("meeting")||s.includes("meet")?"meeting":s.includes("demo")||s.includes("demonstration")?"demo":s.includes("proposal")||s.includes("quote")?"proposal":s.includes("follow")||s.includes("check-in")?"follow_up":s.includes("visit")||s.includes("site")?"site_visit":s.includes("contract")||s.includes("agreement")?"contract_review":s.includes("trade")||s.includes("show")||s.includes("expo")?"trade_show":s.includes("social")||s.includes("linkedin")||s.includes("network")?"social":s.includes("sample")||s.includes("product")?"sample":s.includes("note")||s.includes("memo")?"note":"check_in"},"inferActivityTypeFromTitle"),Ze=s(({open:e,onClose:l,task:r})=>{const o=a(),c=t(),d=s(()=>r.type&&"Other"!==r.type?He[r.type]||"check_in":Je(r.title),"getInitialActivityType"),[m,u]=de.useState(d()),[h,x]=de.useState(`Completed task: ${r.title}`),[p,j]=de.useState(!1),[g,f]=de.useState(null),{data:v}=n("opportunities",{id:r.opportunity_id||0},{enabled:!!r.opportunity_id});de.useEffect(()=>{v&&f(v.customer_organization_id)},[v]);const k=s(async()=>{j(!0);try{await o.create("activities",{data:{activity_type:"interaction",type:m,subject:`Completed: ${r.title}`,description:h,activity_date:(new Date).toISOString(),contact_id:r.contact_id||null,opportunity_id:r.opportunity_id||null,organization_id:g||null,related_task_id:r.id,follow_up_required:!1}}),c("Activity logged successfully",{type:"success"}),l()}catch(e){c("Failed to log activity",{type:"error"})}finally{j(!1)}},"handleSave"),I=s(()=>{l()},"handleSkip");return i.jsx(y,{open:e,onOpenChange:s(e=>!e&&l(),"onOpenChange"),children:i.jsxs(w,{className:"sm:max-w-[425px]",children:[i.jsxs(b,{children:[i.jsx(C,{children:"Log Activity Details"}),i.jsx(N,{children:"What happened with this task? (optional)"})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx(_,{htmlFor:"activity-type",children:"Activity Type"}),i.jsxs(S,{value:m,onValueChange:u,disabled:p,children:[i.jsx(T,{id:"activity-type",children:i.jsx(D,{})}),i.jsxs(E,{children:[i.jsxs(A,{children:[i.jsx(F,{children:"Communication"}),Ye.Communication.map(e=>i.jsx(M,{value:e.value,children:e.label},e.value))]}),i.jsx(O,{}),i.jsxs(A,{children:[i.jsx(F,{children:"Meetings"}),Ye.Meetings.map(e=>i.jsx(M,{value:e.value,children:e.label},e.value))]}),i.jsx(O,{}),i.jsxs(A,{children:[i.jsx(F,{children:"Documentation"}),Ye.Documentation.map(e=>i.jsx(M,{value:e.value,children:e.label},e.value))]})]})]})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(_,{htmlFor:"notes",children:"Notes"}),i.jsx(P,{id:"notes",value:h,onChange:s(e=>x(e.target.value),"onChange"),placeholder:"What was discussed or accomplished?",className:"min-h-[100px]",disabled:p})]})]}),i.jsxs(R,{className:"gap-2 sm:gap-0",children:[i.jsx(z,{type:"button",variant:"outline",onClick:I,disabled:p,children:"Skip"}),i.jsx(z,{type:"button",onClick:k,disabled:p,children:p?"Saving...":"Save Activity"})]})]})})},"QuickLogActivity"),Ge=s(({selectContact:e,display:n="chip"})=>{const{data:u,isPending:h}=l(),x=a(),[p]=r(),j=t(),{taskTypes:g}=I(),f=o(),[v,k]=de.useState(!1),_=s(()=>{k(!0)},"handleOpen"),S=s(async e=>{k(!1);try{const s=await x.getOne("contacts",{id:e.contact_id});if(!s.data)return void j("Task created, but couldn't update contact last_seen",{type:"warning"});await p("contacts",{id:s.data.id,data:{last_seen:(new Date).toISOString()},previousData:s.data}),j("Task added")}catch(s){j("Task created, but couldn't update contact",{type:"warning"})}},"handleSuccess");return h||!u?null:i.jsxs(i.Fragment,{children:["icon"===n?i.jsx(q,{children:i.jsxs(L,{children:[i.jsx($,{asChild:!0,children:i.jsx(z,{size:"sm",variant:"ghost",className:"h-11 w-11 p-0 cursor-pointer",onClick:_,children:i.jsx(ue,{className:"w-4 h-4"})})}),i.jsx(V,{children:"Create task"})]})}):i.jsx("div",{className:"my-2",children:i.jsxs(z,{variant:"outline",className:"h-11 cursor-pointer",onClick:_,size:"sm",children:[i.jsx(ue,{className:"w-4 h-4"}),"Add task"]})}),i.jsx(c,{resource:"tasks",record:{...U(),contact_id:f?.id,sales_id:u.id},mutationOptions:{onSuccess:S},children:i.jsx(y,{open:v,onOpenChange:s(()=>k(!1),"onOpenChange"),children:i.jsx(w,{className:"lg:max-w-xl overflow-y-auto max-h-9/10 top-1/20 translate-y-0",children:i.jsxs(d,{className:"flex flex-col gap-4",children:[i.jsxs(b,{children:[i.jsxs(C,{children:[e?"Create a new task":"Create a new task for ",!e&&i.jsx(m,{record:f,resource:"contacts"})]}),i.jsx(N,{children:"Add a new task with title, description, due date, and priority."})]}),i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx(K,{source:"title",label:"Task Title *",className:"m-0",helperText:"Required field"}),i.jsx(K,{source:"description",label:"Description",multiline:!0,className:"m-0",helperText:"Optional details"}),e&&i.jsx(oe,{source:"contact_id",reference:"contacts_summary",children:i.jsx(re,{label:"Contact *",optionText:me,helperText:"Required field"})}),i.jsxs("div",{className:"flex flex-row gap-4",children:[i.jsx(K,{source:"due_date",label:"Due Date *",helperText:"Required field",type:"date"}),i.jsx(ce,{source:"type",label:"Type *",choices:g.map(e=>({id:e,name:e})),helperText:"Required field"})]})]}),i.jsx(R,{className:"w-full justify-end",children:i.jsx(W,{})})]})})})})]})},"AddTask"),es=s(({task:e,showContact:a})=>{const n=t(),l=u(),o=Ne(),c=B(e.due_date)?_e(B(e.due_date)):o,d=Se(o,1),m=Te(De(o,1),{weekStartsOn:1}),x=!Ee(c,o),p=Ae(c,m),j=Fe(d,"EEE, MMM d"),g=Fe(m,"EEE, MMM d"),[f,v]=de.useState(!1),[k,y]=de.useState(!1),w=s(()=>{v(!1)},"handleCloseEdit"),b=s(()=>{y(!1)},"handleCloseActivityDialog"),[C,{isPending:N,isSuccess:_,variables:S}]=r(),{handleDelete:T}=h({record:e,redirect:!1,mutationOptions:{onSuccess(){n("Task deleted successfully",{undoable:!0})}}}),D=s(()=>{v(!0)},"handleEdit"),E=s(a=>{C("tasks",{id:e.id,data:{id:e.id,completed:a,completed_at:a?(new Date).toISOString():null},previousData:e},{onSuccess:s(()=>{a&&y(!0)},"onSuccess")})},"handleCheck");de.useEffect(()=>{!N&&_&&null==S?.data?.completed_at&&l.invalidateQueries({queryKey:["tasks","getList"]})},[l,N,_,S]);const A=`checkbox-list-label-${e.id}`;return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[i.jsx(be,{id:A,checked:!!e.completed_at,onCheckedChange:E,disabled:N,className:"mt-1"}),i.jsxs("div",{className:Q("flex-grow",e.completed_at&&"line-through"),children:[i.jsxs("div",{className:"text-sm",children:[e.type&&"Other"!==e.type&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"font-semibold text-sm",children:e.type})," "]}),e.title,e.description&&i.jsxs("span",{className:"text-muted-foreground",children:[" - ",e.description]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["due ",i.jsx(we,{source:"due_date",record:e}),a&&i.jsx(ye,{source:"contact_id",reference:"contacts",record:e,link:"show",className:"inline text-sm text-muted-foreground",render:s(({referenceRecord:e})=>e?i.jsxs(i.Fragment,{children:[" ","(Re: ",e?.first_name," ",e?.last_name,")"]}):null,"render")})]})]})]}),i.jsxs(X,{children:[i.jsx(Y,{asChild:!0,children:i.jsx(z,{variant:"ghost",size:"icon",className:"shrink-0","aria-label":"task actions",children:i.jsx(he,{className:"h-4 w-4"})})}),i.jsxs(H,{align:"end",children:[x&&i.jsxs(J,{className:"cursor-pointer",onClick:s(()=>{C("tasks",{id:e.id,data:{...e,due_date:Fe(d,"yyyy-MM-dd")},previousData:e})},"onClick"),children:["Postpone to tomorrow (",j,")"]}),p&&i.jsxs(J,{className:"cursor-pointer",onClick:s(()=>{C("tasks",{id:e.id,data:{...e,due_date:Fe(m,"yyyy-MM-dd")},previousData:e})},"onClick"),children:["Postpone to next week (",g,")"]}),i.jsx(J,{className:"cursor-pointer",onClick:D,children:"Edit"}),i.jsx(J,{className:"cursor-pointer",onClick:T,children:"Delete"})]})]})]}),f&&i.jsx(Ce,{taskId:e.id,open:f,close:w}),k&&i.jsx(Ze,{open:k,onClose:b,task:e})]})},"Task"),ss=s(({showContact:e,className:s})=>{const{data:a,error:t,isPending:n}=x();if(n||t||0===a.length)return null;const l=a.filter(e=>{if(!e.completed_at)return!0;const s=B(e.completed_at);return!s||Ee(s,new Date(Date.now()-3e5))});return i.jsx("div",{className:Q("space-y-2",s),children:l.map(s=>i.jsx(es,{task:s,showContact:e},s.id))})},"TasksIterator"),as=Z,ts=s(({color:e,handleClick:s,selected:a})=>{const t=ze(e),n=Re(e);return i.jsx("button",{type:"button",className:`\n        w-11 h-11 rounded-full inline-block m-1 transition-all\n        ${n}\n        ${a?"ring-2 ring-offset-2 ring-primary shadow-md scale-110":"hover:scale-105 hover:shadow-sm"}\n      `,onClick:s,"aria-label":`Select ${t} color`,"aria-pressed":a})},"RoundButton");function ns({open:e,tag:a,title:t,onClose:n,onSubmit:l}){const r=de.useMemo(()=>G.partial().parse({name:a?.name??"",color:a?.color??"warm"}),[a]),o=Me({resolver:Pe(G),defaultValues:r,mode:"onSubmit"}),{register:c,handleSubmit:d,reset:m,setValue:u,watch:h,formState:{errors:x,isSubmitting:p,isValid:j,isDirty:g}}=o,f=h("color");de.useEffect(()=>{e&&m({name:a?.name??"",color:a?.color??"warm"})},[e,a,m]);const v=s(async e=>{await l({name:e.name,color:e.color}),m(r),n()},"handleFormSubmit"),k=s(()=>{if(g){if(!window.confirm("You have unsaved changes. Are you sure you want to close?"))return}m(r),n()},"handleClose");return i.jsx(y,{open:e,onOpenChange:k,children:i.jsx(w,{className:"sm:max-w-lg",children:i.jsx(Oe,{...o,children:i.jsxs("form",{onSubmit:d(v),children:[i.jsxs(b,{children:[i.jsx(C,{children:t}),i.jsx(N,{children:"Enter a name and choose a color for your tag."})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsx(qe,{errors:x,fieldLabels:{name:"Tag Name",color:"Color"}}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_,{htmlFor:"tag-name",children:"Tag name"}),i.jsx(ee,{id:"tag-name",...c("name"),placeholder:"Enter tag name","aria-invalid":!!x.name,"aria-describedby":x.name?"name-error":void 0}),x.name&&i.jsx("p",{id:"name-error",className:"text-sm text-destructive",role:"alert",children:x.name.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(_,{children:"Color"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:as.map(e=>i.jsxs("div",{className:"relative group",children:[i.jsx(ts,{color:e,selected:e===f,handleClick:s(()=>{u("color",e,{shouldValidate:!0})},"handleClick")}),i.jsx("span",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:e})]},e))}),x.color&&i.jsx("p",{id:"color-error",className:"text-sm text-destructive mt-1",role:"alert",children:x.color.message})]})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx(z,{type:"submit",variant:"outline",disabled:p,className:Q(se({variant:"outline"}),"text-primary",p?"opacity-50 cursor-not-allowed":"cursor-pointer"),children:p?i.jsxs(i.Fragment,{children:[i.jsx(xe,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(pe,{}),"Save"]})})})]})})})})}function is({tag:e,open:a,onClose:t,onSuccess:n}){const[l]=r(),o=s(async a=>{await l("tags",{id:e.id,data:a,previousData:e},{onSuccess:s(async e=>{await(n?.(e))},"onSuccess")})},"handleEditTag");return i.jsx(ns,{open:a,title:"Edit tag",onClose:t,onSubmit:o,tag:e})}function ls({tag:e,onUnlink:a}){const[t,n]=de.useState(!1),l=s(()=>{n(!1)},"handleClose"),r=s(()=>{n(!0)},"handleClick");return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:Q("inline-flex items-center gap-1 px-2 py-1 text-xs rounded-md cursor-pointer","border border-[var(--tag-border)]","transition-all duration-200","hover:shadow-sm hover:scale-[1.02] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",Re(e.color)),onClick:r,tabIndex:0,role:"button",onKeyDown:s(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),r())},"onKeyDown"),children:[e.name,i.jsx("button",{onClick:s(e=>{e.stopPropagation(),a()},"onClick"),className:"relative -my-2 -mr-1 ml-0.5 h-11 w-11 flex items-center justify-center transition-colors cursor-pointer hover:opacity-70 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1 rounded-sm","aria-label":`Remove ${e.name} tag`,children:i.jsx(je,{className:"w-3 h-3"})})]}),i.jsx(is,{tag:e,open:t,onClose:l})]})}function rs({open:e,onClose:a,onSuccess:t}){const[n]=p(),l=s(async e=>{await n("tags",{data:e},{onSuccess:s(async e=>{await(t?.(e))},"onSuccess")})},"handleCreateTag");return i.jsx(ns,{open:e,title:"Create a new tag",onClose:a,onSubmit:l})}s(ns,"TagDialog"),s(is,"TagEditModal"),s(ls,"TagChip"),s(rs,"TagCreateModal");const os=s(()=>{const e=o(),[a,t]=de.useState(!1),{data:n,isPending:l}=j("tags",{pagination:{page:1,perPage:10},sort:{field:"name",order:"ASC"}}),{data:c,isPending:d}=g("tags",{ids:e?.tags},{enabled:e&&e.tags&&e.tags.length>0}),[m]=r(),u=n&&e&&n.filter(s=>!e.tags.includes(s.id)),h=s(s=>{if(!e)throw new Error("No contact record found");const a=[...e.tags,s];m("contacts",{id:e.id,data:{tags:a},previousData:e})},"handleTagAdd"),x=s(async s=>{if(!e)throw new Error("No contact record found");const a=e.tags.filter(e=>e!==s);await m("contacts",{id:e.id,data:{tags:a},previousData:e})},"handleTagDelete"),p=s(()=>{t(!0)},"openTagCreateDialog"),f=s(()=>{t(!1)},"handleTagCreateClose"),v=de.useCallback(async a=>{if(!e)throw new Error("No contact record found");await m("contacts",{id:e.id,data:{tags:[...e.tags,a.id]},previousData:e},{onSuccess:s(()=>{t(!1)},"onSuccess")})},[m,e]);return d||l?null:i.jsxs("div",{className:"flex flex-wrap gap-2",children:[c?.map(e=>i.jsx("div",{children:i.jsx(ls,{tag:e,onUnlink:s(()=>x(e.id),"onUnlink")})},e.id)),i.jsx("div",{children:i.jsxs(X,{children:[i.jsx(Y,{asChild:!0,children:i.jsxs(z,{variant:"outline",size:"sm",className:"h-11 px-3 cursor-pointer",children:[i.jsx(ue,{className:"h-4 w-4 mr-1"}),"Add tag"]})}),i.jsxs(H,{children:[u?.map(e=>i.jsx(J,{onClick:s(()=>h(e.id),"onClick"),children:i.jsx(ae,{variant:"secondary",className:Q("text-xs font-normal",Re(e.color)),children:e.name})},e.id)),i.jsx(J,{onClick:p,children:i.jsxs(z,{variant:"ghost",size:"sm",className:"w-full justify-start p-0 cursor-pointer",children:[i.jsx(ge,{className:"h-3 w-3 mr-2"}),"Create new tag"]})})]})]})}),i.jsx(rs,{open:a,onClose:f,onSuccess:v})]})},"TagsListEdit"),cs=s(({link:e="edit"})=>{const s=o();return s?i.jsxs("div",{className:"hidden sm:block w-64 min-w-64 text-sm",children:[i.jsx("div",{className:"mb-4 -ml-1",children:"edit"===e?i.jsx(Ve,{label:"Edit Contact"}):i.jsx(Ke,{label:"Show Contact"})}),i.jsxs(We,{title:"Personal info",children:[i.jsx(Le,{source:"email",children:i.jsx(Ie,{className:"flex-col",children:i.jsx(ds,{icon:i.jsx(fe,{className:"w-4 h-4 text-muted-foreground"}),primary:i.jsx($e,{source:"email"})})})}),s.linkedin_url&&i.jsx(ds,{icon:i.jsx(ve,{className:"w-4 h-4 text-muted-foreground"}),primary:i.jsx("a",{className:"underline hover:no-underline text-sm text-muted-foreground",href:s.linkedin_url,target:"_blank",rel:"noopener noreferrer",title:s.linkedin_url,children:"LinkedIn"})}),i.jsx(Le,{source:"phone",children:i.jsx(Ie,{className:"flex-col",children:i.jsx(ds,{icon:i.jsx(ke,{className:"w-4 h-4 text-muted-foreground"}),primary:i.jsx(te,{source:"number"}),showType:!0})})})]}),i.jsx(We,{title:"Position",children:i.jsxs("div",{className:"flex flex-col gap-2 p-3 rounded-md bg-muted border-l-[3px] border-border",children:[s.organization_id&&i.jsx("div",{className:"text-lg font-bold text-foreground mb-1",children:i.jsx(ye,{source:"organization_id",reference:"organizations",children:i.jsx(te,{source:"name"})})}),s.department&&i.jsxs("div",{className:"text-sm font-medium text-foreground leading-tight",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Dept: "}),s.department]}),s.title&&i.jsxs("div",{className:"text-sm text-muted-foreground leading-tight mt-0.5",children:[i.jsx("span",{children:"Title: "}),s.title]})]})}),i.jsxs(We,{title:"Contact info",children:[i.jsxs("div",{className:"text-muted-foreground",children:[i.jsx("span",{className:"text-sm",children:"Added on"})," ",i.jsx(we,{source:"first_seen",options:{year:"numeric",month:"long",day:"numeric"}})]}),i.jsxs("div",{className:"text-muted-foreground",children:[i.jsx("span",{className:"text-sm",children:"Last activity on"})," ",i.jsx(we,{source:"last_seen",options:{year:"numeric",month:"long",day:"numeric"}})]}),i.jsxs("div",{className:"text-muted-foreground",children:["Followed by"," ",i.jsx(ye,{source:"sales_id",reference:"sales",children:i.jsx(Be,{})})]})]}),i.jsx(We,{title:"Tags",children:i.jsx(os,{})}),s.notes&&i.jsx(We,{title:"Notes",children:i.jsx("div",{className:"text-sm text-foreground whitespace-pre-wrap bg-muted p-3 rounded-md border-l-[3px] border-border",children:s.notes})}),i.jsxs(We,{title:"Tasks",children:[i.jsx(Ue,{target:"contact_id",reference:"tasks",sort:{field:"due_date",order:"ASC"},children:i.jsx(ss,{})}),i.jsx(Ge,{})]})]}):null},"ContactAside"),ds=s(({icon:e,primary:a,showType:t})=>i.jsxs("div",{className:"flex flex-row items-center gap-2 min-h-6",children:[e,i.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-0",children:[a,t?i.jsx(f,{render:s(e=>"Other"!==e.type&&i.jsx(te,{source:"type",className:"text-muted-foreground"}),"render")}):null]})]}),"PersonalInfoRow"),ms=s(()=>i.jsx(v,{redirect:"show",children:i.jsx(us,{})}),"ContactEdit"),us=s(()=>{const{isPending:e,record:s}=k();return e||!s?null:i.jsxs(le,{variant:"dashboard",className:"mt-2",children:[i.jsx("main",{role:"main","aria-label":"Edit contact",children:i.jsx(d,{className:"flex flex-col gap-4",children:i.jsx(ne,{children:i.jsxs(ie,{children:[i.jsx(Qe,{}),i.jsx(Xe,{})]})})})}),i.jsx("aside",{"aria-label":"Contact information",children:i.jsx(cs,{link:"show"})})]})},"ContactEditContent");export{ms as ContactEdit,ms as default};
