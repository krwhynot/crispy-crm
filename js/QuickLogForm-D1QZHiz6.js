var e=Object.defineProperty,t=(t,n)=>e(t,"name",{value:n,configurable:!0});import{j as n,u as o,U as a,Q as r,P as s}from"./chunk-ByJg_QQB.js";import{a as i}from"./chunk-Cw2QhEKy.js";import{F as d,C as l,u as c,d as u,a as m}from"./chunk-JxeXaC9i.js";import{r as f,R as h}from"./chunk-1NZFT-6z.js";import{s as p,L as y,B as g,i as b,j as v,k as x,m as k,M as w,bt as M,N as D,n as C,R as N,a4 as S,a_ as O,a5 as j,aZ as _,a9 as T,bu as W,bv as I,t as E}from"../assets/index-BoLku8RR.js";import{S as z}from"./chunk-knA4lag3.js";import{C as L,a as F,b as B,c as Y,d as P,e as U}from"./chunk-CMQLDEz_.js";import{P as Z,a as A,b as R}from"./chunk-C_u3nriX.js";import{f as $,as as q,C as H,X as V,aS as G,a as K,p as Q,a8 as J}from"./chunk-Bc6KM1xM.js";import{o as X,B as ee,q as te,C as ne,D as oe,E as ae,F as re,G as se,H as ie,I as de,w as le,J as ce,d as ue,K as me,L as fe,M as he,N as pe,r as ye,t as ge,O as be,u as ve,P as xe,Q as ke,R as we,S as Me,T as De,U as Ce,n as Ne,V as Se,g as Oe,s as je,W as _e,X as Te}from"./chunk-DwAffUXc.js";import"./chunk-XoqkUGE_.js";import"./chunk-Tyyhsnez.js";import"./chunk-CRKBdUTG.js";const We=d,Ie=f.createContext({}),Ee=t(({...e})=>n.jsx(Ie.Provider,{value:{name:e.name},children:n.jsx(l,{...e})}),"FormField"),ze=t(()=>{const e=f.useContext(Ie),t=f.useContext(Le),{getFieldState:n,formState:o}=c(),a=n(e.name,o);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:r}=t;return{id:r,name:e.name,formItemId:`${r}-form-item`,formDescriptionId:`${r}-form-item-description`,formMessageId:`${r}-form-item-message`,...a}},"useFormField"),Le=f.createContext({}),Fe=f.forwardRef(({className:e,...t},o)=>{const a=f.useId();return n.jsx(Le.Provider,{value:{id:a},children:n.jsx("div",{ref:o,className:p("space-y-2",e),...t})})});Fe.displayName="FormItem";const Be=f.forwardRef(({className:e,...t},o)=>{const{error:a,formItemId:r}=ze();return n.jsx(y,{ref:o,className:p(a&&"text-destructive",e),htmlFor:r,...t})});Be.displayName="FormLabel";const Ye=f.forwardRef(({...e},t)=>{const{error:o,formItemId:a,formDescriptionId:r,formMessageId:s}=ze();return n.jsx(z,{ref:t,id:a,"aria-describedby":o?`${r} ${s}`:`${r}`,"aria-invalid":!!o,...e})});Ye.displayName="FormControl";const Pe=f.forwardRef(({className:e,...t},o)=>{const{formDescriptionId:a}=ze();return n.jsx("p",{ref:o,id:a,className:p("text-sm text-muted-foreground",e),...t})});Pe.displayName="FormDescription";const Ue=f.forwardRef(({className:e,children:t,...o},a)=>{const{error:r,formMessageId:s}=ze(),i=r?String(r?.message):t;return i?n.jsx("p",{ref:a,id:s,role:"alert",className:p("text-sm font-medium text-destructive",e),...o,children:i}):null});Ue.displayName="FormMessage";function Ze(e=300){const[t,n]=f.useState(""),[o,a]=f.useState("");f.useEffect(()=>{const n=setTimeout(()=>{a(t)},e);return()=>clearTimeout(n)},[t,e]);const r=f.useCallback(()=>{n(""),a("")},[]);return{searchTerm:t,debouncedTerm:o,setSearchTerm:n,clearSearch:r}}t(Ze,"useDebouncedSearch");const Ae=3e5;function Re({form:e,selectedOrganizationId:n,selectedContactId:s,selectedOpportunityId:i}){const d=o(),l=Ze(),c=Ze(),u=Ze(),m=l.debouncedTerm.length>=2,h=c.debouncedTerm.length>=2,p=u.debouncedTerm.length>=2,y=f.useMemo(()=>{const e={};return n&&(e.organization_id=n),l.debouncedTerm.length>=2&&(e.q=l.debouncedTerm),e},[n,l.debouncedTerm]),g=f.useMemo(()=>{const e={};return c.debouncedTerm.length>=2&&(e.q=c.debouncedTerm),e},[c.debouncedTerm]),b=f.useMemo(()=>{const e={};return n&&(e.customer_organization_id=n),u.debouncedTerm.length>=2&&(e.q=u.debouncedTerm),e},[n,u.debouncedTerm]),{data:v=[],isPending:x}=a("contacts",{pagination:{page:1,perPage:m?50:100},sort:{field:"name",order:"ASC"},filter:y},{staleTime:Ae,placeholderData:t(e=>e,"placeholderData")}),{data:k=[],isPending:w}=a("organizations",{pagination:{page:1,perPage:h?50:100},sort:{field:"name",order:"ASC"},filter:g},{staleTime:Ae,placeholderData:t(e=>e,"placeholderData")}),{data:M=[],isPending:D}=a("opportunities",{pagination:{page:1,perPage:p?50:100},sort:{field:"name",order:"ASC"},filter:b},{staleTime:Ae,placeholderData:t(e=>e,"placeholderData")}),C=x&&w&&D&&0===v.length&&0===k.length&&0===M.length,N=f.useMemo(()=>M.find(e=>e.id===i),[M,i]),S=f.useMemo(()=>v.find(e=>e.id===s),[v,s]),O=f.useMemo(()=>n||(S?.organization_id?S.organization_id:N?.customer_organization_id?N.customer_organization_id:null),[n,S?.organization_id,N?.customer_organization_id]),j=f.useMemo(()=>!!O&&!k.some(e=>e.id===O),[O,k]),{data:_}=r("organizations",{id:O},{enabled:j&&null!==O,staleTime:Ae}),T=f.useMemo(()=>!!O&&!v.some(e=>e.organization_id===O),[O,v]),{data:W=[]}=a("contacts",{pagination:{page:1,perPage:50},sort:{field:"name",order:"ASC"},filter:{organization_id:O}},{enabled:T&&null!==O,staleTime:Ae}),I=f.useMemo(()=>!!O&&!M.some(e=>e.customer_organization_id===O),[O,M]),{data:E=[]}=a("opportunities",{pagination:{page:1,perPage:50},sort:{field:"name",order:"ASC"},filter:{customer_organization_id:O}},{enabled:I&&null!==O,staleTime:Ae}),z=f.useMemo(()=>{let e=v;if(O){const t=v.filter(e=>e.organization_id===O);e=0===t.length&&W.length>0?W:t}if(l.debouncedTerm.length>0){const t=l.debouncedTerm.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.company_name?.toLowerCase().includes(t))}return e},[v,O,W,l.debouncedTerm]),L=f.useMemo(()=>{let e=k;if(O){const t=k.filter(e=>e.id===O);e=0===t.length&&_?[_]:t}if(c.debouncedTerm.length>0){const t=c.debouncedTerm.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t))}return e},[k,O,_,c.debouncedTerm]),F=f.useMemo(()=>{let e=M;if(O){const t=M.filter(e=>e.customer_organization_id===O);e=0===t.length&&E.length>0?E:t}if(u.debouncedTerm.length>0){const t=u.debouncedTerm.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t))}return e},[M,O,E,u.debouncedTerm]);return f.useEffect(()=>{if(N?.customer_organization_id){e.setValue("organizationId",N.customer_organization_id);const t=e.getValues("contactId");if(t){const n=v.find(e=>e.id===t);n&&n.organization_id!==N.customer_organization_id&&(e.setValue("contactId",void 0),d("Contact cleared: doesn't belong to selected opportunity's organization",{type:"info"}))}}},[N?.customer_organization_id,v,e,d]),{contacts:v,organizations:k,opportunities:M,contactsForAnchorOrg:W,oppsForAnchorOrg:E,filteredContacts:z,filteredOrganizations:L,filteredOpportunities:F,contactsLoading:x,organizationsLoading:w,opportunitiesLoading:D,isInitialLoading:C,contactSearch:l,orgSearch:c,oppSearch:u,anchorOrganizationId:O}}function $e({value:e,onChange:o,options:a,fallbackOptions:r=[],loading:s,searchTerm:i,onSearchChange:d,placeholder:l,emptyMessage:c,filteredEmptyMessage:u,isFiltered:m=!1,label:h,description:y,onSelect:b,onClear:v,listId:x}){const[k,w]=f.useState(!1);f.useEffect(()=>{k||d("")},[k,d]);const M=e?a.find(t=>t.id===e)?.name??r.find(t=>t.id===e)?.name??l:l;return n.jsxs(Fe,{className:"flex flex-col",children:[n.jsx(Be,{children:h}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Z,{open:k,onOpenChange:w,children:[n.jsx(A,{asChild:!0,children:n.jsx(Ye,{children:n.jsxs(g,{variant:"outline",role:"combobox","aria-expanded":k,"aria-haspopup":"listbox","aria-controls":x,className:p("h-11 flex-1 justify-between",!e&&"text-muted-foreground"),children:[M,s?n.jsx($,{className:"ml-2 h-4 w-4 animate-spin"}):n.jsx(q,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),n.jsx(R,{className:"w-full p-0",align:"start",children:n.jsxs(L,{id:x,shouldFilter:!1,children:[n.jsx(F,{placeholder:`Search ${h.toLowerCase()}...`,value:i,onValueChange:d}),n.jsxs(B,{children:[n.jsx(Y,{children:s?n.jsxs("div",{className:"flex items-center justify-center py-2",children:[n.jsx($,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{className:"ml-2",children:"Searching..."})]}):m&&u?u:c}),n.jsx(P,{children:a.map(a=>n.jsxs(U,{value:String(a.id),className:"h-11",onSelect:t(()=>{o(a.id),b?.(a),w(!1)},"onSelect"),children:[n.jsx(H,{className:p("mr-2 h-4 w-4",e===a.id?"opacity-100":"opacity-0")}),n.jsxs("span",{className:"flex flex-col",children:[n.jsx("span",{children:a.name}),a.subtitle&&n.jsx("span",{className:"text-xs text-muted-foreground",children:a.subtitle})]})]},a.id))})]})]})})]}),e&&n.jsx(g,{type:"button",variant:"outline",size:"icon",className:"h-11 w-11 shrink-0",onClick:t(()=>{o(void 0),v?.()},"onClick"),"aria-label":`Clear ${h.toLowerCase()} selection`,children:n.jsx(V,{className:"h-4 w-4"})})]}),y&&n.jsx(Pe,{children:y}),n.jsx(Ue,{})]})}t(Re,"useEntityData"),t($e,"EntityCombobox");const qe=["Call","Meeting","Demo","Site Visit","Trade Show"];function He({control:e,activityType:o}){const a=qe.includes(o),r="Sample"===o;return n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-sm font-medium",children:"What happened?"}),n.jsx(Ee,{control:e,name:"activityType",render:t(({field:e})=>n.jsxs(Fe,{children:[n.jsx(Be,{children:"Activity Type"}),n.jsxs(b,{onValueChange:e.onChange,defaultValue:e.value,children:[n.jsx(Ye,{children:n.jsx(v,{className:"h-11",children:n.jsx(x,{placeholder:"Select type"})})}),n.jsxs(k,{children:[n.jsxs(w,{children:[n.jsx(D,{children:"Communication"}),M.Communication.map(e=>n.jsx(C,{value:e,children:e},e))]}),n.jsx(N,{}),n.jsxs(w,{children:[n.jsx(D,{children:"Meetings"}),M.Meetings.map(e=>n.jsx(C,{value:e,children:e},e))]}),n.jsx(N,{}),n.jsxs(w,{children:[n.jsx(D,{children:"Documentation"}),M.Documentation.map(e=>n.jsx(C,{value:e,children:e},e))]})]})]}),n.jsx(Ue,{})]}),"render")}),n.jsx(Ee,{control:e,name:"outcome",render:t(({field:e})=>n.jsxs(Fe,{children:[n.jsx(Be,{children:"Outcome"}),n.jsxs(b,{onValueChange:e.onChange,defaultValue:e.value,children:[n.jsx(Ye,{children:n.jsx(v,{className:"h-11",children:n.jsx(x,{placeholder:"Select outcome"})})}),n.jsxs(k,{children:[n.jsx(C,{value:"Connected",children:"Connected"}),n.jsx(C,{value:"Left Voicemail",children:"Left Voicemail"}),n.jsx(C,{value:"No Answer",children:"No Answer"}),n.jsx(C,{value:"Completed",children:"Completed"}),n.jsx(C,{value:"Rescheduled",children:"Rescheduled"})]})]}),n.jsx(Ue,{})]}),"render")}),a&&n.jsx(Ee,{control:e,name:"duration",render:t(({field:e})=>n.jsxs(Fe,{children:[n.jsx(Be,{children:"Duration (minutes)"}),n.jsx(Ye,{children:n.jsx(S,{type:"number",placeholder:"30",className:"h-11",...e,onChange:t(t=>e.onChange(t.target.value?parseInt(t.target.value):void 0),"onChange"),value:e.value||""})}),n.jsx(Ue,{})]}),"render")}),r&&n.jsx(Ee,{control:e,name:"sampleStatus",render:t(({field:e})=>n.jsxs(Fe,{children:[n.jsx(Be,{children:"Sample Status"}),n.jsxs(b,{onValueChange:e.onChange,value:e.value??void 0,children:[n.jsx(Ye,{children:n.jsx(v,{className:"h-11",children:n.jsx(x,{placeholder:"Select sample status"})})}),n.jsx(k,{children:O.map(e=>n.jsx(C,{value:e.value,children:e.label},e.value))})]}),n.jsx(Pe,{children:"Track sample workflow: Sent → Received → Feedback Pending → Feedback Received"}),n.jsx(Ue,{})]}),"render")})]})}function Ve(e,t,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:e,timeZoneName:n}).format(t).split(/\s/g).slice(2).join(" ")}t(He,"ActivityTypeSection"),t(Ve,"tzName");const Ge={},Ke={};function Qe(e,t){try{const n=(Ge[e]||=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"longOffset"}).format)(t).split("GMT")[1];return n in Ke?Ke[n]:Xe(n,n.split(":"))}catch{if(e in Ke)return Ke[e];const t=e?.match(Je);return t?Xe(e,t.slice(1)):NaN}}t(Qe,"tzOffset");const Je=/([+-]\d\d):?(\d\d)?/;function Xe(e,t){const n=+(t[0]||0),o=+(t[1]||0),a=+(t[2]||0)/60;return Ke[e]=60*n+o>0?60*n+o+a:60*n-o-a}t(Xe,"calcOffset");const et=class e extends Date{constructor(...e){super(),e.length>1&&"string"==typeof e[e.length-1]&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(Qe(this.timeZone,this))?this.setTime(NaN):e.length?"number"==typeof e[0]&&(1===e.length||2===e.length&&"number"!=typeof e[1])?this.setTime(e[0]):"string"==typeof e[0]?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),rt(this),ot(this)):this.setTime(Date.now())}static tz(t,...n){return n.length?new e(...n,t):new e(Date.now(),t)}withTimeZone(t){return new e(+this,t)}getTimezoneOffset(){const e=-Qe(this.timeZone,this);return e>0?Math.floor(e):Math.ceil(e)}setTime(e){return Date.prototype.setTime.apply(this,arguments),ot(this),+this}[Symbol.for("constructDateFrom")](t){return new e(+new Date(t),this.timeZone)}};t(et,"TZDateMini");let tt=et;const nt=/^(get|set)(?!UTC)/;function ot(e){e.internal.setTime(+e),e.internal.setUTCSeconds(e.internal.getUTCSeconds()-Math.round(60*-Qe(e.timeZone,e)))}function at(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),rt(e)}function rt(e){const t=Qe(e.timeZone,e),n=t>0?Math.floor(t):Math.ceil(t),o=new Date(+e);o.setUTCHours(o.getUTCHours()-1);const a=-new Date(+e).getTimezoneOffset(),r=a- -new Date(+o).getTimezoneOffset(),s=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();r&&s&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+r);const i=a-n;i&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+i);const d=new Date(+e);d.setUTCSeconds(0);const l=a>0?d.getSeconds():(d.getSeconds()-60)%60,c=Math.round(-60*Qe(e.timeZone,e))%60;(c||l)&&(e.internal.setUTCSeconds(e.internal.getUTCSeconds()+c),Date.prototype.setUTCSeconds.call(e,Date.prototype.getUTCSeconds.call(e)+c+l));const u=Qe(e.timeZone,e),m=u>0?Math.floor(u):Math.ceil(u),f=-new Date(+e).getTimezoneOffset()-m-i;if(m!==n&&f){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+f);const t=Qe(e.timeZone,e),n=m-(t>0?Math.floor(t):Math.ceil(t));n&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+n),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+n))}}Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!nt.test(e))return;const t=e.replace(nt,"$1UTC");tt.prototype[t]&&(e.startsWith("get")?tt.prototype[e]=function(){return this.internal[t]()}:(tt.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),at(this),+this},tt.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),ot(this),+this}))}),t(ot,"syncToInternal"),t(at,"syncFromInternal"),t(rt,"adjustToSystemTZ");const st=class e extends tt{static tz(t,...n){return n.length?new e(...n,t):new e(Date.now(),t)}toISOString(){const[e,t,n]=this.tzComponents(),o=`${e}${t}:${n}`;return this.internal.toISOString().slice(0,-1)+o}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,t,n,o]=this.internal.toUTCString().split(" ");return`${e?.slice(0,-1)} ${n} ${t} ${o}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[t,n,o]=this.tzComponents();return`${e} GMT${t}${n}${o} (${Ve(this.timeZone,this)})`}toLocaleString(e,t){return Date.prototype.toLocaleString.call(this,e,{...t,timeZone:t?.timeZone||this.timeZone})}toLocaleDateString(e,t){return Date.prototype.toLocaleDateString.call(this,e,{...t,timeZone:t?.timeZone||this.timeZone})}toLocaleTimeString(e,t){return Date.prototype.toLocaleTimeString.call(this,e,{...t,timeZone:t?.timeZone||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset();return[e>0?"-":"+",String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),String(Math.abs(e)%60).padStart(2,"0")]}withTimeZone(t){return new e(+this,t)}[Symbol.for("constructDateFrom")](t){return new e(+new Date(t),this.timeZone)}};t(st,"TZDate");let it=st;function dt(e,t){const n=t.startOfMonth(e),o=n.getDay()>0?n.getDay():7,a=t.addDays(e,1-o),r=t.addDays(a,34);return t.getMonth(e)===t.getMonth(r)?5:4}function lt(e,t){const n=t.startOfMonth(e),o=n.getDay();return 1===o?n:0===o?t.addDays(n,-6):t.addDays(n,-1*(o-1))}function ct(e,t){const n=lt(e,t),o=dt(e,t);return t.addDays(n,7*o-1)}t(dt,"getBroadcastWeeksInMonth"),t(lt,"startOfBroadcastWeek"),t(ct,"endOfBroadcastWeek");const ut=class e{constructor(e,t){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?it.tz(this.options.timeZone):new this.Date,this.newDate=(e,t,n)=>this.overrides?.newDate?this.overrides.newDate(e,t,n):this.options.timeZone?new it(e,t,n,this.options.timeZone):new Date(e,t,n),this.addDays=(e,t)=>this.overrides?.addDays?this.overrides.addDays(e,t):X(e,t),this.addMonths=(e,t)=>this.overrides?.addMonths?this.overrides.addMonths(e,t):ee(e,t),this.addWeeks=(e,t)=>this.overrides?.addWeeks?this.overrides.addWeeks(e,t):te(e,t),this.addYears=(e,t)=>this.overrides?.addYears?this.overrides.addYears(e,t):ne(e,t),this.differenceInCalendarDays=(e,t)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(e,t):oe(e,t),this.differenceInCalendarMonths=(e,t)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(e,t):ae(e,t),this.eachMonthOfInterval=e=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(e):re(e),this.eachYearOfInterval=e=>{const t=this.overrides?.eachYearOfInterval?this.overrides.eachYearOfInterval(e):se(e),n=new Set(t.map(e=>this.getYear(e)));if(n.size===t.length)return t;const o=[];return n.forEach(e=>{o.push(new Date(e,0,1))}),o},this.endOfBroadcastWeek=e=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(e):ct(e,this),this.endOfISOWeek=e=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(e):ie(e),this.endOfMonth=e=>this.overrides?.endOfMonth?this.overrides.endOfMonth(e):de(e),this.endOfWeek=(e,t)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(e,t):le(e,this.options),this.endOfYear=e=>this.overrides?.endOfYear?this.overrides.endOfYear(e):ce(e),this.format=(e,t,n)=>{const o=this.overrides?.format?this.overrides.format(e,t,this.options):ue(e,t,this.options);return this.options.numerals&&"latn"!==this.options.numerals?this.replaceDigits(o):o},this.getISOWeek=e=>this.overrides?.getISOWeek?this.overrides.getISOWeek(e):me(e),this.getMonth=(e,t)=>this.overrides?.getMonth?this.overrides.getMonth(e,this.options):fe(e,this.options),this.getYear=(e,t)=>this.overrides?.getYear?this.overrides.getYear(e,this.options):he(e,this.options),this.getWeek=(e,t)=>this.overrides?.getWeek?this.overrides.getWeek(e,this.options):pe(e,this.options),this.isAfter=(e,t)=>this.overrides?.isAfter?this.overrides.isAfter(e,t):ye(e,t),this.isBefore=(e,t)=>this.overrides?.isBefore?this.overrides.isBefore(e,t):ge(e,t),this.isDate=e=>this.overrides?.isDate?this.overrides.isDate(e):be(e),this.isSameDay=(e,t)=>this.overrides?.isSameDay?this.overrides.isSameDay(e,t):ve(e,t),this.isSameMonth=(e,t)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(e,t):xe(e,t),this.isSameYear=(e,t)=>this.overrides?.isSameYear?this.overrides.isSameYear(e,t):ke(e,t),this.max=e=>this.overrides?.max?this.overrides.max(e):we(e),this.min=e=>this.overrides?.min?this.overrides.min(e):Me(e),this.setMonth=(e,t)=>this.overrides?.setMonth?this.overrides.setMonth(e,t):De(e,t),this.setYear=(e,t)=>this.overrides?.setYear?this.overrides.setYear(e,t):Ce(e,t),this.startOfBroadcastWeek=(e,t)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(e,this):lt(e,this),this.startOfDay=e=>this.overrides?.startOfDay?this.overrides.startOfDay(e):Ne(e),this.startOfISOWeek=e=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(e):Se(e),this.startOfMonth=e=>this.overrides?.startOfMonth?this.overrides.startOfMonth(e):Oe(e),this.startOfWeek=(e,t)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(e,this.options):je(e,this.options),this.startOfYear=e=>this.overrides?.startOfYear?this.overrides.startOfYear(e):_e(e),this.options={locale:Te,...e},this.overrides=t}getDigitMap(){const{numerals:e="latn"}=this.options,t=new Intl.NumberFormat("en-US",{numberingSystem:e}),n={};for(let o=0;o<10;o++)n[o.toString()]=t.format(o);return n}replaceDigits(e){const t=this.getDigitMap();return e.replace(/\d/g,e=>t[e]||e)}formatNumber(e){return this.replaceDigits(e.toString())}getMonthYearOrder(){const t=this.options.locale?.code;return t&&e.yearFirstLocales.has(t)?"year-first":"month-first"}formatMonthYear(t){const{locale:n,timeZone:o,numerals:a}=this.options,r=n?.code;if(r&&e.yearFirstLocales.has(r))try{const e=new Intl.DateTimeFormat(r,{month:"long",year:"numeric",timeZone:o,numberingSystem:a});return e.format(t)}catch{}const s="year-first"===this.getMonthYearOrder()?"y LLLL":"LLLL y";return this.format(t,s)}};t(ut,"DateLib");let mt=ut;mt.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const ft=new mt,ht=class{constructor(e,t,n=ft){this.date=e,this.displayMonth=t,this.outside=Boolean(t&&!n.isSameMonth(e,t)),this.dateLib=n}isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}};t(ht,"CalendarDay");let pt=ht;const yt=class{constructor(e,t){this.date=e,this.weeks=t}};t(yt,"CalendarMonth");let gt=yt;const bt=class{constructor(e,t){this.days=t,this.weekNumber=e}};t(bt,"CalendarWeek");let vt=bt;function xt(e){return h.createElement("button",{...e})}function kt(e){return h.createElement("span",{...e})}function wt(e){const{size:t=24,orientation:n="left",className:o}=e;return h.createElement("svg",{className:o,width:t,height:t,viewBox:"0 0 24 24"},"up"===n&&h.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),"down"===n&&h.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),"left"===n&&h.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),"right"===n&&h.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function Mt(e){const{day:t,modifiers:n,...o}=e;return h.createElement("td",{...o})}function Dt(e){const{day:t,modifiers:n,...o}=e,a=h.useRef(null);return h.useEffect(()=>{n.focused&&a.current?.focus()},[n.focused]),h.createElement("button",{ref:a,...o})}var Ct,Nt,St,Ot,jt,_t,Tt,Wt;function It(e){const{options:t,className:n,components:o,classNames:a,...r}=e,s=[a[Ct.Dropdown],n].join(" "),i=t?.find(({value:e})=>e===r.value);return h.createElement("span",{"data-disabled":r.disabled,className:a[Ct.DropdownRoot]},h.createElement(o.Select,{className:s,...r},t?.map(({value:e,label:t,disabled:n})=>h.createElement(o.Option,{key:e,value:e,disabled:n},t))),h.createElement("span",{className:a[Ct.CaptionLabel],"aria-hidden":!0},i?.label,h.createElement(o.Chevron,{orientation:"down",size:18,className:a[Ct.Chevron]})))}function Et(e){return h.createElement("div",{...e})}function zt(e){return h.createElement("div",{...e})}function Lt(e){const{calendarMonth:t,displayIndex:n,...o}=e;return h.createElement("div",{...o},e.children)}function Ft(e){const{calendarMonth:t,displayIndex:n,...o}=e;return h.createElement("div",{...o})}function Bt(e){return h.createElement("table",{...e})}function Yt(e){return h.createElement("div",{...e})}t(xt,"Button"),t(kt,"CaptionLabel"),t(wt,"Chevron"),t(Mt,"Day"),t(Dt,"DayButton"),(Nt=Ct||(Ct={})).Root="root",Nt.Chevron="chevron",Nt.Day="day",Nt.DayButton="day_button",Nt.CaptionLabel="caption_label",Nt.Dropdowns="dropdowns",Nt.Dropdown="dropdown",Nt.DropdownRoot="dropdown_root",Nt.Footer="footer",Nt.MonthGrid="month_grid",Nt.MonthCaption="month_caption",Nt.MonthsDropdown="months_dropdown",Nt.Month="month",Nt.Months="months",Nt.Nav="nav",Nt.NextMonthButton="button_next",Nt.PreviousMonthButton="button_previous",Nt.Week="week",Nt.Weeks="weeks",Nt.Weekday="weekday",Nt.Weekdays="weekdays",Nt.WeekNumber="week_number",Nt.WeekNumberHeader="week_number_header",Nt.YearsDropdown="years_dropdown",(Ot=St||(St={})).disabled="disabled",Ot.hidden="hidden",Ot.outside="outside",Ot.focused="focused",Ot.today="today",(_t=jt||(jt={})).range_end="range_end",_t.range_middle="range_middle",_t.range_start="range_start",_t.selected="selected",(Wt=Tt||(Tt={})).weeks_before_enter="weeks_before_enter",Wt.weeks_before_exit="weeks_before_exit",Wt.weeks_after_enter="weeks_after_enter",Wt.weeks_after_exit="weeks_after_exit",Wt.caption_after_enter="caption_after_enter",Wt.caption_after_exit="caption_after_exit",Wt.caption_before_enter="caption_before_enter",Wt.caption_before_exit="caption_before_exit",t(It,"Dropdown"),t(Et,"DropdownNav"),t(zt,"Footer"),t(Lt,"Month"),t(Ft,"MonthCaption"),t(Bt,"MonthGrid"),t(Yt,"Months");const Pt=f.createContext(void 0);function Ut(){const e=f.useContext(Pt);if(void 0===e)throw new Error("useDayPicker() must be used within a custom component.");return e}function Zt(e){const{components:t}=Ut();return h.createElement(t.Dropdown,{...e})}function At(e){const{onPreviousClick:t,onNextClick:n,previousMonth:o,nextMonth:a,...r}=e,{components:s,classNames:i,labels:{labelPrevious:d,labelNext:l}}=Ut(),c=f.useCallback(e=>{a&&n?.(e)},[a,n]),u=f.useCallback(e=>{o&&t?.(e)},[o,t]);return h.createElement("nav",{...r},h.createElement(s.PreviousMonthButton,{type:"button",className:i[Ct.PreviousMonthButton],tabIndex:o?void 0:-1,"aria-disabled":!o||void 0,"aria-label":d(o),onClick:u},h.createElement(s.Chevron,{disabled:!o||void 0,className:i[Ct.Chevron],orientation:"left"})),h.createElement(s.NextMonthButton,{type:"button",className:i[Ct.NextMonthButton],tabIndex:a?void 0:-1,"aria-disabled":!a||void 0,"aria-label":l(a),onClick:c},h.createElement(s.Chevron,{disabled:!a||void 0,orientation:"right",className:i[Ct.Chevron]})))}function Rt(e){const{components:t}=Ut();return h.createElement(t.Button,{...e})}function $t(e){return h.createElement("option",{...e})}function qt(e){const{components:t}=Ut();return h.createElement(t.Button,{...e})}function Ht(e){const{rootRef:t,...n}=e;return h.createElement("div",{...n,ref:t})}function Vt(e){return h.createElement("select",{...e})}function Gt(e){const{week:t,...n}=e;return h.createElement("tr",{...n})}function Kt(e){return h.createElement("th",{...e})}function Qt(e){return h.createElement("thead",{"aria-hidden":!0},h.createElement("tr",{...e}))}function Jt(e){const{week:t,...n}=e;return h.createElement("th",{...n})}function Xt(e){return h.createElement("th",{...e})}function en(e){return h.createElement("tbody",{...e})}function tn(e){const{components:t}=Ut();return h.createElement(t.Dropdown,{...e})}t(Ut,"useDayPicker"),t(Zt,"MonthsDropdown"),t(At,"Nav"),t(Rt,"NextMonthButton"),t($t,"Option"),t(qt,"PreviousMonthButton"),t(Ht,"Root"),t(Vt,"Select"),t(Gt,"Week"),t(Kt,"Weekday"),t(Qt,"Weekdays"),t(Jt,"WeekNumber"),t(Xt,"WeekNumberHeader"),t(en,"Weeks"),t(tn,"YearsDropdown");const nn=Object.freeze(Object.defineProperty({__proto__:null,Button:xt,CaptionLabel:kt,Chevron:wt,Day:Mt,DayButton:Dt,Dropdown:It,DropdownNav:Et,Footer:zt,Month:Lt,MonthCaption:Ft,MonthGrid:Bt,Months:Yt,MonthsDropdown:Zt,Nav:At,NextMonthButton:Rt,Option:$t,PreviousMonthButton:qt,Root:Ht,Select:Vt,Week:Gt,WeekNumber:Jt,WeekNumberHeader:Xt,Weekday:Kt,Weekdays:Qt,Weeks:en,YearsDropdown:tn},Symbol.toStringTag,{value:"Module"}));function on(e,t,n=!1,o=ft){let{from:a,to:r}=e;const{differenceInCalendarDays:s,isSameDay:i}=o;if(a&&r){s(r,a)<0&&([a,r]=[r,a]);return s(t,a)>=(n?1:0)&&s(r,t)>=(n?1:0)}return!n&&r?i(r,t):!(n||!a)&&i(a,t)}function an(e){return Boolean(e&&"object"==typeof e&&"before"in e&&"after"in e)}function rn(e){return Boolean(e&&"object"==typeof e&&"from"in e)}function sn(e){return Boolean(e&&"object"==typeof e&&"after"in e)}function dn(e){return Boolean(e&&"object"==typeof e&&"before"in e)}function ln(e){return Boolean(e&&"object"==typeof e&&"dayOfWeek"in e)}function cn(e,t){return Array.isArray(e)&&e.every(t.isDate)}function un(e,t,n=ft){const o=Array.isArray(t)?t:[t],{isSameDay:a,differenceInCalendarDays:r,isAfter:s}=n;return o.some(t=>{if("boolean"==typeof t)return t;if(n.isDate(t))return a(e,t);if(cn(t,n))return t.includes(e);if(rn(t))return on(t,e,!1,n);if(ln(t))return Array.isArray(t.dayOfWeek)?t.dayOfWeek.includes(e.getDay()):t.dayOfWeek===e.getDay();if(an(t)){const n=r(t.before,e)>0,o=r(t.after,e)<0;return s(t.before,t.after)?o&&n:n||o}return sn(t)?r(e,t.after)>0:dn(t)?r(t.before,e)>0:"function"==typeof t&&t(e)})}function mn(e,t,n,o,a){const{disabled:r,hidden:s,modifiers:i,showOutsideDays:d,broadcastCalendar:l,today:c}=t,{isSameDay:u,isSameMonth:m,startOfMonth:f,isBefore:h,endOfMonth:p,isAfter:y}=a,g=n&&f(n),b=o&&p(o),v={[St.focused]:[],[St.outside]:[],[St.disabled]:[],[St.hidden]:[],[St.today]:[]},x={};for(const k of e){const{date:e,displayMonth:t}=k,n=Boolean(t&&!m(e,t)),o=Boolean(g&&h(e,g)),f=Boolean(b&&y(e,b)),p=Boolean(r&&un(e,r,a)),w=Boolean(s&&un(e,s,a))||o||f||!l&&!d&&n||l&&!1===d&&n,M=u(e,c??a.today());n&&v.outside.push(k),p&&v.disabled.push(k),w&&v.hidden.push(k),M&&v.today.push(k),i&&Object.keys(i).forEach(t=>{const n=i?.[t];!!n&&un(e,n,a)&&(x[t]?x[t].push(k):x[t]=[k])})}return e=>{const t={[St.focused]:!1,[St.disabled]:!1,[St.hidden]:!1,[St.outside]:!1,[St.today]:!1},n={};for(const o in v){const n=v[o];t[o]=n.some(t=>t===e)}for(const o in x)n[o]=x[o].some(t=>t===e);return{...t,...n}}}function fn(e,t,n={}){return Object.entries(e).filter(([,e])=>!0===e).reduce((e,[o])=>(n[o]?e.push(n[o]):t[St[o]]?e.push(t[St[o]]):t[jt[o]]&&e.push(t[jt[o]]),e),[t[Ct.Day]])}function hn(e){return{...nn,...e}}function pn(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([e,n])=>{e.startsWith("data-")&&(t[e]=n)}),t}function yn(){const e={};for(const t in Ct)e[Ct[t]]=`rdp-${Ct[t]}`;for(const t in St)e[St[t]]=`rdp-${St[t]}`;for(const t in jt)e[jt[t]]=`rdp-${jt[t]}`;for(const t in Tt)e[Tt[t]]=`rdp-${Tt[t]}`;return e}function gn(e,t,n){return(n??new mt(t)).formatMonthYear(e)}t(on,"rangeIncludesDate"),t(an,"isDateInterval"),t(rn,"isDateRange"),t(sn,"isDateAfterType"),t(dn,"isDateBeforeType"),t(ln,"isDayOfWeekType"),t(cn,"isDatesArray"),t(un,"dateMatchModifiers"),t(mn,"createGetModifiers"),t(fn,"getClassNamesForModifiers"),t(hn,"getComponents"),t(pn,"getDataAttributes"),t(yn,"getDefaultClassNames"),t(gn,"formatCaption");const bn=gn;function vn(e,t,n){return(n??new mt(t)).format(e,"d")}function xn(e,t=ft){return t.format(e,"LLLL")}function kn(e,t,n){return(n??new mt(t)).format(e,"cccccc")}function wn(e,t=ft){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)}function Mn(){return""}function Dn(e,t=ft){return t.format(e,"yyyy")}t(vn,"formatDay"),t(xn,"formatMonthDropdown"),t(kn,"formatWeekdayName"),t(wn,"formatWeekNumber"),t(Mn,"formatWeekNumberHeader"),t(Dn,"formatYearDropdown");const Cn=Dn,Nn=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:gn,formatDay:vn,formatMonthCaption:bn,formatMonthDropdown:xn,formatWeekNumber:wn,formatWeekNumberHeader:Mn,formatWeekdayName:kn,formatYearCaption:Cn,formatYearDropdown:Dn},Symbol.toStringTag,{value:"Module"}));function Sn(e){return e?.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e?.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...Nn,...e}}function On(e,t,n,o,a){const{startOfMonth:r,startOfYear:s,endOfYear:i,eachMonthOfInterval:d,getMonth:l}=a;return d({start:s(e),end:i(e)}).map(e=>{const s=o.formatMonthDropdown(e,a);return{value:l(e),label:s,disabled:t&&e<r(t)||n&&e>r(n)||!1}})}function jn(e,t={},n={}){let o={...t?.[Ct.Day]};return Object.entries(e).filter(([,e])=>!0===e).forEach(([e])=>{o={...o,...n?.[e]}}),o}function _n(e,t,n){const o=e.today(),a=t?e.startOfISOWeek(o):e.startOfWeek(o),r=[];for(let s=0;s<7;s++){const t=e.addDays(a,s);r.push(t)}return r}function Tn(e,t,n,o,a=!1){if(!e)return;if(!t)return;const{startOfYear:r,endOfYear:s,eachYearOfInterval:i,getYear:d}=o,l=i({start:r(e),end:s(t)});return a&&l.reverse(),l.map(e=>{const t=n.formatYearDropdown(e,o);return{value:d(e),label:t,disabled:!1}})}function Wn(e,t,n,o){let a=(o??new mt(n)).format(e,"PPPP");return t.today&&(a=`Today, ${a}`),t.selected&&(a=`${a}, selected`),a}t(Sn,"getFormatters"),t(On,"getMonthOptions"),t(jn,"getStyleForModifiers"),t(_n,"getWeekdays"),t(Tn,"getYearOptions"),t(Wn,"labelDayButton");const In=Wn;function En(e,t,n){return(n??new mt(t)).formatMonthYear(e)}t(En,"labelGrid");const zn=En;function Ln(e,t,n,o){let a=(o??new mt(n)).format(e,"PPPP");return t?.today&&(a=`Today, ${a}`),a}function Fn(e){return"Choose the Month"}function Bn(){return""}function Yn(e){return"Go to the Next Month"}function Pn(e){return"Go to the Previous Month"}function Un(e,t,n){return(n??new mt(t)).format(e,"cccc")}function Zn(e,t){return`Week ${e}`}function An(e){return"Week Number"}function Rn(e){return"Choose the Year"}t(Ln,"labelGridcell"),t(Fn,"labelMonthDropdown"),t(Bn,"labelNav"),t(Yn,"labelNext"),t(Pn,"labelPrevious"),t(Un,"labelWeekday"),t(Zn,"labelWeekNumber"),t(An,"labelWeekNumberHeader"),t(Rn,"labelYearDropdown");const $n=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:zn,labelDay:In,labelDayButton:Wn,labelGrid:En,labelGridcell:Ln,labelMonthDropdown:Fn,labelNav:Bn,labelNext:Yn,labelPrevious:Pn,labelWeekNumber:Zn,labelWeekNumberHeader:An,labelWeekday:Un,labelYearDropdown:Rn},Symbol.toStringTag,{value:"Module"})),qn=t(e=>e instanceof HTMLElement?e:null,"asHtmlElement"),Hn=t(e=>[...e.querySelectorAll("[data-animated-month]")??[]],"queryMonthEls"),Vn=t(e=>qn(e.querySelector("[data-animated-month]")),"queryMonthEl"),Gn=t(e=>qn(e.querySelector("[data-animated-caption]")),"queryCaptionEl"),Kn=t(e=>qn(e.querySelector("[data-animated-weeks]")),"queryWeeksEl"),Qn=t(e=>qn(e.querySelector("[data-animated-nav]")),"queryNavEl"),Jn=t(e=>qn(e.querySelector("[data-animated-weekdays]")),"queryWeekdaysEl");function Xn(e,n,{classNames:o,months:a,focused:r,dateLib:s}){const i=f.useRef(null),d=f.useRef(a),l=f.useRef(!1);f.useLayoutEffect(()=>{const c=d.current;if(d.current=a,!(n&&e.current&&e.current instanceof HTMLElement&&0!==a.length&&0!==c.length&&a.length===c.length))return;const u=s.isSameMonth(a[0].date,c[0].date),m=s.isAfter(a[0].date,c[0].date),f=m?o[Tt.caption_after_enter]:o[Tt.caption_before_enter],h=m?o[Tt.weeks_after_enter]:o[Tt.weeks_before_enter],p=i.current,y=e.current.cloneNode(!0);if(y instanceof HTMLElement){Hn(y).forEach(e=>{if(!(e instanceof HTMLElement))return;const t=Vn(e);t&&e.contains(t)&&e.removeChild(t);const n=Gn(e);n&&n.classList.remove(f);const o=Kn(e);o&&o.classList.remove(h)}),i.current=y}else i.current=null;if(l.current||u||r)return;const g=p instanceof HTMLElement?Hn(p):[],b=Hn(e.current);if(b?.every(e=>e instanceof HTMLElement)&&g&&g.every(e=>e instanceof HTMLElement)){l.current=!0,e.current.style.isolation="isolate";const n=Qn(e.current);n&&(n.style.zIndex="1"),b.forEach((a,r)=>{const s=g[r];if(!s)return;a.style.position="relative",a.style.overflow="hidden";const i=Gn(a);i&&i.classList.add(f);const d=Kn(a);d&&d.classList.add(h);const c=t(()=>{l.current=!1,e.current&&(e.current.style.isolation=""),n&&(n.style.zIndex=""),i&&i.classList.remove(f),d&&d.classList.remove(h),a.style.position="",a.style.overflow="",a.contains(s)&&a.removeChild(s)},"cleanUp");s.style.pointerEvents="none",s.style.position="absolute",s.style.overflow="hidden",s.setAttribute("aria-hidden","true");const u=Jn(s);u&&(u.style.opacity="0");const p=Gn(s);p&&(p.classList.add(m?o[Tt.caption_before_exit]:o[Tt.caption_after_exit]),p.addEventListener("animationend",c));const y=Kn(s);y&&y.classList.add(m?o[Tt.weeks_before_exit]:o[Tt.weeks_after_exit]),a.insertBefore(s,a.firstChild)})}})}function eo(e,t,n,o){const a=e[0],r=e[e.length-1],{ISOWeek:s,fixedWeeks:i,broadcastCalendar:d}=n??{},{addDays:l,differenceInCalendarDays:c,differenceInCalendarMonths:u,endOfBroadcastWeek:m,endOfISOWeek:f,endOfMonth:h,endOfWeek:p,isAfter:y,startOfBroadcastWeek:g,startOfISOWeek:b,startOfWeek:v}=o,x=d?g(a,o):s?b(a):v(a),k=c(d?m(r):s?f(h(r)):p(h(r)),x),w=u(r,a)+1,M=[];for(let C=0;C<=k;C++){const e=l(x,C);if(t&&y(e,t))break;M.push(e)}const D=(d?35:42)*w;if(i&&M.length<D){const e=D-M.length;for(let t=0;t<e;t++){const e=l(M[M.length-1],1);M.push(e)}}return M}function to(e){const t=[];return e.reduce((e,n)=>{const o=n.weeks.reduce((e,t)=>e.concat(t.days.slice()),t.slice());return e.concat(o.slice())},t.slice())}function no(e,t,n,o){const{numberOfMonths:a=1}=n,r=[];for(let s=0;s<a;s++){const n=o.addMonths(e,s);if(t&&n>t)break;r.push(n)}return r}function oo(e,t,n,o){const{month:a,defaultMonth:r,today:s=o.today(),numberOfMonths:i=1}=e;let d=a||r||s;const{differenceInCalendarMonths:l,addMonths:c,startOfMonth:u}=o;if(n&&l(n,d)<i-1){d=c(n,-1*(i-1))}return t&&l(d,t)<0&&(d=t),u(d)}function ao(e,t,n,o){const{addDays:a,endOfBroadcastWeek:r,endOfISOWeek:s,endOfMonth:i,endOfWeek:d,getISOWeek:l,getWeek:c,startOfBroadcastWeek:u,startOfISOWeek:m,startOfWeek:f}=o,h=e.reduce((e,h)=>{const p=n.broadcastCalendar?u(h,o):n.ISOWeek?m(h):f(h),y=n.broadcastCalendar?r(h):n.ISOWeek?s(i(h)):d(i(h)),g=t.filter(e=>e>=p&&e<=y),b=n.broadcastCalendar?35:42;if(n.fixedWeeks&&g.length<b){const e=t.filter(e=>{const t=b-g.length;return e>y&&e<=a(y,t)});g.push(...e)}const v=g.reduce((e,t)=>{const a=n.ISOWeek?l(t):c(t),r=e.find(e=>e.weekNumber===a),s=new pt(t,h,o);return r?r.days.push(s):e.push(new vt(a,[s])),e},[]),x=new gt(h,v);return e.push(x),e},[]);return n.reverseMonths?h.reverse():h}function ro(e,t){let{startMonth:n,endMonth:o}=e;const{startOfYear:a,startOfDay:r,startOfMonth:s,endOfMonth:i,addYears:d,endOfYear:l,newDate:c,today:u}=t,{fromYear:m,toYear:f,fromMonth:h,toMonth:p}=e;!n&&h&&(n=h),!n&&m&&(n=t.newDate(m,0,1)),!o&&p&&(o=p),!o&&f&&(o=c(f,11,31));const y="dropdown"===e.captionLayout||"dropdown-years"===e.captionLayout;return n?n=s(n):m?n=c(m,0,1):!n&&y&&(n=a(d(e.today??u(),-100))),o?o=i(o):f?o=c(f,11,31):!o&&y&&(o=l(e.today??u())),[n?r(n):n,o?r(o):o]}function so(e,t,n,o){if(n.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:r=1}=n,{startOfMonth:s,addMonths:i,differenceInCalendarMonths:d}=o,l=a?r:1,c=s(e);if(!t)return i(c,l);return d(t,e)<r?void 0:i(c,l)}function io(e,t,n,o){if(n.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:r}=n,{startOfMonth:s,addMonths:i,differenceInCalendarMonths:d}=o,l=a?r??1:1,c=s(e);if(!t)return i(c,-l);return d(c,t)<=0?void 0:i(c,-l)}function lo(e){return e.reduce((e,t)=>e.concat(t.weeks.slice()),[].slice())}function co(e,t){const[n,o]=f.useState(e);return[void 0===t?n:t,o]}function uo(e,n){const[o,a]=ro(e,n),{startOfMonth:r,endOfMonth:s}=n,i=oo(e,o,a,n),[d,l]=co(i,e.month?i:void 0);f.useEffect(()=>{const t=oo(e,o,a,n);l(t)},[e.timeZone]);const c=no(d,a,e,n),u=ao(c,eo(c,e.endMonth?s(e.endMonth):void 0,e,n),e,n),m=lo(u),h=to(u),p=io(d,o,e,n),y=so(d,a,e,n),{disableNavigation:g,onMonthChange:b}=e,v=t(e=>m.some(t=>t.days.some(t=>t.isEqualTo(e))),"isDayInCalendar"),x=t(e=>{if(g)return;let t=r(e);o&&t<r(o)&&(t=r(o)),a&&t>r(a)&&(t=r(a)),l(t),b?.(t)},"goToMonth"),k=t(e=>{v(e)||x(e.date)},"goToDay");return{months:u,weeks:m,days:h,navStart:o,navEnd:a,previousMonth:p,nextMonth:y,goToMonth:x,goToDay:k}}var mo,fo;function ho(e){return!e[St.disabled]&&!e[St.hidden]&&!e[St.outside]}function po(e,t,n,o){let a,r=-1;for(const s of e){const e=t(s);ho(e)&&(e[St.focused]&&r<mo.FocusedModifier?(a=s,r=mo.FocusedModifier):o?.isEqualTo(s)&&r<mo.LastFocused?(a=s,r=mo.LastFocused):n(s.date)&&r<mo.Selected?(a=s,r=mo.Selected):e[St.today]&&r<mo.Today&&(a=s,r=mo.Today))}return a||(a=e.find(e=>ho(t(e)))),a}function yo(e,n,o,a,r,s,i){const{ISOWeek:d,broadcastCalendar:l}=s,{addDays:c,addMonths:u,addWeeks:m,addYears:f,endOfBroadcastWeek:h,endOfISOWeek:p,endOfWeek:y,max:g,min:b,startOfBroadcastWeek:v,startOfISOWeek:x,startOfWeek:k}=i;let w={day:c,week:m,month:u,year:f,startOfWeek:t(e=>l?v(e,i):d?x(e):k(e),"startOfWeek"),endOfWeek:t(e=>l?h(e):d?p(e):y(e),"endOfWeek")}[e](o,"after"===n?1:-1);return"before"===n&&a?w=g([a,w]):"after"===n&&r&&(w=b([r,w])),w}function go(e,t,n,o,a,r,s,i=0){if(i>365)return;const d=yo(e,t,n.date,o,a,r,s),l=Boolean(r.disabled&&un(d,r.disabled,s)),c=Boolean(r.hidden&&un(d,r.hidden,s)),u=new pt(d,d,s);return l||c?go(e,t,u,o,a,r,s,i+1):u}function bo(e,n,o,a,r){const{autoFocus:s}=e,[i,d]=f.useState(),l=po(n.days,o,a||(()=>!1),i),[c,u]=f.useState(s?l:void 0),m=t(()=>{d(c),u(void 0)},"blur"),h=t((t,o)=>{if(!c)return;const a=go(t,o,c,n.navStart,n.navEnd,e,r);if(a){if(e.disableNavigation){if(!n.days.some(e=>e.isEqualTo(a)))return}n.goToDay(a),u(a)}},"moveFocus");return{isFocusTarget:t(e=>Boolean(l?.isEqualTo(e)),"isFocusTarget"),setFocused:u,focused:c,blur:m,moveFocus:h}}function vo(e,n){const{selected:o,required:a,onSelect:r}=e,[s,i]=co(o,r?o:void 0),d=r?o:s,{isSameDay:l}=n,c=t(e=>d?.some(t=>l(t,e))??!1,"isSelected"),{min:u,max:m}=e,f=t((e,t,n)=>{let o=[...d??[]];if(c(e)){if(d?.length===u)return;if(a&&1===d?.length)return;o=d?.filter(t=>!l(t,e))}else o=d?.length===m?[e]:[...o,e];return r||i(o),r?.(o,e,t,n),o},"select");return{selected:d,select:f,isSelected:c}}function xo(e,t,n=0,o=0,a=!1,r=ft){const{from:s,to:i}=t||{},{isSameDay:d,isAfter:l,isBefore:c}=r;let u;if(s||i){if(s&&!i)u=d(s,e)?0===n?{from:s,to:e}:a?{from:s,to:void 0}:void 0:c(e,s)?{from:e,to:s}:{from:s,to:e};else if(s&&i)if(d(s,e)&&d(i,e))u=a?{from:s,to:i}:void 0;else if(d(s,e))u={from:s,to:n>0?void 0:e};else if(d(i,e))u={from:e,to:n>0?void 0:e};else if(c(e,s))u={from:e,to:i};else if(l(e,s))u={from:s,to:e};else{if(!l(e,i))throw new Error("Invalid range");u={from:s,to:e}}}else u={from:e,to:n>0?void 0:e};if(u?.from&&u?.to){const t=r.differenceInCalendarDays(u.to,u.from);(o>0&&t>o||n>1&&t<n)&&(u={from:e,to:void 0})}return u}function ko(e,t,n=ft){const o=Array.isArray(t)?t:[t];let a=e.from;const r=n.differenceInCalendarDays(e.to,e.from),s=Math.min(r,6);for(let i=0;i<=s;i++){if(o.includes(a.getDay()))return!0;a=n.addDays(a,1)}return!1}function wo(e,t,n=ft){return on(e,t.from,!1,n)||on(e,t.to,!1,n)||on(t,e.from,!1,n)||on(t,e.to,!1,n)}function Mo(e,t,n=ft){const o=Array.isArray(t)?t:[t];if(o.filter(e=>"function"!=typeof e).some(t=>{if("boolean"==typeof t)return t;if(n.isDate(t))return on(e,t,!1,n);if(cn(t,n))return t.some(t=>on(e,t,!1,n));if(rn(t))return!(!t.from||!t.to)&&wo(e,{from:t.from,to:t.to},n);if(ln(t))return ko(e,t.dayOfWeek,n);if(an(t)){return n.isAfter(t.before,t.after)?wo(e,{from:n.addDays(t.after,1),to:n.addDays(t.before,-1)},n):un(e.from,t,n)||un(e.to,t,n)}return!(!sn(t)&&!dn(t))&&(un(e.from,t,n)||un(e.to,t,n))}))return!0;const a=o.filter(e=>"function"==typeof e);if(a.length){let t=e.from;const o=n.differenceInCalendarDays(e.to,e.from);for(let e=0;e<=o;e++){if(a.some(e=>e(t)))return!0;t=n.addDays(t,1)}}return!1}function Do(e,n){const{disabled:o,excludeDisabled:a,selected:r,required:s,onSelect:i}=e,[d,l]=co(r,i?r:void 0),c=i?r:d,u=t(e=>c&&on(c,e,!1,n),"isSelected");return{selected:c,select:t((t,r,d)=>{const{min:u,max:m}=e,f=t?xo(t,c,u,m,s,n):void 0;return a&&o&&f?.from&&f.to&&Mo({from:f.from,to:f.to},o,n)&&(f.from=t,f.to=void 0),i||l(f),i?.(f,t,r,d),f},"select"),isSelected:u}}function Co(e,n){const{selected:o,required:a,onSelect:r}=e,[s,i]=co(o,r?o:void 0),d=r?o:s,{isSameDay:l}=n,c=t(e=>!!d&&l(d,e),"isSelected");return{selected:d,select:t((e,t,n)=>{let o=e;return!a&&d&&d&&l(e,d)&&(o=void 0),r||i(o),r?.(o,e,t,n),o},"select"),isSelected:c}}function No(e,t){const n=Co(e,t),o=vo(e,t),a=Do(e,t);switch(e.mode){case"single":return n;case"multiple":return o;case"range":return a;default:return}}function So(e){let t=e;t.timeZone&&(t={...e},t.today&&(t.today=new it(t.today,t.timeZone)),t.month&&(t.month=new it(t.month,t.timeZone)),t.defaultMonth&&(t.defaultMonth=new it(t.defaultMonth,t.timeZone)),t.startMonth&&(t.startMonth=new it(t.startMonth,t.timeZone)),t.endMonth&&(t.endMonth=new it(t.endMonth,t.timeZone)),"single"===t.mode&&t.selected?t.selected=new it(t.selected,t.timeZone):"multiple"===t.mode&&t.selected?t.selected=t.selected?.map(e=>new it(e,t.timeZone)):"range"===t.mode&&t.selected&&(t.selected={from:t.selected.from?new it(t.selected.from,t.timeZone):void 0,to:t.selected.to?new it(t.selected.to,t.timeZone):void 0}));const{components:n,formatters:o,labels:a,dateLib:r,locale:s,classNames:i}=f.useMemo(()=>{const e={...Te,...t.locale};return{dateLib:new mt({locale:e,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib),components:hn(t.components),formatters:Sn(t.formatters),labels:{...$n,...t.labels},locale:e,classNames:{...yn(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]),{captionLayout:d,mode:l,navLayout:c,numberOfMonths:u=1,onDayBlur:m,onDayClick:p,onDayFocus:y,onDayKeyDown:g,onDayMouseEnter:b,onDayMouseLeave:v,onNextClick:x,onPrevClick:k,showWeekNumber:w,styles:M}=t,{formatCaption:D,formatDay:C,formatMonthDropdown:N,formatWeekNumber:S,formatWeekNumberHeader:O,formatWeekdayName:j,formatYearDropdown:_}=o,T=uo(t,r),{days:W,months:I,navStart:E,navEnd:z,previousMonth:L,nextMonth:F,goToMonth:B}=T,Y=mn(W,t,E,z,r),{isSelected:P,select:U,selected:Z}=No(t,r)??{},{blur:A,focused:R,isFocusTarget:$,moveFocus:q,setFocused:H}=bo(t,T,Y,P??(()=>!1),r),{labelDayButton:V,labelGridcell:G,labelGrid:K,labelMonthDropdown:Q,labelNav:J,labelPrevious:X,labelNext:ee,labelWeekday:te,labelWeekNumber:ne,labelWeekNumberHeader:oe,labelYearDropdown:ae}=a,re=f.useMemo(()=>_n(r,t.ISOWeek),[r,t.ISOWeek]),se=void 0!==l||void 0!==p,ie=f.useCallback(()=>{L&&(B(L),k?.(L))},[L,B,k]),de=f.useCallback(()=>{F&&(B(F),x?.(F))},[B,F,x]),le=f.useCallback((e,t)=>n=>{n.preventDefault(),n.stopPropagation(),H(e),U?.(e.date,t,n),p?.(e.date,t,n)},[U,p,H]),ce=f.useCallback((e,t)=>n=>{H(e),y?.(e.date,t,n)},[y,H]),ue=f.useCallback((e,t)=>n=>{A(),m?.(e.date,t,n)},[A,m]),me=f.useCallback((e,n)=>o=>{const a={ArrowLeft:[o.shiftKey?"month":"day","rtl"===t.dir?"after":"before"],ArrowRight:[o.shiftKey?"month":"day","rtl"===t.dir?"before":"after"],ArrowDown:[o.shiftKey?"year":"week","after"],ArrowUp:[o.shiftKey?"year":"week","before"],PageUp:[o.shiftKey?"year":"month","before"],PageDown:[o.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(a[o.key]){o.preventDefault(),o.stopPropagation();const[e,t]=a[o.key];q(e,t)}g?.(e.date,n,o)},[q,g,t.dir]),fe=f.useCallback((e,t)=>n=>{b?.(e.date,t,n)},[b]),he=f.useCallback((e,t)=>n=>{v?.(e.date,t,n)},[v]),pe=f.useCallback(e=>t=>{const n=Number(t.target.value),o=r.setMonth(r.startOfMonth(e),n);B(o)},[r,B]),ye=f.useCallback(e=>t=>{const n=Number(t.target.value),o=r.setYear(r.startOfMonth(e),n);B(o)},[r,B]),{className:ge,style:be}=f.useMemo(()=>({className:[i[Ct.Root],t.className].filter(Boolean).join(" "),style:{...M?.[Ct.Root],...t.style}}),[i,t.className,t.style,M]),ve=pn(t),xe=f.useRef(null);Xn(xe,Boolean(t.animate),{classNames:i,months:I,focused:R,dateLib:r});const ke={dayPickerProps:t,selected:Z,select:U,isSelected:P,months:I,nextMonth:F,previousMonth:L,goToMonth:B,getModifiers:Y,components:n,classNames:i,styles:M,labels:a,formatters:o};return h.createElement(Pt.Provider,{value:ke},h.createElement(n.Root,{rootRef:t.animate?xe:void 0,className:ge,style:be,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"],...ve},h.createElement(n.Months,{className:i[Ct.Months],style:M?.[Ct.Months]},!t.hideNavigation&&!c&&h.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:i[Ct.Nav],style:M?.[Ct.Nav],"aria-label":J(),onPreviousClick:ie,onNextClick:de,previousMonth:L,nextMonth:F}),I.map((e,a)=>h.createElement(n.Month,{"data-animated-month":t.animate?"true":void 0,className:i[Ct.Month],style:M?.[Ct.Month],key:a,displayIndex:a,calendarMonth:e},"around"===c&&!t.hideNavigation&&0===a&&h.createElement(n.PreviousMonthButton,{type:"button",className:i[Ct.PreviousMonthButton],tabIndex:L?void 0:-1,"aria-disabled":!L||void 0,"aria-label":X(L),onClick:ie,"data-animated-button":t.animate?"true":void 0},h.createElement(n.Chevron,{disabled:!L||void 0,className:i[Ct.Chevron],orientation:"rtl"===t.dir?"right":"left"})),h.createElement(n.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:i[Ct.MonthCaption],style:M?.[Ct.MonthCaption],calendarMonth:e,displayIndex:a},d?.startsWith("dropdown")?h.createElement(n.DropdownNav,{className:i[Ct.Dropdowns],style:M?.[Ct.Dropdowns]},(()=>{const a="dropdown"===d||"dropdown-months"===d?h.createElement(n.MonthsDropdown,{key:"month",className:i[Ct.MonthsDropdown],"aria-label":Q(),classNames:i,components:n,disabled:Boolean(t.disableNavigation),onChange:pe(e.date),options:On(e.date,E,z,o,r),style:M?.[Ct.Dropdown],value:r.getMonth(e.date)}):h.createElement("span",{key:"month"},N(e.date,r)),s="dropdown"===d||"dropdown-years"===d?h.createElement(n.YearsDropdown,{key:"year",className:i[Ct.YearsDropdown],"aria-label":ae(r.options),classNames:i,components:n,disabled:Boolean(t.disableNavigation),onChange:ye(e.date),options:Tn(E,z,o,r,Boolean(t.reverseYears)),style:M?.[Ct.Dropdown],value:r.getYear(e.date)}):h.createElement("span",{key:"year"},_(e.date,r));return"year-first"===r.getMonthYearOrder()?[s,a]:[a,s]})(),h.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},D(e.date,r.options,r))):h.createElement(n.CaptionLabel,{className:i[Ct.CaptionLabel],role:"status","aria-live":"polite"},D(e.date,r.options,r))),"around"===c&&!t.hideNavigation&&a===u-1&&h.createElement(n.NextMonthButton,{type:"button",className:i[Ct.NextMonthButton],tabIndex:F?void 0:-1,"aria-disabled":!F||void 0,"aria-label":ee(F),onClick:de,"data-animated-button":t.animate?"true":void 0},h.createElement(n.Chevron,{disabled:!F||void 0,className:i[Ct.Chevron],orientation:"rtl"===t.dir?"left":"right"})),a===u-1&&"after"===c&&!t.hideNavigation&&h.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:i[Ct.Nav],style:M?.[Ct.Nav],"aria-label":J(),onPreviousClick:ie,onNextClick:de,previousMonth:L,nextMonth:F}),h.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":"multiple"===l||"range"===l,"aria-label":K(e.date,r.options,r)||void 0,className:i[Ct.MonthGrid],style:M?.[Ct.MonthGrid]},!t.hideWeekdays&&h.createElement(n.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:i[Ct.Weekdays],style:M?.[Ct.Weekdays]},w&&h.createElement(n.WeekNumberHeader,{"aria-label":oe(r.options),className:i[Ct.WeekNumberHeader],style:M?.[Ct.WeekNumberHeader],scope:"col"},O()),re.map(e=>h.createElement(n.Weekday,{"aria-label":te(e,r.options,r),className:i[Ct.Weekday],key:String(e),style:M?.[Ct.Weekday],scope:"col"},j(e,r.options,r)))),h.createElement(n.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:i[Ct.Weeks],style:M?.[Ct.Weeks]},e.weeks.map(e=>h.createElement(n.Week,{className:i[Ct.Week],key:e.weekNumber,style:M?.[Ct.Week],week:e},w&&h.createElement(n.WeekNumber,{week:e,style:M?.[Ct.WeekNumber],"aria-label":ne(e.weekNumber,{locale:s}),className:i[Ct.WeekNumber],scope:"row",role:"rowheader"},S(e.weekNumber,r)),e.days.map(e=>{const{date:o}=e,a=Y(e);if(a[St.focused]=!a.hidden&&Boolean(R?.isEqualTo(e)),a[jt.selected]=P?.(o)||a.selected,rn(Z)){const{from:e,to:t}=Z;a[jt.range_start]=Boolean(e&&t&&r.isSameDay(o,e)),a[jt.range_end]=Boolean(e&&t&&r.isSameDay(o,t)),a[jt.range_middle]=on(Z,o,!0,r)}const s=jn(a,M,t.modifiersStyles),d=fn(a,i,t.modifiersClassNames),l=se||a.hidden?void 0:G(o,a,r.options,r);return h.createElement(n.Day,{key:`${r.format(o,"yyyy-MM-dd")}_${r.format(e.displayMonth,"yyyy-MM")}`,day:e,modifiers:a,className:d.join(" "),style:s,role:"gridcell","aria-selected":a.selected||void 0,"aria-label":l,"data-day":r.format(o,"yyyy-MM-dd"),"data-month":e.outside?r.format(o,"yyyy-MM"):void 0,"data-selected":a.selected||void 0,"data-disabled":a.disabled||void 0,"data-hidden":a.hidden||void 0,"data-outside":e.outside||void 0,"data-focused":a.focused||void 0,"data-today":a.today||void 0},!a.hidden&&se?h.createElement(n.DayButton,{className:i[Ct.DayButton],style:M?.[Ct.DayButton],type:"button",day:e,modifiers:a,disabled:a.disabled||void 0,tabIndex:$(e)?0:-1,"aria-label":V(o,a,r.options,r),onClick:le(e,a),onBlur:ue(e,a),onFocus:ce(e,a),onKeyDown:me(e,a),onMouseEnter:fe(e,a),onMouseLeave:he(e,a)},C(o,r.options,r)):!a.hidden&&C(e.date,r.options,r))})))))))),t.footer&&h.createElement(n.Footer,{className:i[Ct.Footer],style:M?.[Ct.Footer],role:"status","aria-live":"polite"},t.footer)))}function Oo({className:e,classNames:o,showOutsideDays:a=!0,captionLayout:r="label",buttonVariant:s="ghost",formatters:i,components:d,...l}){const c=yn();return n.jsx(So,{showOutsideDays:a,className:p("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,e),captionLayout:r,formatters:{formatMonthDropdown:t(e=>e.toLocaleString("default",{month:"short"}),"formatMonthDropdown"),...i},classNames:{root:p("w-fit",c.root),months:p("flex gap-4 flex-col md:flex-row relative",c.months),month:p("flex flex-col w-full gap-4",c.month),nav:p("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",c.nav),button_previous:p(j({variant:s}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",c.button_previous),button_next:p(j({variant:s}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",c.button_next),month_caption:p("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",c.month_caption),dropdowns:p("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",c.dropdowns),dropdown_root:p("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",c.dropdown_root),dropdown:p("absolute bg-popover inset-0 opacity-0",c.dropdown),caption_label:p("select-none font-medium","label"===r?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",c.caption_label),table:"w-full border-collapse",weekdays:p("flex",c.weekdays),weekday:p("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",c.weekday),week:p("flex w-full mt-2",c.week),week_number_header:p("select-none w-(--cell-size)",c.week_number_header),week_number:p("text-[0.8rem] select-none text-muted-foreground",c.week_number),day:p("relative w-full h-full p-0 text-center [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",l.showWeekNumber?"[&:nth-child(2)[data-selected=true]_button]:rounded-l-md":"[&:first-child[data-selected=true]_button]:rounded-l-md",c.day),range_start:p("rounded-l-md bg-accent",c.range_start),range_middle:p("rounded-none",c.range_middle),range_end:p("rounded-r-md bg-accent",c.range_end),today:p("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",c.today),outside:p("text-muted-foreground aria-selected:text-muted-foreground",c.outside),disabled:p("text-muted-foreground opacity-50",c.disabled),hidden:p("invisible",c.hidden),...o},components:{Root:t(({className:e,rootRef:t,...o})=>n.jsx("div",{"data-slot":"calendar",ref:t,className:p(e),...o}),"Root"),Chevron:t(({className:e,orientation:t,...o})=>"left"===t?n.jsx(G,{className:p("size-4",e),...o}):"right"===t?n.jsx(K,{className:p("size-4",e),...o}):n.jsx(Q,{className:p("size-4",e),...o}),"Chevron"),DayButton:jo,WeekNumber:t(({children:e,...t})=>n.jsx("td",{...t,children:n.jsx("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:e})}),"WeekNumber"),...d},...l})}function jo({className:e,day:t,modifiers:o,...a}){const r=yn(),s=f.useRef(null);return f.useEffect(()=>{o.focused&&s.current?.focus()},[o.focused]),n.jsx(g,{ref:s,variant:"ghost",size:"icon","data-day":t.date.toLocaleDateString(),"data-selected-single":o.selected&&!o.range_start&&!o.range_end&&!o.range_middle,"data-range-start":o.range_start,"data-range-end":o.range_end,"data-range-middle":o.range_middle,className:p("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",r.day,e),...a})}function _o({control:e,showFollowUpDate:o}){return n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ee,{control:e,name:"createFollowUp",render:t(({field:e})=>n.jsxs(Fe,{className:"flex items-center justify-between space-y-0",children:[n.jsx(Be,{className:"text-sm font-medium",children:"Create follow-up task?"}),n.jsx(Ye,{children:n.jsx(_,{checked:e.value,onCheckedChange:e.onChange})})]}),"render")}),o&&n.jsx(Ee,{control:e,name:"followUpDate",render:t(({field:e})=>n.jsxs(Fe,{className:"flex flex-col",children:[n.jsx(Be,{children:"Follow-up Date"}),n.jsxs(Z,{children:[n.jsx(A,{asChild:!0,children:n.jsx(Ye,{children:n.jsxs(g,{variant:"outline",className:p("h-11 w-full justify-start text-left font-normal",!e.value&&"text-muted-foreground"),children:[n.jsx(J,{className:"mr-2 h-4 w-4"}),e.value?ue(e.value,"PPP"):n.jsx("span",{children:"Pick a date"})]})})}),n.jsx(R,{className:"w-auto p-0",align:"start",children:n.jsx(Oo,{mode:"single",selected:e.value,onSelect:e.onChange,disabled:t(e=>e<Ne(new Date),"disabled"),initialFocus:!0})})]}),n.jsx(Ue,{})]}),"render")})]})}function To({onComplete:e,onRefresh:a,initialDraft:r,onDraftChange:d,initialContactId:l,initialOrganizationId:c,initialOpportunityId:h}){const p=s(),y=o(),{salesId:b,loading:v}=T(),x=f.useMemo(()=>({...W.partial().parse({}),...r||{},...void 0!==l&&{contactId:l},...void 0!==c&&{organizationId:c},...void 0!==h&&{opportunityId:h}}),[r,l,c,h]),k=u({resolver:i(W),defaultValues:x}),w=m({control:k.control}),[M,D,C,N,S]=m({control:k.control,name:["opportunityId","contactId","organizationId","activityType","createFollowUp"]});f.useEffect(()=>{d&&d(w)},[w,d]);const O=Re({form:k,selectedOrganizationId:C,selectedContactId:D,selectedOpportunityId:M}),j=f.useCallback(async(t,n=!0)=>{if(b)try{if(await p.create("activities",{data:{activity_type:t.opportunityId?"interaction":"engagement",type:I[t.activityType],outcome:t.outcome,subject:t.notes.substring(0,100)||`${t.activityType} update`,description:t.notes,activity_date:t.date.toISOString(),duration_minutes:t.duration,contact_id:t.contactId,organization_id:t.organizationId,opportunity_id:t.opportunityId,follow_up_required:t.createFollowUp||!1,follow_up_date:t.followUpDate?t.followUpDate.toISOString().split("T")[0]:null,sample_status:"Sample"===t.activityType?t.sampleStatus:null,created_by:b}}),t.createFollowUp&&t.followUpDate){const e={title:`Follow-up: ${t.notes.substring(0,50)}`,due_date:t.followUpDate.toISOString(),type:"Follow-up",priority:"medium",sales_id:b,created_by:b};"number"!=typeof t.contactId||isNaN(t.contactId)||(e.contact_id=t.contactId),"number"!=typeof t.opportunityId||isNaN(t.opportunityId)||(e.opportunity_id=t.opportunityId),await p.create("tasks",{data:e})}y("Activity logged successfully",{type:"success"}),k.reset(),n&&e(),a&&a()}catch(o){y("Failed to log activity",{type:"error"})}else y("Cannot log activity: user session expired. Please refresh and try again.",{type:"error"})},[b,p,y,k,e,a]),_=f.useCallback(e=>{e.organization_id&&k.setValue("organizationId",e.organization_id)},[k]),z=f.useCallback(()=>{k.setValue("organizationId",void 0),k.setValue("opportunityId",void 0)},[k]),L=f.useCallback(e=>{const t=k.getValues("contactId");if(t){const n=O.contacts.find(e=>e.id===t);n&&n.organization_id!==e.id&&(k.setValue("contactId",void 0),y("Contact cleared - doesn't belong to selected organization",{type:"info"}))}const n=k.getValues("opportunityId");if(n){const t=O.opportunities.find(e=>e.id===n);t&&t.customer_organization_id!==e.id&&k.setValue("opportunityId",void 0)}},[k,O.contacts,O.opportunities,y]),F=f.useCallback(()=>{const e=k.getValues("opportunityId"),t=k.getValues("organizationId");if(e){const n=O.opportunities.find(t=>t.id===e);n&&n.customer_organization_id===t&&k.setValue("opportunityId",void 0)}},[k,O.opportunities]);return O.isInitialLoading||v?n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx($,{className:"mx-auto h-6 w-6 animate-spin text-muted-foreground"}),n.jsx("div",{className:"mt-2 text-sm text-muted-foreground",children:"Loading..."})]})}):n.jsx(We,{...k,children:n.jsxs("form",{onSubmit:k.handleSubmit(j),className:"space-y-4",children:[n.jsx(He,{control:k.control,activityType:N}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-sm font-medium",children:"Who was involved?"}),n.jsx(Ee,{control:k.control,name:"contactId",render:t(({field:e})=>n.jsx($e,{value:e.value,onChange:e.onChange,options:O.filteredContacts.map(e=>({id:e.id,name:e.name,subtitle:e.company_name})),fallbackOptions:O.contactsForAnchorOrg.map(e=>({id:e.id,name:e.name,subtitle:e.company_name})),loading:O.contactsLoading,searchTerm:O.contactSearch.searchTerm,onSearchChange:O.contactSearch.setSearchTerm,placeholder:"Select contact",emptyMessage:"No contact found. Type to search.",filteredEmptyMessage:"No contacts found for this organization",isFiltered:!!O.anchorOrganizationId,label:"Contact",description:"Select a contact and/or organization (must be from same company)",onSelect:_,onClear:z,listId:"contact-list"}),"render")}),n.jsx(Ee,{control:k.control,name:"organizationId",render:t(({field:e})=>n.jsx($e,{value:e.value,onChange:e.onChange,options:O.filteredOrganizations.map(e=>({id:e.id,name:e.name})),loading:O.organizationsLoading,searchTerm:O.orgSearch.searchTerm,onSearchChange:O.orgSearch.setSearchTerm,placeholder:"Select organization",emptyMessage:"No organization found. Type to search.",label:"Organization",description:"Select a contact and/or organization (must be from same company)",onSelect:L,onClear:F,listId:"organization-list"}),"render")}),n.jsx(Ee,{control:k.control,name:"opportunityId",render:t(({field:e})=>n.jsx($e,{value:e.value,onChange:e.onChange,options:O.filteredOpportunities.map(e=>({id:e.id,name:e.name})),fallbackOptions:O.oppsForAnchorOrg.map(e=>({id:e.id,name:e.name})),loading:O.opportunitiesLoading,searchTerm:O.oppSearch.searchTerm,onSearchChange:O.oppSearch.setSearchTerm,placeholder:"Select opportunity (optional)",emptyMessage:"No opportunity found. Type to search.",filteredEmptyMessage:"No opportunities for this organization",isFiltered:!!O.anchorOrganizationId,label:"Opportunity",listId:"opportunity-list"}),"render")})]}),n.jsx(Ee,{control:k.control,name:"notes",render:t(({field:e})=>n.jsxs(Fe,{children:[n.jsx(Be,{children:"Notes"}),n.jsx(Ye,{children:n.jsx(E,{placeholder:"Summary of the interaction...",className:"min-h-24",...e})}),n.jsx(Ue,{})]}),"render")}),n.jsx(_o,{control:k.control,showFollowUpDate:S}),n.jsxs("div",{className:"flex justify-between pt-4",children:[n.jsx(g,{type:"button",variant:"outline",onClick:e,disabled:k.formState.isSubmitting,children:"Cancel"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(g,{type:"submit",className:"h-11",disabled:k.formState.isSubmitting,children:k.formState.isSubmitting?n.jsxs(n.Fragment,{children:[n.jsx($,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):"Save & Close"}),n.jsx(g,{type:"button",variant:"secondary",className:"h-11",disabled:k.formState.isSubmitting,onClick:t(()=>{k.handleSubmit(e=>{j(e,!1)})()},"onClick"),children:k.formState.isSubmitting?n.jsxs(n.Fragment,{children:[n.jsx($,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):"Save & New"})]})]})]})})}t(Xn,"useAnimation"),t(eo,"getDates"),t(to,"getDays"),t(no,"getDisplayMonths"),t(oo,"getInitialMonth"),t(ao,"getMonths"),t(ro,"getNavMonths"),t(so,"getNextMonth"),t(io,"getPreviousMonth"),t(lo,"getWeeks"),t(co,"useControlledValue"),t(uo,"useCalendar"),(fo=mo||(mo={}))[fo.Today=0]="Today",fo[fo.Selected=1]="Selected",fo[fo.LastFocused=2]="LastFocused",fo[fo.FocusedModifier=3]="FocusedModifier",t(ho,"isFocusableDay"),t(po,"calculateFocusTarget"),t(yo,"getFocusableDate"),t(go,"getNextFocus"),t(bo,"useFocus"),t(vo,"useMulti"),t(xo,"addToRange"),t(ko,"rangeContainsDayOfWeek"),t(wo,"rangeOverlaps"),t(Mo,"rangeContainsModifiers"),t(Do,"useRange"),t(Co,"useSingle"),t(No,"useSelection"),t(So,"DayPicker"),t(Oo,"Calendar"),t(jo,"CalendarDayButton"),t(_o,"FollowUpSection"),t(To,"QuickLogForm");export{To as QuickLogForm};
