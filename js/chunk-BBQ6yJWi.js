var e=Object.defineProperty,s=(s,a)=>e(s,"name",{value:a,configurable:!0});import{F as a,v as r,j as t,T as n,ak as i,P as l,u as o,b1 as c,l as d,b3 as p,al as u,H as x,b8 as h,t as m,b2 as f,o as j}from"./chunk-ByJg_QQB.js";import{B as g,a as v,b as y}from"./chunk-Dc4zIuSl.js";import{r as b,L as w}from"./chunk-1NZFT-6z.js";import{a5 as N,B as k,s as C,i as P,j as V,k as E,m as F,n as L,K as _,T as K}from"../assets/index-BoLku8RR.js";import{a5 as S,ai as T,aq as z,aS as A,a as O,aT as M,C as D,aU as H}from"./chunk-Bc6KM1xM.js";const B=b.createContext(void 0),I=s(()=>b.useContext(B),"useFilterContext"),R=s(({label:e,resource:s})=>{const i=a(),l=r()({resource:s??i,type:"create"});return t.jsxs(w,{className:N({variant:"outline"}),to:l,onClick:$,children:[t.jsx(S,{}),t.jsx(n,{i18nKey:e??"ra.action.create",children:e??"Create"})]})},"CreateButton"),$=s(e=>e.stopPropagation(),"stopPropagation"),q=s(e=>{const{maxResults:s=1e3,onClick:a,label:r="ra.action.export",icon:d=U,exporter:p,meta:u,className:x="cursor-pointer"}=e,{filter:h,filterValues:m,resource:f,sort:j,exporter:g,total:v}=i(),y=p||g,w=l(),N=o(),C=b.useCallback(e=>{w.getList(f,{sort:j,filter:h?{...m,...h}:m,pagination:{page:1,perPage:s},meta:u}).then(({data:e})=>y&&y(e,c(w),w,f)).catch(e=>{N("HTTP Error",{type:"error"})}),"function"==typeof a&&a(e)},[w,y,h,m,s,N,a,f,j,u]);return t.jsxs(k,{variant:"outline",onClick:C,disabled:0===v,className:x,children:[d,t.jsx(n,{i18nKey:r,children:"Export"})]})},"ExportButton"),U=t.jsx(T,{});function W({className:e,...s}){return t.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:C("mx-auto flex w-full justify-center",e),...s})}function G({className:e,...s}){return t.jsx("ul",{"data-slot":"pagination-content",className:C("flex flex-row items-center gap-1",e),...s})}function J({...e}){return t.jsx("li",{"data-slot":"pagination-item",...e})}function Q({className:e,isActive:s,size:a="icon",children:r,...n}){return t.jsx("a",{"aria-current":s?"page":void 0,"data-slot":"pagination-link","data-active":s,className:C(N({variant:s?"outline":"ghost",size:a}),e),...n,children:r})}function X({className:e,...s}){return t.jsxs("span",{"aria-hidden":!0,"data-slot":"pagination-ellipsis",className:C("flex size-9 items-center justify-center",e),...s,children:[t.jsx(z,{className:"size-4"}),t.jsx("span",{className:"sr-only",children:"More pages"})]})}s(W,"Pagination"),s(G,"PaginationContent"),s(J,"PaginationItem"),s(Q,"PaginationLink"),s(X,"PaginationEllipsis");const Y=s(({rowsPerPageOptions:e=[5,10,25,50],className:a})=>{const r=d(),{hasPreviousPage:i,hasNextPage:l,page:o,perPage:c,setPerPage:u,total:x,setPage:h}=p(),m=(o-1)*c+1,f=l?o*c:x,j=x?Math.ceil(x/c):1,g=s((e,s)=>{const a=s-e+1;return Array.from({length:a},(s,a)=>e+a)},"range"),v=g(1,Math.min(1,j)),y=g(Math.max(j-1+1,2),j),b=Math.max(Math.min(o-1,j-1-2-1),3),w=Math.min(Math.max(o+1,5),j-1-1),N=g(b,w),k=s(e=>s=>{s.preventDefault(),h(e)},"pageChangeHandler");return t.jsxs("div",{className:`flex items-center justify-end space-x-2 gap-4 ${a}`,children:[t.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[t.jsx("p",{className:"text-sm font-medium",children:t.jsx(n,{i18nKey:"ra.navigation.page_rows_per_page",children:"Rows per page"})}),t.jsxs(P,{value:c.toString(),onValueChange:s(e=>{u(Number(e))},"onValueChange"),children:[t.jsx(V,{className:"h-11 w-[70px]",children:t.jsx(E,{placeholder:c})}),t.jsx(F,{side:"top",children:e.map(e=>t.jsx(L,{value:`${e}`,children:e},e))})]})]}),t.jsx("div",{className:"text-sm text-muted-foreground",children:t.jsx(n,{i18nKey:"ra.navigation.page_range_info",options:{offsetBegin:m,offsetEnd:f,total:-1===x?f:x},children:null!=x?`${m}-${f} of ${-1===x?f:x}`:null})}),t.jsx(W,{className:"-w-full -mx-auto",children:t.jsxs(G,{children:[t.jsx(J,{children:t.jsx(Q,{href:"#",onClick:k(o-1),className:C("gap-1 px-2.5 sm:pr-2.5",i?"":"opacity-50 cursor-not-allowed"),"aria-label":r("ra.navigation.previous",{_:"Previous"}),children:t.jsx(A,{})})}),v.map(e=>t.jsx(J,{children:t.jsx(Q,{href:"#",onClick:k(e),isActive:e===o,children:e})},e)),b>3?t.jsx(J,{children:t.jsx(X,{})}):2<j-1?t.jsx(J,{children:t.jsx(Q,{href:"#",onClick:k(2),isActive:2===o,children:2})}):null,N.map(e=>t.jsx(J,{children:t.jsx(Q,{href:"#",onClick:k(e),isActive:e===o,children:e})},e)),w<j-1-1?t.jsx(J,{children:t.jsx(X,{})}):j-1>1?t.jsx(J,{children:t.jsx(Q,{href:"#",onClick:k(j-1),isActive:j-1===o,children:j-1})}):null,y.map(e=>t.jsx(J,{children:t.jsx(Q,{href:"#",onClick:k(e),isActive:e===o,children:e})},e)),t.jsx(J,{children:t.jsx(Q,{href:"#",onClick:k(o+1),size:"default",className:C("gap-1 px-2.5 sm:pr-2.5",l?"":"opacity-50 cursor-not-allowed"),"aria-label":r("ra.navigation.next",{_:"Next"}),children:t.jsx(O,{})})})]})})]})},"ListPagination"),Z=s(e=>{const{filters:s,...a}=e,r=I()||s;return t.jsx(u,{formComponent:ae,...se(a),children:t.jsx(ee,{filters:r})})},"FilterForm"),ee=s(e=>{const{filters:r}=e,n=a(e),{displayedFilters:l={},filterValues:o,hideFilter:c}=i();b.useEffect(()=>{r&&r.forEach(e=>{if(e.props.alwaysOn&&e.props.defaultValue)throw new Error("Cannot use alwaysOn and defaultValue on a filter input. Please set the filterDefaultValues props on the <List> element instead.")})},[r]);const d=s(()=>{if(!r)return[];const e=o;return r.filter(s=>{const a=_(e,s.props.source);return s.props.alwaysOn||l[s.props.source]||!re(a)})},"getShownFilters"),p=b.useCallback(e=>c(e.currentTarget.dataset.key),[c]);return t.jsx(t.Fragment,{children:d().map(e=>t.jsx(te,{filterElement:e,handleHide:p,resource:n},e.key||e.props.source))})},"FilterFormBase"),se=s(({hasCreate:e,resource:s,...a})=>a,"sanitizeRestProps"),ae=s(e=>t.jsx("form",{...e,className:C("flex flex-row justify-start items-end gap-x-2 gap-y-3 pointer-events-none flex-wrap","[&_.form-helper-text]:hidden",e.className)}),"StyledForm"),re=s(e=>""===e||null==e||"object"==typeof e&&Object.keys(e).every(s=>re(e[s])),"isEmptyValue"),te=s(e=>{const{filterElement:s,handleHide:r,className:n}=e,i=a(e),l=d();return t.jsxs("div",{"data-source":s.props.source,className:C("filter-field flex flex-row pointer-events-auto gap-2 relative",n),children:[b.cloneElement(s,{resource:i,record:ne,size:s.props.size??"small",helperText:!1,defaultValue:void 0,label:!1}),!s.props.alwaysOn&&t.jsx(k,{type:"button",variant:"ghost",size:"sm",className:"hide-filter h-11 w-11 cursor-pointer mt-auto",onClick:r,"data-key":s.props.source,title:l("ra.action.remove_filter"),children:t.jsx(M,{className:"h-4 w-4"})})]})},"FilterFormInput"),ne={};b.forwardRef((e,r)=>{const{filter:n,onShow:i,onHide:l,displayed:o}=e,c=a(e),d=b.useCallback(()=>{i({source:n.props.source,defaultValue:n.props.defaultValue})},[n.props.defaultValue,n.props.source,i]),p=b.useCallback(()=>{l({source:n.props.source})},[n.props.source,l]),u=s(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n.props.disabled||(o?p():d()))},"handleKeyDown");return t.jsxs("div",{className:C("new-filter-item flex items-center px-2 py-1.5 text-sm cursor-pointer hover:bg-accent rounded-sm",n.props.disabled&&"opacity-50 cursor-not-allowed"),"data-key":n.props.source,"data-default-value":n.props.defaultValue,onClick:n.props.disabled?void 0:o?p:d,onKeyDown:u,ref:r,role:"menuitemcheckbox","aria-checked":o,tabIndex:0,children:[t.jsx("div",{className:"flex items-center justify-center w-4 h-4 mr-2",children:o&&t.jsx(D,{className:"h-3 w-3"})}),t.jsx("div",{children:t.jsx(x,{label:n.props.label,source:n.props.source,resource:c})})]})});const ie=s(e=>{const{debounce:s,disableAuthentication:a,disableSyncWithLocation:r,exporter:n,filter:i,filterDefaultValues:l,loading:o,perPage:c,queryOptions:d,resource:p,sort:u,storeKey:x,...m}=e;return t.jsx(h,{debounce:s,disableAuthentication:a,disableSyncWithLocation:r,exporter:n,filter:i,filterDefaultValues:l,loading:o,perPage:c,queryOptions:d,resource:p,sort:u,storeKey:x,children:t.jsx(le,{...m})})},"List"),le=s(e=>{const{filters:s,pagination:r=oe,children:i,actions:l}=e,o=a();if(!o)throw new Error("The ListView component must be used within a ResourceContextProvider");const c=m()(o,2),{hasCreate:d}=f({resource:o}),p=j();return t.jsxs("div",{className:"flex h-[calc(100dvh-140px)] flex-col overflow-hidden",children:[t.jsxs("div",{className:"shrink-0",children:[t.jsxs(g,{children:[p&&t.jsx(v,{children:t.jsx(w,{to:"/",children:t.jsx(n,{i18nKey:"ra.page.dashboard",children:"Home"})})}),t.jsx(y,{children:c})]}),t.jsx(B.Provider,{value:s,children:t.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-2 my-2",children:[t.jsx(Z,{}),l??t.jsxs("div",{className:"flex items-center gap-2",children:[d?t.jsx(R,{}):null,t.jsx(q,{})]})]})})]}),t.jsxs(B.Provider,{value:s,children:[t.jsx("div",{className:C("h-full min-h-0 flex-1 overflow-hidden",r&&"overflow-y-auto",e.className),children:i}),r&&t.jsx("div",{className:"shrink-0 border-t border-border bg-background pt-2 pb-12",children:r})]})]})},"ListView"),oe=t.jsx(Y,{}),ce=s(e=>{const{label:s,...a}=e,r=d();if(s)throw new Error("<SearchInput> isn't designed to be used with a label prop. Use <TextInput> if you need a label.");return t.jsxs("div",{className:"relative w-full",children:[t.jsx(K,{label:!1,helperText:!1,placeholder:r("ra.action.search"),className:"w-full [&_input]:pr-10 [&_input]:pl-3",...a}),t.jsx(H,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"})]})},"SearchInput");export{R as C,q as E,ie as L,ce as S};
