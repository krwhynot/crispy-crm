var e=Object.defineProperty,s=(s,a)=>e(s,"name",{value:a,configurable:!0});import{$ as a,j as r,G as t}from"./chunk-ByJg_QQB.js";import{a as i,c as n}from"./chunk-JxeXaC9i.js";import{F as o}from"./chunk-DpghI3EP.js";import{P as l,aC as c,B as p,s as d,T as x}from"../assets/index-BoLku8RR.js";import{R as h}from"./chunk-D6FmavVW.js";import{S as m}from"./chunk-C5fZsuMg.js";import{r as j}from"./chunk-1NZFT-6z.js";import{C as u}from"./chunk-C4sNritB.js";import{C as g,s as b}from"./chunk-DhfTvo06.js";import{C as y,a as f,b as T,c as S,d as _,e as k}from"./chunk-CMQLDEz_.js";import{P as C,a as N,b as z}from"./chunk-C_u3nriX.js";import{U as O,c as v,b as w,P}from"./chunk-B0BZInrb.js";import{as as A,C as F}from"./chunk-Bc6KM1xM.js";import{B as I}from"./chunk-CIlS_x6D.js";import{A as L}from"./chunk-nUtrHAIa.js";const R=s(()=>{const e=a();return r.jsx(h,{source:"parent_organization_id",reference:"organizations",filter:e?.id?{"id@neq":e.id}:{},children:r.jsx(L,{label:"Parent Organization",emptyText:"No parent organization",helperText:"Select a parent organization if this is a branch location",optionText:"name",filterToQuery:s(e=>({"name@ilike":`%${e}%`}),"filterToQuery")})})},"ParentOrganizationInput"),U=s(e=>{const a=i({name:"organization_type"}),t="distributor"===a||"principal"===a,n=t?l:c,o=t?"Playbook Category":"Operator Segment";return r.jsx(m,{source:e.source,label:e.label??o,choices:n,helperText:e.helperText,className:e.className,emptyText:`Select ${o.toLowerCase()}...`,parse:s(e=>""===e?null:e,"parse")})},"SegmentSelectInput");function B({source:e,label:a="State"}){const[i,n]=j.useState(!1),{field:o}=t({source:e}),l=O.find(e=>e.id===o.value);return r.jsxs("div",{className:"space-y-2",children:[a&&r.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:a}),r.jsxs(C,{open:i,onOpenChange:n,children:[r.jsx(N,{asChild:!0,children:r.jsxs(p,{variant:"outline",role:"combobox","aria-expanded":i,className:"w-full justify-between min-h-[44px]",children:[l?.name||"Select state...",r.jsx(A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(z,{className:"w-[300px] p-0",align:"start",children:r.jsxs(y,{children:[r.jsx(f,{placeholder:"Search states..."}),r.jsxs(T,{children:[r.jsx(S,{children:"No state found."}),r.jsx(_,{className:"max-h-64 overflow-auto",children:O.map(e=>r.jsxs(k,{value:e.name,onSelect:s(()=>{o.onChange(e.id),n(!1)},"onSelect"),children:[r.jsx(F,{className:d("mr-2 h-4 w-4",o.value===e.id?"opacity-100":"opacity-0")}),e.name," (",e.id,")"]},e.id))})]})]})})]})]})}s(B,"StateComboboxInput");const D=s(()=>r.jsx(u,{title:"Organization Hierarchy",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(R,{}),r.jsxs(g,{children:[r.jsx(m,{source:"org_scope",label:"Scope",choices:v,helperText:"National = brand/HQ, Regional = operating company",emptyText:"Select scope"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(I,{source:"is_operating_entity",label:"This location processes orders",helperText:!1}),r.jsxs("p",{className:"text-sm text-muted-foreground ml-11",children:[r.jsx("strong",{children:"ON:"})," Orders and invoices happen here (e.g., Sysco Chicago)",r.jsx("br",{}),r.jsx("strong",{children:"OFF:"})," Corporate brand or holding company only (e.g., Sysco Corporation)"]})]})]})]})}),"OrganizationHierarchySection"),H=s(()=>r.jsx(u,{title:"Address",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(x,{source:"shipping_street",label:"Street",helperText:!1}),r.jsxs(g,{children:[r.jsx(x,{source:"shipping_city",label:"City",helperText:!1}),r.jsx(B,{source:"shipping_state",label:"State"})]}),r.jsx(x,{source:"shipping_postal_code",label:"ZIP Code",helperText:!1})]})}),"OrganizationAddressSection"),Q=s(()=>r.jsxs("div",{className:"space-y-4",children:[r.jsxs(g,{children:[r.jsx("div",{"data-tutorial":"org-name",children:r.jsx(x,{source:"name",label:"Organization Name *",helperText:!1,placeholder:"Organization name"})}),r.jsx("div",{"data-tutorial":"org-type",children:r.jsx(m,{source:"organization_type",label:"Type",choices:w,helperText:!1,emptyText:"Select organization type"})})]}),r.jsxs(g,{children:[r.jsx(m,{source:"priority",label:"Priority",choices:P,helperText:!1,emptyText:"Select priority"}),r.jsx(h,{reference:"sales",source:"sales_id",sort:{field:"last_name",order:"ASC"},filter:{"disabled@neq":!0,"user_id@not.is":null},children:r.jsx(m,{helperText:!1,label:"Account Manager",optionText:b})}),r.jsx(U,{source:"segment_id",label:"Segment",helperText:!1})]}),r.jsxs(g,{children:[r.jsx(x,{source:"address",label:"Street",helperText:!1}),r.jsx(x,{source:"city",label:"City",helperText:!1})]}),r.jsxs(g,{children:[r.jsx(B,{source:"state",label:"State"}),r.jsx(x,{source:"postal_code",label:"Zip Code",helperText:!1})]}),r.jsx(u,{title:"Additional Details",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{"data-tutorial":"org-website",children:r.jsx(x,{source:"website",label:"Website",helperText:"Format: https://example.com"})}),r.jsx(x,{source:"phone",label:"Phone",helperText:"Format: (555) 123-4567"}),r.jsx(x,{source:"linkedin_url",label:"LinkedIn URL",helperText:"Format: https://linkedin.com/company/name"}),r.jsx(x,{source:"description",label:"Description",multiline:!0,rows:3,helperText:!1})]})}),r.jsx(D,{}),r.jsx(H,{})]}),"OrganizationCompactForm"),Z={name:"Organization Name",organization_type:"Type",sales_id:"Account Manager",segment_id:"Segment",address:"Street",city:"City",state:"State",postal_code:"Zip Code",website:"Website",linkedin_url:"LinkedIn URL",parent_organization_id:"Parent Organization",description:"Description",phone:"Phone"},$=s(()=>{const{errors:e}=n(),s=Object.keys(e||{}).length>0;return r.jsxs("div",{className:"flex flex-col gap-4",children:[s&&r.jsx(o,{errors:e,fieldLabels:Z,defaultExpanded:Object.keys(e).length<=3}),r.jsx(Q,{})]})},"OrganizationInputs");export{$ as O};
