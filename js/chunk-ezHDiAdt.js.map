{"version":3,"file":"chunk-ezHDiAdt.js","sources":["../../src/atomic-crm/products/ProductDetailsInputTab.tsx","../../src/atomic-crm/products/ProductDistributorInput.tsx","../../src/atomic-crm/products/ProductDistributionTab.tsx","../../src/atomic-crm/products/ProductInputs.tsx"],"sourcesContent":["import { TextInput } from \"@/components/admin/text-input\";\nimport { ReferenceInput } from \"@/components/admin/reference-input\";\nimport { AutocompleteInput } from \"@/components/admin/autocomplete-input\";\nimport { SelectInput } from \"@/components/admin/select-input\";\nimport { PRODUCT_STATUSES, PRODUCT_CATEGORIES } from \"../validation/products\";\n\n/**\n * Product Details tab for ProductCreate/ProductEdit forms.\n *\n * Contains all essential product fields:\n * - name (required)\n * - principal_id (required)\n * - category (required)\n * - status (required)\n * - description (optional)\n */\nexport const ProductDetailsInputTab = () => {\n  const productCategories = PRODUCT_CATEGORIES.map((category) => ({\n    id: category,\n    name: category\n      .split(\"_\")\n      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n      .join(\" \"),\n  }));\n\n  const productStatuses = PRODUCT_STATUSES.map((status) => ({\n    id: status,\n    name: status\n      .split(\"_\")\n      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n      .join(\" \"),\n  }));\n\n  const handleCreateCategory = (categoryName?: string) => {\n    if (!categoryName) return;\n    return { id: categoryName, name: categoryName };\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      <div data-tutorial=\"product-name\">\n        <TextInput\n          source=\"name\"\n          className=\"w-full\"\n          helperText=\"Required field\"\n          placeholder=\"Product name\"\n          label=\"Product Name *\"\n        />\n      </div>\n\n      <div data-tutorial=\"product-principal\">\n        <ReferenceInput\n          source=\"principal_id\"\n          reference=\"organizations\"\n          label=\"Principal/Supplier *\"\n          filter={{ organization_type: \"principal\" }}\n        >\n          <AutocompleteInput\n            optionText=\"name\"\n            helperText=\"Required - Select the manufacturing principal\"\n          />\n        </ReferenceInput>\n      </div>\n\n      <div data-tutorial=\"product-category\">\n        <AutocompleteInput\n          source=\"category\"\n          label=\"Category *\"\n          choices={productCategories}\n          onCreate={handleCreateCategory}\n          createItemLabel=\"Add custom category: %{item}\"\n          helperText=\"Select F&B category or type to create custom\"\n        />\n      </div>\n\n      <div data-tutorial=\"product-status\">\n        <SelectInput source=\"status\" label=\"Status *\" choices={productStatuses} />\n      </div>\n\n      <TextInput\n        source=\"description\"\n        multiline\n        rows={3}\n        className=\"w-full\"\n        placeholder=\"Product description...\"\n        label=\"Description\"\n      />\n    </div>\n  );\n};\n","import { useWatch } from \"react-hook-form\";\nimport { useGetList } from \"react-admin\";\nimport { ReferenceArrayInput } from \"@/components/admin/reference-array-input\";\nimport { AutocompleteArrayInput } from \"@/components/admin/autocomplete-array-input\";\nimport { TextInput } from \"@/components/admin/text-input\";\n\n/**\n * Multi-distributor selection with per-distributor DOT# inputs.\n *\n * User workflow:\n * 1. Select multiple distributors via AutocompleteArrayInput\n * 2. For each selected distributor, a DOT# input appears below\n *\n * Data flow:\n * - Input: User selects distributors and enters vendor_item_number (DOT#)\n * - Output: Form submits product_distributors array with { distributor_id, vendor_item_number, status, valid_from }\n */\nexport function ProductDistributorInput() {\n  const selectedIds = useWatch({ name: \"distributor_ids\" }) || [];\n\n  const { data: distributors } = useGetList(\n    \"organizations\",\n    {\n      filter: { id: selectedIds, organization_type: \"distributor\" },\n      pagination: { page: 1, perPage: 100 },\n    },\n    { enabled: selectedIds.length > 0 }\n  );\n\n  return (\n    <div className=\"space-y-4\">\n      <ReferenceArrayInput\n        source=\"distributor_ids\"\n        reference=\"organizations\"\n        filter={{ organization_type: \"distributor\" }}\n      >\n        <AutocompleteArrayInput\n          optionText=\"name\"\n          label=\"Distributors\"\n          placeholder=\"Select distributors...\"\n          filterToQuery={(q) => ({\n            \"name@ilike\": `%${q}%`,\n            organization_type: \"distributor\",\n          })}\n        />\n      </ReferenceArrayInput>\n\n      {selectedIds.length > 0 && distributors && (\n        <div className=\"space-y-3 pl-4 border-l-2 border-muted\">\n          <p className=\"text-sm text-muted-foreground\">\n            Enter DOT numbers for each distributor:\n          </p>\n          {distributors\n            .filter((d) => selectedIds.includes(d.id))\n            .map((distributor) => (\n              <div key={distributor.id} className=\"flex items-center gap-4\">\n                <span className=\"text-sm font-medium min-w-[150px] truncate\">\n                  {distributor.name}\n                </span>\n                <TextInput\n                  source={`product_distributors.${distributor.id}.vendor_item_number`}\n                  label=\"\"\n                  placeholder=\"e.g., USF# 4587291\"\n                  className=\"flex-1\"\n                  helperText={false}\n                />\n              </div>\n            ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { CollapsibleSection } from \"@/components/admin/form/CollapsibleSection\";\nimport { ProductDistributorInput } from \"./ProductDistributorInput\";\n\n/**\n * Distribution tab for ProductCreate/ProductEdit forms.\n *\n * Contains:\n * - ProductDistributorInput (multi-select distributors with DOT# codes)\n * - CollapsibleSection for future additional settings\n */\nexport const ProductDistributionTab = () => {\n  return (\n    <div className=\"space-y-6\">\n      <ProductDistributorInput />\n\n      <CollapsibleSection title=\"Additional Settings\" defaultOpen={false}>\n        <p className=\"text-sm text-muted-foreground\">\n          Additional distribution settings will appear here.\n        </p>\n      </CollapsibleSection>\n    </div>\n  );\n};\n","import { TabbedFormInputs } from \"@/components/admin/tabbed-form\";\nimport { ProductDetailsInputTab } from \"./ProductDetailsInputTab\";\nimport { ProductDistributionTab } from \"./ProductDistributionTab\";\n\nexport const ProductInputs = () => {\n  const tabs = [\n    {\n      key: \"details\",\n      label: \"Product Details\",\n      fields: [\"name\", \"principal_id\", \"category\", \"status\", \"description\"],\n      content: <ProductDetailsInputTab />,\n      dataTutorial: \"product-tab-details\",\n    },\n    {\n      key: \"distribution\",\n      label: \"Distribution\",\n      fields: [\"distributor_ids\", \"product_distributors\"],\n      content: <ProductDistributionTab />,\n      dataTutorial: \"product-tab-distribution\",\n    },\n  ];\n\n  return <TabbedFormInputs tabs={tabs} defaultTab=\"details\" />;\n};\n"],"names":["ProductDetailsInputTab","__name","productCategories","PRODUCT_CATEGORIES","map","category","id","name","split","word","charAt","toUpperCase","slice","join","productStatuses","PRODUCT_STATUSES","status","handleCreateCategory","categoryName","jsxs","className","children","jsx","TextInput","source","helperText","placeholder","label","ReferenceInput","reference","filter","organization_type","AutocompleteInput","optionText","choices","onCreate","createItemLabel","SelectInput","multiline","rows","ProductDistributorInput","selectedIds","useWatch","data","distributors","useGetList","pagination","page","perPage","enabled","length","ReferenceArrayInput","AutocompleteArrayInput","filterToQuery","q","d","includes","distributor","ProductDistributionTab","CollapsibleSection","title","defaultOpen","ProductInputs","tabs","key","fields","content","dataTutorial","TabbedFormInputs","defaultTab"],"mappings":"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"}