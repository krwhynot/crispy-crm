{"version":3,"file":"OpportunityList-Bixvch4B.js","sources":["../../node_modules/es-toolkit/dist/predicate/isPlainObject.mjs","../../node_modules/es-toolkit/dist/predicate/isEqualWith.mjs","../../node_modules/es-toolkit/dist/function/noop.mjs","../../node_modules/es-toolkit/dist/predicate/isEqual.mjs","../../node_modules/@mui/utils/esm/usePreviousProps/usePreviousProps.js","../../node_modules/@mui/material/esm/useAutocomplete/useAutocomplete.js","../../node_modules/@mui/material/esm/ListSubheader/listSubheaderClasses.js","../../node_modules/@mui/material/esm/ListSubheader/ListSubheader.js","../../node_modules/@mui/material/esm/internal/svg-icons/Cancel.js","../../node_modules/@mui/material/esm/Chip/chipClasses.js","../../node_modules/@mui/material/esm/Chip/Chip.js","../../node_modules/@mui/material/esm/Autocomplete/autocompleteClasses.js","../../node_modules/@mui/material/esm/Autocomplete/Autocomplete.js","../../node_modules/ra-ui-materialui/dist/input/useSupportCreateSuggestion.js","../../node_modules/ra-ui-materialui/dist/input/AutocompleteInput.js","../../node_modules/ra-ui-materialui/dist/input/AutocompleteArrayInput.js","../../node_modules/ra-ui-materialui/dist/input/ReferenceArrayInput.js","../../node_modules/ra-ui-materialui/dist/input/ReferenceInput.js","../../src/components/ui/accordion.tsx","../../src/atomic-crm/opportunities/constants/priorityChoices.ts","../../src/atomic-crm/opportunities/opportunityExporter.ts","../../src/atomic-crm/opportunities/hooks/useQuickAdd.ts","../../src/atomic-crm/opportunities/hooks/useFilteredProducts.ts","../../src/components/ui/combobox.tsx","../../src/atomic-crm/opportunities/data/us-cities.ts","../../src/lib/storage-utils.ts","../../src/atomic-crm/opportunities/quick-add/QuickAddForm.tsx","../../src/atomic-crm/opportunities/quick-add/QuickAddDialog.tsx","../../src/atomic-crm/opportunities/quick-add/QuickAddButton.tsx","../../src/atomic-crm/opportunities/OpportunityArchivedList.tsx","../../src/atomic-crm/opportunities/OpportunityEmpty.tsx","../../src/atomic-crm/opportunities/hooks/useOpportunityContacts.ts","../../src/atomic-crm/opportunities/hooks/useStageMetrics.ts","../../src/atomic-crm/opportunities/components/CloseOpportunityModal.tsx","../../src/atomic-crm/opportunities/kanban/OpportunityCardActions.tsx","../../src/atomic-crm/opportunities/kanban/ActivityPulseDot.tsx","../../src/atomic-crm/opportunities/kanban/OpportunityCard.tsx","../../src/atomic-crm/opportunities/kanban/QuickAddOpportunity.tsx","../../src/atomic-crm/opportunities/kanban/OpportunityColumn.tsx","../../src/atomic-crm/opportunities/constants/stages.ts","../../src/atomic-crm/opportunities/hooks/useColumnPreferences.ts","../../src/atomic-crm/opportunities/kanban/ColumnCustomizationMenu.tsx","../../src/atomic-crm/opportunities/kanban/OpportunityListContent.tsx","../../src/atomic-crm/opportunities/hooks/useExportOpportunities.ts","../../src/atomic-crm/opportunities/hooks/useBulkActionsState.ts","../../src/atomic-crm/opportunities/BulkActionsToolbar.tsx","../../src/atomic-crm/opportunities/OpportunityRowListView.tsx","../../src/atomic-crm/opportunities/CampaignGroupedList.tsx","../../node_modules/@radix-ui/react-toggle/dist/index.mjs","../../node_modules/@radix-ui/react-toggle-group/dist/index.mjs","../../src/components/ui/toggle.constants.ts","../../src/components/ui/toggle-group.tsx","../../src/atomic-crm/opportunities/OpportunityViewSwitcher.tsx","../../src/atomic-crm/opportunities/constants/LeadSourceInput.constants.ts","../../src/atomic-crm/opportunities/LeadSourceInput.tsx","../../src/atomic-crm/opportunities/slideOverTabs/OpportunitySlideOverDetailsTab.tsx","../../src/atomic-crm/opportunities/slideOverTabs/OpportunityContactsTab.tsx","../../src/atomic-crm/opportunities/slideOverTabs/OpportunityProductsTab.tsx","../../src/atomic-crm/opportunities/slideOverTabs/OpportunityNotesTab.tsx","../../src/atomic-crm/opportunities/OpportunitySlideOver.tsx","../../src/atomic-crm/opportunities/OpportunityListFilter.tsx","../../src/atomic-crm/opportunities/opportunityFilterConfig.ts","../../src/atomic-crm/opportunities/OpportunityListTutorial.tsx","../../src/atomic-crm/opportunities/OpportunityList.tsx"],"sourcesContent":["function isPlainObject(value) {\n    if (!value || typeof value !== 'object') {\n        return false;\n    }\n    const proto = Object.getPrototypeOf(value);\n    const hasObjectPrototype = proto === null ||\n        proto === Object.prototype ||\n        Object.getPrototypeOf(proto) === null;\n    if (!hasObjectPrototype) {\n        return false;\n    }\n    return Object.prototype.toString.call(value) === '[object Object]';\n}\n\nexport { isPlainObject };\n","import { isPlainObject } from './isPlainObject.mjs';\nimport { getSymbols } from '../compat/_internal/getSymbols.mjs';\nimport { getTag } from '../compat/_internal/getTag.mjs';\nimport { functionTag, regexpTag, symbolTag, dateTag, booleanTag, numberTag, stringTag, objectTag, errorTag, dataViewTag, arrayBufferTag, float64ArrayTag, float32ArrayTag, bigInt64ArrayTag, int32ArrayTag, int16ArrayTag, int8ArrayTag, bigUint64ArrayTag, uint32ArrayTag, uint16ArrayTag, uint8ClampedArrayTag, uint8ArrayTag, arrayTag, setTag, mapTag, argumentsTag } from '../compat/_internal/tags.mjs';\nimport { eq } from '../compat/util/eq.mjs';\n\nfunction isEqualWith(a, b, areValuesEqual) {\n    return isEqualWithImpl(a, b, undefined, undefined, undefined, undefined, areValuesEqual);\n}\nfunction isEqualWithImpl(a, b, property, aParent, bParent, stack, areValuesEqual) {\n    const result = areValuesEqual(a, b, property, aParent, bParent, stack);\n    if (result !== undefined) {\n        return result;\n    }\n    if (typeof a === typeof b) {\n        switch (typeof a) {\n            case 'bigint':\n            case 'string':\n            case 'boolean':\n            case 'symbol':\n            case 'undefined': {\n                return a === b;\n            }\n            case 'number': {\n                return a === b || Object.is(a, b);\n            }\n            case 'function': {\n                return a === b;\n            }\n            case 'object': {\n                return areObjectsEqual(a, b, stack, areValuesEqual);\n            }\n        }\n    }\n    return areObjectsEqual(a, b, stack, areValuesEqual);\n}\nfunction areObjectsEqual(a, b, stack, areValuesEqual) {\n    if (Object.is(a, b)) {\n        return true;\n    }\n    let aTag = getTag(a);\n    let bTag = getTag(b);\n    if (aTag === argumentsTag) {\n        aTag = objectTag;\n    }\n    if (bTag === argumentsTag) {\n        bTag = objectTag;\n    }\n    if (aTag !== bTag) {\n        return false;\n    }\n    switch (aTag) {\n        case stringTag:\n            return a.toString() === b.toString();\n        case numberTag: {\n            const x = a.valueOf();\n            const y = b.valueOf();\n            return eq(x, y);\n        }\n        case booleanTag:\n        case dateTag:\n        case symbolTag:\n            return Object.is(a.valueOf(), b.valueOf());\n        case regexpTag: {\n            return a.source === b.source && a.flags === b.flags;\n        }\n        case functionTag: {\n            return a === b;\n        }\n    }\n    stack = stack ?? new Map();\n    const aStack = stack.get(a);\n    const bStack = stack.get(b);\n    if (aStack != null && bStack != null) {\n        return aStack === b;\n    }\n    stack.set(a, b);\n    stack.set(b, a);\n    try {\n        switch (aTag) {\n            case mapTag: {\n                if (a.size !== b.size) {\n                    return false;\n                }\n                for (const [key, value] of a.entries()) {\n                    if (!b.has(key) || !isEqualWithImpl(value, b.get(key), key, a, b, stack, areValuesEqual)) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n            case setTag: {\n                if (a.size !== b.size) {\n                    return false;\n                }\n                const aValues = Array.from(a.values());\n                const bValues = Array.from(b.values());\n                for (let i = 0; i < aValues.length; i++) {\n                    const aValue = aValues[i];\n                    const index = bValues.findIndex(bValue => {\n                        return isEqualWithImpl(aValue, bValue, undefined, a, b, stack, areValuesEqual);\n                    });\n                    if (index === -1) {\n                        return false;\n                    }\n                    bValues.splice(index, 1);\n                }\n                return true;\n            }\n            case arrayTag:\n            case uint8ArrayTag:\n            case uint8ClampedArrayTag:\n            case uint16ArrayTag:\n            case uint32ArrayTag:\n            case bigUint64ArrayTag:\n            case int8ArrayTag:\n            case int16ArrayTag:\n            case int32ArrayTag:\n            case bigInt64ArrayTag:\n            case float32ArrayTag:\n            case float64ArrayTag: {\n                if (typeof Buffer !== 'undefined' && Buffer.isBuffer(a) !== Buffer.isBuffer(b)) {\n                    return false;\n                }\n                if (a.length !== b.length) {\n                    return false;\n                }\n                for (let i = 0; i < a.length; i++) {\n                    if (!isEqualWithImpl(a[i], b[i], i, a, b, stack, areValuesEqual)) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n            case arrayBufferTag: {\n                if (a.byteLength !== b.byteLength) {\n                    return false;\n                }\n                return areObjectsEqual(new Uint8Array(a), new Uint8Array(b), stack, areValuesEqual);\n            }\n            case dataViewTag: {\n                if (a.byteLength !== b.byteLength || a.byteOffset !== b.byteOffset) {\n                    return false;\n                }\n                return areObjectsEqual(new Uint8Array(a), new Uint8Array(b), stack, areValuesEqual);\n            }\n            case errorTag: {\n                return a.name === b.name && a.message === b.message;\n            }\n            case objectTag: {\n                const areEqualInstances = areObjectsEqual(a.constructor, b.constructor, stack, areValuesEqual) ||\n                    (isPlainObject(a) && isPlainObject(b));\n                if (!areEqualInstances) {\n                    return false;\n                }\n                const aKeys = [...Object.keys(a), ...getSymbols(a)];\n                const bKeys = [...Object.keys(b), ...getSymbols(b)];\n                if (aKeys.length !== bKeys.length) {\n                    return false;\n                }\n                for (let i = 0; i < aKeys.length; i++) {\n                    const propKey = aKeys[i];\n                    const aProp = a[propKey];\n                    if (!Object.hasOwn(b, propKey)) {\n                        return false;\n                    }\n                    const bProp = b[propKey];\n                    if (!isEqualWithImpl(aProp, bProp, propKey, a, b, stack, areValuesEqual)) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n            default: {\n                return false;\n            }\n        }\n    }\n    finally {\n        stack.delete(a);\n        stack.delete(b);\n    }\n}\n\nexport { isEqualWith };\n","function noop() { }\n\nexport { noop };\n","import { isEqualWith } from './isEqualWith.mjs';\nimport { noop } from '../function/noop.mjs';\n\nfunction isEqual(a, b) {\n    return isEqualWith(a, b, noop);\n}\n\nexport { isEqual };\n","'use client';\n\nimport * as React from 'react';\nfunction usePreviousProps(value) {\n  const ref = React.useRef({});\n  React.useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\nexport default usePreviousProps;","'use client';\n\nimport * as React from 'react';\nimport setRef from '@mui/utils/setRef';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport useControlled from '@mui/utils/useControlled';\nimport useId from '@mui/utils/useId';\nimport usePreviousProps from '@mui/utils/usePreviousProps';\nfunction areArraysSame({\n  array1,\n  array2,\n  parser = value => value\n}) {\n  return array1 && array2 && array1.length === array2.length && array1.every((prevOption, index) => parser(prevOption) === parser(array2[index]));\n}\n\n// https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript\nfunction stripDiacritics(string) {\n  return string.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n}\nexport function createFilterOptions(config = {}) {\n  const {\n    ignoreAccents = true,\n    ignoreCase = true,\n    limit,\n    matchFrom = 'any',\n    stringify,\n    trim = false\n  } = config;\n  return (options, {\n    inputValue,\n    getOptionLabel\n  }) => {\n    let input = trim ? inputValue.trim() : inputValue;\n    if (ignoreCase) {\n      input = input.toLowerCase();\n    }\n    if (ignoreAccents) {\n      input = stripDiacritics(input);\n    }\n    const filteredOptions = !input ? options : options.filter(option => {\n      let candidate = (stringify || getOptionLabel)(option);\n      if (ignoreCase) {\n        candidate = candidate.toLowerCase();\n      }\n      if (ignoreAccents) {\n        candidate = stripDiacritics(candidate);\n      }\n      return matchFrom === 'start' ? candidate.startsWith(input) : candidate.includes(input);\n    });\n    return typeof limit === 'number' ? filteredOptions.slice(0, limit) : filteredOptions;\n  };\n}\nconst defaultFilterOptions = createFilterOptions();\n\n// Number of options to jump in list box when `Page Up` and `Page Down` keys are used.\nconst pageSize = 5;\nconst defaultIsActiveElementInListbox = listboxRef => listboxRef.current !== null && listboxRef.current.parentElement?.contains(document.activeElement);\nconst MULTIPLE_DEFAULT_VALUE = [];\nfunction getInputValue(value, multiple, getOptionLabel, renderValue) {\n  if (multiple || value == null || renderValue) {\n    return '';\n  }\n  const optionLabel = getOptionLabel(value);\n  return typeof optionLabel === 'string' ? optionLabel : '';\n}\nfunction useAutocomplete(props) {\n  const {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    unstable_isActiveElementInListbox = defaultIsActiveElementInListbox,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    unstable_classNamePrefix = 'Mui',\n    autoComplete = false,\n    autoHighlight = false,\n    autoSelect = false,\n    blurOnSelect = false,\n    clearOnBlur = !props.freeSolo,\n    clearOnEscape = false,\n    componentName = 'useAutocomplete',\n    defaultValue = props.multiple ? MULTIPLE_DEFAULT_VALUE : null,\n    disableClearable = false,\n    disableCloseOnSelect = false,\n    disabled: disabledProp,\n    disabledItemsFocusable = false,\n    disableListWrap = false,\n    filterOptions = defaultFilterOptions,\n    filterSelectedOptions = false,\n    freeSolo = false,\n    getOptionDisabled,\n    getOptionKey,\n    getOptionLabel: getOptionLabelProp = option => option.label ?? option,\n    groupBy,\n    handleHomeEndKeys = !props.freeSolo,\n    id: idProp,\n    includeInputInList = false,\n    inputValue: inputValueProp,\n    isOptionEqualToValue = (option, value) => option === value,\n    multiple = false,\n    onChange,\n    onClose,\n    onHighlightChange,\n    onInputChange,\n    onOpen,\n    open: openProp,\n    openOnFocus = false,\n    options,\n    readOnly = false,\n    renderValue,\n    selectOnFocus = !props.freeSolo,\n    value: valueProp\n  } = props;\n  const id = useId(idProp);\n  let getOptionLabel = getOptionLabelProp;\n  getOptionLabel = option => {\n    const optionLabel = getOptionLabelProp(option);\n    if (typeof optionLabel !== 'string') {\n      if (process.env.NODE_ENV !== 'production') {\n        const erroneousReturn = optionLabel === undefined ? 'undefined' : `${typeof optionLabel} (${optionLabel})`;\n        console.error(`MUI: The \\`getOptionLabel\\` method of ${componentName} returned ${erroneousReturn} instead of a string for ${JSON.stringify(option)}.`);\n      }\n      return String(optionLabel);\n    }\n    return optionLabel;\n  };\n  const ignoreFocus = React.useRef(false);\n  const firstFocus = React.useRef(true);\n  const inputRef = React.useRef(null);\n  const listboxRef = React.useRef(null);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [focusedItem, setFocusedItem] = React.useState(-1);\n  const defaultHighlighted = autoHighlight ? 0 : -1;\n  const highlightedIndexRef = React.useRef(defaultHighlighted);\n\n  // Calculate the initial inputValue on mount only.\n  // useRef ensures it doesn't update dynamically with defaultValue or value props.\n  const initialInputValue = React.useRef(getInputValue(defaultValue ?? valueProp, multiple, getOptionLabel)).current;\n  const [value, setValueState] = useControlled({\n    controlled: valueProp,\n    default: defaultValue,\n    name: componentName\n  });\n  const [inputValue, setInputValueState] = useControlled({\n    controlled: inputValueProp,\n    default: initialInputValue,\n    name: componentName,\n    state: 'inputValue'\n  });\n  const [focused, setFocused] = React.useState(false);\n  const resetInputValue = React.useCallback((event, newValue, reason) => {\n    // retain current `inputValue` if new option isn't selected and `clearOnBlur` is false\n    // When `multiple` is enabled, `newValue` is an array of all selected items including the newly selected item\n    const isOptionSelected = multiple ? value.length < newValue.length : newValue !== null;\n    if (!isOptionSelected && !clearOnBlur) {\n      return;\n    }\n    const newInputValue = getInputValue(newValue, multiple, getOptionLabel, renderValue);\n    if (inputValue === newInputValue) {\n      return;\n    }\n    setInputValueState(newInputValue);\n    if (onInputChange) {\n      onInputChange(event, newInputValue, reason);\n    }\n  }, [getOptionLabel, inputValue, multiple, onInputChange, setInputValueState, clearOnBlur, value, renderValue]);\n  const [open, setOpenState] = useControlled({\n    controlled: openProp,\n    default: false,\n    name: componentName,\n    state: 'open'\n  });\n  const [inputPristine, setInputPristine] = React.useState(true);\n  const inputValueIsSelectedValue = !multiple && value != null && inputValue === getOptionLabel(value);\n  const popupOpen = open && !readOnly;\n  const filteredOptions = popupOpen ? filterOptions(options.filter(option => {\n    if (filterSelectedOptions && (multiple ? value : [value]).some(value2 => value2 !== null && isOptionEqualToValue(option, value2))) {\n      return false;\n    }\n    return true;\n  }),\n  // we use the empty string to manipulate `filterOptions` to not filter any options\n  // i.e. the filter predicate always returns true\n  {\n    inputValue: inputValueIsSelectedValue && inputPristine ? '' : inputValue,\n    getOptionLabel\n  }) : [];\n  const previousProps = usePreviousProps({\n    filteredOptions,\n    value,\n    inputValue\n  });\n  React.useEffect(() => {\n    const valueChange = value !== previousProps.value;\n    if (focused && !valueChange) {\n      return;\n    }\n\n    // Only reset the input's value when freeSolo if the component's value changes.\n    if (freeSolo && !valueChange) {\n      return;\n    }\n    resetInputValue(null, value, 'reset');\n  }, [value, resetInputValue, focused, previousProps.value, freeSolo]);\n  const listboxAvailable = open && filteredOptions.length > 0 && !readOnly;\n  const focusItem = useEventCallback(itemToFocus => {\n    if (itemToFocus === -1) {\n      inputRef.current.focus();\n    } else {\n      // Using `data-tag-index` for deprecated `renderTags`. Remove when `renderTags` is gone.\n      const indexType = renderValue ? 'data-item-index' : 'data-tag-index';\n      anchorEl.querySelector(`[${indexType}=\"${itemToFocus}\"]`).focus();\n    }\n  });\n\n  // Ensure the focusedItem is never inconsistent\n  React.useEffect(() => {\n    if (multiple && focusedItem > value.length - 1) {\n      setFocusedItem(-1);\n      focusItem(-1);\n    }\n  }, [value, multiple, focusedItem, focusItem]);\n  function validOptionIndex(index, direction) {\n    if (!listboxRef.current || index < 0 || index >= filteredOptions.length) {\n      return -1;\n    }\n    let nextFocus = index;\n    while (true) {\n      const option = listboxRef.current.querySelector(`[data-option-index=\"${nextFocus}\"]`);\n\n      // Same logic as MenuList.js\n      const nextFocusDisabled = disabledItemsFocusable ? false : !option || option.disabled || option.getAttribute('aria-disabled') === 'true';\n      if (option && option.hasAttribute('tabindex') && !nextFocusDisabled) {\n        // The next option is available\n        return nextFocus;\n      }\n\n      // The next option is disabled, move to the next element.\n      // with looped index\n      if (direction === 'next') {\n        nextFocus = (nextFocus + 1) % filteredOptions.length;\n      } else {\n        nextFocus = (nextFocus - 1 + filteredOptions.length) % filteredOptions.length;\n      }\n\n      // We end up with initial index, that means we don't have available options.\n      // All of them are disabled\n      if (nextFocus === index) {\n        return -1;\n      }\n    }\n  }\n  const setHighlightedIndex = useEventCallback(({\n    event,\n    index,\n    reason\n  }) => {\n    highlightedIndexRef.current = index;\n\n    // does the index exist?\n    if (index === -1) {\n      inputRef.current.removeAttribute('aria-activedescendant');\n    } else {\n      inputRef.current.setAttribute('aria-activedescendant', `${id}-option-${index}`);\n    }\n    if (onHighlightChange && ['mouse', 'keyboard', 'touch'].includes(reason)) {\n      onHighlightChange(event, index === -1 ? null : filteredOptions[index], reason);\n    }\n    if (!listboxRef.current) {\n      return;\n    }\n    const prev = listboxRef.current.querySelector(`[role=\"option\"].${unstable_classNamePrefix}-focused`);\n    if (prev) {\n      prev.classList.remove(`${unstable_classNamePrefix}-focused`);\n      prev.classList.remove(`${unstable_classNamePrefix}-focusVisible`);\n    }\n    let listboxNode = listboxRef.current;\n    if (listboxRef.current.getAttribute('role') !== 'listbox') {\n      listboxNode = listboxRef.current.parentElement.querySelector('[role=\"listbox\"]');\n    }\n\n    // \"No results\"\n    if (!listboxNode) {\n      return;\n    }\n    if (index === -1) {\n      listboxNode.scrollTop = 0;\n      return;\n    }\n    const option = listboxRef.current.querySelector(`[data-option-index=\"${index}\"]`);\n    if (!option) {\n      return;\n    }\n    option.classList.add(`${unstable_classNamePrefix}-focused`);\n    if (reason === 'keyboard') {\n      option.classList.add(`${unstable_classNamePrefix}-focusVisible`);\n    }\n\n    // Scroll active descendant into view.\n    // Logic copied from https://www.w3.org/WAI/content-assets/wai-aria-practices/patterns/combobox/examples/js/select-only.js\n    // In case of mouse clicks and touch (in mobile devices) we avoid scrolling the element and keep both behaviors same.\n    // Consider this API instead once it has a better browser support:\n    // .scrollIntoView({ scrollMode: 'if-needed', block: 'nearest' });\n    if (listboxNode.scrollHeight > listboxNode.clientHeight && reason !== 'mouse' && reason !== 'touch') {\n      const element = option;\n      const scrollBottom = listboxNode.clientHeight + listboxNode.scrollTop;\n      const elementBottom = element.offsetTop + element.offsetHeight;\n      if (elementBottom > scrollBottom) {\n        listboxNode.scrollTop = elementBottom - listboxNode.clientHeight;\n      } else if (element.offsetTop - element.offsetHeight * (groupBy ? 1.3 : 0) < listboxNode.scrollTop) {\n        listboxNode.scrollTop = element.offsetTop - element.offsetHeight * (groupBy ? 1.3 : 0);\n      }\n    }\n  });\n  const changeHighlightedIndex = useEventCallback(({\n    event,\n    diff,\n    direction = 'next',\n    reason\n  }) => {\n    if (!popupOpen) {\n      return;\n    }\n    const getNextIndex = () => {\n      const maxIndex = filteredOptions.length - 1;\n      if (diff === 'reset') {\n        return defaultHighlighted;\n      }\n      if (diff === 'start') {\n        return 0;\n      }\n      if (diff === 'end') {\n        return maxIndex;\n      }\n      const newIndex = highlightedIndexRef.current + diff;\n      if (newIndex < 0) {\n        if (newIndex === -1 && includeInputInList) {\n          return -1;\n        }\n        if (disableListWrap && highlightedIndexRef.current !== -1 || Math.abs(diff) > 1) {\n          return 0;\n        }\n        return maxIndex;\n      }\n      if (newIndex > maxIndex) {\n        if (newIndex === maxIndex + 1 && includeInputInList) {\n          return -1;\n        }\n        if (disableListWrap || Math.abs(diff) > 1) {\n          return maxIndex;\n        }\n        return 0;\n      }\n      return newIndex;\n    };\n    const nextIndex = validOptionIndex(getNextIndex(), direction);\n    setHighlightedIndex({\n      index: nextIndex,\n      reason,\n      event\n    });\n\n    // Sync the content of the input with the highlighted option.\n    if (autoComplete && diff !== 'reset') {\n      if (nextIndex === -1) {\n        inputRef.current.value = inputValue;\n      } else {\n        const option = getOptionLabel(filteredOptions[nextIndex]);\n        inputRef.current.value = option;\n\n        // The portion of the selected suggestion that has not been typed by the user,\n        // a completion string, appears inline after the input cursor in the textbox.\n        const index = option.toLowerCase().indexOf(inputValue.toLowerCase());\n        if (index === 0 && inputValue.length > 0) {\n          inputRef.current.setSelectionRange(inputValue.length, option.length);\n        }\n      }\n    }\n  });\n  const filteredOptionsChanged = !areArraysSame({\n    array1: previousProps.filteredOptions,\n    array2: filteredOptions,\n    parser: getOptionLabel\n  });\n  const getPreviousHighlightedOptionIndex = () => {\n    const isSameValue = (value1, value2) => {\n      const label1 = value1 ? getOptionLabel(value1) : '';\n      const label2 = value2 ? getOptionLabel(value2) : '';\n      return label1 === label2;\n    };\n    if (highlightedIndexRef.current !== -1 && !areArraysSame({\n      array1: previousProps.filteredOptions,\n      array2: filteredOptions,\n      parser: getOptionLabel\n    }) && previousProps.inputValue === inputValue && (multiple ? value.length === previousProps.value.length && previousProps.value.every((val, i) => getOptionLabel(value[i]) === getOptionLabel(val)) : isSameValue(previousProps.value, value))) {\n      const previousHighlightedOption = previousProps.filteredOptions[highlightedIndexRef.current];\n      if (previousHighlightedOption) {\n        return filteredOptions.findIndex(option => {\n          return getOptionLabel(option) === getOptionLabel(previousHighlightedOption);\n        });\n      }\n    }\n    return -1;\n  };\n  const syncHighlightedIndex = React.useCallback(() => {\n    if (!popupOpen) {\n      return;\n    }\n\n    // Check if the previously highlighted option still exists in the updated filtered options list and if the value and inputValue haven't changed\n    // If it exists and the value and the inputValue haven't changed, just update its index, otherwise continue execution\n    const previousHighlightedOptionIndex = getPreviousHighlightedOptionIndex();\n    if (previousHighlightedOptionIndex !== -1) {\n      highlightedIndexRef.current = previousHighlightedOptionIndex;\n      return;\n    }\n    const valueItem = multiple ? value[0] : value;\n\n    // The popup is empty, reset\n    if (filteredOptions.length === 0 || valueItem == null) {\n      changeHighlightedIndex({\n        diff: 'reset'\n      });\n      return;\n    }\n    if (!listboxRef.current) {\n      return;\n    }\n\n    // Synchronize the value with the highlighted index\n    if (valueItem != null) {\n      const currentOption = filteredOptions[highlightedIndexRef.current];\n\n      // Keep the current highlighted index if possible\n      if (multiple && currentOption && value.findIndex(val => isOptionEqualToValue(currentOption, val)) !== -1) {\n        return;\n      }\n      const itemIndex = filteredOptions.findIndex(optionItem => isOptionEqualToValue(optionItem, valueItem));\n      if (itemIndex === -1) {\n        changeHighlightedIndex({\n          diff: 'reset'\n        });\n      } else {\n        setHighlightedIndex({\n          index: itemIndex\n        });\n      }\n      return;\n    }\n\n    // Prevent the highlighted index to leak outside the boundaries.\n    if (highlightedIndexRef.current >= filteredOptions.length - 1) {\n      setHighlightedIndex({\n        index: filteredOptions.length - 1\n      });\n      return;\n    }\n\n    // Restore the focus to the previous index.\n    setHighlightedIndex({\n      index: highlightedIndexRef.current\n    });\n    // Ignore filteredOptions (and options, isOptionEqualToValue, getOptionLabel) not to break the scroll position\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n  // Only sync the highlighted index when the option switch between empty and not\n  filteredOptions.length,\n  // Don't sync the highlighted index with the value when multiple\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  multiple ? false : value, filterSelectedOptions, changeHighlightedIndex, setHighlightedIndex, popupOpen, inputValue, multiple]);\n  const handleListboxRef = useEventCallback(node => {\n    setRef(listboxRef, node);\n    if (!node) {\n      return;\n    }\n    syncHighlightedIndex();\n  });\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useEffect(() => {\n      if (!inputRef.current || inputRef.current.nodeName !== 'INPUT') {\n        if (inputRef.current && inputRef.current.nodeName === 'TEXTAREA') {\n          console.warn([`A textarea element was provided to ${componentName} where input was expected.`, `This is not a supported scenario but it may work under certain conditions.`, `A textarea keyboard navigation may conflict with Autocomplete controls (for example enter and arrow keys).`, `Make sure to test keyboard navigation and add custom event handlers if necessary.`].join('\\n'));\n        } else {\n          console.error([`MUI: Unable to find the input element. It was resolved to ${inputRef.current} while an HTMLInputElement was expected.`, `Instead, ${componentName} expects an input element.`, '', componentName === 'useAutocomplete' ? 'Make sure you have bound getInputProps correctly and that the normal ref/effect resolutions order is guaranteed.' : 'Make sure you have customized the input component correctly.'].join('\\n'));\n        }\n      }\n    }, [componentName]);\n  }\n  React.useEffect(() => {\n    if (filteredOptionsChanged || popupOpen) {\n      syncHighlightedIndex();\n    }\n  }, [syncHighlightedIndex, filteredOptionsChanged, popupOpen]);\n  const handleOpen = event => {\n    if (open) {\n      return;\n    }\n    setOpenState(true);\n    setInputPristine(true);\n    if (onOpen) {\n      onOpen(event);\n    }\n  };\n  const handleClose = (event, reason) => {\n    if (!open) {\n      return;\n    }\n    setOpenState(false);\n    if (onClose) {\n      onClose(event, reason);\n    }\n  };\n  const handleValue = (event, newValue, reason, details) => {\n    if (multiple) {\n      if (value.length === newValue.length && value.every((val, i) => val === newValue[i])) {\n        return;\n      }\n    } else if (value === newValue) {\n      return;\n    }\n    if (onChange) {\n      onChange(event, newValue, reason, details);\n    }\n    setValueState(newValue);\n  };\n  const isTouch = React.useRef(false);\n  const selectNewValue = (event, option, reasonProp = 'selectOption', origin = 'options') => {\n    let reason = reasonProp;\n    let newValue = option;\n    if (multiple) {\n      newValue = Array.isArray(value) ? value.slice() : [];\n      if (process.env.NODE_ENV !== 'production') {\n        const matches = newValue.filter(val => isOptionEqualToValue(option, val));\n        if (matches.length > 1) {\n          console.error([`MUI: The \\`isOptionEqualToValue\\` method of ${componentName} does not handle the arguments correctly.`, `The component expects a single value to match a given option but found ${matches.length} matches.`].join('\\n'));\n        }\n      }\n      const itemIndex = newValue.findIndex(valueItem => isOptionEqualToValue(option, valueItem));\n      if (itemIndex === -1) {\n        newValue.push(option);\n      } else if (origin !== 'freeSolo') {\n        newValue.splice(itemIndex, 1);\n        reason = 'removeOption';\n      }\n    }\n    resetInputValue(event, newValue, reason);\n    handleValue(event, newValue, reason, {\n      option\n    });\n    if (!disableCloseOnSelect && (!event || !event.ctrlKey && !event.metaKey)) {\n      handleClose(event, reason);\n    }\n    if (blurOnSelect === true || blurOnSelect === 'touch' && isTouch.current || blurOnSelect === 'mouse' && !isTouch.current) {\n      inputRef.current.blur();\n    }\n  };\n  function validItemIndex(index, direction) {\n    if (index === -1) {\n      return -1;\n    }\n    let nextFocus = index;\n    while (true) {\n      // Out of range\n      if (direction === 'next' && nextFocus === value.length || direction === 'previous' && nextFocus === -1) {\n        return -1;\n      }\n\n      // Using `data-tag-index` for deprecated `renderTags`. Remove when `renderTags` is removed.\n      const indexType = renderValue ? 'data-item-index' : 'data-tag-index';\n      const option = anchorEl.querySelector(`[${indexType}=\"${nextFocus}\"]`);\n\n      // Same logic as MenuList.js\n      if (!option || !option.hasAttribute('tabindex') || option.disabled || option.getAttribute('aria-disabled') === 'true') {\n        nextFocus += direction === 'next' ? 1 : -1;\n      } else {\n        return nextFocus;\n      }\n    }\n  }\n  const handleFocusItem = (event, direction) => {\n    if (!multiple) {\n      return;\n    }\n    if (inputValue === '') {\n      handleClose(event, 'toggleInput');\n    }\n    let nextItem = focusedItem;\n    if (focusedItem === -1) {\n      if (inputValue === '' && direction === 'previous') {\n        nextItem = value.length - 1;\n      }\n    } else {\n      nextItem += direction === 'next' ? 1 : -1;\n      if (nextItem < 0) {\n        nextItem = 0;\n      }\n      if (nextItem === value.length) {\n        nextItem = -1;\n      }\n    }\n    nextItem = validItemIndex(nextItem, direction);\n    setFocusedItem(nextItem);\n    focusItem(nextItem);\n  };\n  const handleClear = event => {\n    ignoreFocus.current = true;\n    setInputValueState('');\n    if (onInputChange) {\n      onInputChange(event, '', 'clear');\n    }\n    handleValue(event, multiple ? [] : null, 'clear');\n  };\n  const handleKeyDown = other => event => {\n    if (other.onKeyDown) {\n      other.onKeyDown(event);\n    }\n    if (event.defaultMuiPrevented) {\n      return;\n    }\n    if (focusedItem !== -1 && !['ArrowLeft', 'ArrowRight'].includes(event.key)) {\n      setFocusedItem(-1);\n      focusItem(-1);\n    }\n\n    // Wait until IME is settled.\n    if (event.which !== 229) {\n      switch (event.key) {\n        case 'Home':\n          if (popupOpen && handleHomeEndKeys) {\n            // Prevent scroll of the page\n            event.preventDefault();\n            changeHighlightedIndex({\n              diff: 'start',\n              direction: 'next',\n              reason: 'keyboard',\n              event\n            });\n          }\n          break;\n        case 'End':\n          if (popupOpen && handleHomeEndKeys) {\n            // Prevent scroll of the page\n            event.preventDefault();\n            changeHighlightedIndex({\n              diff: 'end',\n              direction: 'previous',\n              reason: 'keyboard',\n              event\n            });\n          }\n          break;\n        case 'PageUp':\n          // Prevent scroll of the page\n          event.preventDefault();\n          changeHighlightedIndex({\n            diff: -pageSize,\n            direction: 'previous',\n            reason: 'keyboard',\n            event\n          });\n          handleOpen(event);\n          break;\n        case 'PageDown':\n          // Prevent scroll of the page\n          event.preventDefault();\n          changeHighlightedIndex({\n            diff: pageSize,\n            direction: 'next',\n            reason: 'keyboard',\n            event\n          });\n          handleOpen(event);\n          break;\n        case 'ArrowDown':\n          // Prevent cursor move\n          event.preventDefault();\n          changeHighlightedIndex({\n            diff: 1,\n            direction: 'next',\n            reason: 'keyboard',\n            event\n          });\n          handleOpen(event);\n          break;\n        case 'ArrowUp':\n          // Prevent cursor move\n          event.preventDefault();\n          changeHighlightedIndex({\n            diff: -1,\n            direction: 'previous',\n            reason: 'keyboard',\n            event\n          });\n          handleOpen(event);\n          break;\n        case 'ArrowLeft':\n          if (!multiple && renderValue) {\n            focusItem(0);\n          } else {\n            handleFocusItem(event, 'previous');\n          }\n          break;\n        case 'ArrowRight':\n          if (!multiple && renderValue) {\n            focusItem(-1);\n          } else {\n            handleFocusItem(event, 'next');\n          }\n          break;\n        case 'Enter':\n          if (highlightedIndexRef.current !== -1 && popupOpen) {\n            const option = filteredOptions[highlightedIndexRef.current];\n            const disabled = getOptionDisabled ? getOptionDisabled(option) : false;\n\n            // Avoid early form validation, let the end-users continue filling the form.\n            event.preventDefault();\n            if (disabled) {\n              return;\n            }\n            selectNewValue(event, option, 'selectOption');\n\n            // Move the selection to the end.\n            if (autoComplete) {\n              inputRef.current.setSelectionRange(inputRef.current.value.length, inputRef.current.value.length);\n            }\n          } else if (freeSolo && inputValue !== '' && inputValueIsSelectedValue === false) {\n            if (multiple) {\n              // Allow people to add new values before they submit the form.\n              event.preventDefault();\n            }\n            selectNewValue(event, inputValue, 'createOption', 'freeSolo');\n          }\n          break;\n        case 'Escape':\n          if (popupOpen) {\n            // Avoid Opera to exit fullscreen mode.\n            event.preventDefault();\n            // Avoid the Modal to handle the event.\n            event.stopPropagation();\n            handleClose(event, 'escape');\n          } else if (clearOnEscape && (inputValue !== '' || multiple && value.length > 0 || renderValue)) {\n            // Avoid Opera to exit fullscreen mode.\n            event.preventDefault();\n            // Avoid the Modal to handle the event.\n            event.stopPropagation();\n            handleClear(event);\n          }\n          break;\n        case 'Backspace':\n          // Remove the value on the left of the \"cursor\"\n          if (multiple && !readOnly && inputValue === '' && value.length > 0) {\n            const index = focusedItem === -1 ? value.length - 1 : focusedItem;\n            const newValue = value.slice();\n            newValue.splice(index, 1);\n            handleValue(event, newValue, 'removeOption', {\n              option: value[index]\n            });\n          }\n          if (!multiple && renderValue && !readOnly) {\n            setValueState(null);\n            focusItem(-1);\n          }\n          break;\n        case 'Delete':\n          // Remove the value on the right of the \"cursor\"\n          if (multiple && !readOnly && inputValue === '' && value.length > 0 && focusedItem !== -1) {\n            const index = focusedItem;\n            const newValue = value.slice();\n            newValue.splice(index, 1);\n            handleValue(event, newValue, 'removeOption', {\n              option: value[index]\n            });\n          }\n          if (!multiple && renderValue && !readOnly) {\n            setValueState(null);\n            focusItem(-1);\n          }\n          break;\n        default:\n      }\n    }\n  };\n  const handleFocus = event => {\n    setFocused(true);\n    if (openOnFocus && !ignoreFocus.current) {\n      handleOpen(event);\n    }\n  };\n  const handleBlur = event => {\n    // Ignore the event when using the scrollbar with IE11\n    if (unstable_isActiveElementInListbox(listboxRef)) {\n      inputRef.current.focus();\n      return;\n    }\n    setFocused(false);\n    firstFocus.current = true;\n    ignoreFocus.current = false;\n    if (autoSelect && highlightedIndexRef.current !== -1 && popupOpen) {\n      selectNewValue(event, filteredOptions[highlightedIndexRef.current], 'blur');\n    } else if (autoSelect && freeSolo && inputValue !== '') {\n      selectNewValue(event, inputValue, 'blur', 'freeSolo');\n    } else if (clearOnBlur) {\n      resetInputValue(event, value, 'blur');\n    }\n    handleClose(event, 'blur');\n  };\n  const handleInputChange = event => {\n    const newValue = event.target.value;\n    if (inputValue !== newValue) {\n      setInputValueState(newValue);\n      setInputPristine(false);\n      if (onInputChange) {\n        onInputChange(event, newValue, 'input');\n      }\n    }\n    if (newValue === '') {\n      if (!disableClearable && !multiple) {\n        handleValue(event, null, 'clear');\n      }\n    } else {\n      handleOpen(event);\n    }\n  };\n  const handleOptionMouseMove = event => {\n    const index = Number(event.currentTarget.getAttribute('data-option-index'));\n    if (highlightedIndexRef.current !== index) {\n      setHighlightedIndex({\n        event,\n        index,\n        reason: 'mouse'\n      });\n    }\n  };\n  const handleOptionTouchStart = event => {\n    setHighlightedIndex({\n      event,\n      index: Number(event.currentTarget.getAttribute('data-option-index')),\n      reason: 'touch'\n    });\n    isTouch.current = true;\n  };\n  const handleOptionClick = event => {\n    const index = Number(event.currentTarget.getAttribute('data-option-index'));\n    selectNewValue(event, filteredOptions[index], 'selectOption');\n    isTouch.current = false;\n  };\n  const handleItemDelete = index => event => {\n    const newValue = value.slice();\n    newValue.splice(index, 1);\n    handleValue(event, newValue, 'removeOption', {\n      option: value[index]\n    });\n  };\n  const handleSingleItemDelete = event => {\n    handleValue(event, null, 'removeOption', {\n      option: value\n    });\n  };\n  const handlePopupIndicator = event => {\n    if (open) {\n      handleClose(event, 'toggleInput');\n    } else {\n      handleOpen(event);\n    }\n  };\n\n  // Prevent input blur when interacting with the combobox\n  const handleMouseDown = event => {\n    // Prevent focusing the input if click is anywhere outside the Autocomplete\n    if (!event.currentTarget.contains(event.target)) {\n      return;\n    }\n    if (event.target.getAttribute('id') !== id) {\n      event.preventDefault();\n    }\n  };\n\n  // Focus the input when interacting with the combobox\n  const handleClick = event => {\n    // Prevent focusing the input if click is anywhere outside the Autocomplete\n    if (!event.currentTarget.contains(event.target)) {\n      return;\n    }\n    inputRef.current.focus();\n    if (selectOnFocus && firstFocus.current && inputRef.current.selectionEnd - inputRef.current.selectionStart === 0) {\n      inputRef.current.select();\n    }\n    firstFocus.current = false;\n  };\n  const handleInputMouseDown = event => {\n    if (!disabledProp && (inputValue === '' || !open)) {\n      handlePopupIndicator(event);\n    }\n  };\n  let dirty = freeSolo && inputValue.length > 0;\n  dirty = dirty || (multiple ? value.length > 0 : value !== null);\n  let groupedOptions = filteredOptions;\n  if (groupBy) {\n    // used to keep track of key and indexes in the result array\n    const indexBy = new Map();\n    let warn = false;\n    groupedOptions = filteredOptions.reduce((acc, option, index) => {\n      const group = groupBy(option);\n      if (acc.length > 0 && acc[acc.length - 1].group === group) {\n        acc[acc.length - 1].options.push(option);\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          if (indexBy.get(group) && !warn) {\n            console.warn(`MUI: The options provided combined with the \\`groupBy\\` method of ${componentName} returns duplicated headers.`, 'You can solve the issue by sorting the options with the output of `groupBy`.');\n            warn = true;\n          }\n          indexBy.set(group, true);\n        }\n        acc.push({\n          key: index,\n          index,\n          group,\n          options: [option]\n        });\n      }\n      return acc;\n    }, []);\n  }\n  if (disabledProp && focused) {\n    handleBlur();\n  }\n  return {\n    getRootProps: (other = {}) => ({\n      ...other,\n      onKeyDown: handleKeyDown(other),\n      onMouseDown: handleMouseDown,\n      onClick: handleClick\n    }),\n    getInputLabelProps: () => ({\n      id: `${id}-label`,\n      htmlFor: id\n    }),\n    getInputProps: () => ({\n      id,\n      value: inputValue,\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      onChange: handleInputChange,\n      onMouseDown: handleInputMouseDown,\n      // if open then this is handled imperatively so don't let react override\n      // only have an opinion about this when closed\n      'aria-activedescendant': popupOpen ? '' : null,\n      'aria-autocomplete': autoComplete ? 'both' : 'list',\n      'aria-controls': listboxAvailable ? `${id}-listbox` : undefined,\n      'aria-expanded': listboxAvailable,\n      // Disable browser's suggestion that might overlap with the popup.\n      // Handle autocomplete but not autofill.\n      autoComplete: 'off',\n      ref: inputRef,\n      autoCapitalize: 'none',\n      spellCheck: 'false',\n      role: 'combobox',\n      disabled: disabledProp\n    }),\n    getClearProps: () => ({\n      tabIndex: -1,\n      type: 'button',\n      onClick: handleClear\n    }),\n    getItemProps: ({\n      index = 0\n    } = {}) => ({\n      ...(multiple && {\n        key: index\n      }),\n      ...(renderValue ? {\n        'data-item-index': index\n      } : {\n        'data-tag-index': index\n      }),\n      tabIndex: -1,\n      ...(!readOnly && {\n        onDelete: multiple ? handleItemDelete(index) : handleSingleItemDelete\n      })\n    }),\n    getPopupIndicatorProps: () => ({\n      tabIndex: -1,\n      type: 'button',\n      onClick: handlePopupIndicator\n    }),\n    // deprecated\n    getTagProps: ({\n      index\n    }) => ({\n      key: index,\n      'data-tag-index': index,\n      tabIndex: -1,\n      ...(!readOnly && {\n        onDelete: handleItemDelete(index)\n      })\n    }),\n    getListboxProps: () => ({\n      role: 'listbox',\n      id: `${id}-listbox`,\n      'aria-labelledby': `${id}-label`,\n      ref: handleListboxRef,\n      onMouseDown: event => {\n        // Prevent blur\n        event.preventDefault();\n      }\n    }),\n    getOptionProps: ({\n      index,\n      option\n    }) => {\n      const selected = (multiple ? value : [value]).some(value2 => value2 != null && isOptionEqualToValue(option, value2));\n      const disabled = getOptionDisabled ? getOptionDisabled(option) : false;\n      return {\n        key: getOptionKey?.(option) ?? getOptionLabel(option),\n        tabIndex: -1,\n        role: 'option',\n        id: `${id}-option-${index}`,\n        onMouseMove: handleOptionMouseMove,\n        onClick: handleOptionClick,\n        onTouchStart: handleOptionTouchStart,\n        'data-option-index': index,\n        'aria-disabled': disabled,\n        'aria-selected': selected\n      };\n    },\n    id,\n    inputValue,\n    value,\n    dirty,\n    expanded: popupOpen && anchorEl,\n    popupOpen,\n    focused: focused || focusedItem !== -1,\n    anchorEl,\n    setAnchorEl,\n    focusedItem,\n    // deprecated\n    focusedTag: focusedItem,\n    groupedOptions\n  };\n}\nexport default useAutocomplete;","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getListSubheaderUtilityClass(slot) {\n  return generateUtilityClass('MuiListSubheader', slot);\n}\nconst listSubheaderClasses = generateUtilityClasses('MuiListSubheader', ['root', 'colorPrimary', 'colorInherit', 'gutters', 'inset', 'sticky']);\nexport default listSubheaderClasses;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport { styled } from \"../zero-styled/index.js\";\nimport memoTheme from \"../utils/memoTheme.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport capitalize from \"../utils/capitalize.js\";\nimport { getListSubheaderUtilityClass } from \"./listSubheaderClasses.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    color,\n    disableGutters,\n    inset,\n    disableSticky\n  } = ownerState;\n  const slots = {\n    root: ['root', color !== 'default' && `color${capitalize(color)}`, !disableGutters && 'gutters', inset && 'inset', !disableSticky && 'sticky']\n  };\n  return composeClasses(slots, getListSubheaderUtilityClass, classes);\n};\nconst ListSubheaderRoot = styled('li', {\n  name: 'MuiListSubheader',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, ownerState.color !== 'default' && styles[`color${capitalize(ownerState.color)}`], !ownerState.disableGutters && styles.gutters, ownerState.inset && styles.inset, !ownerState.disableSticky && styles.sticky];\n  }\n})(memoTheme(({\n  theme\n}) => ({\n  boxSizing: 'border-box',\n  lineHeight: '48px',\n  listStyle: 'none',\n  color: (theme.vars || theme).palette.text.secondary,\n  fontFamily: theme.typography.fontFamily,\n  fontWeight: theme.typography.fontWeightMedium,\n  fontSize: theme.typography.pxToRem(14),\n  variants: [{\n    props: {\n      color: 'primary'\n    },\n    style: {\n      color: (theme.vars || theme).palette.primary.main\n    }\n  }, {\n    props: {\n      color: 'inherit'\n    },\n    style: {\n      color: 'inherit'\n    }\n  }, {\n    props: ({\n      ownerState\n    }) => !ownerState.disableGutters,\n    style: {\n      paddingLeft: 16,\n      paddingRight: 16\n    }\n  }, {\n    props: ({\n      ownerState\n    }) => ownerState.inset,\n    style: {\n      paddingLeft: 72\n    }\n  }, {\n    props: ({\n      ownerState\n    }) => !ownerState.disableSticky,\n    style: {\n      position: 'sticky',\n      top: 0,\n      zIndex: 1,\n      backgroundColor: (theme.vars || theme).palette.background.paper\n    }\n  }]\n})));\nconst ListSubheader = /*#__PURE__*/React.forwardRef(function ListSubheader(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiListSubheader'\n  });\n  const {\n    className,\n    color = 'default',\n    component = 'li',\n    disableGutters = false,\n    disableSticky = false,\n    inset = false,\n    ...other\n  } = props;\n  const ownerState = {\n    ...props,\n    color,\n    component,\n    disableGutters,\n    disableSticky,\n    inset\n  };\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(ListSubheaderRoot, {\n    as: component,\n    className: clsx(classes.root, className),\n    ref: ref,\n    ownerState: ownerState,\n    ...other\n  });\n});\nif (ListSubheader) {\n  ListSubheader.muiSkipListHighlight = true;\n}\nprocess.env.NODE_ENV !== \"production\" ? ListSubheader.propTypes /* remove-proptypes */ = {\n  //  Warning \n  //  These PropTypes are generated from the TypeScript type definitions. \n  //     To update them, edit the d.ts file and run `pnpm proptypes`.     \n  // \n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The color of the component. It supports those theme colors that make sense for this component.\n   * @default 'default'\n   */\n  color: PropTypes.oneOf(['default', 'inherit', 'primary']),\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * If `true`, the List Subheader will not have gutters.\n   * @default false\n   */\n  disableGutters: PropTypes.bool,\n  /**\n   * If `true`, the List Subheader will not stick to the top during scroll.\n   * @default false\n   */\n  disableSticky: PropTypes.bool,\n  /**\n   * If `true`, the List Subheader is indented.\n   * @default false\n   */\n  inset: PropTypes.bool,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default ListSubheader;","'use client';\n\nimport createSvgIcon from \"../../utils/createSvgIcon.js\";\n\n/**\n * @ignore - internal component.\n */\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\"\n}), 'Cancel');","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getChipUtilityClass(slot) {\n  return generateUtilityClass('MuiChip', slot);\n}\nconst chipClasses = generateUtilityClasses('MuiChip', ['root', 'sizeSmall', 'sizeMedium', 'colorDefault', 'colorError', 'colorInfo', 'colorPrimary', 'colorSecondary', 'colorSuccess', 'colorWarning', 'disabled', 'clickable', 'clickableColorPrimary', 'clickableColorSecondary', 'deletable', 'deletableColorPrimary', 'deletableColorSecondary', 'outlined', 'filled', 'outlinedPrimary', 'outlinedSecondary', 'filledPrimary', 'filledSecondary', 'avatar', 'avatarSmall', 'avatarMedium', 'avatarColorPrimary', 'avatarColorSecondary', 'icon', 'iconSmall', 'iconMedium', 'iconColorPrimary', 'iconColorSecondary', 'label', 'labelSmall', 'labelMedium', 'deleteIcon', 'deleteIconSmall', 'deleteIconMedium', 'deleteIconColorPrimary', 'deleteIconColorSecondary', 'deleteIconOutlinedColorPrimary', 'deleteIconOutlinedColorSecondary', 'deleteIconFilledColorPrimary', 'deleteIconFilledColorSecondary', 'focusVisible']);\nexport default chipClasses;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport CancelIcon from \"../internal/svg-icons/Cancel.js\";\nimport useForkRef from \"../utils/useForkRef.js\";\nimport unsupportedProp from \"../utils/unsupportedProp.js\";\nimport capitalize from \"../utils/capitalize.js\";\nimport ButtonBase from \"../ButtonBase/index.js\";\nimport { styled } from \"../zero-styled/index.js\";\nimport memoTheme from \"../utils/memoTheme.js\";\nimport createSimplePaletteValueFilter from \"../utils/createSimplePaletteValueFilter.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport chipClasses, { getChipUtilityClass } from \"./chipClasses.js\";\nimport useSlot from \"../utils/useSlot.js\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    disabled,\n    size,\n    color,\n    iconColor,\n    onDelete,\n    clickable,\n    variant\n  } = ownerState;\n  const slots = {\n    root: ['root', variant, disabled && 'disabled', `size${capitalize(size)}`, `color${capitalize(color)}`, clickable && 'clickable', clickable && `clickableColor${capitalize(color)}`, onDelete && 'deletable', onDelete && `deletableColor${capitalize(color)}`, `${variant}${capitalize(color)}`],\n    label: ['label', `label${capitalize(size)}`],\n    avatar: ['avatar', `avatar${capitalize(size)}`, `avatarColor${capitalize(color)}`],\n    icon: ['icon', `icon${capitalize(size)}`, `iconColor${capitalize(iconColor)}`],\n    deleteIcon: ['deleteIcon', `deleteIcon${capitalize(size)}`, `deleteIconColor${capitalize(color)}`, `deleteIcon${capitalize(variant)}Color${capitalize(color)}`]\n  };\n  return composeClasses(slots, getChipUtilityClass, classes);\n};\nconst ChipRoot = styled('div', {\n  name: 'MuiChip',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    const {\n      color,\n      iconColor,\n      clickable,\n      onDelete,\n      size,\n      variant\n    } = ownerState;\n    return [{\n      [`& .${chipClasses.avatar}`]: styles.avatar\n    }, {\n      [`& .${chipClasses.avatar}`]: styles[`avatar${capitalize(size)}`]\n    }, {\n      [`& .${chipClasses.avatar}`]: styles[`avatarColor${capitalize(color)}`]\n    }, {\n      [`& .${chipClasses.icon}`]: styles.icon\n    }, {\n      [`& .${chipClasses.icon}`]: styles[`icon${capitalize(size)}`]\n    }, {\n      [`& .${chipClasses.icon}`]: styles[`iconColor${capitalize(iconColor)}`]\n    }, {\n      [`& .${chipClasses.deleteIcon}`]: styles.deleteIcon\n    }, {\n      [`& .${chipClasses.deleteIcon}`]: styles[`deleteIcon${capitalize(size)}`]\n    }, {\n      [`& .${chipClasses.deleteIcon}`]: styles[`deleteIconColor${capitalize(color)}`]\n    }, {\n      [`& .${chipClasses.deleteIcon}`]: styles[`deleteIcon${capitalize(variant)}Color${capitalize(color)}`]\n    }, styles.root, styles[`size${capitalize(size)}`], styles[`color${capitalize(color)}`], clickable && styles.clickable, clickable && color !== 'default' && styles[`clickableColor${capitalize(color)})`], onDelete && styles.deletable, onDelete && color !== 'default' && styles[`deletableColor${capitalize(color)}`], styles[variant], styles[`${variant}${capitalize(color)}`]];\n  }\n})(memoTheme(({\n  theme\n}) => {\n  const textColor = theme.palette.mode === 'light' ? theme.palette.grey[700] : theme.palette.grey[300];\n  return {\n    maxWidth: '100%',\n    fontFamily: theme.typography.fontFamily,\n    fontSize: theme.typography.pxToRem(13),\n    display: 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: 32,\n    lineHeight: 1.5,\n    color: (theme.vars || theme).palette.text.primary,\n    backgroundColor: (theme.vars || theme).palette.action.selected,\n    borderRadius: 32 / 2,\n    whiteSpace: 'nowrap',\n    transition: theme.transitions.create(['background-color', 'box-shadow']),\n    // reset cursor explicitly in case ButtonBase is used\n    cursor: 'unset',\n    // We disable the focus ring for mouse, touch and keyboard users.\n    outline: 0,\n    textDecoration: 'none',\n    border: 0,\n    // Remove `button` border\n    padding: 0,\n    // Remove `button` padding\n    verticalAlign: 'middle',\n    boxSizing: 'border-box',\n    [`&.${chipClasses.disabled}`]: {\n      opacity: (theme.vars || theme).palette.action.disabledOpacity,\n      pointerEvents: 'none'\n    },\n    [`& .${chipClasses.avatar}`]: {\n      marginLeft: 5,\n      marginRight: -6,\n      width: 24,\n      height: 24,\n      color: theme.vars ? theme.vars.palette.Chip.defaultAvatarColor : textColor,\n      fontSize: theme.typography.pxToRem(12)\n    },\n    [`& .${chipClasses.avatarColorPrimary}`]: {\n      color: (theme.vars || theme).palette.primary.contrastText,\n      backgroundColor: (theme.vars || theme).palette.primary.dark\n    },\n    [`& .${chipClasses.avatarColorSecondary}`]: {\n      color: (theme.vars || theme).palette.secondary.contrastText,\n      backgroundColor: (theme.vars || theme).palette.secondary.dark\n    },\n    [`& .${chipClasses.avatarSmall}`]: {\n      marginLeft: 4,\n      marginRight: -4,\n      width: 18,\n      height: 18,\n      fontSize: theme.typography.pxToRem(10)\n    },\n    [`& .${chipClasses.icon}`]: {\n      marginLeft: 5,\n      marginRight: -6\n    },\n    [`& .${chipClasses.deleteIcon}`]: {\n      WebkitTapHighlightColor: 'transparent',\n      color: theme.alpha((theme.vars || theme).palette.text.primary, 0.26),\n      fontSize: 22,\n      cursor: 'pointer',\n      margin: '0 5px 0 -6px',\n      '&:hover': {\n        color: theme.alpha((theme.vars || theme).palette.text.primary, 0.4)\n      }\n    },\n    variants: [{\n      props: {\n        size: 'small'\n      },\n      style: {\n        height: 24,\n        [`& .${chipClasses.icon}`]: {\n          fontSize: 18,\n          marginLeft: 4,\n          marginRight: -4\n        },\n        [`& .${chipClasses.deleteIcon}`]: {\n          fontSize: 16,\n          marginRight: 4,\n          marginLeft: -4\n        }\n      }\n    }, ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter(['contrastText'])).map(([color]) => {\n      return {\n        props: {\n          color\n        },\n        style: {\n          backgroundColor: (theme.vars || theme).palette[color].main,\n          color: (theme.vars || theme).palette[color].contrastText,\n          [`& .${chipClasses.deleteIcon}`]: {\n            color: theme.alpha((theme.vars || theme).palette[color].contrastText, 0.7),\n            '&:hover, &:active': {\n              color: (theme.vars || theme).palette[color].contrastText\n            }\n          }\n        }\n      };\n    }), {\n      props: props => props.iconColor === props.color,\n      style: {\n        [`& .${chipClasses.icon}`]: {\n          color: theme.vars ? theme.vars.palette.Chip.defaultIconColor : textColor\n        }\n      }\n    }, {\n      props: props => props.iconColor === props.color && props.color !== 'default',\n      style: {\n        [`& .${chipClasses.icon}`]: {\n          color: 'inherit'\n        }\n      }\n    }, {\n      props: {\n        onDelete: true\n      },\n      style: {\n        [`&.${chipClasses.focusVisible}`]: {\n          backgroundColor: theme.alpha((theme.vars || theme).palette.action.selected, `${(theme.vars || theme).palette.action.selectedOpacity} + ${(theme.vars || theme).palette.action.focusOpacity}`)\n        }\n      }\n    }, ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter(['dark'])).map(([color]) => {\n      return {\n        props: {\n          color,\n          onDelete: true\n        },\n        style: {\n          [`&.${chipClasses.focusVisible}`]: {\n            background: (theme.vars || theme).palette[color].dark\n          }\n        }\n      };\n    }), {\n      props: {\n        clickable: true\n      },\n      style: {\n        userSelect: 'none',\n        WebkitTapHighlightColor: 'transparent',\n        cursor: 'pointer',\n        '&:hover': {\n          backgroundColor: theme.alpha((theme.vars || theme).palette.action.selected, `${(theme.vars || theme).palette.action.selectedOpacity} + ${(theme.vars || theme).palette.action.hoverOpacity}`)\n        },\n        [`&.${chipClasses.focusVisible}`]: {\n          backgroundColor: theme.alpha((theme.vars || theme).palette.action.selected, `${(theme.vars || theme).palette.action.selectedOpacity} + ${(theme.vars || theme).palette.action.focusOpacity}`)\n        },\n        '&:active': {\n          boxShadow: (theme.vars || theme).shadows[1]\n        }\n      }\n    }, ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter(['dark'])).map(([color]) => ({\n      props: {\n        color,\n        clickable: true\n      },\n      style: {\n        [`&:hover, &.${chipClasses.focusVisible}`]: {\n          backgroundColor: (theme.vars || theme).palette[color].dark\n        }\n      }\n    })), {\n      props: {\n        variant: 'outlined'\n      },\n      style: {\n        backgroundColor: 'transparent',\n        border: theme.vars ? `1px solid ${theme.vars.palette.Chip.defaultBorder}` : `1px solid ${theme.palette.mode === 'light' ? theme.palette.grey[400] : theme.palette.grey[700]}`,\n        [`&.${chipClasses.clickable}:hover`]: {\n          backgroundColor: (theme.vars || theme).palette.action.hover\n        },\n        [`&.${chipClasses.focusVisible}`]: {\n          backgroundColor: (theme.vars || theme).palette.action.focus\n        },\n        [`& .${chipClasses.avatar}`]: {\n          marginLeft: 4\n        },\n        [`& .${chipClasses.avatarSmall}`]: {\n          marginLeft: 2\n        },\n        [`& .${chipClasses.icon}`]: {\n          marginLeft: 4\n        },\n        [`& .${chipClasses.iconSmall}`]: {\n          marginLeft: 2\n        },\n        [`& .${chipClasses.deleteIcon}`]: {\n          marginRight: 5\n        },\n        [`& .${chipClasses.deleteIconSmall}`]: {\n          marginRight: 3\n        }\n      }\n    }, ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()) // no need to check for mainChannel as it's calculated from main\n    .map(([color]) => ({\n      props: {\n        variant: 'outlined',\n        color\n      },\n      style: {\n        color: (theme.vars || theme).palette[color].main,\n        border: `1px solid ${theme.alpha((theme.vars || theme).palette[color].main, 0.7)}`,\n        [`&.${chipClasses.clickable}:hover`]: {\n          backgroundColor: theme.alpha((theme.vars || theme).palette[color].main, (theme.vars || theme).palette.action.hoverOpacity)\n        },\n        [`&.${chipClasses.focusVisible}`]: {\n          backgroundColor: theme.alpha((theme.vars || theme).palette[color].main, (theme.vars || theme).palette.action.focusOpacity)\n        },\n        [`& .${chipClasses.deleteIcon}`]: {\n          color: theme.alpha((theme.vars || theme).palette[color].main, 0.7),\n          '&:hover, &:active': {\n            color: (theme.vars || theme).palette[color].main\n          }\n        }\n      }\n    }))]\n  };\n}));\nconst ChipLabel = styled('span', {\n  name: 'MuiChip',\n  slot: 'Label',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    const {\n      size\n    } = ownerState;\n    return [styles.label, styles[`label${capitalize(size)}`]];\n  }\n})({\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  paddingLeft: 12,\n  paddingRight: 12,\n  whiteSpace: 'nowrap',\n  variants: [{\n    props: {\n      variant: 'outlined'\n    },\n    style: {\n      paddingLeft: 11,\n      paddingRight: 11\n    }\n  }, {\n    props: {\n      size: 'small'\n    },\n    style: {\n      paddingLeft: 8,\n      paddingRight: 8\n    }\n  }, {\n    props: {\n      size: 'small',\n      variant: 'outlined'\n    },\n    style: {\n      paddingLeft: 7,\n      paddingRight: 7\n    }\n  }]\n});\nfunction isDeleteKeyboardEvent(keyboardEvent) {\n  return keyboardEvent.key === 'Backspace' || keyboardEvent.key === 'Delete';\n}\n\n/**\n * Chips represent complex entities in small blocks, such as a contact.\n */\nconst Chip = /*#__PURE__*/React.forwardRef(function Chip(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiChip'\n  });\n  const {\n    avatar: avatarProp,\n    className,\n    clickable: clickableProp,\n    color = 'default',\n    component: ComponentProp,\n    deleteIcon: deleteIconProp,\n    disabled = false,\n    icon: iconProp,\n    label,\n    onClick,\n    onDelete,\n    onKeyDown,\n    onKeyUp,\n    size = 'medium',\n    variant = 'filled',\n    tabIndex,\n    skipFocusWhenDisabled = false,\n    // TODO v6: Rename to `focusableWhenDisabled`.\n    slots = {},\n    slotProps = {},\n    ...other\n  } = props;\n  const chipRef = React.useRef(null);\n  const handleRef = useForkRef(chipRef, ref);\n  const handleDeleteIconClick = event => {\n    // Stop the event from bubbling up to the `Chip`\n    event.stopPropagation();\n    if (onDelete) {\n      onDelete(event);\n    }\n  };\n  const handleKeyDown = event => {\n    // Ignore events from children of `Chip`.\n    if (event.currentTarget === event.target && isDeleteKeyboardEvent(event)) {\n      // Will be handled in keyUp, otherwise some browsers\n      // might init navigation\n      event.preventDefault();\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  };\n  const handleKeyUp = event => {\n    // Ignore events from children of `Chip`.\n    if (event.currentTarget === event.target) {\n      if (onDelete && isDeleteKeyboardEvent(event)) {\n        onDelete(event);\n      }\n    }\n    if (onKeyUp) {\n      onKeyUp(event);\n    }\n  };\n  const clickable = clickableProp !== false && onClick ? true : clickableProp;\n  const component = clickable || onDelete ? ButtonBase : ComponentProp || 'div';\n  const ownerState = {\n    ...props,\n    component,\n    disabled,\n    size,\n    color,\n    iconColor: /*#__PURE__*/React.isValidElement(iconProp) ? iconProp.props.color || color : color,\n    onDelete: !!onDelete,\n    clickable,\n    variant\n  };\n  const classes = useUtilityClasses(ownerState);\n  const moreProps = component === ButtonBase ? {\n    component: ComponentProp || 'div',\n    focusVisibleClassName: classes.focusVisible,\n    ...(onDelete && {\n      disableRipple: true\n    })\n  } : {};\n  let deleteIcon = null;\n  if (onDelete) {\n    deleteIcon = deleteIconProp && /*#__PURE__*/React.isValidElement(deleteIconProp) ? (/*#__PURE__*/React.cloneElement(deleteIconProp, {\n      className: clsx(deleteIconProp.props.className, classes.deleteIcon),\n      onClick: handleDeleteIconClick\n    })) : /*#__PURE__*/_jsx(CancelIcon, {\n      className: classes.deleteIcon,\n      onClick: handleDeleteIconClick\n    });\n  }\n  let avatar = null;\n  if (avatarProp && /*#__PURE__*/React.isValidElement(avatarProp)) {\n    avatar = /*#__PURE__*/React.cloneElement(avatarProp, {\n      className: clsx(classes.avatar, avatarProp.props.className)\n    });\n  }\n  let icon = null;\n  if (iconProp && /*#__PURE__*/React.isValidElement(iconProp)) {\n    icon = /*#__PURE__*/React.cloneElement(iconProp, {\n      className: clsx(classes.icon, iconProp.props.className)\n    });\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    if (avatar && icon) {\n      console.error('MUI: The Chip component can not handle the avatar ' + 'and the icon prop at the same time. Pick one.');\n    }\n  }\n  const externalForwardedProps = {\n    slots,\n    slotProps\n  };\n  const [RootSlot, rootProps] = useSlot('root', {\n    elementType: ChipRoot,\n    externalForwardedProps: {\n      ...externalForwardedProps,\n      ...other\n    },\n    ownerState,\n    // The `component` prop is preserved because `Chip` relies on it for internal logic. If `shouldForwardComponentProp` were `false`, `useSlot` would remove the `component` prop, potentially breaking the component's behavior.\n    shouldForwardComponentProp: true,\n    ref: handleRef,\n    className: clsx(classes.root, className),\n    additionalProps: {\n      disabled: clickable && disabled ? true : undefined,\n      tabIndex: skipFocusWhenDisabled && disabled ? -1 : tabIndex,\n      ...moreProps\n    },\n    getSlotProps: handlers => ({\n      ...handlers,\n      onClick: event => {\n        handlers.onClick?.(event);\n        onClick?.(event);\n      },\n      onKeyDown: event => {\n        handlers.onKeyDown?.(event);\n        handleKeyDown(event);\n      },\n      onKeyUp: event => {\n        handlers.onKeyUp?.(event);\n        handleKeyUp(event);\n      }\n    })\n  });\n  const [LabelSlot, labelProps] = useSlot('label', {\n    elementType: ChipLabel,\n    externalForwardedProps,\n    ownerState,\n    className: classes.label\n  });\n  return /*#__PURE__*/_jsxs(RootSlot, {\n    as: component,\n    ...rootProps,\n    children: [avatar || icon, /*#__PURE__*/_jsx(LabelSlot, {\n      ...labelProps,\n      children: label\n    }), deleteIcon]\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? Chip.propTypes /* remove-proptypes */ = {\n  //  Warning \n  //  These PropTypes are generated from the TypeScript type definitions. \n  //     To update them, edit the d.ts file and run `pnpm proptypes`.     \n  // \n  /**\n   * The Avatar element to display.\n   */\n  avatar: PropTypes.element,\n  /**\n   * This prop isn't supported.\n   * Use the `component` prop if you need to change the children structure.\n   */\n  children: unsupportedProp,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the chip will appear clickable, and will raise when pressed,\n   * even if the onClick prop is not defined.\n   * If `false`, the chip will not appear clickable, even if onClick prop is defined.\n   * This can be used, for example,\n   * along with the component prop to indicate an anchor Chip is clickable.\n   * Note: this controls the UI and does not affect the onClick event.\n   */\n  clickable: PropTypes.bool,\n  /**\n   * The color of the component.\n   * It supports both default and custom theme colors, which can be added as shown in the\n   * [palette customization guide](https://mui.com/material-ui/customization/palette/#custom-colors).\n   * @default 'default'\n   */\n  color: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['default', 'primary', 'secondary', 'error', 'info', 'success', 'warning']), PropTypes.string]),\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * Override the default delete icon element. Shown only if `onDelete` is set.\n   */\n  deleteIcon: PropTypes.element,\n  /**\n   * If `true`, the component is disabled.\n   * @default false\n   */\n  disabled: PropTypes.bool,\n  /**\n   * Icon element.\n   */\n  icon: PropTypes.element,\n  /**\n   * The content of the component.\n   */\n  label: PropTypes.node,\n  /**\n   * @ignore\n   */\n  onClick: PropTypes.func,\n  /**\n   * Callback fired when the delete icon is clicked.\n   * If set, the delete icon will be shown.\n   */\n  onDelete: PropTypes.func,\n  /**\n   * @ignore\n   */\n  onKeyDown: PropTypes.func,\n  /**\n   * @ignore\n   */\n  onKeyUp: PropTypes.func,\n  /**\n   * The size of the component.\n   * @default 'medium'\n   */\n  size: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['medium', 'small']), PropTypes.string]),\n  /**\n   * If `true`, allows the disabled chip to escape focus.\n   * If `false`, allows the disabled chip to receive focus.\n   * @default false\n   */\n  skipFocusWhenDisabled: PropTypes.bool,\n  /**\n   * The props used for each slot inside.\n   * @default {}\n   */\n  slotProps: PropTypes.shape({\n    label: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    root: PropTypes.oneOfType([PropTypes.func, PropTypes.object])\n  }),\n  /**\n   * The components used for each slot inside.\n   * @default {}\n   */\n  slots: PropTypes.shape({\n    label: PropTypes.elementType,\n    root: PropTypes.elementType\n  }),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * @ignore\n   */\n  tabIndex: PropTypes.number,\n  /**\n   * The variant to use.\n   * @default 'filled'\n   */\n  variant: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['filled', 'outlined']), PropTypes.string])\n} : void 0;\nexport default Chip;","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getAutocompleteUtilityClass(slot) {\n  return generateUtilityClass('MuiAutocomplete', slot);\n}\nconst autocompleteClasses = generateUtilityClasses('MuiAutocomplete', ['root', 'expanded', 'fullWidth', 'focused', 'focusVisible', 'tag', 'tagSizeSmall', 'tagSizeMedium', 'hasPopupIcon', 'hasClearIcon', 'inputRoot', 'input', 'inputFocused', 'endAdornment', 'clearIndicator', 'popupIndicator', 'popupIndicatorOpen', 'popper', 'popperDisablePortal', 'paper', 'listbox', 'loading', 'noOptions', 'option', 'groupLabel', 'groupUl']);\nexport default autocompleteClasses;","'use client';\n\nvar _ClearIcon, _ArrowDropDownIcon;\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport integerPropType from '@mui/utils/integerPropType';\nimport chainPropTypes from '@mui/utils/chainPropTypes';\nimport composeClasses from '@mui/utils/composeClasses';\nimport useAutocomplete, { createFilterOptions } from \"../useAutocomplete/index.js\";\nimport Popper from \"../Popper/index.js\";\nimport ListSubheader from \"../ListSubheader/index.js\";\nimport Paper from \"../Paper/index.js\";\nimport IconButton from \"../IconButton/index.js\";\nimport Chip from \"../Chip/index.js\";\nimport inputClasses from \"../Input/inputClasses.js\";\nimport inputBaseClasses from \"../InputBase/inputBaseClasses.js\";\nimport outlinedInputClasses from \"../OutlinedInput/outlinedInputClasses.js\";\nimport filledInputClasses from \"../FilledInput/filledInputClasses.js\";\nimport ClearIcon from \"../internal/svg-icons/Close.js\";\nimport ArrowDropDownIcon from \"../internal/svg-icons/ArrowDropDown.js\";\nimport { styled } from \"../zero-styled/index.js\";\nimport memoTheme from \"../utils/memoTheme.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport autocompleteClasses, { getAutocompleteUtilityClass } from \"./autocompleteClasses.js\";\nimport capitalize from \"../utils/capitalize.js\";\nimport useSlot from \"../utils/useSlot.js\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    disablePortal,\n    expanded,\n    focused,\n    fullWidth,\n    hasClearIcon,\n    hasPopupIcon,\n    inputFocused,\n    popupOpen,\n    size\n  } = ownerState;\n  const slots = {\n    root: ['root', expanded && 'expanded', focused && 'focused', fullWidth && 'fullWidth', hasClearIcon && 'hasClearIcon', hasPopupIcon && 'hasPopupIcon'],\n    inputRoot: ['inputRoot'],\n    input: ['input', inputFocused && 'inputFocused'],\n    tag: ['tag', `tagSize${capitalize(size)}`],\n    endAdornment: ['endAdornment'],\n    clearIndicator: ['clearIndicator'],\n    popupIndicator: ['popupIndicator', popupOpen && 'popupIndicatorOpen'],\n    popper: ['popper', disablePortal && 'popperDisablePortal'],\n    paper: ['paper'],\n    listbox: ['listbox'],\n    loading: ['loading'],\n    noOptions: ['noOptions'],\n    option: ['option'],\n    groupLabel: ['groupLabel'],\n    groupUl: ['groupUl']\n  };\n  return composeClasses(slots, getAutocompleteUtilityClass, classes);\n};\nconst AutocompleteRoot = styled('div', {\n  name: 'MuiAutocomplete',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    const {\n      fullWidth,\n      hasClearIcon,\n      hasPopupIcon,\n      inputFocused,\n      size\n    } = ownerState;\n    return [{\n      [`& .${autocompleteClasses.tag}`]: styles.tag\n    }, {\n      [`& .${autocompleteClasses.tag}`]: styles[`tagSize${capitalize(size)}`]\n    }, {\n      [`& .${autocompleteClasses.inputRoot}`]: styles.inputRoot\n    }, {\n      [`& .${autocompleteClasses.input}`]: styles.input\n    }, {\n      [`& .${autocompleteClasses.input}`]: inputFocused && styles.inputFocused\n    }, styles.root, fullWidth && styles.fullWidth, hasPopupIcon && styles.hasPopupIcon, hasClearIcon && styles.hasClearIcon];\n  }\n})({\n  [`&.${autocompleteClasses.focused} .${autocompleteClasses.clearIndicator}`]: {\n    visibility: 'visible'\n  },\n  /* Avoid double tap issue on iOS */\n  '@media (pointer: fine)': {\n    [`&:hover .${autocompleteClasses.clearIndicator}`]: {\n      visibility: 'visible'\n    }\n  },\n  [`& .${autocompleteClasses.tag}`]: {\n    margin: 3,\n    maxWidth: 'calc(100% - 6px)'\n  },\n  [`& .${autocompleteClasses.inputRoot}`]: {\n    [`.${autocompleteClasses.hasPopupIcon}&, .${autocompleteClasses.hasClearIcon}&`]: {\n      paddingRight: 26 + 4\n    },\n    [`.${autocompleteClasses.hasPopupIcon}.${autocompleteClasses.hasClearIcon}&`]: {\n      paddingRight: 52 + 4\n    },\n    [`& .${autocompleteClasses.input}`]: {\n      width: 0,\n      minWidth: 30\n    }\n  },\n  [`& .${inputClasses.root}`]: {\n    paddingBottom: 1,\n    '& .MuiInput-input': {\n      padding: '4px 4px 4px 0px'\n    }\n  },\n  [`& .${inputClasses.root}.${inputBaseClasses.sizeSmall}`]: {\n    [`& .${inputClasses.input}`]: {\n      padding: '2px 4px 3px 0'\n    }\n  },\n  [`& .${outlinedInputClasses.root}`]: {\n    padding: 9,\n    [`.${autocompleteClasses.hasPopupIcon}&, .${autocompleteClasses.hasClearIcon}&`]: {\n      paddingRight: 26 + 4 + 9\n    },\n    [`.${autocompleteClasses.hasPopupIcon}.${autocompleteClasses.hasClearIcon}&`]: {\n      paddingRight: 52 + 4 + 9\n    },\n    [`& .${autocompleteClasses.input}`]: {\n      padding: '7.5px 4px 7.5px 5px'\n    },\n    [`& .${autocompleteClasses.endAdornment}`]: {\n      right: 9\n    }\n  },\n  [`& .${outlinedInputClasses.root}.${inputBaseClasses.sizeSmall}`]: {\n    // Don't specify paddingRight, as it overrides the default value set when there is only\n    // one of the popup or clear icon as the specificity is equal so the latter one wins\n    paddingTop: 6,\n    paddingBottom: 6,\n    paddingLeft: 6,\n    [`& .${autocompleteClasses.input}`]: {\n      padding: '2.5px 4px 2.5px 8px'\n    }\n  },\n  [`& .${filledInputClasses.root}`]: {\n    paddingTop: 19,\n    paddingLeft: 8,\n    [`.${autocompleteClasses.hasPopupIcon}&, .${autocompleteClasses.hasClearIcon}&`]: {\n      paddingRight: 26 + 4 + 9\n    },\n    [`.${autocompleteClasses.hasPopupIcon}.${autocompleteClasses.hasClearIcon}&`]: {\n      paddingRight: 52 + 4 + 9\n    },\n    [`& .${filledInputClasses.input}`]: {\n      padding: '7px 4px'\n    },\n    [`& .${autocompleteClasses.endAdornment}`]: {\n      right: 9\n    }\n  },\n  [`& .${filledInputClasses.root}.${inputBaseClasses.sizeSmall}`]: {\n    paddingBottom: 1,\n    [`& .${filledInputClasses.input}`]: {\n      padding: '2.5px 4px'\n    }\n  },\n  [`& .${inputBaseClasses.hiddenLabel}`]: {\n    paddingTop: 8\n  },\n  [`& .${filledInputClasses.root}.${inputBaseClasses.hiddenLabel}`]: {\n    paddingTop: 0,\n    paddingBottom: 0,\n    [`& .${autocompleteClasses.input}`]: {\n      paddingTop: 16,\n      paddingBottom: 17\n    }\n  },\n  [`& .${filledInputClasses.root}.${inputBaseClasses.hiddenLabel}.${inputBaseClasses.sizeSmall}`]: {\n    [`& .${autocompleteClasses.input}`]: {\n      paddingTop: 8,\n      paddingBottom: 9\n    }\n  },\n  [`& .${autocompleteClasses.input}`]: {\n    flexGrow: 1,\n    textOverflow: 'ellipsis',\n    opacity: 0\n  },\n  variants: [{\n    props: {\n      fullWidth: true\n    },\n    style: {\n      width: '100%'\n    }\n  }, {\n    props: {\n      size: 'small'\n    },\n    style: {\n      [`& .${autocompleteClasses.tag}`]: {\n        margin: 2,\n        maxWidth: 'calc(100% - 4px)'\n      }\n    }\n  }, {\n    props: {\n      inputFocused: true\n    },\n    style: {\n      [`& .${autocompleteClasses.input}`]: {\n        opacity: 1\n      }\n    }\n  }, {\n    props: {\n      multiple: true\n    },\n    style: {\n      [`& .${autocompleteClasses.inputRoot}`]: {\n        flexWrap: 'wrap'\n      }\n    }\n  }]\n});\nconst AutocompleteEndAdornment = styled('div', {\n  name: 'MuiAutocomplete',\n  slot: 'EndAdornment'\n})({\n  // We use a position absolute to support wrapping tags.\n  position: 'absolute',\n  right: 0,\n  top: '50%',\n  transform: 'translate(0, -50%)'\n});\nconst AutocompleteClearIndicator = styled(IconButton, {\n  name: 'MuiAutocomplete',\n  slot: 'ClearIndicator'\n})({\n  marginRight: -2,\n  padding: 4,\n  visibility: 'hidden'\n});\nconst AutocompletePopupIndicator = styled(IconButton, {\n  name: 'MuiAutocomplete',\n  slot: 'PopupIndicator',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.popupIndicator, ownerState.popupOpen && styles.popupIndicatorOpen];\n  }\n})({\n  padding: 2,\n  marginRight: -2,\n  variants: [{\n    props: {\n      popupOpen: true\n    },\n    style: {\n      transform: 'rotate(180deg)'\n    }\n  }]\n});\nconst AutocompletePopper = styled(Popper, {\n  name: 'MuiAutocomplete',\n  slot: 'Popper',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [{\n      [`& .${autocompleteClasses.option}`]: styles.option\n    }, styles.popper, ownerState.disablePortal && styles.popperDisablePortal];\n  }\n})(memoTheme(({\n  theme\n}) => ({\n  zIndex: (theme.vars || theme).zIndex.modal,\n  variants: [{\n    props: {\n      disablePortal: true\n    },\n    style: {\n      position: 'absolute'\n    }\n  }]\n})));\nconst AutocompletePaper = styled(Paper, {\n  name: 'MuiAutocomplete',\n  slot: 'Paper'\n})(memoTheme(({\n  theme\n}) => ({\n  ...theme.typography.body1,\n  overflow: 'auto'\n})));\nconst AutocompleteLoading = styled('div', {\n  name: 'MuiAutocomplete',\n  slot: 'Loading'\n})(memoTheme(({\n  theme\n}) => ({\n  color: (theme.vars || theme).palette.text.secondary,\n  padding: '14px 16px'\n})));\nconst AutocompleteNoOptions = styled('div', {\n  name: 'MuiAutocomplete',\n  slot: 'NoOptions'\n})(memoTheme(({\n  theme\n}) => ({\n  color: (theme.vars || theme).palette.text.secondary,\n  padding: '14px 16px'\n})));\nconst AutocompleteListbox = styled('ul', {\n  name: 'MuiAutocomplete',\n  slot: 'Listbox'\n})(memoTheme(({\n  theme\n}) => ({\n  listStyle: 'none',\n  margin: 0,\n  padding: '8px 0',\n  maxHeight: '40vh',\n  overflow: 'auto',\n  position: 'relative',\n  [`& .${autocompleteClasses.option}`]: {\n    minHeight: 48,\n    display: 'flex',\n    overflow: 'hidden',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    cursor: 'pointer',\n    paddingTop: 6,\n    boxSizing: 'border-box',\n    outline: '0',\n    WebkitTapHighlightColor: 'transparent',\n    paddingBottom: 6,\n    paddingLeft: 16,\n    paddingRight: 16,\n    [theme.breakpoints.up('sm')]: {\n      minHeight: 'auto'\n    },\n    [`&.${autocompleteClasses.focused}`]: {\n      backgroundColor: (theme.vars || theme).palette.action.hover,\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    },\n    '&[aria-disabled=\"true\"]': {\n      opacity: (theme.vars || theme).palette.action.disabledOpacity,\n      pointerEvents: 'none'\n    },\n    [`&.${autocompleteClasses.focusVisible}`]: {\n      backgroundColor: (theme.vars || theme).palette.action.focus\n    },\n    '&[aria-selected=\"true\"]': {\n      backgroundColor: theme.alpha((theme.vars || theme).palette.primary.main, (theme.vars || theme).palette.action.selectedOpacity),\n      [`&.${autocompleteClasses.focused}`]: {\n        backgroundColor: theme.alpha((theme.vars || theme).palette.primary.main, `${(theme.vars || theme).palette.action.selectedOpacity} + ${(theme.vars || theme).palette.action.hoverOpacity}`),\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: (theme.vars || theme).palette.action.selected\n        }\n      },\n      [`&.${autocompleteClasses.focusVisible}`]: {\n        backgroundColor: theme.alpha((theme.vars || theme).palette.primary.main, `${(theme.vars || theme).palette.action.selectedOpacity} + ${(theme.vars || theme).palette.action.focusOpacity}`)\n      }\n    }\n  }\n})));\nconst AutocompleteGroupLabel = styled(ListSubheader, {\n  name: 'MuiAutocomplete',\n  slot: 'GroupLabel'\n})(memoTheme(({\n  theme\n}) => ({\n  backgroundColor: (theme.vars || theme).palette.background.paper,\n  top: -8\n})));\nconst AutocompleteGroupUl = styled('ul', {\n  name: 'MuiAutocomplete',\n  slot: 'GroupUl'\n})({\n  padding: 0,\n  [`& .${autocompleteClasses.option}`]: {\n    paddingLeft: 24\n  }\n});\nexport { createFilterOptions };\nconst Autocomplete = /*#__PURE__*/React.forwardRef(function Autocomplete(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiAutocomplete'\n  });\n\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  const {\n    autoComplete = false,\n    autoHighlight = false,\n    autoSelect = false,\n    blurOnSelect = false,\n    ChipProps: ChipPropsProp,\n    className,\n    clearIcon = _ClearIcon || (_ClearIcon = /*#__PURE__*/_jsx(ClearIcon, {\n      fontSize: \"small\"\n    })),\n    clearOnBlur = !props.freeSolo,\n    clearOnEscape = false,\n    clearText = 'Clear',\n    closeText = 'Close',\n    componentsProps,\n    defaultValue = props.multiple ? [] : null,\n    disableClearable = false,\n    disableCloseOnSelect = false,\n    disabled = false,\n    disabledItemsFocusable = false,\n    disableListWrap = false,\n    disablePortal = false,\n    filterOptions,\n    filterSelectedOptions = false,\n    forcePopupIcon = 'auto',\n    freeSolo = false,\n    fullWidth = false,\n    getLimitTagsText = more => `+${more}`,\n    getOptionDisabled,\n    getOptionKey,\n    getOptionLabel: getOptionLabelProp,\n    isOptionEqualToValue,\n    groupBy,\n    handleHomeEndKeys = !props.freeSolo,\n    id: idProp,\n    includeInputInList = false,\n    inputValue: inputValueProp,\n    limitTags = -1,\n    ListboxComponent: ListboxComponentProp,\n    ListboxProps: ListboxPropsProp,\n    loading = false,\n    loadingText = 'Loading',\n    multiple = false,\n    noOptionsText = 'No options',\n    onChange,\n    onClose,\n    onHighlightChange,\n    onInputChange,\n    onOpen,\n    open,\n    openOnFocus = false,\n    openText = 'Open',\n    options,\n    PaperComponent: PaperComponentProp,\n    PopperComponent: PopperComponentProp,\n    popupIcon = _ArrowDropDownIcon || (_ArrowDropDownIcon = /*#__PURE__*/_jsx(ArrowDropDownIcon, {})),\n    readOnly = false,\n    renderGroup: renderGroupProp,\n    renderInput,\n    renderOption: renderOptionProp,\n    renderTags,\n    renderValue,\n    selectOnFocus = !props.freeSolo,\n    size = 'medium',\n    slots = {},\n    slotProps = {},\n    value: valueProp,\n    ...other\n  } = props;\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n\n  const {\n    getRootProps,\n    getInputProps,\n    getInputLabelProps,\n    getPopupIndicatorProps,\n    getClearProps,\n    getItemProps,\n    getListboxProps,\n    getOptionProps,\n    value,\n    dirty,\n    expanded,\n    id,\n    popupOpen,\n    focused,\n    focusedItem,\n    anchorEl,\n    setAnchorEl,\n    inputValue,\n    groupedOptions\n  } = useAutocomplete({\n    ...props,\n    componentName: 'Autocomplete'\n  });\n  const hasClearIcon = !disableClearable && !disabled && dirty && !readOnly;\n  const hasPopupIcon = (!freeSolo || forcePopupIcon === true) && forcePopupIcon !== false;\n  const {\n    onMouseDown: handleInputMouseDown\n  } = getInputProps();\n  const {\n    ref: listboxRef,\n    ...otherListboxProps\n  } = getListboxProps();\n  const defaultGetOptionLabel = option => option.label ?? option;\n  const getOptionLabel = getOptionLabelProp || defaultGetOptionLabel;\n\n  // If you modify this, make sure to keep the `AutocompleteOwnerState` type in sync.\n  const ownerState = {\n    ...props,\n    disablePortal,\n    expanded,\n    focused,\n    fullWidth,\n    getOptionLabel,\n    hasClearIcon,\n    hasPopupIcon,\n    inputFocused: focusedItem === -1,\n    popupOpen,\n    size\n  };\n  const classes = useUtilityClasses(ownerState);\n  const externalForwardedProps = {\n    slots: {\n      paper: PaperComponentProp,\n      popper: PopperComponentProp,\n      ...slots\n    },\n    slotProps: {\n      chip: ChipPropsProp,\n      listbox: ListboxPropsProp,\n      ...componentsProps,\n      ...slotProps\n    }\n  };\n  const [ListboxSlot, listboxProps] = useSlot('listbox', {\n    elementType: AutocompleteListbox,\n    externalForwardedProps,\n    ownerState,\n    className: classes.listbox,\n    additionalProps: otherListboxProps,\n    ref: listboxRef\n  });\n  const [PaperSlot, paperProps] = useSlot('paper', {\n    elementType: Paper,\n    externalForwardedProps,\n    ownerState,\n    className: classes.paper\n  });\n  const [PopperSlot, popperProps] = useSlot('popper', {\n    elementType: Popper,\n    externalForwardedProps,\n    ownerState,\n    className: classes.popper,\n    additionalProps: {\n      disablePortal,\n      style: {\n        width: anchorEl ? anchorEl.clientWidth : null\n      },\n      role: 'presentation',\n      anchorEl,\n      open: popupOpen\n    }\n  });\n  let startAdornment;\n  const getCustomizedItemProps = params => ({\n    className: classes.tag,\n    disabled,\n    ...getItemProps(params)\n  });\n  if (multiple) {\n    if (value.length > 0) {\n      if (renderTags) {\n        startAdornment = renderTags(value, getCustomizedItemProps, ownerState);\n      } else if (renderValue) {\n        startAdornment = renderValue(value, getCustomizedItemProps, ownerState);\n      } else {\n        startAdornment = value.map((option, index) => {\n          const {\n            key,\n            ...customItemProps\n          } = getCustomizedItemProps({\n            index\n          });\n          return /*#__PURE__*/_jsx(Chip, {\n            label: getOptionLabel(option),\n            size: size,\n            ...customItemProps,\n            ...externalForwardedProps.slotProps.chip\n          }, key);\n        });\n      }\n    }\n  } else if (renderValue && value != null) {\n    startAdornment = renderValue(value, getCustomizedItemProps, ownerState);\n  }\n  if (limitTags > -1 && Array.isArray(startAdornment)) {\n    const more = startAdornment.length - limitTags;\n    if (!focused && more > 0) {\n      startAdornment = startAdornment.splice(0, limitTags);\n      startAdornment.push(/*#__PURE__*/_jsx(\"span\", {\n        className: classes.tag,\n        children: getLimitTagsText(more)\n      }, startAdornment.length));\n    }\n  }\n  const defaultRenderGroup = params => /*#__PURE__*/_jsxs(\"li\", {\n    children: [/*#__PURE__*/_jsx(AutocompleteGroupLabel, {\n      className: classes.groupLabel,\n      ownerState: ownerState,\n      component: \"div\",\n      children: params.group\n    }), /*#__PURE__*/_jsx(AutocompleteGroupUl, {\n      className: classes.groupUl,\n      ownerState: ownerState,\n      children: params.children\n    })]\n  }, params.key);\n  const renderGroup = renderGroupProp || defaultRenderGroup;\n  const defaultRenderOption = (props2, option) => {\n    // Need to clearly apply key because of https://github.com/vercel/next.js/issues/55642\n    const {\n      key,\n      ...otherProps\n    } = props2;\n    return /*#__PURE__*/_jsx(\"li\", {\n      ...otherProps,\n      children: getOptionLabel(option)\n    }, key);\n  };\n  const renderOption = renderOptionProp || defaultRenderOption;\n  const renderListOption = (option, index) => {\n    const optionProps = getOptionProps({\n      option,\n      index\n    });\n    return renderOption({\n      ...optionProps,\n      className: classes.option\n    }, option, {\n      selected: optionProps['aria-selected'],\n      index,\n      inputValue\n    }, ownerState);\n  };\n  const clearIndicatorSlotProps = externalForwardedProps.slotProps.clearIndicator;\n  const popupIndicatorSlotProps = externalForwardedProps.slotProps.popupIndicator;\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsx(AutocompleteRoot, {\n      ref: ref,\n      className: clsx(classes.root, className),\n      ownerState: ownerState,\n      ...getRootProps(other),\n      children: renderInput({\n        id,\n        disabled,\n        fullWidth: true,\n        size: size === 'small' ? 'small' : undefined,\n        InputLabelProps: getInputLabelProps(),\n        InputProps: {\n          ref: setAnchorEl,\n          className: classes.inputRoot,\n          startAdornment,\n          onMouseDown: event => {\n            if (event.target === event.currentTarget) {\n              handleInputMouseDown(event);\n            }\n          },\n          ...((hasClearIcon || hasPopupIcon) && {\n            endAdornment: /*#__PURE__*/_jsxs(AutocompleteEndAdornment, {\n              className: classes.endAdornment,\n              ownerState: ownerState,\n              children: [hasClearIcon ? /*#__PURE__*/_jsx(AutocompleteClearIndicator, {\n                ...getClearProps(),\n                \"aria-label\": clearText,\n                title: clearText,\n                ownerState: ownerState,\n                ...clearIndicatorSlotProps,\n                className: clsx(classes.clearIndicator, clearIndicatorSlotProps?.className),\n                children: clearIcon\n              }) : null, hasPopupIcon ? /*#__PURE__*/_jsx(AutocompletePopupIndicator, {\n                ...getPopupIndicatorProps(),\n                disabled: disabled,\n                \"aria-label\": popupOpen ? closeText : openText,\n                title: popupOpen ? closeText : openText,\n                ownerState: ownerState,\n                ...popupIndicatorSlotProps,\n                className: clsx(classes.popupIndicator, popupIndicatorSlotProps?.className),\n                children: popupIcon\n              }) : null]\n            })\n          })\n        },\n        inputProps: {\n          className: classes.input,\n          disabled,\n          readOnly,\n          ...getInputProps()\n        }\n      })\n    }), anchorEl ? /*#__PURE__*/_jsx(AutocompletePopper, {\n      as: PopperSlot,\n      ...popperProps,\n      children: /*#__PURE__*/_jsxs(AutocompletePaper, {\n        as: PaperSlot,\n        ...paperProps,\n        children: [loading && groupedOptions.length === 0 ? /*#__PURE__*/_jsx(AutocompleteLoading, {\n          className: classes.loading,\n          ownerState: ownerState,\n          children: loadingText\n        }) : null, groupedOptions.length === 0 && !freeSolo && !loading ? /*#__PURE__*/_jsx(AutocompleteNoOptions, {\n          className: classes.noOptions,\n          ownerState: ownerState,\n          role: \"presentation\",\n          onMouseDown: event => {\n            // Prevent input blur when interacting with the \"no options\" content\n            event.preventDefault();\n          },\n          children: noOptionsText\n        }) : null, groupedOptions.length > 0 ? /*#__PURE__*/_jsx(ListboxSlot, {\n          as: ListboxComponentProp,\n          ...listboxProps,\n          children: groupedOptions.map((option, index) => {\n            if (groupBy) {\n              return renderGroup({\n                key: option.key,\n                group: option.group,\n                children: option.options.map((option2, index2) => renderListOption(option2, option.index + index2))\n              });\n            }\n            return renderListOption(option, index);\n          })\n        }) : null]\n      })\n    }) : null]\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? Autocomplete.propTypes /* remove-proptypes */ = {\n  //  Warning \n  //  These PropTypes are generated from the TypeScript type definitions. \n  //     To update them, edit the d.ts file and run `pnpm proptypes`.     \n  // \n  /**\n   * If `true`, the portion of the selected suggestion that the user hasn't typed,\n   * known as the completion string, appears inline after the input cursor in the textbox.\n   * The inline completion string is visually highlighted and has a selected state.\n   * @default false\n   */\n  autoComplete: PropTypes.bool,\n  /**\n   * If `true`, the first option is automatically highlighted.\n   * @default false\n   */\n  autoHighlight: PropTypes.bool,\n  /**\n   * If `true`, the selected option becomes the value of the input\n   * when the Autocomplete loses focus unless the user chooses\n   * a different option or changes the character string in the input.\n   *\n   * When using the `freeSolo` mode, the typed value will be the input value\n   * if the Autocomplete loses focus without highlighting an option.\n   * @default false\n   */\n  autoSelect: PropTypes.bool,\n  /**\n   * Control if the input should be blurred when an option is selected:\n   *\n   * - `false` the input is not blurred.\n   * - `true` the input is always blurred.\n   * - `touch` the input is blurred after a touch event.\n   * - `mouse` the input is blurred after a mouse event.\n   * @default false\n   */\n  blurOnSelect: PropTypes.oneOfType([PropTypes.oneOf(['mouse', 'touch']), PropTypes.bool]),\n  /**\n   * Props applied to the [`Chip`](https://mui.com/material-ui/api/chip/) element.\n   * @deprecated Use `slotProps.chip` instead. This prop will be removed in a future major release. See [Migrating from deprecated APIs](/material-ui/migration/migrating-from-deprecated-apis/) for more details.\n   */\n  ChipProps: PropTypes.object,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The icon to display in place of the default clear icon.\n   * @default <ClearIcon fontSize=\"small\" />\n   */\n  clearIcon: PropTypes.node,\n  /**\n   * If `true`, the input's text is cleared on blur if no value is selected.\n   *\n   * Set it to `true` if you want to help the user enter a new value.\n   * Set it to `false` if you want to help the user resume their search.\n   * @default !props.freeSolo\n   */\n  clearOnBlur: PropTypes.bool,\n  /**\n   * If `true`, clear all values when the user presses escape and the popup is closed.\n   * @default false\n   */\n  clearOnEscape: PropTypes.bool,\n  /**\n   * Override the default text for the *clear* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](https://mui.com/material-ui/guides/localization/).\n   * @default 'Clear'\n   */\n  clearText: PropTypes.string,\n  /**\n   * Override the default text for the *close popup* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](https://mui.com/material-ui/guides/localization/).\n   * @default 'Close'\n   */\n  closeText: PropTypes.string,\n  /**\n   * The props used for each slot inside.\n   * @deprecated Use the `slotProps` prop instead. This prop will be removed in a future major release. See [Migrating from deprecated APIs](https://mui.com/material-ui/migration/migrating-from-deprecated-apis/) for more details.\n   */\n  componentsProps: PropTypes.shape({\n    clearIndicator: PropTypes.object,\n    paper: PropTypes.object,\n    popper: PropTypes.object,\n    popupIndicator: PropTypes.object\n  }),\n  /**\n   * The default value. Use when the component is not controlled.\n   * @default props.multiple ? [] : null\n   */\n  defaultValue: chainPropTypes(PropTypes.any, props => {\n    if (props.multiple && props.defaultValue !== undefined && !Array.isArray(props.defaultValue)) {\n      return new Error(['MUI: The Autocomplete expects the `defaultValue` prop to be an array when `multiple={true}` or undefined.', `However, ${props.defaultValue} was provided.`].join('\\n'));\n    }\n    return null;\n  }),\n  /**\n   * If `true`, the input can't be cleared.\n   * @default false\n   */\n  disableClearable: PropTypes.bool,\n  /**\n   * If `true`, the popup won't close when a value is selected.\n   * @default false\n   */\n  disableCloseOnSelect: PropTypes.bool,\n  /**\n   * If `true`, the component is disabled.\n   * @default false\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, will allow focus on disabled items.\n   * @default false\n   */\n  disabledItemsFocusable: PropTypes.bool,\n  /**\n   * If `true`, the list box in the popup will not wrap focus.\n   * @default false\n   */\n  disableListWrap: PropTypes.bool,\n  /**\n   * If `true`, the `Popper` content will be under the DOM hierarchy of the parent component.\n   * @default false\n   */\n  disablePortal: PropTypes.bool,\n  /**\n   * A function that determines the filtered options to be rendered on search.\n   *\n   * @default createFilterOptions()\n   * @param {Value[]} options The options to render.\n   * @param {object} state The state of the component.\n   * @returns {Value[]}\n   */\n  filterOptions: PropTypes.func,\n  /**\n   * If `true`, hide the selected options from the list box.\n   * @default false\n   */\n  filterSelectedOptions: PropTypes.bool,\n  /**\n   * Force the visibility display of the popup icon.\n   * @default 'auto'\n   */\n  forcePopupIcon: PropTypes.oneOfType([PropTypes.oneOf(['auto']), PropTypes.bool]),\n  /**\n   * If `true`, the Autocomplete is free solo, meaning that the user input is not bound to provided options.\n   * @default false\n   */\n  freeSolo: PropTypes.bool,\n  /**\n   * If `true`, the input will take up the full width of its container.\n   * @default false\n   */\n  fullWidth: PropTypes.bool,\n  /**\n   * The label to display when the tags are truncated (`limitTags`).\n   *\n   * @param {number} more The number of truncated tags.\n   * @returns {ReactNode}\n   * @default (more) => `+${more}`\n   */\n  getLimitTagsText: PropTypes.func,\n  /**\n   * Used to determine the disabled state for a given option.\n   *\n   * @param {Value} option The option to test.\n   * @template Value The option shape. Will be the same shape as an item of the options.\n   * @returns {boolean}\n   */\n  getOptionDisabled: PropTypes.func,\n  /**\n   * Used to determine the key for a given option.\n   * This can be useful when the labels of options are not unique (since labels are used as keys by default).\n   *\n   * @param {Value} option The option to get the key for.\n   * @returns {string | number}\n   */\n  getOptionKey: PropTypes.func,\n  /**\n   * Used to determine the string value for a given option.\n   * It's used to fill the input (and the list box options if `renderOption` is not provided).\n   *\n   * If used in free solo mode, it must accept both the type of the options and a string.\n   *\n   * @param {Value} option\n   * @returns {string}\n   * @default (option) => option.label ?? option\n   */\n  getOptionLabel: PropTypes.func,\n  /**\n   * If provided, the options will be grouped under the returned string.\n   * The groupBy value is also used as the text for group headings when `renderGroup` is not provided.\n   *\n   * @param {Value} option The Autocomplete option.\n   * @returns {string}\n   */\n  groupBy: PropTypes.func,\n  /**\n   * If `true`, the component handles the \"Home\" and \"End\" keys when the popup is open.\n   * It should move focus to the first option and last option, respectively.\n   * @default !props.freeSolo\n   */\n  handleHomeEndKeys: PropTypes.bool,\n  /**\n   * This prop is used to help implement the accessibility logic.\n   * If you don't provide an id it will fall back to a randomly generated one.\n   */\n  id: PropTypes.string,\n  /**\n   * If `true`, the highlight can move to the input.\n   * @default false\n   */\n  includeInputInList: PropTypes.bool,\n  /**\n   * The input value.\n   */\n  inputValue: PropTypes.string,\n  /**\n   * Used to determine if the option represents the given value.\n   * Uses strict equality by default.\n   *  Both arguments need to be handled, an option can only match with one value.\n   *\n   * @param {Value} option The option to test.\n   * @param {Value} value The value to test against.\n   * @returns {boolean}\n   */\n  isOptionEqualToValue: PropTypes.func,\n  /**\n   * The maximum number of tags that will be visible when not focused.\n   * Set `-1` to disable the limit.\n   * @default -1\n   */\n  limitTags: integerPropType,\n  /**\n   * The component used to render the listbox.\n   * @default 'ul'\n   * @deprecated Use `slotProps.listbox.component` instead. This prop will be removed in a future major release. See [Migrating from deprecated APIs](/material-ui/migration/migrating-from-deprecated-apis/) for more details.\n   */\n  ListboxComponent: PropTypes.elementType,\n  /**\n   * Props applied to the Listbox element.\n   * @deprecated Use `slotProps.listbox` instead. This prop will be removed in a future major release. See [Migrating from deprecated APIs](/material-ui/migration/migrating-from-deprecated-apis/) for more details.\n   */\n  ListboxProps: PropTypes.object,\n  /**\n   * If `true`, the component is in a loading state.\n   * This shows the `loadingText` in place of suggestions (only if there are no suggestions to show, for example `options` are empty).\n   * @default false\n   */\n  loading: PropTypes.bool,\n  /**\n   * Text to display when in a loading state.\n   *\n   * For localization purposes, you can use the provided [translations](https://mui.com/material-ui/guides/localization/).\n   * @default 'Loading'\n   */\n  loadingText: PropTypes.node,\n  /**\n   * If `true`, `value` must be an array and the menu will support multiple selections.\n   * @default false\n   */\n  multiple: PropTypes.bool,\n  /**\n   * Text to display when there are no options.\n   *\n   * For localization purposes, you can use the provided [translations](https://mui.com/material-ui/guides/localization/).\n   * @default 'No options'\n   */\n  noOptionsText: PropTypes.node,\n  /**\n   * Callback fired when the value changes.\n   *\n   * @param {React.SyntheticEvent} event The event source of the callback.\n   * @param {Value|Value[]} value The new value of the component.\n   * @param {string} reason One of \"createOption\", \"selectOption\", \"removeOption\", \"blur\" or \"clear\".\n   * @param {string} [details]\n   */\n  onChange: PropTypes.func,\n  /**\n   * Callback fired when the popup requests to be closed.\n   * Use in controlled mode (see open).\n   *\n   * @param {React.SyntheticEvent} event The event source of the callback.\n   * @param {string} reason Can be: `\"toggleInput\"`, `\"escape\"`, `\"selectOption\"`, `\"removeOption\"`, `\"blur\"`.\n   */\n  onClose: PropTypes.func,\n  /**\n   * Callback fired when the highlight option changes.\n   *\n   * @param {React.SyntheticEvent} event The event source of the callback.\n   * @param {Value} option The highlighted option.\n   * @param {string} reason Can be: `\"keyboard\"`, `\"mouse\"`, `\"touch\"`.\n   */\n  onHighlightChange: PropTypes.func,\n  /**\n   * Callback fired when the input value changes.\n   *\n   * @param {React.SyntheticEvent} event The event source of the callback.\n   * @param {string} value The new value of the text input.\n   * @param {string} reason Can be: `\"input\"` (user input), `\"reset\"` (programmatic change), `\"clear\"`, `\"blur\"`, `\"selectOption\"`, `\"removeOption\"`\n   */\n  onInputChange: PropTypes.func,\n  /**\n   * @ignore\n   */\n  onKeyDown: PropTypes.func,\n  /**\n   * Callback fired when the popup requests to be opened.\n   * Use in controlled mode (see open).\n   *\n   * @param {React.SyntheticEvent} event The event source of the callback.\n   */\n  onOpen: PropTypes.func,\n  /**\n   * If `true`, the component is shown.\n   */\n  open: PropTypes.bool,\n  /**\n   * If `true`, the popup will open on input focus.\n   * @default false\n   */\n  openOnFocus: PropTypes.bool,\n  /**\n   * Override the default text for the *open popup* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](https://mui.com/material-ui/guides/localization/).\n   * @default 'Open'\n   */\n  openText: PropTypes.string,\n  /**\n   * A list of options that will be shown in the Autocomplete.\n   */\n  options: PropTypes.array.isRequired,\n  /**\n   * The component used to render the body of the popup.\n   * @default Paper\n   * @deprecated Use `slots.paper` instead. This prop will be removed in a future major release. See [Migrating from deprecated APIs](/material-ui/migration/migrating-from-deprecated-apis/) for more details.\n   */\n  PaperComponent: PropTypes.elementType,\n  /**\n   * The component used to position the popup.\n   * @default Popper\n   * @deprecated Use `slots.popper` instead. This prop will be removed in a future major release. See [Migrating from deprecated APIs](/material-ui/migration/migrating-from-deprecated-apis/) for more details.\n   */\n  PopperComponent: PropTypes.elementType,\n  /**\n   * The icon to display in place of the default popup icon.\n   * @default <ArrowDropDownIcon />\n   */\n  popupIcon: PropTypes.node,\n  /**\n   * If `true`, the component becomes readonly. It is also supported for multiple tags where the tag cannot be deleted.\n   * @default false\n   */\n  readOnly: PropTypes.bool,\n  /**\n   * Render the group.\n   *\n   * @param {AutocompleteRenderGroupParams} params The group to render.\n   * @returns {ReactNode}\n   */\n  renderGroup: PropTypes.func,\n  /**\n   * Render the input.\n   *\n   * **Note:** The `renderInput` prop must return a `TextField` component or a compatible custom component\n   * that correctly forwards `InputProps.ref` and spreads `inputProps`. This ensures proper integration\n   * with the Autocomplete's internal logic (e.g., focus management and keyboard navigation).\n   *\n   * Avoid using components like `DatePicker` or `Select` directly, as they may not forward the required props,\n   * leading to runtime errors or unexpected behavior.\n   *\n   * @param {object} params\n   * @returns {ReactNode}\n   */\n  renderInput: PropTypes.func.isRequired,\n  /**\n   * Render the option, use `getOptionLabel` by default.\n   *\n   * @param {object} props The props to apply on the li element.\n   * @param {Value} option The option to render.\n   * @param {object} state The state of each option.\n   * @param {object} ownerState The state of the Autocomplete component.\n   * @returns {ReactNode}\n   */\n  renderOption: PropTypes.func,\n  /**\n   * Render the selected value when doing multiple selections.\n   *\n   * @deprecated Use `renderValue` prop instead\n   *\n   * @param {Value[]} value The `value` provided to the component.\n   * @param {function} getTagProps A tag props getter.\n   * @param {object} ownerState The state of the Autocomplete component.\n   * @returns {ReactNode}\n   */\n  renderTags: PropTypes.func,\n  /**\n   * Renders the selected value(s) as rich content in the input for both single and multiple selections.\n   *\n   * @param {AutocompleteRenderValue<Value, Multiple, FreeSolo>} value The `value` provided to the component.\n   * @param {function} getItemProps The value item props.\n   * @param {object} ownerState The state of the Autocomplete component.\n   * @returns {ReactNode}\n   */\n  renderValue: PropTypes.func,\n  /**\n   * If `true`, the input's text is selected on focus.\n   * It helps the user clear the selected value.\n   * @default !props.freeSolo\n   */\n  selectOnFocus: PropTypes.bool,\n  /**\n   * The size of the component.\n   * @default 'medium'\n   */\n  size: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['small', 'medium']), PropTypes.string]),\n  /**\n   * The props used for each slot inside.\n   * @default {}\n   */\n  slotProps: PropTypes /* @typescript-to-proptypes-ignore */.shape({\n    chip: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    clearIndicator: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    listbox: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    paper: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    popper: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    popupIndicator: PropTypes.oneOfType([PropTypes.func, PropTypes.object])\n  }),\n  /**\n   * The components used for each slot inside.\n   * @default {}\n   */\n  slots: PropTypes.shape({\n    listbox: PropTypes.elementType,\n    paper: PropTypes.elementType,\n    popper: PropTypes.elementType\n  }),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * The value of the autocomplete.\n   *\n   * The value must have reference equality with the option in order to be selected.\n   * You can customize the equality behavior with the `isOptionEqualToValue` prop.\n   */\n  value: chainPropTypes(PropTypes.any, props => {\n    if (props.multiple && props.value !== undefined && !Array.isArray(props.value)) {\n      return new Error(['MUI: The Autocomplete expects the `value` prop to be an array when `multiple={true}` or undefined.', `However, ${props.value} was provided.`].join('\\n'));\n    }\n    return null;\n  })\n} : void 0;\nexport default Autocomplete;","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport * as React from 'react';\nimport { createContext, isValidElement, useContext, useRef, useState, } from 'react';\nimport { useTranslate } from 'ra-core';\nimport set from 'lodash/set.js';\n/**\n * This hook provides support for suggestion creation in inputs which have choices.\n *\n * @param options The hook option\n * @param {ReactElement} options.create A react element which will be rendered when users choose to create a new choice. This component must call the `useCreateSuggestionContext` hook which provides `onCancel`, `onCreate` and `filter`. See the examples.\n * @param {React.ReactNode|string} options.createLabel Optional. The label for the choice item allowing users to create a new choice. Can be a translation key. Defaults to `ra.action.create`.\n * @param {React.ReactNode|string} options.createItemLabel Optional. The label for the choice item allowing users to create a new choice when they already entered a filter. Can be a translation key. The function and ttranslation will receive an `item` parameter. Providing this option will turn the create label when there is no filter to be a hint (i.e. a disabled item).\n * @param {any} options.createValue Optional. The value for the choice item allowing users to create a new choice. Defaults to `@@ra-create`.\n * @param {any} options.createHintValue Optional. The value for the (disabled) item hinting users on how to create a new choice. Defaults to `@@ra-create-hint`.\n * @param {String} options.filter Optional. The filter users may have already entered. Useful for autocomplete inputs for example.\n * @param {OnCreateHandler} options.onCreate Optional. A function which will be called when users choose to create a new choice, if the `create` option wasn't provided.\n * @param {Function} options.handleChange A function to pass to the input. Receives the same parameter as the original event handler and an additional newItem parameter if a new item was create.\n *\n * @returns {UseSupportCreateValue} An object with the following properties:\n * - getCreateItem: a function which will return the label of the choice for create a new choice.\n * - handleChange: a function which should be called when the input value changes. It will call the `onCreate` function if the value is the createValue.\n * - createElement: a React element to render after the input. It will be rendered when users choose to create a new choice. It renders null otherwise.\n * - getOptionDisabled: a function which should be passed to the input to disable the create choice when the filter is empty (to make it a hint).\n */\nexport var useSupportCreateSuggestion = function (options) {\n    var create = options.create, _a = options.createLabel, createLabel = _a === void 0 ? 'ra.action.create' : _a, createItemLabel = options.createItemLabel, _b = options.createValue, createValue = _b === void 0 ? '@@ra-create' : _b, _c = options.createHintValue, createHintValue = _c === void 0 ? '@@ra-create-hint' : _c, _d = options.optionText, optionText = _d === void 0 ? 'name' : _d, filter = options.filter, handleChange = options.handleChange, onCreate = options.onCreate;\n    var translate = useTranslate();\n    var _e = useState(false), renderOnCreate = _e[0], setRenderOnCreate = _e[1];\n    var filterRef = useRef(filter);\n    return {\n        createId: createValue,\n        createHintId: createHintValue,\n        getCreateItem: function (filter) {\n            filterRef.current = filter;\n            return set({\n                id: createItemLabel && !filter\n                    ? createHintValue\n                    : createValue,\n            }, typeof optionText === 'string' ? optionText : 'name', filter && createItemLabel\n                ? typeof createItemLabel === 'string'\n                    ? translate(createItemLabel, {\n                        item: filter,\n                        _: createItemLabel,\n                    })\n                    : createItemLabel(filter)\n                : typeof createLabel === 'string'\n                    ? translate(createLabel, { _: createLabel })\n                    : createLabel);\n        },\n        handleChange: function (eventOrValue) { return __awaiter(void 0, void 0, void 0, function () {\n            var value, finalValue, newSuggestion;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        value = ((_a = eventOrValue === null || eventOrValue === void 0 ? void 0 : eventOrValue.target) === null || _a === void 0 ? void 0 : _a.value) || eventOrValue;\n                        finalValue = Array.isArray(value) ? __spreadArray([], value, true).pop() : value;\n                        if (!((finalValue === null || finalValue === void 0 ? void 0 : finalValue.id) === createValue || finalValue === createValue)) return [3 /*break*/, 3];\n                        if (!!isValidElement(create)) return [3 /*break*/, 2];\n                        if (!onCreate) {\n                            // this should never happen because the createValue is only added if a create function is provided\n                            // @see AutocompleteInput:filterOptions\n                            throw new Error('To create a new option, you must pass an onCreate function or a create element.');\n                        }\n                        return [4 /*yield*/, onCreate(filter)];\n                    case 1:\n                        newSuggestion = _b.sent();\n                        if (newSuggestion) {\n                            handleChange(newSuggestion);\n                            return [2 /*return*/];\n                        }\n                        return [3 /*break*/, 3];\n                    case 2:\n                        setRenderOnCreate(true);\n                        return [2 /*return*/];\n                    case 3:\n                        handleChange(eventOrValue);\n                        return [2 /*return*/];\n                }\n            });\n        }); },\n        createElement: renderOnCreate && isValidElement(create) ? (React.createElement(CreateSuggestionContext.Provider, { value: {\n                filter: filterRef.current,\n                onCancel: function () { return setRenderOnCreate(false); },\n                onCreate: function (item) {\n                    setRenderOnCreate(false);\n                    handleChange(item);\n                },\n            } }, create)) : null,\n        getOptionDisabled: function (option) {\n            return (option === null || option === void 0 ? void 0 : option.id) === createHintValue || option === createHintValue;\n        },\n    };\n};\nvar CreateSuggestionContext = createContext(undefined);\nexport var useCreateSuggestionContext = function () {\n    var context = useContext(CreateSuggestionContext);\n    if (!context) {\n        throw new Error('useCreateSuggestionContext must be used inside a CreateSuggestionContext.Provider');\n    }\n    return context;\n};\n//# sourceMappingURL=useSupportCreateSuggestion.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport * as React from 'react';\nimport { isValidElement, useCallback, useEffect, useMemo, useRef, useState, } from 'react';\nimport debounce from 'lodash/debounce.js';\nimport get from 'lodash/get.js';\nimport isEqual from 'lodash/isEqual.js';\nimport clsx from 'clsx';\nimport { Autocomplete, Chip, TextField, createFilterOptions, useForkRef, } from '@mui/material';\nimport { styled, useThemeProps, } from '@mui/material/styles';\nimport { FieldTitle, useChoicesContext, useInput, useSuggestions, useTimeout, useTranslate, warning, useGetRecordRepresentation, useEvent, } from 'ra-core';\nimport { useSupportCreateSuggestion, } from \"./useSupportCreateSuggestion.js\";\nimport { InputHelperText } from \"./InputHelperText.js\";\nimport { sanitizeInputRestProps } from \"./sanitizeInputRestProps.js\";\nimport { Offline } from \"../Offline.js\";\nvar defaultFilterOptions = createFilterOptions();\n/**\n * An Input component for an autocomplete field, using an array of objects for the options\n *\n * Pass possible options as an array of objects in the 'choices' attribute.\n *\n * By default, the options are built from:\n *  - the 'id' property as the option value,\n *  - the 'name' property as the option text\n * @example\n * const choices = [\n *    { id: 'M', name: 'Male' },\n *    { id: 'F', name: 'Female' },\n * ];\n * <AutocompleteInput source=\"gender\" choices={choices} />\n *\n * You can also customize the properties to use for the option name and value,\n * thanks to the 'optionText' and 'optionValue' attributes.\n * @example\n * const choices = [\n *    { _id: 123, full_name: 'Leo Tolstoi', sex: 'M' },\n *    { _id: 456, full_name: 'Jane Austen', sex: 'F' },\n * ];\n * <AutocompleteInput source=\"author_id\" choices={choices} optionText=\"full_name\" optionValue=\"_id\" />\n *\n * `optionText` also accepts a function, so you can shape the option text at will:\n * @example\n * const choices = [\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\n * ];\n * const optionRenderer = choice => `${choice.first_name} ${choice.last_name}`;\n * <AutocompleteInput source=\"author_id\" choices={choices} optionText={optionRenderer} />\n *\n * `optionText` also accepts a React Element, that can access\n * the related choice through the `useRecordContext` hook. You can use Field components there.\n * Note that you must also specify the `matchSuggestion` and `inputText` props\n * @example\n * const choices = [\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\n * ];\n * const matchSuggestion = (filterValue, choice) => choice.first_name.match(filterValue) || choice.last_name.match(filterValue)\n * const inputText = (record) => `${record.fullName} (${record.language})`;\n *\n * const FullNameField = () => {\n *     const record = useRecordContext();\n *     return <span>{record.first_name} {record.last_name}</span>;\n * }\n * <AutocompleteInput source=\"author\" choices={choices} optionText={<FullNameField />} matchSuggestion={matchSuggestion} inputText={inputText} />\n *\n * The choices are translated by default, so you can use translation identifiers as choices:\n * @example\n * const choices = [\n *    { id: 'M', name: 'myroot.gender.male' },\n *    { id: 'F', name: 'myroot.gender.female' },\n * ];\n *\n * However, in some cases (e.g. inside a `<ReferenceInput>`), you may not want\n * the choice to be translated. In that case, set the `translateChoice` prop to false.\n * @example\n * <AutocompleteInput source=\"gender\" choices={choices} translateChoice={false}/>\n *\n * The object passed as `options` props is passed to the Material UI <TextField> component\n *\n * @example\n * <AutocompleteInput source=\"author_id\" options={{ color: 'secondary', InputLabelProps: { shrink: true } }} />\n */\nexport var AutocompleteInput = function (inProps) {\n    var props = useThemeProps({\n        props: inProps,\n        name: PREFIX,\n    });\n    var choicesProp = props.choices, className = props.className, _a = props.clearOnBlur, clearOnBlur = _a === void 0 ? true : _a, _b = props.clearText, clearText = _b === void 0 ? 'ra.action.clear_input_value' : _b, _c = props.closeText, closeText = _c === void 0 ? 'ra.action.close' : _c, create = props.create, createLabel = props.createLabel, _d = props.createItemLabel, createItemLabel = _d === void 0 ? 'ra.action.create_item' : _d, createValue = props.createValue, createHintValue = props.createHintValue, _e = props.debounce, debounceDelay = _e === void 0 ? 250 : _e, defaultValue = props.defaultValue, emptyText = props.emptyText, _f = props.emptyValue, emptyValue = _f === void 0 ? '' : _f, fieldOverride = props.field, format = props.format, helperText = props.helperText, idOverride = props.id, inputText = props.inputText, isFetchingProp = props.isFetching, isLoadingProp = props.isLoading, isPendingProp = props.isPending, isRequiredOverride = props.isRequired, label = props.label, limitChoicesToValue = props.limitChoicesToValue, _g = props.loadingText, loadingText = _g === void 0 ? 'ra.message.loading' : _g, matchSuggestion = props.matchSuggestion, margin = props.margin, fieldStateOverride = props.fieldState, _h = props.filterToQuery, filterToQueryProp = _h === void 0 ? DefaultFilterToQuery : _h, formStateOverride = props.formState, _j = props.multiple, multiple = _j === void 0 ? false : _j, noOptionsText = props.noOptionsText, _k = props.offline, offline = _k === void 0 ? defaultOffline : _k, onBlur = props.onBlur, onChange = props.onChange, onCreate = props.onCreate, _l = props.openText, openText = _l === void 0 ? 'ra.action.open' : _l, optionText = props.optionText, optionValue = props.optionValue, parse = props.parse, resourceProp = props.resource, shouldRenderSuggestions = props.shouldRenderSuggestions, setFilter = props.setFilter, size = props.size, sourceProp = props.source, _m = props.suggestionLimit, suggestionLimit = _m === void 0 ? Infinity : _m, TextFieldProps = props.TextFieldProps, translateChoice = props.translateChoice, validate = props.validate, variant = props.variant, onInputChange = props.onInputChange, disabled = props.disabled, readOnly = props.readOnly, getOptionDisabledProp = props.getOptionDisabled, rest = __rest(props, [\"choices\", \"className\", \"clearOnBlur\", \"clearText\", \"closeText\", \"create\", \"createLabel\", \"createItemLabel\", \"createValue\", \"createHintValue\", \"debounce\", \"defaultValue\", \"emptyText\", \"emptyValue\", \"field\", \"format\", \"helperText\", \"id\", \"inputText\", \"isFetching\", \"isLoading\", \"isPending\", \"isRequired\", \"label\", \"limitChoicesToValue\", \"loadingText\", \"matchSuggestion\", \"margin\", \"fieldState\", \"filterToQuery\", \"formState\", \"multiple\", \"noOptionsText\", \"offline\", \"onBlur\", \"onChange\", \"onCreate\", \"openText\", \"optionText\", \"optionValue\", \"parse\", \"resource\", \"shouldRenderSuggestions\", \"setFilter\", \"size\", \"source\", \"suggestionLimit\", \"TextFieldProps\", \"translateChoice\", \"validate\", \"variant\", \"onInputChange\", \"disabled\", \"readOnly\", \"getOptionDisabled\"]);\n    var filterToQuery = useEvent(filterToQueryProp);\n    var _o = useChoicesContext({\n        choices: choicesProp,\n        isFetching: isFetchingProp,\n        isLoading: isLoadingProp,\n        isPending: isPendingProp,\n        resource: resourceProp,\n        source: sourceProp,\n    }), allChoices = _o.allChoices, isPaused = _o.isPaused, isPending = _o.isPending, isPlaceholderData = _o.isPlaceholderData, fetchError = _o.error, resource = _o.resource, source = _o.source, setFilters = _o.setFilters, isFromReference = _o.isFromReference;\n    var translate = useTranslate();\n    var _p = useInput(__assign({ defaultValue: defaultValue, id: idOverride, field: fieldOverride, fieldState: fieldStateOverride, formState: formStateOverride, isRequired: isRequiredOverride, onBlur: onBlur, onChange: onChange, parse: parse, format: format, resource: resource, source: source, validate: validate, disabled: disabled, readOnly: readOnly }, rest)), id = _p.id, field = _p.field, isRequired = _p.isRequired, _q = _p.fieldState, error = _q.error, invalid = _q.invalid;\n    var finalChoices = useMemo(function () {\n        var _a;\n        // eslint-disable-next-line eqeqeq\n        return emptyText == undefined || isRequired || multiple\n            ? allChoices\n            : [\n                (_a = {},\n                    _a[optionValue || 'id'] = emptyValue,\n                    _a[typeof optionText === 'string'\n                        ? optionText\n                        : 'name'] = translate(emptyText, {\n                        _: emptyText,\n                    }),\n                    _a),\n            ].concat(allChoices || []);\n    }, [\n        allChoices,\n        emptyValue,\n        emptyText,\n        isRequired,\n        multiple,\n        optionText,\n        optionValue,\n        translate,\n    ]);\n    var selectedChoice = useSelectedChoice(field.value, {\n        choices: finalChoices,\n        // @ts-ignore\n        multiple: multiple,\n        optionValue: optionValue,\n    });\n    useEffect(function () {\n        if (emptyValue == null) {\n            throw new Error(\"emptyValue being set to null or undefined is not supported. Use parse to turn the empty string into null.\");\n        }\n    }, [emptyValue]);\n    useEffect(function () {\n        // eslint-disable-next-line eqeqeq\n        if (isValidElement(optionText) && emptyText != undefined) {\n            throw new Error(\"optionText of type React element is not supported when setting emptyText\");\n        }\n        // eslint-disable-next-line eqeqeq\n        if (isValidElement(optionText) && inputText == undefined) {\n            throw new Error(\"\\nIf you provided a React element for the optionText prop, you must also provide the inputText prop (used for the text input)\");\n        }\n        if (isValidElement(optionText) &&\n            !isFromReference &&\n            // eslint-disable-next-line eqeqeq\n            matchSuggestion == undefined) {\n            throw new Error(\"\\nIf you provided a React element for the optionText prop, you must also provide the matchSuggestion prop (used to match the user input with a choice)\");\n        }\n    }, [optionText, inputText, matchSuggestion, emptyText, isFromReference]);\n    useEffect(function () {\n        warning(\n        /* eslint-disable eqeqeq */\n        shouldRenderSuggestions != undefined && noOptionsText == undefined, \"When providing a shouldRenderSuggestions function, we recommend you also provide the noOptionsText prop and set it to a text explaining users why no options are displayed. It supports translation keys.\");\n        /* eslint-enable eqeqeq */\n    }, [shouldRenderSuggestions, noOptionsText]);\n    var getRecordRepresentation = useGetRecordRepresentation(resource);\n    var _r = useSuggestions({\n        choices: finalChoices,\n        limitChoicesToValue: limitChoicesToValue,\n        matchSuggestion: matchSuggestion,\n        optionText: optionText !== null && optionText !== void 0 ? optionText : (isFromReference ? getRecordRepresentation : undefined),\n        optionValue: optionValue,\n        createValue: createValue,\n        createHintValue: createHintValue,\n        selectedItem: selectedChoice,\n        suggestionLimit: suggestionLimit,\n        translateChoice: translateChoice !== null && translateChoice !== void 0 ? translateChoice : !isFromReference,\n    }), getChoiceText = _r.getChoiceText, getChoiceValue = _r.getChoiceValue, getSuggestions = _r.getSuggestions;\n    var _s = useState(''), filterValue = _s[0], setFilterValue = _s[1];\n    var handleChange = useEvent(function (newValue) {\n        var _a, _b;\n        if (multiple) {\n            if (Array.isArray(newValue)) {\n                field.onChange(newValue.map(getChoiceValue), newValue);\n            }\n            else {\n                field.onChange(__spreadArray(__spreadArray([], ((_a = field.value) !== null && _a !== void 0 ? _a : []), true), [getChoiceValue(newValue)], false), newValue);\n            }\n        }\n        else {\n            field.onChange((_b = getChoiceValue(newValue)) !== null && _b !== void 0 ? _b : emptyValue, newValue);\n        }\n    });\n    // eslint-disable-next-line\n    var debouncedSetFilter = useCallback(debounce(function (filter) {\n        if (setFilter) {\n            return setFilter(filter);\n        }\n        if (choicesProp) {\n            return;\n        }\n        setFilters(filterToQuery(filter));\n    }, debounceDelay), [debounceDelay, setFilters, setFilter]);\n    // We must reset the filter every time the value changes to ensure we\n    // display at least some choices even if the input has a value.\n    // Otherwise, it would only display the currently selected one and the user\n    // would have to first clear the input before seeing any other choices\n    var currentValue = useRef(field.value);\n    useEffect(function () {\n        if (!isEqual(currentValue.current, field.value)) {\n            currentValue.current = field.value;\n            debouncedSetFilter('');\n        }\n    }, [field.value]); // eslint-disable-line\n    var _t = useSupportCreateSuggestion({\n        create: create,\n        createLabel: createLabel,\n        createItemLabel: createItemLabel,\n        createValue: createValue,\n        createHintValue: createHintValue,\n        handleChange: handleChange,\n        filter: filterValue,\n        onCreate: onCreate,\n        optionText: optionText,\n    }), getCreateItem = _t.getCreateItem, handleChangeWithCreateSupport = _t.handleChange, createElement = _t.createElement, createId = _t.createId, getOptionDisabledWithCreateSupport = _t.getOptionDisabled;\n    var getOptionDisabled = useCallback(function (option) {\n        return (getOptionDisabledWithCreateSupport(option) ||\n            (getOptionDisabledProp && getOptionDisabledProp(option)));\n    }, [getOptionDisabledProp, getOptionDisabledWithCreateSupport]);\n    var getOptionLabel = useCallback(function (option, isListItem) {\n        if (isListItem === void 0) { isListItem = false; }\n        // eslint-disable-next-line eqeqeq\n        if (option == undefined) {\n            return '';\n        }\n        // Value selected with enter, right from the input\n        if (typeof option === 'string') {\n            return option;\n        }\n        if ((option === null || option === void 0 ? void 0 : option.id) === createId) {\n            return get(option, typeof optionText === 'string' ? optionText : 'name');\n        }\n        if (!isListItem && option[optionValue || 'id'] === emptyValue) {\n            return get(option, typeof optionText === 'string' ? optionText : 'name');\n        }\n        if (!isListItem && inputText !== undefined) {\n            return inputText(option);\n        }\n        return getChoiceText(option);\n    }, [\n        getChoiceText,\n        inputText,\n        createId,\n        optionText,\n        optionValue,\n        emptyValue,\n    ]);\n    var getOptionLabelString = useCallback(function (option, isListItem) {\n        if (isListItem === void 0) { isListItem = false; }\n        var optionLabel = getOptionLabel(option, isListItem);\n        // Can be a ReactNode when it's the create option.\n        return typeof optionLabel === 'string' ? optionLabel : '';\n    }, [getOptionLabel]);\n    var finalOnBlur = useCallback(function (event) {\n        if (clearOnBlur && !multiple) {\n            var optionLabel = getOptionLabel(selectedChoice);\n            if (!isEqual(optionLabel, filterValue)) {\n                setFilterValue(optionLabel);\n                debouncedSetFilter('');\n            }\n        }\n        field.onBlur(event);\n    }, [\n        clearOnBlur,\n        field,\n        getOptionLabel,\n        selectedChoice,\n        filterValue,\n        debouncedSetFilter,\n        multiple,\n    ]);\n    useEffect(function () {\n        if (!multiple) {\n            var optionLabel = getOptionLabel(selectedChoice);\n            if (typeof optionLabel === 'string') {\n                setFilterValue(optionLabel);\n            }\n            else {\n                throw new Error('When optionText returns a React element, you must also provide the inputText prop');\n            }\n        }\n    }, [getOptionLabel, multiple, selectedChoice]);\n    var handleInputChange = useEvent(function (event, newInputValue, reason) {\n        if ((event === null || event === void 0 ? void 0 : event.type) === 'change' ||\n            !doesQueryMatchSelection(newInputValue)) {\n            var createOptionLabel = typeof createItemLabel === 'string'\n                ? translate(createItemLabel, {\n                    item: filterValue,\n                    _: createItemLabel,\n                })\n                : undefined;\n            var isCreate = newInputValue === createOptionLabel;\n            var valueToSet = isCreate ? filterValue : newInputValue;\n            setFilterValue(valueToSet);\n            debouncedSetFilter(newInputValue);\n        }\n        if (reason === 'clear') {\n            setFilterValue('');\n            debouncedSetFilter('');\n        }\n        onInputChange === null || onInputChange === void 0 ? void 0 : onInputChange(event, newInputValue, reason);\n    });\n    var doesQueryMatchSelection = useCallback(function (filter) {\n        var selectedItemTexts;\n        if (multiple) {\n            selectedItemTexts = selectedChoice.map(function (item) {\n                return getOptionLabel(item);\n            });\n        }\n        else {\n            selectedItemTexts = [getOptionLabel(selectedChoice)];\n        }\n        return selectedItemTexts.includes(filter);\n    }, [getOptionLabel, multiple, selectedChoice]);\n    var doesQueryMatchSuggestion = useCallback(function (filter) {\n        var hasOption = finalChoices\n            ? finalChoices.some(function (choice) { return getOptionLabel(choice) === filter; })\n            : false;\n        return doesQueryMatchSelection(filter) || hasOption;\n    }, [finalChoices, getOptionLabel, doesQueryMatchSelection]);\n    var filterOptions = function (options, params) {\n        var filteredOptions = isFromReference || // When used inside a reference, AutocompleteInput shouldn't do the filtering as it's done by the reference input\n            matchSuggestion || // When using element as optionText (and matchSuggestion), options are filtered by getSuggestions, so they shouldn't be filtered here\n            limitChoicesToValue // When limiting choices to values (why? it's legacy!), options are also filtered by getSuggestions, so they shouldn't be filtered here\n            ? options\n            : defaultFilterOptions(options, params); // Otherwise, we let Material UI's Autocomplete do the filtering\n        // add create option if necessary\n        var inputValue = params.inputValue;\n        if (onCreate || create) {\n            if (inputValue === '' && filterValue === '' && createLabel) {\n                // create option with createLabel\n                filteredOptions = filteredOptions.concat(getCreateItem(''));\n            }\n            else if (inputValue &&\n                filterValue &&\n                !doesQueryMatchSuggestion(filterValue)) {\n                filteredOptions = filteredOptions.concat(\n                // create option with createItemLabel\n                getCreateItem(inputValue));\n            }\n        }\n        return filteredOptions;\n    };\n    var handleAutocompleteChange = useCallback(function (event, newValue, reason) {\n        // This prevents auto-submitting a form inside a dialog passed to the `create` prop\n        event.preventDefault();\n        if (reason === 'createOption') {\n            // When users press the enter key after typing a new value, we can handle it as if they clicked on the create option\n            handleChangeWithCreateSupport(getCreateItem(Array.isArray(newValue)\n                ? newValue[newValue.length - 1]\n                : newValue));\n            return;\n        }\n        handleChangeWithCreateSupport(newValue != null ? newValue : emptyValue);\n    }, [emptyValue, getCreateItem, handleChangeWithCreateSupport]);\n    var oneSecondHasPassed = useTimeout(1000, filterValue);\n    var suggestions = useMemo(function () {\n        if (!isFromReference && (matchSuggestion || limitChoicesToValue)) {\n            return getSuggestions(filterValue);\n        }\n        return (finalChoices === null || finalChoices === void 0 ? void 0 : finalChoices.slice(0, suggestionLimit)) || [];\n    }, [\n        finalChoices,\n        filterValue,\n        getSuggestions,\n        limitChoicesToValue,\n        matchSuggestion,\n        suggestionLimit,\n        isFromReference,\n    ]);\n    var isOptionEqualToValue = function (option, value) {\n        return String(getChoiceValue(option)) === String(getChoiceValue(value));\n    };\n    var renderHelperText = !!fetchError || helperText !== false || invalid;\n    var handleInputRef = useForkRef(field.ref, TextFieldProps === null || TextFieldProps === void 0 ? void 0 : TextFieldProps.inputRef);\n    // isPending is true: there's no cached data and no query attempt was finished yet\n    // isPaused is true: the query was paused (e.g. due to a network issue)\n    // Both true: we're offline, have no data to show\n    // If the component that provides the ChoicesContext does not handle this case, we should should render the offline element\n    if (isPending && isPaused && offline !== false && offline !== undefined) {\n        return offline;\n    }\n    var finalLoadingText = typeof loadingText === 'string'\n        ? translate(loadingText, {\n            _: loadingText,\n        })\n        : loadingText;\n    return (React.createElement(React.Fragment, null,\n        React.createElement(StyledAutocomplete, __assign({ className: clsx('ra-input', \"ra-input-\".concat(source), className), clearText: translate(clearText, { _: clearText }), closeText: translate(closeText, { _: closeText }), loadingText: isPaused && isPlaceholderData\n                ? offline !== false && offline !== undefined\n                    ? offline\n                    : finalLoadingText\n                : finalLoadingText, openOnFocus: true, openText: translate(openText, { _: openText }), id: id, isOptionEqualToValue: isOptionEqualToValue, filterSelectedOptions: true, disabled: disabled || readOnly, renderInput: function (params) {\n                var _a;\n                var _b;\n                var mergedTextFieldProps = __assign(__assign({ readOnly: readOnly }, params.InputProps), TextFieldProps === null || TextFieldProps === void 0 ? void 0 : TextFieldProps.InputProps);\n                // @ts-expect-error slotProps do not yet exist in MUI v5\n                var mergedSlotProps = (TextFieldProps === null || TextFieldProps === void 0 ? void 0 : TextFieldProps.slotProps)\n                    ? {\n                        slotProps: __assign(__assign({}, TextFieldProps === null || TextFieldProps === void 0 ? void 0 : TextFieldProps.slotProps), { input: __assign(__assign({ readOnly: readOnly }, params.InputProps), (_b = TextFieldProps === null || TextFieldProps === void 0 ? void 0 : TextFieldProps.slotProps) === null || _b === void 0 ? void 0 : _b.input) }),\n                    }\n                    : undefined;\n                return (React.createElement(TextField, __assign({ name: field.name, label: label !== '' && label !== false ? (React.createElement(FieldTitle, { label: label, source: source, resource: resourceProp, isRequired: isRequired })) : null, error: !!fetchError || invalid, helperText: renderHelperText ? (React.createElement(InputHelperText, { error: (error === null || error === void 0 ? void 0 : error.message) ||\n                            (fetchError === null || fetchError === void 0 ? void 0 : fetchError.message), helperText: helperText })) : null, margin: margin, variant: variant, className: clsx((_a = {},\n                        _a[AutocompleteInputClasses.textField] = true,\n                        _a[AutocompleteInputClasses.emptyLabel] = label === false || label === '',\n                        _a)) }, params, TextFieldProps, { InputProps: mergedTextFieldProps }, mergedSlotProps, { size: size, inputRef: handleInputRef })));\n            }, multiple: multiple, renderTags: function (value, getTagProps) {\n                return value.map(function (option, index) {\n                    var _a;\n                    // We have to extract the key because react 19 does not allow to spread the key prop\n                    var _b = getTagProps({ index: index }), key = _b.key, tagProps = __rest(_b, [\"key\"]);\n                    // @ts-expect-error slotProps do not yet exist in MUI v5\n                    var mergedSlotProps = ((_a = props.slotProps) === null || _a === void 0 ? void 0 : _a.chip)\n                        ? // @ts-expect-error slotProps do not yet exist in MUI v5\n                            props.slotProps.chip\n                        : props.ChipProps;\n                    return (React.createElement(Chip, __assign({ label: isValidElement(optionText)\n                            ? inputText\n                                ? inputText(option)\n                                : ''\n                            : getChoiceText(option), size: \"small\", key: key }, tagProps, mergedSlotProps)));\n                });\n            }, noOptionsText: typeof noOptionsText === 'string'\n                ? translate(noOptionsText, { _: noOptionsText })\n                : noOptionsText, selectOnFocus: true, clearOnBlur: clearOnBlur }, sanitizeInputRestProps(rest), { freeSolo: !!create || !!onCreate, handleHomeEndKeys: !!create || !!onCreate, filterOptions: filterOptions, options: isPaused && isPlaceholderData\n                ? []\n                : shouldRenderSuggestions == undefined || // eslint-disable-line eqeqeq\n                    shouldRenderSuggestions(filterValue)\n                    ? suggestions\n                    : [], getOptionKey: function (option) { return option === null || option === void 0 ? void 0 : option.id; }, getOptionLabel: getOptionLabelString, inputValue: filterValue, loading: (isPending &&\n                (!finalChoices || finalChoices.length === 0) &&\n                oneSecondHasPassed) ||\n                (isPaused && isPlaceholderData), value: selectedChoice, onChange: handleAutocompleteChange, onBlur: finalOnBlur, onInputChange: handleInputChange, renderOption: function (props, record) {\n                // We have to extract the key because react 19 does not allow to spread the key prop\n                var ignoredKey = props.key, rest = __rest(props, [\"key\"]);\n                // We don't use MUI key which is generated from the option label because we may have options with the same label but with different values\n                var key = getChoiceValue(record);\n                var optionLabel = getOptionLabel(record, true);\n                return (React.createElement(\"li\", __assign({ key: key }, rest), optionLabel === '' ? '' : optionLabel));\n            }, getOptionDisabled: getOptionDisabled })),\n        createElement));\n};\nvar PREFIX = 'RaAutocompleteInput';\nexport var AutocompleteInputClasses = {\n    textField: \"\".concat(PREFIX, \"-textField\"),\n    emptyLabel: \"\".concat(PREFIX, \"-emptyLabel\"),\n};\nvar StyledAutocomplete = styled(Autocomplete, {\n    name: PREFIX,\n    overridesResolver: function (props, styles) { return styles.root; },\n})(function (_a) {\n    var _b;\n    var theme = _a.theme;\n    return (_b = {},\n        _b[\"& .\".concat(AutocompleteInputClasses.textField)] = {\n            minWidth: theme.spacing(20),\n        },\n        _b[\"& .\".concat(AutocompleteInputClasses.emptyLabel, \" .MuiOutlinedInput-root legend\")] = {\n            width: 0,\n        },\n        _b);\n});\n/**\n * Returns the selected choice (or choices if multiple) by matching the input value with the choices.\n */\nvar useSelectedChoice = function (value, _a) {\n    var choices = _a.choices, multiple = _a.multiple, optionValue = _a.optionValue;\n    var selectedChoiceRef = useRef(getSelectedItems(choices, value, optionValue, multiple));\n    var _b = useState(function () { return getSelectedItems(choices, value, optionValue, multiple); }), selectedChoice = _b[0], setSelectedChoice = _b[1];\n    // As the selected choices are objects, we want to ensure we pass the same\n    // reference to the Autocomplete as it would reset its filter value otherwise.\n    useEffect(function () {\n        var newSelectedItems = getSelectedItems(choices, value, optionValue, multiple);\n        if (!areSelectedItemsEqual(selectedChoiceRef.current, newSelectedItems, optionValue, multiple)) {\n            selectedChoiceRef.current = newSelectedItems;\n            setSelectedChoice(newSelectedItems);\n        }\n    }, [choices, value, multiple, optionValue]);\n    return selectedChoice || null;\n};\nvar getSelectedItems = function (choices, value, optionValue, multiple) {\n    if (choices === void 0) { choices = []; }\n    if (optionValue === void 0) { optionValue = 'id'; }\n    if (multiple) {\n        return (Array.isArray(value !== null && value !== void 0 ? value : []) ? value : [value])\n            .map(function (item) {\n            return choices.find(function (choice) { return String(item) === String(get(choice, optionValue)); });\n        })\n            .filter(function (item) { return !!item; });\n    }\n    return (choices.find(function (choice) { return String(get(choice, optionValue)) === String(value); }) || '');\n};\nvar areSelectedItemsEqual = function (selectedChoice, newSelectedChoice, optionValue, multiple) {\n    var _a, _b;\n    if (optionValue === void 0) { optionValue = 'id'; }\n    if (multiple) {\n        var selectedChoiceArray = (_a = selectedChoice) !== null && _a !== void 0 ? _a : [];\n        var newSelectedChoiceArray_1 = (_b = newSelectedChoice) !== null && _b !== void 0 ? _b : [];\n        if (selectedChoiceArray.length !== newSelectedChoiceArray_1.length) {\n            return false;\n        }\n        var equalityArray = selectedChoiceArray.map(function (choice) {\n            return newSelectedChoiceArray_1.some(function (newChoice) {\n                return get(newChoice, optionValue) === get(choice, optionValue);\n            });\n        });\n        return !equalityArray.some(function (item) { return item === false; });\n    }\n    return (get(selectedChoice, optionValue) === get(newSelectedChoice, optionValue));\n};\nvar DefaultFilterToQuery = function (searchText) { return ({ q: searchText }); };\nvar defaultOffline = React.createElement(Offline, { variant: \"inline\" });\n//# sourceMappingURL=AutocompleteInput.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { AutocompleteInput } from \"./AutocompleteInput.js\";\n/**\n * An Input component for an autocomplete field, using an array of objects for the options\n *\n * Pass possible options as an array of objects in the 'choices' attribute.\n *\n * By default, the options are built from:\n *  - the 'id' property as the option value,\n *  - the 'name' property as the option text\n * @example\n * const choices = [\n *    { id: 'M', name: 'Male' },\n *    { id: 'F', name: 'Female' },\n * ];\n * <AutocompleteArrayInput source=\"gender\" choices={choices} />\n *\n * You can also customize the properties to use for the option name and value,\n * thanks to the 'optionText' and 'optionValue' attributes.\n * @example\n * const choices = [\n *    { _id: 123, full_name: 'Leo Tolstoi', sex: 'M' },\n *    { _id: 456, full_name: 'Jane Austen', sex: 'F' },\n * ];\n * <AutocompleteArrayInput source=\"author_id\" choices={choices} optionText=\"full_name\" optionValue=\"_id\" />\n *\n * `optionText` also accepts a function, so you can shape the option text at will:\n * @example\n * const choices = [\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\n * ];\n * const optionRenderer = choice => `${choice.first_name} ${choice.last_name}`;\n * <AutocompleteArrayInput source=\"author_id\" choices={choices} optionText={optionRenderer} />\n *\n * `optionText` also accepts a React Element, that can access\n * the related choice through the `useRecordContext` hook. You can use Field components there.\n * Note that you must also specify the `matchSuggestion` and `inputText` props\n * @example\n * const choices = [\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\n * ];\n * const matchSuggestion = (filterValue, choice) => choice.first_name.match(filterValue) || choice.last_name.match(filterValue)\n * const inputText = (record) => `${record.fullName} (${record.language})`;\n *\n * const FullNameField = () => {\n *     const record = useRecordContext();\n *     return <span>{record.first_name} {record.last_name}</span>;\n * }\n *\n * <AutocompleteArrayInput source=\"gender\" choices={choices} optionText={<FullNameField />} matchSuggestion={matchSuggestion} />\n *\n * The choices are translated by default, so you can use translation identifiers as choices:\n * @example\n * const choices = [\n *    { id: 'M', name: 'myroot.gender.male' },\n *    { id: 'F', name: 'myroot.gender.female' },\n * ];\n *\n * However, in some cases (e.g. inside a `<ReferenceInput>`), you may not want\n * the choice to be translated. In that case, set the `translateChoice` prop to false.\n * @example\n * <AutocompleteArrayInput source=\"gender\" choices={choices} translateChoice={false}/>\n */\nexport var AutocompleteArrayInput = function (_a) {\n    var defaultValue = _a.defaultValue, props = __rest(_a, [\"defaultValue\"]);\n    return (React.createElement(AutocompleteInput, __assign({}, props, { multiple: true, defaultValue: defaultValue !== null && defaultValue !== void 0 ? defaultValue : (props.disabled ? undefined : []) })));\n};\n//# sourceMappingURL=AutocompleteArrayInput.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { ReferenceArrayInputBase } from 'ra-core';\nimport { AutocompleteArrayInput } from \"./AutocompleteArrayInput.js\";\nimport { Offline } from \"../Offline.js\";\n/**\n * An Input component for fields containing a list of references to another resource.\n * Useful for 'hasMany' relationship.\n *\n * @example\n * The post object has many tags, so the post resource looks like:\n * {\n *    id: 1234,\n *    tag_ids: [ \"1\", \"23\", \"4\" ]\n * }\n *\n * ReferenceArrayInput component fetches the current resources (using\n * `dataProvider.getMany()`) as well as possible resources (using\n * `dataProvider.getList()`) in the reference endpoint. It then\n * delegates rendering to its child component, to which it makes the possible\n * choices available through the ChoicesContext.\n *\n * Use it with a selector component as child, like `<SelectArrayInput>`\n * or <CheckboxGroupInput>.\n *\n * @example\n * export const PostEdit = () => (\n *     <Edit>\n *         <SimpleForm>\n *             <ReferenceArrayInput source=\"tag_ids\" reference=\"tags\">\n *                 <SelectArrayInput optionText=\"name\" />\n *             </ReferenceArrayInput>\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * By default, restricts the possible values to 25. You can extend this limit\n * by setting the `perPage` prop.\n *\n * @example\n * <ReferenceArrayInput\n *      source=\"tag_ids\"\n *      reference=\"tags\"\n *      perPage={100}>\n *     <SelectArrayInput optionText=\"name\" />\n * </ReferenceArrayInput>\n *\n * By default, orders the possible values by id desc. You can change this order\n * by setting the `sort` prop (an object with `field` and `order` properties).\n *\n * @example\n * <ReferenceArrayInput\n *      source=\"tag_ids\"\n *      reference=\"tags\"\n *      sort={{ field: 'name', order: 'ASC' }}>\n *     <SelectArrayInput optionText=\"name\" />\n * </ReferenceArrayInput>\n *\n * Also, you can filter the query used to populate the possible values. Use the\n * `filter` prop for that.\n *\n * @example\n * <ReferenceArrayInput\n *      source=\"tag_ids\"\n *      reference=\"tags\"\n *      filter={{ is_public: true }}>\n *     <SelectArrayInput optionText=\"name\" />\n * </ReferenceArrayInput>\n *\n * The enclosed component may filter results. ReferenceArrayInput create a ChoicesContext which provides\n * a `setFilters` function. You can call this function to filter the results.\n */\nexport var ReferenceArrayInput = function (props) {\n    var _a = props.children, children = _a === void 0 ? defaultChildren : _a, _b = props.offline, offline = _b === void 0 ? defaultOffline : _b, rest = __rest(props, [\"children\", \"offline\"]);\n    if (React.Children.count(children) !== 1) {\n        throw new Error('<ReferenceArrayInput> only accepts a single child (like <AutocompleteArrayInput>)');\n    }\n    return (React.createElement(ReferenceArrayInputBase, __assign({}, rest, { offline: offline }), children));\n};\nvar defaultChildren = React.createElement(AutocompleteArrayInput, null);\nvar defaultOffline = React.createElement(Offline, { variant: \"inline\" });\n//# sourceMappingURL=ReferenceArrayInput.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { ReferenceInputBase } from 'ra-core';\nimport { Offline } from \"../Offline.js\";\nimport { AutocompleteInput } from \"./AutocompleteInput.js\";\n/**\n * An Input component for choosing a reference record. Useful for foreign keys.\n *\n * This component fetches the possible values in the reference resource\n * (using `dataProvider.getList()`), then renders an `<AutocompleteInput>`,\n * to which it passes the possible choices via a `ChoicesContext`.\n *\n * You can pass a child select component to customize the way the reference\n * selector is displayed (e.g. using `<SelectInput>` or `<RadioButtonGroupInput>`\n * instead of `<AutocompleteInput>`).\n *\n * @example // default selector: AutocompleteInput\n * export const CommentEdit = () => (\n *     <Edit>\n *         <SimpleForm>\n *             <ReferenceInput label=\"Post\" source=\"post_id\" reference=\"posts\" />\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * @example // using a SelectInput as selector\n * export const CommentEdit = () => (\n *     <Edit>\n *         <SimpleForm>\n *             <ReferenceInput label=\"Post\" source=\"post_id\" reference=\"posts\">\n *                 <SelectInput optionText=\"title\" />\n *             </ReferenceInput>\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * By default, restricts the possible values to 25. You can extend this limit\n * by setting the `perPage` prop.\n *\n * @example\n * <ReferenceInput source=\"post_id\" reference=\"posts\" perPage={100}/>\n *\n * By default, orders the possible values by id desc. You can change this order\n * by setting the `sort` prop (an object with `field` and `order` properties).\n *\n * @example\n * <ReferenceInput\n *      source=\"post_id\"\n *      reference=\"posts\"\n *      sort={{ field: 'title', order: 'ASC' }}\n * />\n *\n * Also, you can filter the query used to populate the possible values. Use the\n * `filter` prop for that.\n *\n * @example\n * <ReferenceInput\n *      source=\"post_id\"\n *      reference=\"posts\"\n *      filter={{ is_published: true }}\n * />\n *\n * The enclosed component may filter results. ReferenceInput create a ChoicesContext which provides\n * a `setFilters` function. You can call this function to filter the results.\n */\nexport var ReferenceInput = function (props) {\n    var _a = props.children, children = _a === void 0 ? defaultChildren : _a, _b = props.offline, offline = _b === void 0 ? defaultOffline : _b, rest = __rest(props, [\"children\", \"offline\"]);\n    if (props.validate && process.env.NODE_ENV !== 'production') {\n        throw new Error('<ReferenceInput> does not accept a validate prop. Set the validate prop on the child instead.');\n    }\n    return (React.createElement(ReferenceInputBase, __assign({}, rest, { offline: offline }), children));\n};\nvar defaultChildren = React.createElement(AutocompleteInput, null);\nvar defaultOffline = React.createElement(Offline, { variant: \"inline\" });\n//# sourceMappingURL=ReferenceInput.js.map","import * as React from \"react\";\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\";\nimport { ChevronDownIcon } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Accordion({ ...props }: React.ComponentProps<typeof AccordionPrimitive.Root>) {\n  return <AccordionPrimitive.Root data-slot=\"accordion\" {...props} />;\n}\n\nfunction AccordionItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Item>) {\n  return (\n    <AccordionPrimitive.Item\n      data-slot=\"accordion-item\"\n      className={cn(\"border-b last:border-b-0\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction AccordionTrigger({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Trigger>) {\n  return (\n    <AccordionPrimitive.Header className=\"flex\">\n      <AccordionPrimitive.Trigger\n        data-slot=\"accordion-trigger\"\n        className={cn(\n          \"focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        <ChevronDownIcon className=\"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200\" />\n      </AccordionPrimitive.Trigger>\n    </AccordionPrimitive.Header>\n  );\n}\n\nfunction AccordionContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof AccordionPrimitive.Content>) {\n  return (\n    <AccordionPrimitive.Content\n      data-slot=\"accordion-content\"\n      className=\"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm\"\n      {...props}\n    >\n      <div className={cn(\"pt-0 pb-4\", className)}>{children}</div>\n    </AccordionPrimitive.Content>\n  );\n}\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent };\n","/**\n * Priority choice definitions for opportunities\n * Centralized to maintain single source of truth\n */\n\nexport const priorityChoices = [\n  { id: \"low\", name: \"Low\" },\n  { id: \"medium\", name: \"Medium\" },\n  { id: \"high\", name: \"High\" },\n  { id: \"critical\", name: \"Critical\" },\n];\n\nexport type PriorityLevel = \"low\" | \"medium\" | \"high\" | \"critical\";\n","/**\n * CSV Exporter for Opportunity records\n *\n * Exports opportunities with related organization names and owner information.\n * Follows the same patterns as contactExporter.ts\n */\nimport jsonExport from \"jsonexport/dist\";\nimport type { Exporter } from \"ra-core\";\nimport { downloadCSV } from \"ra-core\";\nimport type { Opportunity, Organization, Sale } from \"../types\";\nimport { formatSalesName } from \"../utils/formatters\";\nimport { getOpportunityStageLabel } from \"./constants/stageConstants\";\n\n/**\n * Sanitize value for CSV export to prevent formula injection\n * @see docs/decisions/file-handling-best-practices.md\n */\nconst sanitizeForCSV = (value: unknown): string => {\n  if (value === null || value === undefined) return \"\";\n  const str = String(value);\n  const formulaTriggers = [\"=\", \"-\", \"+\", \"@\", \"\\t\", \"\\r\"];\n  if (formulaTriggers.some((char) => str.startsWith(char))) {\n    return `\\t${str}`;\n  }\n  return str;\n};\n\nexport interface OpportunityExportRow {\n  id: number | string;\n  name: string;\n  stage: string;\n  status: string;\n  priority: string;\n  customer_name: string | undefined;\n  principal_name: string | undefined;\n  distributor_name: string | undefined;\n  opportunity_owner: string;\n  account_manager: string;\n  lead_source: string | undefined;\n  estimated_close_date: string;\n  actual_close_date: string | undefined;\n  campaign: string | undefined;\n  competition: string | undefined;\n  decision_criteria: string | undefined;\n  next_action: string | undefined;\n  next_action_date: string | undefined;\n  tags: string;\n  description: string;\n  notes: string | undefined;\n  nb_interactions: number | undefined;\n  last_interaction_date: string | undefined;\n  days_in_stage: number | undefined;\n  created_at: string;\n  stage_changed_at: string | undefined;\n}\n\nexport const opportunityExporter: Exporter<Opportunity> = async (records, fetchRelatedRecords) => {\n  // Fetch related records for display names\n  const sales = await fetchRelatedRecords<Sale>(records, \"opportunity_owner_id\", \"sales\");\n  const accountManagers = await fetchRelatedRecords<Sale>(records, \"account_manager_id\", \"sales\");\n  const customers = await fetchRelatedRecords<Organization>(\n    records,\n    \"customer_organization_id\",\n    \"organizations\"\n  );\n  const principals = await fetchRelatedRecords<Organization>(\n    records,\n    \"principal_organization_id\",\n    \"organizations\"\n  );\n  const distributors = await fetchRelatedRecords<Organization>(\n    records,\n    \"distributor_organization_id\",\n    \"organizations\"\n  );\n\n  const opportunities: OpportunityExportRow[] = records.map((opp) => ({\n    id: opp.id,\n    name: opp.name,\n    stage: getOpportunityStageLabel(opp.stage),\n    status: opp.status,\n    priority: opp.priority,\n    customer_name: opp.customer_organization_id\n      ? customers[opp.customer_organization_id]?.name\n      : undefined,\n    principal_name: opp.principal_organization_id\n      ? principals[opp.principal_organization_id]?.name\n      : undefined,\n    distributor_name: opp.distributor_organization_id\n      ? distributors[opp.distributor_organization_id]?.name\n      : undefined,\n    opportunity_owner: formatSalesName(\n      opp.opportunity_owner_id ? sales[opp.opportunity_owner_id] : null\n    ),\n    account_manager: formatSalesName(\n      opp.account_manager_id ? accountManagers[opp.account_manager_id] : null\n    ),\n    lead_source: opp.lead_source,\n    estimated_close_date: opp.estimated_close_date,\n    actual_close_date: opp.actual_close_date,\n    campaign: opp.campaign,\n    competition: opp.competition,\n    decision_criteria: opp.decision_criteria,\n    next_action: opp.next_action,\n    next_action_date: opp.next_action_date,\n    tags: opp.tags?.join(\", \") ?? \"\",\n    description: opp.description,\n    notes: opp.notes,\n    nb_interactions: opp.nb_interactions,\n    last_interaction_date: opp.last_interaction_date,\n    days_in_stage: opp.days_in_stage,\n    created_at: opp.created_at,\n    stage_changed_at: opp.stage_changed_at,\n  }));\n\n  const safeOpportunities = opportunities.map((row) =>\n    Object.fromEntries(Object.entries(row).map(([key, value]) => [key, sanitizeForCSV(value)]))\n  );\n\n  return jsonExport(\n    safeOpportunities,\n    {\n      rowDelimiter: \",\",\n      endOfLine: \"\\r\\n\",\n    },\n    (err: Error | null, csv: string) => {\n      if (err) {\n        throw new Error(`CSV export failed: ${err.message}`);\n      }\n      downloadCSV(csv, \"opportunities\");\n    }\n  );\n};\n","import { useMutation } from \"@tanstack/react-query\";\nimport { useDataProvider, useNotify } from \"ra-core\";\nimport type { QuickAddInput } from \"@/atomic-crm/validation/quickAdd\";\n\n/**\n * Quick Add Hook for Booth Visitor Creation\n *\n * Provides a mutation for creating booth visitors (organization + contact + opportunity)\n * with localStorage persistence for campaign and principal selections.\n *\n * Features:\n * - Creates booth visitor via data provider RPC call\n * - Persists last campaign and principal to localStorage for next use\n * - Shows success toast with created contact/org details\n * - Shows error toast on failure, preserves form data\n * - No retry logic per Engineering Constitution (fail fast)\n *\n * @returns Mutation object with mutate, mutateAsync, isPending, isError, etc.\n */\nexport const useQuickAdd = () => {\n  const dataProvider = useDataProvider();\n  const notify = useNotify();\n\n  const mutation = useMutation({\n    mutationFn: async (formData: QuickAddInput) => {\n      return await dataProvider.createBoothVisitor(formData);\n    },\n    onSuccess: (result, formData) => {\n      // Update localStorage with last used campaign and principal\n      localStorage.setItem(\"last_campaign\", formData.campaign);\n      localStorage.setItem(\"last_principal\", formData.principal_id.toString());\n\n      // Show success toast with 2-second auto-hide\n      const message = ` Created: ${formData.first_name} ${formData.last_name} - ${formData.org_name}`;\n      notify(message, {\n        type: \"success\",\n        autoHideDuration: 2000,\n      });\n    },\n    onError: (error: Error) => {\n      // Show error toast - form data is preserved automatically by React Hook Form\n      notify(`Failed to create booth visitor: ${error.message}`, {\n        type: \"error\",\n      });\n    },\n  });\n\n  return mutation;\n};\n","import { useGetList } from \"ra-core\";\nimport type { Product } from \"@/atomic-crm/types\";\n\n/**\n * Filtered Products Hook\n *\n * Fetches products filtered by principal organization to ensure\n * users only see products from the selected manufacturer/brand.\n *\n * Features:\n * - Server-side filtering by principal_id (indexed query)\n * - Disabled state when no principal selected\n * - Sorted alphabetically by product name\n * - Excludes soft-deleted products (handled by data provider)\n *\n * Engineering Constitution:\n * - Fail fast: No retry logic\n * - Single source of truth: Server-side filtering only\n *\n * @param principalId The principal organization ID to filter by (null/undefined = no filter)\n * @returns Object with products, loading state, error, and readiness flag\n */\nexport const useFilteredProducts = (principalId: number | null | undefined) => {\n  const {\n    data: products,\n    isLoading,\n    error,\n  } = useGetList<Product>(\n    \"products\",\n    {\n      filter: principalId ? { principal_id: principalId } : {},\n      pagination: { page: 1, perPage: 200 }, // Reasonable limit for dropdown\n      sort: { field: \"name\", order: \"ASC\" },\n    },\n    {\n      // Only fetch if principal is selected\n      enabled: !!principalId,\n    }\n  );\n\n  return {\n    products: products || [],\n    isLoading,\n    error,\n    isReady: !!principalId, // Dropdown should be disabled until principal selected\n    isEmpty: !isLoading && (!products || products.length === 0),\n  };\n};\n","\"use client\";\n\nimport * as React from \"react\";\nimport { Check, ChevronsUpDown } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"@/components/ui/command\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\n\nexport interface ComboboxOption {\n  value: string;\n  label: string;\n}\n\ninterface ComboboxProps {\n  options: ComboboxOption[];\n  value?: string;\n  onValueChange?: (value: string) => void;\n  placeholder?: string;\n  searchPlaceholder?: string;\n  emptyText?: string;\n  className?: string;\n  disabled?: boolean;\n  id?: string;\n}\n\nexport function Combobox({\n  options,\n  value,\n  onValueChange,\n  placeholder = \"Select option...\",\n  searchPlaceholder = \"Search...\",\n  emptyText = \"No option found.\",\n  className,\n  disabled = false,\n  id,\n}: ComboboxProps) {\n  const [open, setOpen] = React.useState(false);\n  const [searchValue, setSearchValue] = React.useState(\"\");\n\n  const selectedOption = options.find((option) => option.value === value);\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          id={id}\n          variant=\"outline\"\n          role=\"combobox\"\n          aria-expanded={open}\n          className={cn(\"w-[200px] justify-between\", className)}\n          disabled={disabled}\n        >\n          {selectedOption ? selectedOption.label : placeholder}\n          <ChevronsUpDown className=\"ml-2 size-4 shrink-0 opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-[200px] p-0\">\n        <Command>\n          <CommandInput\n            placeholder={searchPlaceholder}\n            value={searchValue}\n            onValueChange={setSearchValue}\n          />\n          <CommandList>\n            <CommandEmpty>{emptyText}</CommandEmpty>\n            <CommandGroup>\n              {options.map((option) => (\n                <CommandItem\n                  key={option.value}\n                  value={option.value}\n                  onSelect={(currentValue) => {\n                    onValueChange?.(currentValue === value ? \"\" : currentValue);\n                    setOpen(false);\n                    setSearchValue(\"\");\n                  }}\n                >\n                  <Check\n                    className={cn(\n                      \"mr-2 size-4\",\n                      value === option.value ? \"opacity-100\" : \"opacity-0\"\n                    )}\n                  />\n                  {option.label}\n                </CommandItem>\n              ))}\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\ninterface MultiSelectComboboxProps {\n  options: ComboboxOption[];\n  value?: string[];\n  onValueChange?: (value: string[]) => void;\n  placeholder?: string;\n  searchPlaceholder?: string;\n  emptyText?: string;\n  className?: string;\n  disabled?: boolean;\n}\n\nexport function MultiSelectCombobox({\n  options,\n  value = [],\n  onValueChange,\n  placeholder = \"Select options...\",\n  searchPlaceholder = \"Search...\",\n  emptyText = \"No option found.\",\n  className,\n  disabled = false,\n}: MultiSelectComboboxProps) {\n  const [open, setOpen] = React.useState(false);\n  const [searchValue, setSearchValue] = React.useState(\"\");\n\n  const selectedLabels = options\n    .filter((option) => value.includes(option.value))\n    .map((option) => option.label);\n\n  const displayText =\n    selectedLabels.length === 0\n      ? placeholder\n      : selectedLabels.length === 1\n        ? selectedLabels[0]\n        : `${selectedLabels.length} selected`;\n\n  const handleSelect = (optionValue: string) => {\n    const newValue = value.includes(optionValue)\n      ? value.filter((v) => v !== optionValue)\n      : [...value, optionValue];\n    onValueChange?.(newValue);\n  };\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          role=\"combobox\"\n          aria-expanded={open}\n          className={cn(\"w-[200px] justify-between\", className)}\n          disabled={disabled}\n        >\n          {displayText}\n          <ChevronsUpDown className=\"ml-2 size-4 shrink-0 opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-[200px] p-0\">\n        <Command>\n          <CommandInput\n            placeholder={searchPlaceholder}\n            value={searchValue}\n            onValueChange={setSearchValue}\n          />\n          <CommandList>\n            <CommandEmpty>{emptyText}</CommandEmpty>\n            <CommandGroup>\n              {options.map((option) => (\n                <CommandItem\n                  key={option.value}\n                  value={option.value}\n                  onSelect={() => handleSelect(option.value)}\n                >\n                  <Check\n                    className={cn(\n                      \"mr-2 size-4\",\n                      value.includes(option.value) ? \"opacity-100\" : \"opacity-0\"\n                    )}\n                  />\n                  {option.label}\n                </CommandItem>\n              ))}\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n}\n","/**\n * US Cities Data for Quick Add Form\n * Top 100+ US cities for autocomplete functionality\n * Sorted alphabetically by city name\n */\nexport const US_CITIES = [\n  { city: \"Albuquerque\", state: \"NM\" },\n  { city: \"Anaheim\", state: \"CA\" },\n  { city: \"Anchorage\", state: \"AK\" },\n  { city: \"Arlington\", state: \"TX\" },\n  { city: \"Atlanta\", state: \"GA\" },\n  { city: \"Aurora\", state: \"CO\" },\n  { city: \"Austin\", state: \"TX\" },\n  { city: \"Bakersfield\", state: \"CA\" },\n  { city: \"Baltimore\", state: \"MD\" },\n  { city: \"Baton Rouge\", state: \"LA\" },\n  { city: \"Birmingham\", state: \"AL\" },\n  { city: \"Boise\", state: \"ID\" },\n  { city: \"Boston\", state: \"MA\" },\n  { city: \"Buffalo\", state: \"NY\" },\n  { city: \"Chandler\", state: \"AZ\" },\n  { city: \"Charlotte\", state: \"NC\" },\n  { city: \"Chesapeake\", state: \"VA\" },\n  { city: \"Chicago\", state: \"IL\" },\n  { city: \"Chula Vista\", state: \"CA\" },\n  { city: \"Cincinnati\", state: \"OH\" },\n  { city: \"Cleveland\", state: \"OH\" },\n  { city: \"Colorado Springs\", state: \"CO\" },\n  { city: \"Columbus\", state: \"OH\" },\n  { city: \"Corpus Christi\", state: \"TX\" },\n  { city: \"Dallas\", state: \"TX\" },\n  { city: \"Denver\", state: \"CO\" },\n  { city: \"Des Moines\", state: \"IA\" },\n  { city: \"Detroit\", state: \"MI\" },\n  { city: \"Durham\", state: \"NC\" },\n  { city: \"El Paso\", state: \"TX\" },\n  { city: \"Fort Wayne\", state: \"IN\" },\n  { city: \"Fort Worth\", state: \"TX\" },\n  { city: \"Fremont\", state: \"CA\" },\n  { city: \"Fresno\", state: \"CA\" },\n  { city: \"Garland\", state: \"TX\" },\n  { city: \"Gilbert\", state: \"AZ\" },\n  { city: \"Glendale\", state: \"AZ\" },\n  { city: \"Greensboro\", state: \"NC\" },\n  { city: \"Henderson\", state: \"NV\" },\n  { city: \"Hialeah\", state: \"FL\" },\n  { city: \"Honolulu\", state: \"HI\" },\n  { city: \"Houston\", state: \"TX\" },\n  { city: \"Huntington Beach\", state: \"CA\" },\n  { city: \"Indianapolis\", state: \"IN\" },\n  { city: \"Irvine\", state: \"CA\" },\n  { city: \"Irving\", state: \"TX\" },\n  { city: \"Jacksonville\", state: \"FL\" },\n  { city: \"Jersey City\", state: \"NJ\" },\n  { city: \"Kansas City\", state: \"MO\" },\n  { city: \"Laredo\", state: \"TX\" },\n  { city: \"Las Vegas\", state: \"NV\" },\n  { city: \"Lexington\", state: \"KY\" },\n  { city: \"Lincoln\", state: \"NE\" },\n  { city: \"Long Beach\", state: \"CA\" },\n  { city: \"Los Angeles\", state: \"CA\" },\n  { city: \"Louisville\", state: \"KY\" },\n  { city: \"Lubbock\", state: \"TX\" },\n  { city: \"Madison\", state: \"WI\" },\n  { city: \"Memphis\", state: \"TN\" },\n  { city: \"Mesa\", state: \"AZ\" },\n  { city: \"Miami\", state: \"FL\" },\n  { city: \"Milwaukee\", state: \"WI\" },\n  { city: \"Minneapolis\", state: \"MN\" },\n  { city: \"Modesto\", state: \"CA\" },\n  { city: \"Nashville\", state: \"TN\" },\n  { city: \"New Orleans\", state: \"LA\" },\n  { city: \"New York\", state: \"NY\" },\n  { city: \"Newark\", state: \"NJ\" },\n  { city: \"Norfolk\", state: \"VA\" },\n  { city: \"North Las Vegas\", state: \"NV\" },\n  { city: \"Oakland\", state: \"CA\" },\n  { city: \"Oklahoma City\", state: \"OK\" },\n  { city: \"Omaha\", state: \"NE\" },\n  { city: \"Orlando\", state: \"FL\" },\n  { city: \"Oxnard\", state: \"CA\" },\n  { city: \"Philadelphia\", state: \"PA\" },\n  { city: \"Phoenix\", state: \"AZ\" },\n  { city: \"Pittsburgh\", state: \"PA\" },\n  { city: \"Plano\", state: \"TX\" },\n  { city: \"Portland\", state: \"OR\" },\n  { city: \"Raleigh\", state: \"NC\" },\n  { city: \"Reno\", state: \"NV\" },\n  { city: \"Richmond\", state: \"VA\" },\n  { city: \"Riverside\", state: \"CA\" },\n  { city: \"Rochester\", state: \"NY\" },\n  { city: \"Sacramento\", state: \"CA\" },\n  { city: \"Salt Lake City\", state: \"UT\" },\n  { city: \"San Antonio\", state: \"TX\" },\n  { city: \"San Bernardino\", state: \"CA\" },\n  { city: \"San Diego\", state: \"CA\" },\n  { city: \"San Francisco\", state: \"CA\" },\n  { city: \"San Jose\", state: \"CA\" },\n  { city: \"Santa Ana\", state: \"CA\" },\n  { city: \"Santa Clarita\", state: \"CA\" },\n  { city: \"Scottsdale\", state: \"AZ\" },\n  { city: \"Seattle\", state: \"WA\" },\n  { city: \"Spokane\", state: \"WA\" },\n  { city: \"St. Louis\", state: \"MO\" },\n  { city: \"St. Paul\", state: \"MN\" },\n  { city: \"St. Petersburg\", state: \"FL\" },\n  { city: \"Stockton\", state: \"CA\" },\n  { city: \"Tampa\", state: \"FL\" },\n  { city: \"Toledo\", state: \"OH\" },\n  { city: \"Tucson\", state: \"AZ\" },\n  { city: \"Tulsa\", state: \"OK\" },\n  { city: \"Virginia Beach\", state: \"VA\" },\n  { city: \"Washington\", state: \"DC\" },\n  { city: \"Wichita\", state: \"KS\" },\n  { city: \"Winston-Salem\", state: \"NC\" },\n] as const;\n\n/**\n * Type for city data\n */\nexport type USCity = (typeof US_CITIES)[number];","/**\n * Safely read a string from localStorage with validation.\n * Returns defaultValue if key doesn't exist, value is null, or access fails.\n *\n * @param key - localStorage key to read\n * @param defaultValue - fallback value (default: \"\")\n * @returns The stored string value or defaultValue\n */\nexport function getLocalStorageString(key: string, defaultValue = \"\"): string {\n  try {\n    const value = localStorage.getItem(key);\n    return typeof value === \"string\" ? value : defaultValue;\n  } catch {\n    // localStorage access can fail in private browsing or when disabled\n    return defaultValue;\n  }\n}\n\n/**\n * Safely write a string to localStorage.\n * Fails silently if localStorage is unavailable.\n *\n * @param key - localStorage key to write\n * @param value - string value to store\n */\nexport function setLocalStorageString(key: string, value: string): void {\n  try {\n    localStorage.setItem(key, value);\n  } catch {\n    // Fail silently - localStorage may be unavailable\n  }\n}\n","import * as React from \"react\";\nimport { useRef, useEffect } from \"react\";\nimport { useForm, useWatch } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { quickAddSchema, type QuickAddInput } from \"@/atomic-crm/validation/quickAdd\";\nimport { useQuickAdd } from \"../hooks/useQuickAdd\";\nimport { useFilteredProducts } from \"../hooks/useFilteredProducts\";\nimport { useGetList } from \"ra-core\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Combobox, MultiSelectCombobox } from \"@/components/ui/combobox\";\nimport { US_CITIES } from \"../data/us-cities\";\nimport { cn } from \"@/lib/utils\";\nimport { getLocalStorageString } from \"@/lib/storage-utils\";\n\ninterface QuickAddFormProps {\n  onSuccess: () => void;\n}\n\nexport const QuickAddForm = ({ onSuccess }: QuickAddFormProps) => {\n  const { mutate, isPending } = useQuickAdd();\n  const firstNameRef = useRef<HTMLInputElement>(null);\n\n  // Fetch principals for dropdown\n  const { data: principalsList, isLoading: principalsLoading } = useGetList(\"organizations\", {\n    filter: { organization_type: \"principal\" },\n    pagination: { page: 1, perPage: 100 },\n    sort: { field: \"name\", order: \"ASC\" },\n  });\n\n  // Derive defaults from schema first (single source of truth)\n  const schemaDefaults = quickAddSchema.partial().parse({});\n\n  // Then merge with validated localStorage for persistence\n  const defaultValues = {\n    ...schemaDefaults,\n    campaign: getLocalStorageString(\"last_campaign\", schemaDefaults.campaign || \"\"),\n    principal_id:\n      Number(\n        getLocalStorageString(\"last_principal\", schemaDefaults.principal_id?.toString() || \"\")\n      ) || undefined,\n  };\n\n  // Initialize form with defaults from schema and localStorage\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    setValue,\n    control,\n    reset,\n    clearErrors,\n  } = useForm<QuickAddInput>({\n    resolver: zodResolver(quickAddSchema),\n    defaultValues,\n  });\n\n  // Watch values for dependent fields using useWatch\n  const [principalId, cityValue, phoneValue, emailValue, productIds] = useWatch({\n    control,\n    name: [\"principal_id\", \"city\", \"phone\", \"email\", \"product_ids\"],\n  });\n\n  // Fetch products filtered by selected principal\n  const {\n    products: productsList,\n    isLoading: productsLoading,\n    isReady: productsReady,\n  } = useFilteredProducts(principalId);\n\n  // Clear phone/email validation error when either field has content\n  useEffect(() => {\n    if (\n      (phoneValue || emailValue) &&\n      errors.phone?.message === \"Phone or Email required (at least one)\"\n    ) {\n      clearErrors(\"phone\");\n    }\n  }, [phoneValue, emailValue, errors.phone, clearErrors]);\n\n  // Handle city selection\n  const handleCitySelect = (cityName: string) => {\n    const selectedCity = US_CITIES.find((c) => c.city === cityName);\n    if (selectedCity) {\n      setValue(\"city\", selectedCity.city);\n      setValue(\"state\", selectedCity.state);\n    } else {\n      // Allow freeform entry for international cities\n      setValue(\"city\", cityName);\n      setValue(\"state\", \"\");\n    }\n  };\n\n  // Handle form submission\n  const onSubmit = (data: QuickAddInput, closeAfter: boolean) => {\n    mutate(data, {\n      onSuccess: () => {\n        if (closeAfter) {\n          onSuccess(); // Close dialog\n        } else {\n          // Reset form but keep campaign and principal\n          reset({\n            campaign: data.campaign,\n            principal_id: data.principal_id,\n            product_ids: [],\n            first_name: \"\",\n            last_name: \"\",\n            phone: \"\",\n            email: \"\",\n            org_name: \"\",\n            city: \"\",\n            state: \"\",\n            quick_note: \"\",\n          });\n          // Focus first name field for next entry\n          setTimeout(() => firstNameRef.current?.focus(), 100);\n        }\n      },\n    });\n  };\n\n  // Convert products and principals to combobox options\n  const principalOptions =\n    principalsList?.map((org) => ({\n      value: org.id.toString(),\n      label: org.name,\n    })) || [];\n\n  const productOptions =\n    productsList?.map((product) => ({\n      value: product.id.toString(),\n      label: product.name,\n    })) || [];\n\n  // Map all US cities for Combobox (Command component handles filtering)\n  const cityOptions = US_CITIES.map(({ city }) => ({\n    value: city,\n    label: city,\n  }));\n\n  return (\n    <form className=\"flex flex-col gap-6\">\n      {/* Pre-filled Section - Light success background */}\n      <div className=\"rounded-lg bg-success/10 p-4 space-y-4\">\n        <h3 className=\"text-sm font-medium text-foreground\">Pre-filled Information</h3>\n        <div className=\"grid gap-4 grid-cols-1 md:grid-cols-2\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"campaign\">Campaign</Label>\n            <Input\n              id=\"campaign\"\n              {...register(\"campaign\")}\n              placeholder=\"e.g., Q4 2025 Trade Show\"\n              className=\"bg-background\"\n            />\n            {errors.campaign && (\n              <p className=\"text-sm text-destructive\">{errors.campaign.message}</p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"principal\">Principal *</Label>\n            <Select\n              value={principalId?.toString()}\n              onValueChange={(value) => setValue(\"principal_id\", Number(value))}\n              disabled={principalsLoading}\n            >\n              <SelectTrigger className=\"bg-background\">\n                <SelectValue placeholder={principalsLoading ? \"Loading...\" : \"Select principal\"} />\n              </SelectTrigger>\n              <SelectContent>\n                {principalOptions.map((option) => (\n                  <SelectItem key={option.value} value={option.value}>\n                    {option.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            {errors.principal_id && (\n              <p className=\"text-sm text-destructive\">{errors.principal_id.message}</p>\n            )}\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"products\">Products</Label>\n          {productsReady ? (\n            <MultiSelectCombobox\n              options={productOptions}\n              value={productIds?.map((id) => id.toString()) || []}\n              onValueChange={(values) =>\n                setValue(\n                  \"product_ids\",\n                  values.map((v) => Number(v))\n                )\n              }\n              placeholder={productsLoading ? \"Loading products...\" : \"Select products...\"}\n              searchPlaceholder=\"Search products...\"\n              emptyText=\"No products found\"\n              className=\"bg-background\"\n              disabled={productsLoading || !productOptions.length}\n            />\n          ) : (\n            <div className=\"text-sm text-muted-foreground p-2 border rounded-md bg-background\">\n              Select a Principal first to filter products\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Contact Information Section */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-sm font-medium text-foreground\">Contact Information</h3>\n        <div className=\"grid gap-4 grid-cols-1 md:grid-cols-2\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"first_name\">First Name *</Label>\n            <Input\n              ref={firstNameRef}\n              id=\"first_name\"\n              {...register(\"first_name\")}\n              placeholder=\"John\"\n            />\n            {errors.first_name && (\n              <p className=\"text-sm text-destructive\">{errors.first_name.message}</p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"last_name\">Last Name *</Label>\n            <Input id=\"last_name\" {...register(\"last_name\")} placeholder=\"Doe\" />\n            {errors.last_name && (\n              <p className=\"text-sm text-destructive\">{errors.last_name.message}</p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"phone\">Phone</Label>\n            <Input id=\"phone\" type=\"tel\" {...register(\"phone\")} placeholder=\"555-123-4567\" />\n            {errors.phone && <p className=\"text-sm text-destructive\">{errors.phone.message}</p>}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"email\">Email</Label>\n            <Input id=\"email\" type=\"email\" {...register(\"email\")} placeholder=\"john@example.com\" />\n            {errors.email && <p className=\"text-sm text-destructive\">{errors.email.message}</p>}\n          </div>\n        </div>\n        {!phoneValue && !emailValue && (\n          <p className=\"text-sm text-muted-foreground\">\n            At least one of Phone or Email is required\n          </p>\n        )}\n      </div>\n\n      {/* Organization Information Section */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-sm font-medium text-foreground\">Organization Information</h3>\n        <div className=\"grid gap-4 grid-cols-1\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"org_name\">Organization Name *</Label>\n            <Input id=\"org_name\" {...register(\"org_name\")} placeholder=\"Acme Corporation\" />\n            {errors.org_name && (\n              <p className=\"text-sm text-destructive\">{errors.org_name.message}</p>\n            )}\n          </div>\n\n          <div className=\"grid gap-4 grid-cols-1 md:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"city\">City *</Label>\n              <Combobox\n                id=\"city\"\n                options={cityOptions}\n                value={cityValue}\n                onValueChange={(value) => handleCitySelect(value)}\n                placeholder=\"Select or type city...\"\n                searchPlaceholder=\"Search cities...\"\n                emptyText=\"Type to search cities\"\n                className=\"w-full\"\n              />\n              {errors.city && <p className=\"text-sm text-destructive\">{errors.city.message}</p>}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"state\">State *</Label>\n              <Input\n                id=\"state\"\n                {...register(\"state\")}\n                placeholder=\"CA\"\n                readOnly={!!US_CITIES.find((c) => c.city === cityValue)}\n                className={cn(US_CITIES.find((c) => c.city === cityValue) && \"bg-muted\")}\n              />\n              {errors.state && <p className=\"text-sm text-destructive\">{errors.state.message}</p>}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Optional Details Section */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-sm font-medium text-foreground\">Optional Details</h3>\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"quick_note\">Quick Note</Label>\n          <Input\n            id=\"quick_note\"\n            {...register(\"quick_note\")}\n            placeholder=\"Met at booth, interested in product demo...\"\n          />\n        </div>\n      </div>\n\n      {/* Footer Actions */}\n      <div className=\"flex items-center justify-between pt-4 border-t\">\n        <Button type=\"button\" variant=\"outline\" onClick={onSuccess} disabled={isPending}>\n          Cancel\n        </Button>\n\n        <div className=\"flex gap-2\">\n          <Button\n            type=\"button\"\n            onClick={handleSubmit((data) => onSubmit(data, false))}\n            disabled={isPending}\n          >\n            Save & Add Another\n          </Button>\n\n          <Button\n            type=\"button\"\n            variant=\"secondary\"\n            onClick={handleSubmit((data) => onSubmit(data, true))}\n            disabled={isPending}\n          >\n            Save & Close\n          </Button>\n        </div>\n      </div>\n    </form>\n  );\n};\n","import {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { QuickAddForm } from \"./QuickAddForm\";\n\ninterface QuickAddDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\n/**\n * Quick Add Dialog Component\n *\n * Modal dialog wrapper for the Quick Add form.\n * Responsive: Full screen on mobile, centered modal on desktop.\n * Contains QuickAddForm component for rapid data entry.\n */\nexport const QuickAddDialog = ({ open, onOpenChange }: QuickAddDialogProps) => {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent\n        className=\"w-full max-w-2xl sm:w-[calc(100%-2rem)] max-h-[90vh] overflow-y-auto\"\n        aria-describedby=\"quick-add-description\"\n      >\n        <DialogHeader>\n          <DialogTitle>Quick Add Booth Visitor</DialogTitle>\n          <DialogDescription id=\"quick-add-description\">\n            Quickly capture lead information from trade show booth conversations\n          </DialogDescription>\n        </DialogHeader>\n\n        <QuickAddForm onSuccess={() => onOpenChange(false)} />\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { QuickAddDialog } from \"./QuickAddDialog\";\n\n/**\n * Quick Add Button Component\n *\n * Button that opens the Quick Add Dialog for rapid booth visitor data entry.\n * Manages the dialog open/close state internally.\n * Designed for placement in the opportunities list header.\n */\nexport const QuickAddButton = () => {\n  const [open, setOpen] = useState(false);\n\n  return (\n    <>\n      <Button\n        onClick={() => setOpen(true)}\n        variant=\"outline\"\n        size=\"default\"\n        className=\"min-h-[44px] min-w-[44px]\" // Ensure touch target minimum\n      >\n         Quick Add\n      </Button>\n      <QuickAddDialog open={open} onOpenChange={setOpen} />\n    </>\n  );\n};\n","/* eslint-disable react-refresh/only-export-components */\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  DialogDescription,\n  DialogHeader,\n} from \"@/components/ui/dialog\";\nimport { useGetIdentity, useGetList } from \"ra-core\";\nimport { useEffect, useState } from \"react\";\nimport { format } from \"date-fns\";\nimport type { Opportunity } from \"../types\";\nimport { getOpportunityStageLabel } from \"./constants/stageConstants\";\nimport { parseDateSafely } from \"@/lib/date-utils\";\n\nexport const OpportunityArchivedList = () => {\n  const { data: identity } = useGetIdentity();\n  const {\n    data: archivedLists,\n    total,\n    isPending,\n  } = useGetList(\"opportunities\", {\n    pagination: { page: 1, perPage: 1000 },\n    sort: { field: \"deleted_at\", order: \"DESC\" },\n    filter: { \"deleted_at@not.is\": null },\n  });\n  const [openDialog, setOpenDialog] = useState(false);\n\n  useEffect(() => {\n    if (!isPending && total === 0) {\n      setOpenDialog(false);\n    }\n  }, [isPending, total]);\n\n  useEffect(() => {\n    setOpenDialog(false);\n  }, [archivedLists]);\n\n  if (!identity || isPending || !total || !archivedLists) return null;\n\n  // Group archived lists by date\n  const archivedListsByDate: { [date: string]: Opportunity[] } = archivedLists.reduce(\n    (acc, opportunity) => {\n      const parsedDate = parseDateSafely(opportunity.deleted_at);\n      if (!parsedDate) return acc;\n      const date = parsedDate.toDateString();\n      if (!acc[date]) {\n        acc[date] = [];\n      }\n      acc[date].push(opportunity);\n      return acc;\n    },\n    {} as { [date: string]: Opportunity[] }\n  );\n\n  return (\n    <div className=\"w-full flex flex-row items-center justify-center\">\n      <Button variant=\"ghost\" onClick={() => setOpenDialog(true)} className=\"my-4\">\n        View archived opportunities\n      </Button>\n      <Dialog open={openDialog} onOpenChange={() => setOpenDialog(false)}>\n        <DialogContent className=\"lg:max-w-4xl overflow-y-auto max-h-9/10 top-1/20 translate-y-0\">\n          <DialogHeader>\n            <DialogTitle>Archived Opportunities</DialogTitle>\n            <DialogDescription>\n              View opportunities that have been archived. These are grouped by archive date.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-8\">\n            {Object.entries(archivedListsByDate).map(([date, opportunities]) => (\n              <div key={date} className=\"flex flex-col gap-4\">\n                <h4 className=\"font-bold\">{getRelativeTimeString(date)}</h4>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8\">\n                  {opportunities.map((opportunity: Opportunity) => (\n                    <div\n                      key={opportunity.id}\n                      className=\"bg-card rounded-lg border border-border p-4\"\n                    >\n                      <h3 className=\"font-medium text-sm text-foreground mb-2\">\n                        {opportunity.name}\n                      </h3>\n                      <div className=\"text-xs text-muted-foreground space-y-1\">\n                        <div>Stage: {getOpportunityStageLabel(opportunity.stage)}</div>\n                        {opportunity.estimated_close_date &&\n                          parseDateSafely(opportunity.estimated_close_date) && (\n                            <div>\n                              Close Date:{\" \"}\n                              {format(\n                                parseDateSafely(opportunity.estimated_close_date)!,\n                                \"MMM d, yyyy\"\n                              )}\n                            </div>\n                          )}\n                        {opportunity.deleted_at && parseDateSafely(opportunity.deleted_at) && (\n                          <div className=\"text-destructive mt-2\">\n                            Archived:{\" \"}\n                            {format(parseDateSafely(opportunity.deleted_at)!, \"MMM d, yyyy\")}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ))}\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport function getRelativeTimeString(dateString: string): string {\n  const date = new Date(dateString);\n  date.setHours(0, 0, 0, 0);\n\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n\n  const diff = date.getTime() - today.getTime();\n  const unitDiff = Math.round(diff / (1000 * 60 * 60 * 24));\n\n  // Check if the date is more than one week old\n  if (Math.abs(unitDiff) > 7) {\n    return new Intl.DateTimeFormat(undefined, {\n      day: \"numeric\",\n      month: \"long\",\n    }).format(date);\n  }\n\n  // Intl.RelativeTimeFormat for dates within the last week\n  const rtf = new Intl.RelativeTimeFormat(undefined, { numeric: \"auto\" });\n  return ucFirst(rtf.format(unitDiff, \"day\"));\n}\n\nfunction ucFirst(str: string): string {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n","import { CreateButton } from \"@/components/admin/create-button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useGetList } from \"ra-core\";\nimport { Link } from \"react-router-dom\";\nimport useAppBarHeight from \"../hooks/useAppBarHeight\";\nimport type { Contact } from \"../types\";\n\nexport const OpportunityEmpty = ({ children }: { children?: React.ReactNode }) => {\n  const appbarHeight = useAppBarHeight();\n\n  // get Contact data\n  const { data: contacts, isPending: contactsLoading } = useGetList<Contact>(\"contacts\", {\n    pagination: { page: 1, perPage: 1 },\n  });\n\n  if (contactsLoading) return <Progress value={50} />;\n\n  return (\n    <div\n      className=\"flex flex-col justify-center items-center gap-12\"\n      style={{\n        height: `calc(100dvh - ${appbarHeight}px)`,\n      }}\n    >\n      <img src=\"./img/empty.svg\" alt=\"No opportunities found\" />\n      {contacts && contacts.length > 0 ? (\n        <>\n          <div className=\"flex flex-col items-center gap-0\">\n            <h3 className=\"text-lg font-bold\">No opportunities found</h3>\n            <p className=\"text-sm text-center text-muted-foreground mb-4\">\n              It seems your opportunity list is empty.\n            </p>\n          </div>\n          <div className=\"flex space-x-8\">\n            <CreateButton label=\"Create opportunity\" />\n          </div>\n          {children}\n        </>\n      ) : (\n        <div className=\"flex flex-col items-center gap-0\">\n          <h3 className=\"text-lg font-bold\">No opportunities found</h3>\n          <p className=\"text-sm text-center text-muted-foreground mb-4\">\n            It seems your contact list is empty.\n            <br />\n            <Link to=\"/contacts/create\" className=\"hover:underline\">\n              Add your first contact\n            </Link>{\" \"}\n            before creating an opportunity.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n","import { useMemo } from \"react\";\nimport { useGetMany } from \"react-admin\";\nimport type { Contact } from \"../types\";\n\n/**\n * Hook to fetch contacts for an opportunity\n *\n * Uses React Admin's useGetMany which automatically:\n * - Batches multiple requests into single API calls\n * - Deduplicates IDs across components\n * - Caches results to prevent redundant fetches\n *\n * @param contactIds - Array of contact IDs to fetch\n * @returns Object with contacts, primaryContact, and loading state\n */\nexport function useOpportunityContacts(contactIds: number[]) {\n  // Memoize the IDs array to prevent unnecessary re-fetches\n  // when parent re-renders with a new array reference but same values\n  const stableIds = useMemo(\n    () => contactIds,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [JSON.stringify(contactIds)]\n  );\n\n  const {\n    data: contacts,\n    isLoading,\n    error,\n  } = useGetMany<Contact>(\"contacts\", { ids: stableIds }, { enabled: stableIds.length > 0 });\n\n  // Memoize derived values\n  const result = useMemo(() => {\n    const primaryContact = contacts && contacts.length > 0 ? contacts[0] : null;\n    return {\n      contacts: contacts || [],\n      primaryContact,\n      isLoading,\n      error,\n    };\n  }, [contacts, isLoading, error]);\n\n  return result;\n}\n","import { useMemo } from \"react\";\nimport type { Opportunity } from \"../types\";\n\nexport const STUCK_THRESHOLD_DAYS = 14;\n\nexport interface StageMetrics {\n  count: number;\n  avgDaysInStage: number;\n  stuckCount: number; // >STUCK_THRESHOLD_DAYS days\n}\n\nexport function calculateStageMetrics(opportunities: Opportunity[]): StageMetrics {\n  if (opportunities.length === 0) {\n    return { count: 0, avgDaysInStage: 0, stuckCount: 0 };\n  }\n\n  const totalDays = opportunities.reduce((sum, opp) => sum + (opp.days_in_stage || 0), 0);\n  const avgDays = Math.round(totalDays / opportunities.length);\n  const stuck = opportunities.filter(\n    (opp) => (opp.days_in_stage || 0) > STUCK_THRESHOLD_DAYS\n  ).length;\n\n  return {\n    count: opportunities.length,\n    avgDaysInStage: avgDays,\n    stuckCount: stuck,\n  };\n}\n\nexport function useStageMetrics(opportunities: Opportunity[]): StageMetrics {\n  return useMemo(() => calculateStageMetrics(opportunities), [opportunities]);\n}\n","import { useCallback, useEffect } from \"react\";\nimport { useForm, FormProvider, useWatch } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Trophy, XCircle, AlertCircle } from \"lucide-react\";\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { SelectInput } from \"@/components/admin/select-input\";\nimport { TextInput } from \"@/components/admin/text-input\";\nimport { cn } from \"@/lib/utils\";\n\nimport {\n  closeOpportunitySchema,\n  WIN_REASONS,\n  LOSS_REASONS,\n  type CloseOpportunityInput,\n  type WinReason,\n  type LossReason,\n} from \"@/atomic-crm/validation/opportunities\";\n\n/**\n * Props for CloseOpportunityModal\n */\ninterface CloseOpportunityModalProps {\n  /** Whether the modal is open */\n  open: boolean;\n  /** Callback when modal open state changes */\n  onOpenChange: (open: boolean) => void;\n  /** The opportunity ID being closed */\n  opportunityId: string | number;\n  /** The opportunity name for display */\n  opportunityName: string;\n  /** Target stage: 'closed_won' or 'closed_lost' */\n  targetStage: \"closed_won\" | \"closed_lost\";\n  /** Callback when close is confirmed with reason data */\n  onConfirm: (data: CloseOpportunityInput) => void;\n  /** Whether the form is submitting */\n  isSubmitting?: boolean;\n}\n\n/**\n * CloseOpportunityModal Component\n *\n * Industry-standard modal for capturing win/loss reasons when closing opportunities.\n * Per PRD Section 5.3, MVP #12, #47 - matches Salesforce/HubSpot patterns.\n *\n * Features:\n * - Conditional SelectInput based on win vs loss\n * - Progressive disclosure: \"Other\" option reveals notes field\n * - Form validation via Zod (closeOpportunitySchema)\n * - Accessible: focus trap, ARIA attributes, keyboard navigation\n *\n * @example\n * ```tsx\n * <CloseOpportunityModal\n *   open={showCloseModal}\n *   onOpenChange={setShowCloseModal}\n *   opportunityId={record.id}\n *   opportunityName={record.name}\n *   targetStage=\"closed_won\"\n *   onConfirm={handleCloseOpportunity}\n *   isSubmitting={isPending}\n * />\n * ```\n */\nexport const CloseOpportunityModal = ({\n  open,\n  onOpenChange,\n  opportunityId,\n  opportunityName,\n  targetStage,\n  onConfirm,\n  isSubmitting = false,\n}: CloseOpportunityModalProps) => {\n  const isWin = targetStage === \"closed_won\";\n\n  // P5: Form defaults from closeOpportunitySchema.partial().parse({})\n  // This ensures Zod-defined defaults are used, not hardcoded values\n  const defaultValues = closeOpportunitySchema.partial().parse({\n    id: opportunityId,\n    stage: targetStage,\n  });\n\n  const form = useForm<CloseOpportunityInput>({\n    resolver: zodResolver(closeOpportunitySchema),\n    defaultValues,\n    mode: \"onBlur\", // Validate on blur for better performance\n  });\n\n  const { control, reset, handleSubmit, formState, trigger } = form;\n  const { errors, isValid } = formState;\n\n  // Watch reason fields for conditional \"Other\" field and to trigger validation\n  const winReason = useWatch({ control, name: \"win_reason\" }) as WinReason | null | undefined;\n  const lossReason = useWatch({ control, name: \"loss_reason\" }) as LossReason | null | undefined;\n  const closeReasonNotes = useWatch({ control, name: \"close_reason_notes\" }) as\n    | string\n    | null\n    | undefined;\n\n  // Trigger validation when relevant fields change\n  // This is necessary because mode: \"onBlur\" doesn't auto-validate on change,\n  // but Zod refinements require full form validation to determine isValid\n  // We validate on ANY change (including clearing) to keep isValid accurate\n  useEffect(() => {\n    trigger();\n  }, [winReason, lossReason, closeReasonNotes, trigger]);\n\n  // Show notes field when \"other\" is selected\n  const showNotesField = winReason === \"other\" || lossReason === \"other\";\n\n  // Reset form when modal opens with new data\n  useEffect(() => {\n    if (open) {\n      reset({\n        id: opportunityId,\n        stage: targetStage,\n        win_reason: null,\n        loss_reason: null,\n        close_reason_notes: null,\n      });\n    }\n  }, [open, opportunityId, targetStage, reset]);\n\n  // Handle form submission\n  const onSubmit = useCallback(\n    (data: CloseOpportunityInput) => {\n      onConfirm(data);\n    },\n    [onConfirm]\n  );\n\n  // Handle cancel\n  const handleCancel = useCallback(() => {\n    onOpenChange(false);\n  }, [onOpenChange]);\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent\n        className=\"w-full max-w-md sm:w-[calc(100%-2rem)]\"\n        aria-describedby=\"close-opportunity-description\"\n      >\n        <DialogHeader className=\"gap-3\">\n          {/* Icon and title based on win/loss */}\n          <div className=\"flex items-center gap-3\">\n            {isWin ? (\n              <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-success/10\">\n                <Trophy className=\"h-5 w-5 text-success\" />\n              </div>\n            ) : (\n              <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-destructive/10\">\n                <XCircle className=\"h-5 w-5 text-destructive\" />\n              </div>\n            )}\n            <DialogTitle className=\"text-lg font-semibold\">\n              {isWin ? \"Close as Won\" : \"Close as Lost\"}\n            </DialogTitle>\n          </div>\n\n          <DialogDescription id=\"close-opportunity-description\" className=\"text-sm\">\n            {isWin\n              ? `Congratulations! Please select the primary reason you won \"${opportunityName}\".`\n              : `Please select the primary reason \"${opportunityName}\" was lost.`}\n          </DialogDescription>\n        </DialogHeader>\n\n        <FormProvider {...form}>\n          <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4 pt-2\">\n            {/* Win/Loss Reason SelectInput - P7: react-admin SelectInput */}\n            {isWin ? (\n              <SelectInput\n                source=\"win_reason\"\n                label=\"Win Reason *\"\n                choices={WIN_REASONS}\n                helperText=\"Why did you win this opportunity?\"\n                className=\"w-full\"\n              />\n            ) : (\n              <SelectInput\n                source=\"loss_reason\"\n                label=\"Loss Reason *\"\n                choices={LOSS_REASONS}\n                helperText=\"Why was this opportunity lost?\"\n                className=\"w-full\"\n              />\n            )}\n\n            {/* Conditional \"Other\" notes field - progressive disclosure */}\n            {showNotesField && (\n              <div className=\"animate-in fade-in-0 slide-in-from-top-2 duration-200\">\n                <TextInput\n                  source=\"close_reason_notes\"\n                  label=\"Please specify *\"\n                  multiline\n                  rows={3}\n                  placeholder=\"Describe the specific reason...\"\n                  helperText=\"Required when selecting 'Other'\"\n                  className=\"w-full\"\n                />\n              </div>\n            )}\n\n            {/* Form-level error display */}\n            {Object.keys(errors).length > 0 && (\n              <div className=\"flex items-center gap-2 rounded-md bg-destructive/10 p-3 text-sm text-destructive\">\n                <AlertCircle className=\"h-4 w-4 flex-shrink-0\" />\n                <span>\n                  {errors.win_reason?.message ||\n                    errors.loss_reason?.message ||\n                    errors.close_reason_notes?.message ||\n                    \"Please complete all required fields\"}\n                </span>\n              </div>\n            )}\n\n            <DialogFooter className=\"gap-2 pt-4 sm:gap-0\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={handleCancel}\n                disabled={isSubmitting}\n                className=\"h-11 min-w-[100px]\"\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={!isValid || isSubmitting}\n                className={cn(\n                  \"h-11 min-w-[120px]\",\n                  isWin\n                    ? \"bg-success text-success-foreground hover:bg-success/90\"\n                    : \"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n                )}\n              >\n                {isSubmitting ? \"Saving...\" : isWin ? \"Close as Won\" : \"Close as Lost\"}\n              </Button>\n            </DialogFooter>\n          </form>\n        </FormProvider>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default CloseOpportunityModal;\n","import { useState, useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useUpdate, useDelete, useNotify, useRefresh, useRecordContext } from \"react-admin\";\nimport { MoreVertical, Eye, Pencil, Trophy, XCircle, Trash2 } from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { CloseOpportunityModal } from \"../components/CloseOpportunityModal\";\nimport type { CloseOpportunityInput } from \"@/atomic-crm/validation/opportunities\";\nimport type { Opportunity } from \"../../types\";\n\ninterface OpportunityCardActionsProps {\n  opportunityId: number;\n  onDelete?: (opportunityId: number) => void;\n}\n\nexport function OpportunityCardActions({ opportunityId, onDelete }: OpportunityCardActionsProps) {\n  const navigate = useNavigate();\n  const [update] = useUpdate();\n  const [deleteOne] = useDelete();\n  const notify = useNotify();\n  const refresh = useRefresh();\n  const record = useRecordContext<Opportunity>();\n\n  // State for CloseOpportunityModal\n  const [showCloseModal, setShowCloseModal] = useState(false);\n  const [closeTargetStage, setCloseTargetStage] = useState<\"closed_won\" | \"closed_lost\">(\n    \"closed_won\"\n  );\n  const [isClosing, setIsClosing] = useState(false);\n\n  const handleViewDetails = useCallback(() => {\n    navigate(`/opportunities/${opportunityId}/show`);\n  }, [navigate, opportunityId]);\n\n  const handleEdit = useCallback(() => {\n    navigate(`/opportunities/${opportunityId}`);\n  }, [navigate, opportunityId]);\n\n  /**\n   * Open the close modal with the specified target stage\n   */\n  const handleOpenCloseModal = useCallback((targetStage: \"closed_won\" | \"closed_lost\") => {\n    setCloseTargetStage(targetStage);\n    setShowCloseModal(true);\n  }, []);\n\n  /**\n   * Handle confirmation from CloseOpportunityModal\n   */\n  const handleCloseConfirm = useCallback(\n    async (data: CloseOpportunityInput) => {\n      setIsClosing(true);\n      try {\n        await update(\"opportunities\", {\n          id: opportunityId,\n          data: {\n            stage: closeTargetStage,\n            win_reason: data.win_reason,\n            loss_reason: data.loss_reason,\n            close_reason_notes: data.close_reason_notes,\n          },\n          previousData: record || {},\n        });\n        notify(\n          closeTargetStage === \"closed_won\"\n            ? \"Opportunity marked as won\"\n            : \"Opportunity marked as lost\",\n          { type: \"success\" }\n        );\n        refresh();\n        setShowCloseModal(false);\n      } catch {\n        notify(\"Error updating opportunity\", { type: \"error\" });\n      } finally {\n        setIsClosing(false);\n      }\n    },\n    [opportunityId, closeTargetStage, update, notify, refresh, record]\n  );\n\n  /**\n   * Handle modal open state change (for cancel/close)\n   */\n  const handleCloseModalOpenChange = useCallback((open: boolean) => {\n    setShowCloseModal(open);\n  }, []);\n\n  const handleDelete = useCallback(async () => {\n    if (window.confirm(\"Are you sure you want to delete this opportunity?\")) {\n      try {\n        await deleteOne(\"opportunities\", { id: opportunityId, previousData: {} });\n        notify(\"Opportunity deleted\", { type: \"success\" });\n        // Optimistically remove from local state if callback provided (Kanban)\n        // Otherwise fall back to refresh (other contexts like List view)\n        if (onDelete) {\n          onDelete(opportunityId);\n        } else {\n          refresh();\n        }\n      } catch {\n        notify(\"Error deleting opportunity\", { type: \"error\" });\n      }\n    }\n  }, [deleteOne, opportunityId, notify, onDelete, refresh]);\n\n  return (\n    <div data-action-button>\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <button\n            type=\"button\"\n            aria-label=\"Actions menu\"\n            onMouseDown={(e) => e.stopPropagation()} // Prevent drag\n            onClick={(e) => e.stopPropagation()} // Prevent card click\n            className=\"min-h-[44px] min-w-[44px] flex items-center justify-center rounded hover:bg-muted transition-colors touch-manipulation focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2\"\n          >\n            <MoreVertical className=\"w-5 h-5 text-muted-foreground\" />\n          </button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent align=\"end\" className=\"w-48\">\n          <DropdownMenuItem onClick={handleViewDetails}>\n            <Eye className=\"mr-2 h-4 w-4\" />\n            View Details\n          </DropdownMenuItem>\n          <DropdownMenuItem onClick={handleEdit}>\n            <Pencil className=\"mr-2 h-4 w-4\" />\n            Edit\n          </DropdownMenuItem>\n          <DropdownMenuSeparator />\n          <DropdownMenuItem\n            onClick={() => handleOpenCloseModal(\"closed_won\")}\n            className=\"text-success-strong focus:text-success-strong\"\n          >\n            <Trophy className=\"mr-2 h-4 w-4\" />\n            Mark as Won\n          </DropdownMenuItem>\n          <DropdownMenuItem\n            onClick={() => handleOpenCloseModal(\"closed_lost\")}\n            variant=\"destructive\"\n          >\n            <XCircle className=\"mr-2 h-4 w-4\" />\n            Mark as Lost\n          </DropdownMenuItem>\n          <DropdownMenuSeparator />\n          <DropdownMenuItem onClick={handleDelete} variant=\"destructive\">\n            <Trash2 className=\"mr-2 h-4 w-4\" />\n            Delete\n          </DropdownMenuItem>\n        </DropdownMenuContent>\n      </DropdownMenu>\n\n      {/* CloseOpportunityModal - shown when clicking Mark as Won/Lost */}\n      <CloseOpportunityModal\n        open={showCloseModal}\n        onOpenChange={handleCloseModalOpenChange}\n        opportunityId={opportunityId}\n        opportunityName={record?.name || \"Opportunity\"}\n        targetStage={closeTargetStage}\n        onConfirm={handleCloseConfirm}\n        isSubmitting={isClosing}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\n\ninterface ActivityPulseDotProps {\n  daysSinceLastActivity: number | null | undefined;\n}\n\n/**\n * Activity Pulse Dot - Visual indicator for opportunity engagement recency\n *\n * Color coding (per design doc):\n * - Green (success): <7 days since last activity\n * - Yellow (warning): 7-14 days since last activity\n * - Red (destructive): >14 days since last activity\n * - Gray (muted): No activity recorded\n */\nexport function ActivityPulseDot({ daysSinceLastActivity }: ActivityPulseDotProps) {\n  const { colorClass, label } = getActivityPulseConfig(daysSinceLastActivity);\n\n  return (\n    <span\n      role=\"status\"\n      aria-label={label}\n      className={`\n        inline-block w-2.5 h-2.5 rounded-full flex-shrink-0\n        ${colorClass}\n      `}\n    />\n  );\n}\n\nfunction getActivityPulseConfig(days: number | null | undefined): {\n  colorClass: string;\n  label: string;\n} {\n  if (days === null || days === undefined) {\n    return {\n      colorClass: \"bg-muted-foreground\",\n      label: \"No activity recorded\",\n    };\n  }\n\n  if (days < 7) {\n    return {\n      colorClass: \"bg-success\",\n      label: `Last activity ${days} days ago`,\n    };\n  }\n\n  if (days <= 14) {\n    return {\n      colorClass: \"bg-warning\",\n      label: `Last activity ${days} days ago`,\n    };\n  }\n\n  return {\n    colorClass: \"bg-destructive\",\n    label: `Last activity ${days} days ago`,\n  };\n}\n","import React, { useState } from \"react\";\nimport { useRecordContext } from \"react-admin\";\nimport { Draggable } from \"@hello-pangea/dnd\";\nimport { format, differenceInDays } from \"date-fns\";\nimport {\n  Trophy,\n  XCircle,\n  ChevronDown,\n  ChevronUp,\n  User,\n  Calendar,\n  Clock,\n  CheckSquare,\n  Package,\n  GripVertical,\n} from \"lucide-react\";\nimport { useOpportunityContacts } from \"../hooks/useOpportunityContacts\";\nimport { STUCK_THRESHOLD_DAYS } from \"../hooks/useStageMetrics\";\nimport { OpportunityCardActions } from \"./OpportunityCardActions\";\nimport { ActivityPulseDot } from \"./ActivityPulseDot\";\nimport { WIN_REASONS, LOSS_REASONS } from \"@/atomic-crm/validation/opportunities\";\nimport type { Opportunity } from \"../../types\";\nimport { parseDateSafely } from \"@/lib/date-utils\";\n\ninterface OpportunityCardProps {\n  index: number;\n  openSlideOver: (id: number, mode?: \"view\" | \"edit\") => void;\n  onDelete?: (opportunityId: number) => void;\n}\n\nconst priorityColors = {\n  low: \"bg-muted text-muted-foreground\",\n  medium: \"bg-primary/10 text-primary\",\n  high: \"bg-warning/10 text-warning\",\n  critical: \"bg-destructive text-destructive-foreground\",\n} as const;\n\n/**\n * OpportunityCard - Expandable draggable card for the Kanban board\n *\n * Collapsed: Activity pulse + name + expand toggle + actions\n * Expanded: Full details with visual cues\n */\nexport const OpportunityCard = React.memo(function OpportunityCard({\n  index,\n  openSlideOver,\n  onDelete,\n}: OpportunityCardProps) {\n  const record = useRecordContext<Opportunity>();\n  const [isExpanded, setIsExpanded] = useState(false);\n  const { primaryContact, isLoading: contactsLoading } = useOpportunityContacts(\n    record?.contact_ids || []\n  );\n\n  if (!record) return null;\n\n  const handleCardClick = (e: React.MouseEvent) => {\n    // Only open slide-over if not clicking on action buttons, expand toggle, or drag handle\n    if (\n      (e.target as HTMLElement).closest(\"[data-action-button]\") ||\n      (e.target as HTMLElement).closest(\"[data-expand-toggle]\") ||\n      (e.target as HTMLElement).closest(\"[data-drag-handle]\")\n    ) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    openSlideOver(record.id as number, \"view\");\n  };\n\n  const handleExpandClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsExpanded(!isExpanded);\n  };\n\n  // Computed values\n  const daysInStage = record.days_in_stage || 0;\n  const isStuck = daysInStage > STUCK_THRESHOLD_DAYS;\n  const priority = record.priority || \"medium\";\n  const priorityClass =\n    priorityColors[priority as keyof typeof priorityColors] || priorityColors.medium;\n  const priorityLabel = priority.charAt(0).toUpperCase() + priority.slice(1);\n\n  // Close date formatting and urgency\n  const closeDateParsed =\n    record.estimated_close_date && parseDateSafely(record.estimated_close_date);\n  const closeDate = closeDateParsed ? format(closeDateParsed, \"MMM d, yyyy\") : \"No date set\";\n  const daysUntilClose = closeDateParsed ? differenceInDays(closeDateParsed, new Date()) : null;\n  const closeDateUrgency =\n    daysUntilClose !== null\n      ? daysUntilClose < 0\n        ? \"overdue\"\n        : daysUntilClose < 7\n          ? \"soon\"\n          : \"normal\"\n      : \"normal\";\n\n  // Task counts\n  const pendingTasks = record.pending_task_count || 0;\n  const overdueTasks = record.overdue_task_count || 0;\n\n  // Products count\n  const productsCount = record.products?.length || 0;\n\n  return (\n    <Draggable draggableId={String(record.id)} index={index}>\n      {(provided, snapshot) => (\n        <div\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          role=\"button\"\n          tabIndex={0}\n          onClick={handleCardClick}\n          onKeyDown={(e) => {\n            if (e.key === \"Enter\" || e.key === \" \") {\n              e.preventDefault();\n              handleCardClick(e as unknown as React.MouseEvent);\n            }\n          }}\n          className={`\n            bg-card rounded-lg border border-border\n            p-3\n            transition-all duration-200\n            hover:shadow-md hover:-translate-y-0.5\n            cursor-pointer\n            ${snapshot.isDragging ? \"opacity-50 rotate-2\" : \"opacity-100\"}\n          `}\n          data-testid=\"opportunity-card\"\n          data-tutorial=\"opp-card\"\n        >\n          {/* Header: Drag Handle + Activity Pulse + Name + Expand + Actions (always visible) */}\n          <div className=\"flex items-center gap-1.5\">\n            {/* Drag handle - 44px touch target (WCAG AA) but compact visual */}\n            <div\n              {...provided.dragHandleProps}\n              data-testid=\"drag-handle\"\n              data-tutorial=\"opp-drag-handle\"\n              data-drag-handle\n              aria-label=\"Drag to reorder\"\n              className=\"min-h-[44px] min-w-[36px] flex items-center justify-center text-muted-foreground hover:text-foreground hover:bg-accent rounded cursor-grab active:cursor-grabbing transition-colors touch-manipulation focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 -ml-1\"\n            >\n              <GripVertical className=\"w-3.5 h-3.5\" />\n            </div>\n            <ActivityPulseDot daysSinceLastActivity={record.days_since_last_activity} />\n\n            <h3\n              className={`\n              font-semibold text-base text-foreground flex-1 min-w-0 leading-normal\n              ${isExpanded ? \"\" : \"line-clamp-3\"}\n            `}\n            >\n              {record.name}\n            </h3>\n\n            <button\n              data-expand-toggle\n              onClick={handleExpandClick}\n              onMouseDown={(e) => e.stopPropagation()}\n              onTouchStart={(e) => e.stopPropagation()}\n              aria-expanded={isExpanded}\n              aria-label={isExpanded ? \"Collapse card\" : \"Expand card\"}\n              className=\"min-h-[44px] min-w-[36px] flex items-center justify-center text-muted-foreground hover:text-foreground hover:bg-accent rounded transition-colors\"\n            >\n              {isExpanded ? (\n                <ChevronUp className=\"w-3.5 h-3.5\" />\n              ) : (\n                <ChevronDown className=\"w-3.5 h-3.5\" />\n              )}\n            </button>\n\n            <OpportunityCardActions opportunityId={record.id as number} onDelete={onDelete} />\n          </div>\n\n          {/* Expandable Details Section */}\n          <div\n            className={`\n            grid transition-[grid-template-rows] duration-200 ease-out\n            ${isExpanded ? \"grid-rows-[1fr]\" : \"grid-rows-[0fr]\"}\n          `}\n          >\n            <div className=\"overflow-hidden\">\n              <div className=\"pt-3 mt-2 border-t border-border space-y-2\">\n                {/* Description */}\n                {record.description && (\n                  <p className=\"text-xs text-muted-foreground line-clamp-2\">{record.description}</p>\n                )}\n\n                {/* Badges Row: Priority + Principal */}\n                <div className=\"flex flex-wrap gap-1.5\">\n                  <span className={`text-xs px-2 py-0.5 rounded-full ${priorityClass}`}>\n                    {priorityLabel}\n                  </span>\n                  {record.principal_organization_name && (\n                    <span className=\"text-xs px-2 py-0.5 rounded-full bg-accent text-accent-foreground\">\n                      {record.principal_organization_name}\n                    </span>\n                  )}\n                </div>\n\n                {/* Primary Contact */}\n                {contactsLoading ? (\n                  <div className=\"h-4 bg-muted animate-pulse rounded\" />\n                ) : primaryContact ? (\n                  <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                    <User className=\"w-3.5 h-3.5\" />\n                    <span>\n                      {primaryContact.firstName} {primaryContact.lastName}\n                    </span>\n                  </div>\n                ) : null}\n\n                {/* Close Date with urgency color */}\n                <div\n                  className={`flex items-center gap-2 text-xs ${\n                    closeDateUrgency === \"overdue\"\n                      ? \"text-destructive\"\n                      : closeDateUrgency === \"soon\"\n                        ? \"text-warning\"\n                        : \"text-muted-foreground\"\n                  }`}\n                >\n                  <Calendar className=\"w-3.5 h-3.5\" />\n                  <span>{closeDate}</span>\n                  {closeDateUrgency === \"overdue\" && <span>(overdue)</span>}\n                  {closeDateUrgency === \"soon\" && daysUntilClose !== null && (\n                    <span>(in {daysUntilClose}d)</span>\n                  )}\n                </div>\n\n                {/* Days in Stage */}\n                <div\n                  className={`flex items-center gap-2 text-xs ${\n                    isStuck ? \"text-warning\" : \"text-muted-foreground\"\n                  }`}\n                >\n                  <Clock className=\"w-3.5 h-3.5\" />\n                  <span>{daysInStage} days in stage</span>\n                  {isStuck && <span className=\"text-warning\"></span>}\n                </div>\n\n                {/* Tasks */}\n                {pendingTasks > 0 && (\n                  <div\n                    className={`flex items-center gap-2 text-xs ${\n                      overdueTasks > 0 ? \"text-destructive\" : \"text-muted-foreground\"\n                    }`}\n                  >\n                    <CheckSquare className=\"w-3.5 h-3.5\" />\n                    <span>\n                      {pendingTasks} task{pendingTasks !== 1 ? \"s\" : \"\"}\n                      {overdueTasks > 0 && ` (${overdueTasks} overdue)`}\n                    </span>\n                  </div>\n                )}\n\n                {/* Products */}\n                {productsCount > 0 && (\n                  <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                    <Package className=\"w-3.5 h-3.5\" />\n                    <span>\n                      {productsCount} product{productsCount !== 1 ? \"s\" : \"\"}\n                    </span>\n                  </div>\n                )}\n\n                {/* Win/Loss Reason Badge - for closed opportunities */}\n                {record.stage === \"closed_won\" && record.win_reason && (\n                  <div className=\"inline-flex items-center gap-1 text-xs px-2 py-1 rounded bg-success/10 text-success\">\n                    <Trophy className=\"w-3 h-3\" />\n                    <span>\n                      {WIN_REASONS.find((r) => r.id === record.win_reason)?.name ||\n                        record.win_reason}\n                    </span>\n                  </div>\n                )}\n                {record.stage === \"closed_lost\" && record.loss_reason && (\n                  <div className=\"inline-flex items-center gap-1 text-xs px-2 py-1 rounded bg-destructive/10 text-destructive\">\n                    <XCircle className=\"w-3 h-3\" />\n                    <span>\n                      {LOSS_REASONS.find((r) => r.id === record.loss_reason)?.name ||\n                        record.loss_reason}\n                    </span>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </Draggable>\n  );\n});\n","import { useState } from \"react\";\nimport { useCreate, useNotify, useRefresh, useGetIdentity, useGetList } from \"react-admin\";\nimport { Loader2 } from \"lucide-react\";\nimport { quickCreateOpportunitySchema } from \"../../validation/opportunities\";\nimport type { OpportunityStageValue, Organization } from \"../../types\";\n\ninterface QuickAddOpportunityProps {\n  stage: OpportunityStageValue;\n}\n\nexport function QuickAddOpportunity({ stage }: QuickAddOpportunityProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [customerId, setCustomerId] = useState<string>(\"\");\n  const [create, { isLoading }] = useCreate();\n  const notify = useNotify();\n  const refresh = useRefresh();\n  const { identity } = useGetIdentity();\n\n  // Fetch customer organizations (Salesforce standard: Account required for Opportunity)\n  const { data: customers, isLoading: customersLoading } = useGetList<Organization>(\n    \"organizations\",\n    {\n      pagination: { page: 1, perPage: 100 },\n      sort: { field: \"name\", order: \"ASC\" },\n      filter: { \"organization_type@in\": \"(prospect,customer)\", deleted_at: null },\n    }\n  );\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!name.trim()) {\n      notify(\"Name is required\", { type: \"error\" });\n      return;\n    }\n\n    if (!customerId) {\n      notify(\"Customer is required\", { type: \"error\" });\n      return;\n    }\n\n    try {\n      // Salesforce standard: Name + Customer + Stage required\n      const validatedData = quickCreateOpportunitySchema.parse({\n        name: name.trim(),\n        stage,\n        customer_organization_id: Number(customerId),\n        // Set current user as owner - ensures opportunity shows in \"My Opportunities\"\n        opportunity_owner_id: identity?.id,\n        account_manager_id: identity?.id,\n      });\n\n      await create(\"opportunities\", { data: validatedData });\n      notify(\"Opportunity created! Add details via the card menu.\", { type: \"success\" });\n      setIsOpen(false);\n      setName(\"\");\n      setCustomerId(\"\");\n      refresh();\n    } catch (error) {\n      // Fail-fast: show actual validation error for debugging\n      const message = error instanceof Error ? error.message : \"Error creating opportunity\";\n      notify(message, { type: \"error\" });\n    }\n  };\n\n  // Format stage for display\n  const stageLabel = stage.replace(/_/g, \" \").replace(/\\b\\w/g, (l) => l.toUpperCase());\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        onClick={() => setIsOpen(true)}\n        className=\"w-full py-2 px-3 text-sm text-primary hover:bg-primary/10 rounded transition-colors border border-dashed border-border\"\n      >\n        + New Opportunity\n      </button>\n\n      {isOpen && (\n        <div\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-labelledby=\"quick-add-opportunity-title\"\n          className=\"fixed inset-0 bg-background/80 flex items-center justify-center z-50 motion-safe:animate-in motion-safe:fade-in motion-safe:duration-150\"\n        >\n          <div className=\"bg-card rounded-lg shadow-xl p-6 w-full max-w-md motion-safe:animate-in motion-safe:fade-in motion-safe:slide-in-from-bottom-4 motion-safe:duration-200\">\n            <h2 id=\"quick-add-opportunity-title\" className=\"text-lg font-semibold mb-4\">\n              Create Opportunity\n            </h2>\n\n            <form onSubmit={handleSubmit}>\n              <div className=\"mb-4\">\n                <label htmlFor=\"name\" className=\"block text-sm font-medium mb-1\">\n                  Name <span className=\"text-destructive\">*</span>\n                </label>\n                <input\n                  id=\"name\"\n                  type=\"text\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary transition-colors\"\n                  placeholder=\"Enter opportunity name\"\n                  disabled={isLoading}\n                  // eslint-disable-next-line jsx-a11y/no-autofocus -- Modal has role=\"dialog\" + aria-modal, autoFocus is appropriate\n                  autoFocus\n                />\n              </div>\n\n              <div className=\"mb-4\">\n                <label htmlFor=\"customer\" className=\"block text-sm font-medium mb-1\">\n                  Customer <span className=\"text-destructive\">*</span>\n                </label>\n                <select\n                  id=\"customer\"\n                  value={customerId}\n                  onChange={(e) => setCustomerId(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary transition-colors bg-background\"\n                  disabled={isLoading || customersLoading}\n                >\n                  <option value=\"\">\n                    {customersLoading ? \"Loading customers...\" : \"Select a customer\"}\n                  </option>\n                  {customers?.map((customer) => (\n                    <option key={customer.id} value={customer.id}>\n                      {customer.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div className=\"mb-4\">\n                <label htmlFor=\"stage\" className=\"block text-sm font-medium mb-1\">\n                  Stage\n                </label>\n                <input\n                  id=\"stage\"\n                  type=\"text\"\n                  value={stageLabel}\n                  disabled\n                  className=\"w-full px-3 py-2 border border-border rounded-md bg-muted text-muted-foreground\"\n                />\n              </div>\n\n              <div className=\"flex gap-2 justify-end\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setIsOpen(false);\n                    setName(\"\");\n                  }}\n                  className=\"px-4 py-2 text-sm border border-border rounded hover:bg-accent active:bg-accent/80 transition-colors motion-safe:active:scale-[0.98]\"\n                  disabled={isLoading}\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-4 py-2 text-sm bg-primary text-primary-foreground rounded hover:bg-primary/90 active:bg-primary/80 transition-colors motion-safe:active:scale-[0.98] disabled:opacity-50 inline-flex items-center gap-2\"\n                  disabled={isLoading}\n                >\n                  {isLoading ? (\n                    <>\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                      Creating...\n                    </>\n                  ) : (\n                    \"Create\"\n                  )}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n","import React from \"react\";\nimport { Droppable } from \"@hello-pangea/dnd\";\nimport { RecordContextProvider } from \"react-admin\";\nimport type { Opportunity } from \"../../types\";\nimport { OpportunityCard } from \"./OpportunityCard\";\nimport {\n  getOpportunityStageLabel,\n  getOpportunityStageColor,\n  getOpportunityStageElevation,\n  getOpportunityStageDescription,\n  getOpportunityMfbPhase,\n} from \"../constants/stageConstants\";\nimport { Tooltip, TooltipTrigger, TooltipContent } from \"@/components/ui/tooltip\";\nimport { useStageMetrics, STUCK_THRESHOLD_DAYS } from \"../hooks/useStageMetrics\";\nimport { QuickAddOpportunity } from \"./QuickAddOpportunity\";\n\n/**\n * Props interface for OpportunityColumn component\n * Extracted for use with React.memo comparison function\n */\ninterface OpportunityColumnProps {\n  stage: string;\n  opportunities: Opportunity[];\n  isCollapsed?: boolean;\n  onToggleCollapse?: () => void;\n  openSlideOver: (id: number, mode?: \"view\" | \"edit\") => void;\n  onDeleteOpportunity?: (opportunityId: number) => void;\n}\n\n/**\n * Custom comparison function for React.memo optimization\n * Compares props shallowly, with special handling for the opportunities array\n * to prevent unnecessary re-renders during drag-and-drop operations\n */\nfunction arePropsEqual(\n  prevProps: OpportunityColumnProps,\n  nextProps: OpportunityColumnProps\n): boolean {\n  // Quick reference equality checks for primitives and stable callbacks\n  if (prevProps.stage !== nextProps.stage) return false;\n  if (prevProps.isCollapsed !== nextProps.isCollapsed) return false;\n  if (prevProps.onToggleCollapse !== nextProps.onToggleCollapse) return false;\n  if (prevProps.openSlideOver !== nextProps.openSlideOver) return false;\n  if (prevProps.onDeleteOpportunity !== nextProps.onDeleteOpportunity) return false;\n\n  // Deep comparison for opportunities array\n  // Only re-render if the actual opportunity data changed\n  const prevOpps = prevProps.opportunities;\n  const nextOpps = nextProps.opportunities;\n\n  if (prevOpps.length !== nextOpps.length) return false;\n\n  // Compare opportunity IDs and ALL fields that affect card rendering\n  // (both collapsed header AND expanded details section)\n  for (let i = 0; i < prevOpps.length; i++) {\n    const prev = prevOpps[i];\n    const next = nextOpps[i];\n    if (\n      // Header (always visible)\n      prev.id !== next.id ||\n      prev.name !== next.name ||\n      prev.stage !== next.stage ||\n      prev.days_since_last_activity !== next.days_since_last_activity ||\n      // Expanded details section\n      prev.description !== next.description ||\n      prev.priority !== next.priority ||\n      prev.principal_organization_name !== next.principal_organization_name ||\n      prev.estimated_close_date !== next.estimated_close_date ||\n      prev.days_in_stage !== next.days_in_stage ||\n      prev.pending_task_count !== next.pending_task_count ||\n      prev.overdue_task_count !== next.overdue_task_count ||\n      // Products count (compare array length, not deep equality)\n      (prev.products?.length ?? 0) !== (next.products?.length ?? 0)\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * OpportunityColumn - A Kanban column for displaying opportunities in a specific stage\n *\n * Performance: Wrapped with React.memo and custom comparison to prevent re-renders\n * when other columns are being interacted with during drag-and-drop operations.\n */\nexport const OpportunityColumn = React.memo(function OpportunityColumn({\n  stage,\n  opportunities,\n  isCollapsed = false,\n  onToggleCollapse,\n  openSlideOver,\n  onDeleteOpportunity,\n}: OpportunityColumnProps) {\n  const metrics = useStageMetrics(opportunities);\n\n  // Map elevation levels to semantic shadow utilities (design system compliant)\n  // Uses shadow-elevation-* utilities defined in index.css, which map to --elevation-* tokens\n  const elevation = getOpportunityStageElevation(stage);\n  const shadowConfig = {\n    1: {\n      rest: \"shadow-elevation-1\",\n      hover: \"hover:shadow-elevation-2\",\n    },\n    2: {\n      rest: \"shadow-elevation-2\",\n      hover: \"hover:shadow-elevation-3\",\n    },\n    3: {\n      rest: \"shadow-elevation-3\",\n      hover: \"hover:shadow-elevation-3\",\n    },\n  }[elevation];\n\n  return (\n    <div\n      className={`\n  flex flex-col pb-4 bg-card border border-border rounded-xl shadow-col-inner\n  ${shadowConfig.rest} ${shadowConfig.hover}\n  transition-[box-shadow,border-color] duration-200 ease-in-out px-2\n  min-w-[260px] max-w-[300px]\n  md:min-w-[280px] md:max-w-[320px]\n  lg:min-w-[300px] lg:max-w-[340px]\n  h-full max-h-full overflow-hidden shrink-0\n`}\n      data-testid=\"kanban-column\"\n    >\n      <div className=\"flex items-center justify-between mb-2 pb-2 border-b border-border px-2 py-1.5\">\n        <div className=\"flex items-center gap-2\">\n          {onToggleCollapse && (\n            <button\n              onClick={onToggleCollapse}\n              className=\"min-h-[44px] min-w-[44px] flex items-center justify-center text-muted-foreground hover:text-foreground hover:bg-accent rounded transition-colors touch-manipulation focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2\"\n              aria-label={isCollapsed ? \"Expand column\" : \"Collapse column\"}\n              type=\"button\"\n            >\n              {isCollapsed ? \"\" : \"\"}\n            </button>\n          )}\n          <Tooltip>\n            <TooltipTrigger asChild>\n              <h2\n                className=\"font-semibold text-base text-foreground cursor-help\"\n                style={{ borderBottom: `2px solid ${getOpportunityStageColor(stage)}` }}\n              >\n                {getOpportunityStageLabel(stage)}\n              </h2>\n            </TooltipTrigger>\n            <TooltipContent\n              side=\"bottom\"\n              className=\"max-w-[320px] bg-popover text-popover-foreground border border-border shadow-lg\"\n            >\n              <div className=\"space-y-2 p-1\">\n                {/* Stage description */}\n                <p className=\"text-sm leading-relaxed\">{getOpportunityStageDescription(stage)}</p>\n                {/* MFB Phase mapping (PRD Section 7.4) */}\n                {getOpportunityMfbPhase(stage) && (\n                  <div className=\"pt-2 border-t border-border/50\">\n                    <p className=\"text-xs font-medium text-primary\">\n                       MFB {getOpportunityMfbPhase(stage)?.phase}:{\" \"}\n                      {getOpportunityMfbPhase(stage)?.name}\n                    </p>\n                    <p className=\"text-xs text-muted-foreground mt-0.5\">\n                      {getOpportunityMfbPhase(stage)?.context}\n                    </p>\n                  </div>\n                )}\n              </div>\n            </TooltipContent>\n          </Tooltip>\n          <span className=\"text-sm text-muted-foreground\">({metrics.count})</span>\n        </div>\n\n        {!isCollapsed && metrics.count > 0 && (\n          <div className=\"flex items-center gap-3 text-xs text-muted-foreground\">\n            <span title=\"Average days in this stage\">~{metrics.avgDaysInStage}d</span>\n            {metrics.stuckCount > 0 && (\n              <span\n                className=\"text-warning\"\n                title={`Opportunities stuck >${STUCK_THRESHOLD_DAYS} days`}\n              >\n                 {metrics.stuckCount}\n              </span>\n            )}\n          </div>\n        )}\n      </div>\n      {!isCollapsed && (\n        <>\n          <div className=\"mb-2 px-1\">\n            <QuickAddOpportunity stage={stage} />\n          </div>\n          <Droppable droppableId={stage}>\n            {(provided, snapshot) => (\n              <div\n                ref={provided.innerRef}\n                {...provided.droppableProps}\n                className={`flex flex-col flex-1 rounded-xl mt-1 gap-1.5 pb-2 min-h-[80px] overflow-y-auto overflow-x-hidden transition-colors px-1 ${\n                  snapshot.isDraggingOver ? \"bg-accent\" : \"\"\n                }`}\n              >\n                {opportunities.map((opportunity, index) => (\n                  <RecordContextProvider key={opportunity.id} value={opportunity}>\n                    <OpportunityCard\n                      index={index}\n                      openSlideOver={openSlideOver}\n                      onDelete={onDeleteOpportunity}\n                    />\n                  </RecordContextProvider>\n                ))}\n                {provided.placeholder}\n              </div>\n            )}\n          </Droppable>\n        </>\n      )}\n    </div>\n  );\n}, arePropsEqual);\n","import type { Opportunity } from \"../../types\";\nimport { OPPORTUNITY_STAGES } from \"./stageConstants\";\n\nexport type OpportunitiesByStage = Record<Opportunity[\"stage\"], Opportunity[]>;\n\nexport const getOpportunitiesByStage = (\n  unorderedOpportunities: Opportunity[],\n  opportunityStages?: { value: string; label: string }[]\n) => {\n  // Use centralized stages if no stages provided\n  const stages =\n    opportunityStages ||\n    OPPORTUNITY_STAGES.map((stage) => ({\n      value: stage.value,\n      label: stage.label,\n    }));\n\n  if (!stages.length) return {};\n\n  const opportunitiesByStage: Record<Opportunity[\"stage\"], Opportunity[]> =\n    unorderedOpportunities.reduce(\n      (acc, opportunity) => {\n        if (acc[opportunity.stage]) {\n          acc[opportunity.stage].push(opportunity);\n        }\n        return acc;\n      },\n      stages.reduce(\n        (obj, stage) => ({ ...obj, [stage.value]: [] }),\n        {} as Record<Opportunity[\"stage\"], Opportunity[]>\n      )\n    );\n  // Sort each column by created_at DESC (newest first)\n  stages.forEach((stage) => {\n    if (opportunitiesByStage[stage.value]) {\n      opportunitiesByStage[stage.value] = opportunitiesByStage[stage.value].sort(\n        (recordA: Opportunity, recordB: Opportunity) =>\n          new Date(recordB.created_at).getTime() - new Date(recordA.created_at).getTime()\n      );\n    }\n  });\n  return opportunitiesByStage;\n};\n","import { useState, useEffect } from \"react\";\nimport type { OpportunityStageValue } from \"../types\";\nimport { OPPORTUNITY_STAGES } from \"../constants/stageConstants\";\n\nconst COLLAPSED_KEY = \"opportunity.kanban.collapsed_stages\";\nconst VISIBLE_KEY = \"opportunity.kanban.visible_stages\";\n\nexport function useColumnPreferences() {\n  const allStages = OPPORTUNITY_STAGES.map((s) => s.value);\n\n  const [collapsedStages, setCollapsedStages] = useState<OpportunityStageValue[]>(() => {\n    const stored = localStorage.getItem(COLLAPSED_KEY);\n    return stored ? JSON.parse(stored) : [];\n  });\n\n  const [visibleStages, setVisibleStages] = useState<OpportunityStageValue[]>(() => {\n    const stored = localStorage.getItem(VISIBLE_KEY);\n    return stored ? JSON.parse(stored) : allStages;\n  });\n\n  useEffect(() => {\n    localStorage.setItem(COLLAPSED_KEY, JSON.stringify(collapsedStages));\n  }, [collapsedStages]);\n\n  useEffect(() => {\n    localStorage.setItem(VISIBLE_KEY, JSON.stringify(visibleStages));\n  }, [visibleStages]);\n\n  const toggleCollapse = (stage: OpportunityStageValue) => {\n    setCollapsedStages((prev) =>\n      prev.includes(stage) ? prev.filter((s) => s !== stage) : [...prev, stage]\n    );\n  };\n\n  const toggleVisibility = (stage: OpportunityStageValue) => {\n    setVisibleStages((prev) =>\n      prev.includes(stage) ? prev.filter((s) => s !== stage) : [...prev, stage]\n    );\n  };\n\n  const collapseAll = () => {\n    setCollapsedStages(allStages);\n  };\n\n  const expandAll = () => {\n    setCollapsedStages([]);\n  };\n\n  return {\n    collapsedStages,\n    visibleStages,\n    toggleCollapse,\n    toggleVisibility,\n    collapseAll,\n    expandAll,\n  };\n}\n","import { useState, useRef, useEffect } from \"react\";\nimport { Settings2 } from \"lucide-react\";\nimport { OPPORTUNITY_STAGES } from \"../constants/stageConstants\";\nimport type { OpportunityStageValue } from \"../../types\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\n\ninterface ColumnCustomizationMenuProps {\n  visibleStages: OpportunityStageValue[];\n  toggleVisibility: (stage: OpportunityStageValue) => void;\n  collapseAll: () => void;\n  expandAll: () => void;\n}\n\nexport function ColumnCustomizationMenu({\n  visibleStages,\n  toggleVisibility,\n  collapseAll,\n  expandAll,\n}: ColumnCustomizationMenuProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    }\n\n    if (isOpen) {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n    }\n\n    // Always cleanup, even if component unmounts while closed\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, [isOpen]);\n\n  return (\n    <div className=\"relative\" ref={menuRef}>\n      <button\n        type=\"button\"\n        aria-label=\"Customize columns\"\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"h-8 w-8 flex items-center justify-center text-muted-foreground hover:text-foreground bg-card/80 backdrop-blur-sm border border-border rounded-md hover:bg-accent transition-colors shadow-sm\"\n      >\n        <Settings2 className=\"w-4 h-4\" />\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute right-0 top-full mt-1 w-64 bg-popover border border-border rounded-md shadow-lg z-50\">\n          <div className=\"py-2\">\n            <div className=\"px-4 py-2 border-b border-border flex gap-2\">\n              <button\n                onClick={() => {\n                  collapseAll();\n                  setIsOpen(false);\n                }}\n                className=\"min-h-[44px] px-3 text-sm text-primary hover:bg-accent rounded transition-colors touch-manipulation\"\n              >\n                Collapse All\n              </button>\n              <button\n                onClick={() => {\n                  expandAll();\n                  setIsOpen(false);\n                }}\n                className=\"min-h-[44px] px-3 text-sm text-primary hover:bg-accent rounded transition-colors touch-manipulation\"\n              >\n                Expand All\n              </button>\n            </div>\n\n            <div className=\"px-4 py-2\">\n              <p className=\"text-xs font-medium text-muted-foreground mb-2\">Visible Stages</p>\n              {OPPORTUNITY_STAGES.map((stage) => (\n                <label\n                  key={stage.value}\n                  className=\"flex items-center gap-3 min-h-[44px] cursor-pointer hover:bg-accent rounded px-1 -mx-1 transition-colors\"\n                >\n                  <Checkbox\n                    id={`stage-${stage.value}`}\n                    checked={visibleStages.includes(stage.value)}\n                    onCheckedChange={() => toggleVisibility(stage.value)}\n                  />\n                  <span className=\"text-sm select-none\">{stage.label}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","// es-toolkit: Deep object equality comparison\nimport { isEqual } from \"es-toolkit\";\nimport { useListContext, useUpdate, useNotify, useRefresh } from \"ra-core\";\nimport { useEffect, useState, useCallback } from \"react\";\nimport {\n  DragDropContext,\n  type DropResult,\n  type DragStart,\n  type DragUpdate,\n  type ResponderProvided,\n} from \"@hello-pangea/dnd\";\n\nimport type { Opportunity } from \"../../types\";\nimport { OpportunityColumn } from \"./OpportunityColumn\";\nimport { OPPORTUNITY_STAGES_LEGACY, getOpportunityStageLabel } from \"../constants/stageConstants\";\nimport type { OpportunitiesByStage } from \"../constants/stages\";\nimport { getOpportunitiesByStage } from \"../constants/stages\";\nimport { useColumnPreferences } from \"../hooks/useColumnPreferences\";\nimport { ColumnCustomizationMenu } from \"./ColumnCustomizationMenu\";\nimport { CloseOpportunityModal } from \"../components/CloseOpportunityModal\";\nimport type { CloseOpportunityInput } from \"@/atomic-crm/validation/opportunities\";\n\ninterface OpportunityListContentProps {\n  openSlideOver: (id: number, mode?: \"view\" | \"edit\") => void;\n  /** Currently open slide-over ID (to close on delete) */\n  slideOverId?: number | null;\n  /** Callback to close the slide-over */\n  closeSlideOver?: () => void;\n}\n\n/**\n * State for pending close modal - stores drag data while modal is open\n */\ninterface PendingCloseData {\n  opportunityId: string;\n  opportunityName: string;\n  targetStage: \"closed_won\" | \"closed_lost\";\n  sourceStage: string;\n  previousState: OpportunitiesByStage;\n  draggedItem: Opportunity;\n}\n\nexport const OpportunityListContent = ({\n  openSlideOver,\n  slideOverId,\n  closeSlideOver,\n}: OpportunityListContentProps) => {\n  const allOpportunityStages = OPPORTUNITY_STAGES_LEGACY;\n\n  const { data: unorderedOpportunities, isPending, filterValues } = useListContext<Opportunity>();\n\n  const [update] = useUpdate();\n  const notify = useNotify();\n  const refresh = useRefresh();\n\n  // State for CloseOpportunityModal\n  const [showCloseModal, setShowCloseModal] = useState(false);\n  const [pendingCloseData, setPendingCloseData] = useState<PendingCloseData | null>(null);\n  const [isClosing, setIsClosing] = useState(false);\n\n  const {\n    collapsedStages,\n    visibleStages: userVisibleStages,\n    toggleCollapse,\n    toggleVisibility,\n    collapseAll,\n    expandAll,\n  } = useColumnPreferences();\n\n  // Filter stages based on active filter and user preferences\n  const visibleStages =\n    filterValues?.stage && Array.isArray(filterValues.stage) && filterValues.stage.length > 0\n      ? allOpportunityStages.filter(\n          (stage) =>\n            filterValues.stage.includes(stage.value) && userVisibleStages.includes(stage.value)\n        )\n      : allOpportunityStages.filter((stage) => userVisibleStages.includes(stage.value));\n\n  const [opportunitiesByStage, setOpportunitiesByStage] = useState<OpportunitiesByStage>(\n    getOpportunitiesByStage([], allOpportunityStages)\n  );\n\n  useEffect(() => {\n    if (unorderedOpportunities) {\n      const newOpportunitiesByStage = getOpportunitiesByStage(\n        unorderedOpportunities,\n        allOpportunityStages\n      );\n      if (!isEqual(newOpportunitiesByStage, opportunitiesByStage)) {\n        setOpportunitiesByStage(newOpportunitiesByStage);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [unorderedOpportunities]);\n\n  /**\n   * Perform the actual stage update after modal confirmation (or for non-close stages)\n   */\n  const performStageUpdate = useCallback(\n    (\n      opportunityId: string,\n      newStage: string,\n      previousState: OpportunitiesByStage,\n      draggedItem: Opportunity,\n      additionalData?: Partial<CloseOpportunityInput>\n    ) => {\n      update(\n        \"opportunities\",\n        {\n          id: opportunityId,\n          data: { stage: newStage, ...additionalData },\n          previousData: draggedItem,\n        },\n        {\n          onSuccess: () => {\n            notify(`Moved to ${getOpportunityStageLabel(newStage)}`, {\n              type: \"success\",\n            });\n          },\n          onError: () => {\n            notify(\"Error: Could not move opportunity. Reverting.\", {\n              type: \"warning\",\n            });\n            setOpportunitiesByStage(previousState);\n          },\n        }\n      );\n    },\n    [update, notify]\n  );\n\n  /**\n   * Handle confirmation from CloseOpportunityModal\n   */\n  const handleCloseConfirm = useCallback(\n    (data: CloseOpportunityInput) => {\n      if (!pendingCloseData) return;\n\n      setIsClosing(true);\n\n      performStageUpdate(\n        pendingCloseData.opportunityId,\n        pendingCloseData.targetStage,\n        pendingCloseData.previousState,\n        pendingCloseData.draggedItem,\n        {\n          win_reason: data.win_reason,\n          loss_reason: data.loss_reason,\n          close_reason_notes: data.close_reason_notes,\n        }\n      );\n\n      setIsClosing(false);\n      setShowCloseModal(false);\n      setPendingCloseData(null);\n    },\n    [pendingCloseData, performStageUpdate]\n  );\n\n  /**\n   * Handle modal cancel - revert to previous state\n   */\n  const handleCloseCancel = useCallback(\n    (open: boolean) => {\n      if (!open && pendingCloseData) {\n        // Modal was closed/cancelled - revert the optimistic update\n        setOpportunitiesByStage(pendingCloseData.previousState);\n        notify(\"Stage change cancelled\", { type: \"info\" });\n      }\n      setShowCloseModal(open);\n      if (!open) {\n        setPendingCloseData(null);\n      }\n    },\n    [pendingCloseData, notify]\n  );\n\n  /**\n   * Handle opportunity deletion - optimistically remove from local state\n   * This ensures the card is immediately removed from the Kanban board\n   * without waiting for a full data refresh.\n   *\n   * Also closes the slide-over if the deleted opportunity was being viewed\n   * to prevent stale popovers from appearing.\n   */\n  const handleDeleteOpportunity = useCallback(\n    (opportunityId: number) => {\n      // Close slide-over if viewing the deleted opportunity\n      if (slideOverId === opportunityId && closeSlideOver) {\n        closeSlideOver();\n      }\n\n      setOpportunitiesByStage((prevState) => {\n        const newState = { ...prevState };\n        // Find and remove the opportunity from whichever stage it's in\n        for (const stage of Object.keys(newState)) {\n          const stageOpps = newState[stage];\n          const filteredOpps = stageOpps.filter((opp) => opp.id !== opportunityId);\n          if (filteredOpps.length !== stageOpps.length) {\n            newState[stage] = filteredOpps;\n            break; // Found and removed, no need to check other stages\n          }\n        }\n        return newState;\n      });\n      // Also trigger a refresh to ensure data consistency\n      refresh();\n    },\n    [refresh, slideOverId, closeSlideOver]\n  );\n\n  const handleDragStart = useCallback(\n    (start: DragStart, provided: ResponderProvided) => {\n      const sourceStage = start.source.droppableId;\n      const draggedItem = opportunitiesByStage[sourceStage]?.find(\n        (opp) => opp.id.toString() === start.draggableId\n      );\n\n      if (draggedItem) {\n        const stageName = getOpportunityStageLabel(sourceStage);\n        provided.announce(`Picked up ${draggedItem.name}. Currently in ${stageName} stage.`);\n      }\n    },\n    [opportunitiesByStage]\n  );\n\n  const handleDragUpdate = useCallback((update: DragUpdate, provided: ResponderProvided) => {\n    if (update.destination) {\n      const stageName = getOpportunityStageLabel(update.destination.droppableId);\n      provided.announce(`Moving to ${stageName} stage, position ${update.destination.index + 1}`);\n    }\n  }, []);\n\n  const handleDragEnd = (result: DropResult, provided: ResponderProvided) => {\n    const { destination, source, draggableId } = result;\n\n    // Dropped outside a valid droppable\n    if (!destination) {\n      provided.announce(\"Drag cancelled. Returned to original position.\");\n      return;\n    }\n\n    // Dropped in the same position\n    if (destination.droppableId === source.droppableId && destination.index === source.index) {\n      provided.announce(\"Dropped in original position.\");\n      return;\n    }\n\n    const sourceColId = source.droppableId;\n    const destColId = destination.droppableId;\n\n    // Store previous state for rollback on API error\n    const previousState = opportunitiesByStage;\n\n    const sourceCol = previousState[sourceColId];\n    const destCol = previousState[destColId];\n    const draggedItem = sourceCol.find((opp) => opp.id.toString() === draggableId);\n\n    if (!draggedItem) {\n      return;\n    }\n\n    // --- Optimistic UI Update ---\n    const newOpportunitiesByStage = { ...previousState };\n\n    // Remove item from the source column\n    const newSourceCol = Array.from(sourceCol);\n    newSourceCol.splice(source.index, 1);\n    newOpportunitiesByStage[sourceColId] = newSourceCol;\n\n    // Add item to the destination column\n    // Note: If moving in the same column, newSourceCol already has the item removed.\n    const newDestCol = sourceColId === destColId ? newSourceCol : Array.from(destCol);\n    newDestCol.splice(destination.index, 0, { ...draggedItem, stage: destColId });\n    newOpportunitiesByStage[destColId] = newDestCol;\n\n    setOpportunitiesByStage(newOpportunitiesByStage);\n    // --- End Optimistic UI Update ---\n\n    // Announce successful drop\n    const stageName = getOpportunityStageLabel(destColId);\n    provided.announce(`Dropped in ${stageName} stage at position ${destination.index + 1}`);\n\n    // Check if dropping into a closed stage - show modal to collect reason\n    if (destColId === \"closed_won\" || destColId === \"closed_lost\") {\n      setPendingCloseData({\n        opportunityId: draggableId,\n        opportunityName: draggedItem.name,\n        targetStage: destColId,\n        sourceStage: sourceColId,\n        previousState,\n        draggedItem,\n      });\n      setShowCloseModal(true);\n      return; // Don't call update yet - wait for modal confirmation\n    }\n\n    // --- API Call for non-close stages ---\n    performStageUpdate(draggableId, destColId, previousState, draggedItem);\n  };\n\n  if (isPending) return null;\n\n  // Use flex column with min-h-0 and flex-1 to fill remaining height\n  // Kanban board: horizontal scroll for columns, each column scrolls vertically for cards\n  return (\n    <div className=\"flex min-h-0 flex-1 flex-col h-full\">\n      <DragDropContext\n        onDragStart={handleDragStart}\n        onDragUpdate={handleDragUpdate}\n        onDragEnd={handleDragEnd}\n      >\n        {/* Tighter layout: reduced padding p-3, smaller gap-3 between columns */}\n        <div\n          className=\"flex min-h-0 flex-1 gap-3 overflow-x-auto overflow-y-hidden p-3 bg-muted rounded-2xl border border-border shadow-inner\"\n          data-testid=\"kanban-board\"\n          data-tutorial=\"opp-kanban-board\"\n          role=\"region\"\n          aria-label=\"Opportunities pipeline board\"\n        >\n          {visibleStages.map((stage) => (\n            <OpportunityColumn\n              stage={stage.value}\n              opportunities={opportunitiesByStage[stage.value]}\n              key={stage.value}\n              isCollapsed={collapsedStages.includes(stage.value)}\n              onToggleCollapse={() => toggleCollapse(stage.value)}\n              openSlideOver={openSlideOver}\n              onDeleteOpportunity={handleDeleteOpportunity}\n            />\n          ))}\n          {/* Settings button at end of columns - scroll right to access */}\n          <div className=\"flex items-start pt-1 shrink-0\">\n            <ColumnCustomizationMenu\n              visibleStages={userVisibleStages}\n              toggleVisibility={toggleVisibility}\n              collapseAll={collapseAll}\n              expandAll={expandAll}\n            />\n          </div>\n        </div>\n      </DragDropContext>\n\n      {/* CloseOpportunityModal - shown when dragging to closed_won or closed_lost */}\n      {pendingCloseData && (\n        <CloseOpportunityModal\n          open={showCloseModal}\n          onOpenChange={handleCloseCancel}\n          opportunityId={pendingCloseData.opportunityId}\n          opportunityName={pendingCloseData.opportunityName}\n          targetStage={pendingCloseData.targetStage}\n          onConfirm={handleCloseConfirm}\n          isSubmitting={isClosing}\n        />\n      )}\n    </div>\n  );\n};\n","import { useCallback } from \"react\";\nimport { useNotify } from \"ra-core\";\nimport type { Opportunity } from \"../../types\";\nimport { getOpportunityStageLabel } from \"../constants/stageConstants\";\nimport { format } from \"date-fns\";\nimport { parseDateSafely } from \"@/lib/date-utils\";\n\nexport const useExportOpportunities = () => {\n  const notify = useNotify();\n\n  const exportToCSV = useCallback(\n    (opportunities: Opportunity[], filename?: string) => {\n      if (!opportunities || opportunities.length === 0) {\n        notify(\"No opportunities to export\", { type: \"warning\" });\n        return;\n      }\n\n      try {\n        // Define CSV columns - Principal is prominently positioned (3rd column)\n        const headers = [\n          \"Name\",\n          \"Customer Organization\",\n          \" Principal Organization\", // Prominent with star\n          \"Distributor Organization\",\n          \"Stage\",\n          \"Status\",\n          \"Priority\",\n          \"Estimated Close Date\",\n          \"Description\",\n          \"Campaign\",\n          \"Related Opportunity\",\n          \"Tags\",\n          \"Interactions\",\n          \"Last Interaction\",\n          \"Days in Stage\",\n          \"Created Date\",\n        ];\n\n        // Convert opportunities to CSV rows\n        const rows = opportunities.map((opp) => [\n          opp.name || \"\",\n          opp.customer_organization_name || \"\",\n          opp.principal_organization_name || \"\", //  Principal prominently positioned\n          opp.distributor_organization_name || \"\",\n          getOpportunityStageLabel(opp.stage) || \"\",\n          opp.status || \"\",\n          opp.priority || \"\",\n          opp.estimated_close_date && parseDateSafely(opp.estimated_close_date)\n            ? format(parseDateSafely(opp.estimated_close_date)!, \"yyyy-MM-dd\")\n            : \"\",\n          opp.description || \"\",\n          opp.campaign || \"\",\n          opp.related_opportunity_id ? `ID: ${opp.related_opportunity_id}` : \"\",\n          opp.tags ? opp.tags.join(\"; \") : \"\",\n          opp.nb_interactions?.toString() || \"0\",\n          opp.last_interaction_date && parseDateSafely(opp.last_interaction_date)\n            ? format(parseDateSafely(opp.last_interaction_date)!, \"yyyy-MM-dd\")\n            : \"\",\n          opp.days_in_stage?.toString() || \"\",\n          opp.created_at && parseDateSafely(opp.created_at)\n            ? format(parseDateSafely(opp.created_at)!, \"yyyy-MM-dd\")\n            : \"\",\n        ]);\n\n        // Combine headers and rows\n        const csvContent = [\n          headers.join(\",\"),\n          ...rows.map((row) =>\n            row\n              .map((cell) => {\n                // Escape cells containing commas, quotes, or newlines\n                const cellStr = String(cell);\n                if (cellStr.includes(\",\") || cellStr.includes('\"') || cellStr.includes(\"\\n\")) {\n                  return `\"${cellStr.replace(/\"/g, '\"\"')}\"`;\n                }\n                return cellStr;\n              })\n              .join(\",\")\n          ),\n        ].join(\"\\n\");\n\n        // Create and trigger download\n        const blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8;\" });\n        const link = document.createElement(\"a\");\n        const url = URL.createObjectURL(blob);\n\n        link.setAttribute(\"href\", url);\n        const defaultFilename = `opportunities_export_${format(new Date(), \"yyyy-MM-dd\")}.csv`;\n        link.setAttribute(\"download\", filename || defaultFilename);\n        link.style.visibility = \"hidden\";\n\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        notify(\n          `Exported ${opportunities.length} opportunit${opportunities.length === 1 ? \"y\" : \"ies\"} to CSV`,\n          {\n            type: \"success\",\n          }\n        );\n      } catch (_error) {\n        notify(\"Failed to export opportunities\", { type: \"error\" });\n      }\n    },\n    [notify]\n  );\n\n  return { exportToCSV };\n};\n","import { useState, useCallback } from \"react\";\nimport { useNotify, useRefresh, useDataProvider } from \"ra-core\";\nimport type { Opportunity } from \"../types\";\n\nexport type BulkAction = \"change_stage\" | \"change_status\" | \"assign_owner\" | \"archive\" | null;\n\nexport interface UseBulkActionsStateOptions {\n  selectedIds: (string | number)[];\n  opportunities: Opportunity[];\n  onUnselectItems: () => void;\n  resource?: string;\n}\n\nexport interface UseBulkActionsStateResult {\n  activeAction: BulkAction;\n  setActiveAction: (action: BulkAction) => void;\n\n  selectedStage: string;\n  setSelectedStage: (stage: string) => void;\n  selectedStatus: string;\n  setSelectedStatus: (status: string) => void;\n  selectedOwner: string;\n  setSelectedOwner: (owner: string) => void;\n\n  isProcessing: boolean;\n\n  handleOpenDialog: (action: BulkAction) => void;\n  handleCloseDialog: () => void;\n  handleExecuteBulkAction: () => Promise<void>;\n  handleBulkArchive: () => Promise<void>;\n  canExecute: () => boolean;\n}\n\nexport function useBulkActionsState({\n  selectedIds,\n  opportunities,\n  onUnselectItems,\n  resource = \"opportunities\",\n}: UseBulkActionsStateOptions): UseBulkActionsStateResult {\n  const [activeAction, setActiveAction] = useState<BulkAction>(null);\n  const [selectedStage, setSelectedStage] = useState<string>(\"\");\n  const [selectedStatus, setSelectedStatus] = useState<string>(\"\");\n  const [selectedOwner, setSelectedOwner] = useState<string>(\"\");\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  const notify = useNotify();\n  const refresh = useRefresh();\n  const dataProvider = useDataProvider();\n\n  const handleOpenDialog = useCallback((action: BulkAction) => {\n    setActiveAction(action);\n    setSelectedStage(\"\");\n    setSelectedStatus(\"\");\n    setSelectedOwner(\"\");\n  }, []);\n\n  const handleCloseDialog = useCallback(() => {\n    setActiveAction(null);\n    setSelectedStage(\"\");\n    setSelectedStatus(\"\");\n    setSelectedOwner(\"\");\n  }, []);\n\n  const handleExecuteBulkAction = useCallback(async () => {\n    if (!activeAction) return;\n\n    setIsProcessing(true);\n    let successCount = 0;\n    let failureCount = 0;\n\n    try {\n      let updateData: Partial<Opportunity> = {};\n\n      if (activeAction === \"change_stage\" && selectedStage) {\n        updateData = { stage: selectedStage as any, stage_manual: true };\n      } else if (activeAction === \"change_status\" && selectedStatus) {\n        updateData = { status: selectedStatus as any, status_manual: true };\n      } else if (activeAction === \"assign_owner\" && selectedOwner) {\n        updateData = { opportunity_owner_id: parseInt(selectedOwner) };\n      }\n\n      for (const id of selectedIds) {\n        try {\n          await dataProvider.update(resource, {\n            id,\n            data: updateData,\n            previousData: opportunities.find((opp) => opp.id === id),\n          });\n          successCount++;\n        } catch (_error) {\n          failureCount++;\n        }\n      }\n\n      if (successCount > 0) {\n        notify(\n          `Successfully updated ${successCount} opportunit${successCount === 1 ? \"y\" : \"ies\"}`,\n          {\n            type: \"success\",\n          }\n        );\n      }\n      if (failureCount > 0) {\n        notify(`Failed to update ${failureCount} opportunit${failureCount === 1 ? \"y\" : \"ies\"}`, {\n          type: \"error\",\n        });\n      }\n\n      refresh();\n      onUnselectItems();\n      handleCloseDialog();\n    } catch (error) {\n      notify(\"Bulk action failed\", { type: \"error\" });\n      console.error(\"Bulk action error:\", error);\n    } finally {\n      setIsProcessing(false);\n    }\n  }, [\n    activeAction,\n    selectedStage,\n    selectedStatus,\n    selectedOwner,\n    selectedIds,\n    resource,\n    dataProvider,\n    opportunities,\n    notify,\n    refresh,\n    onUnselectItems,\n    handleCloseDialog,\n  ]);\n\n  const handleBulkArchive = useCallback(async () => {\n    setIsProcessing(true);\n\n    try {\n      await dataProvider.deleteMany(resource, { ids: selectedIds });\n\n      notify(\n        `Successfully archived ${selectedIds.length} opportunit${selectedIds.length === 1 ? \"y\" : \"ies\"}`,\n        { type: \"success\" }\n      );\n\n      refresh();\n      onUnselectItems();\n      handleCloseDialog();\n    } catch (error) {\n      notify(\n        `Failed to archive opportunities: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n        { type: \"error\" }\n      );\n    } finally {\n      setIsProcessing(false);\n    }\n  }, [selectedIds, resource, dataProvider, notify, refresh, onUnselectItems, handleCloseDialog]);\n\n  const canExecute = useCallback(() => {\n    if (activeAction === \"change_stage\") return !!selectedStage;\n    if (activeAction === \"change_status\") return !!selectedStatus;\n    if (activeAction === \"assign_owner\") return !!selectedOwner;\n    return false;\n  }, [activeAction, selectedStage, selectedStatus, selectedOwner]);\n\n  return {\n    activeAction,\n    setActiveAction,\n    selectedStage,\n    setSelectedStage,\n    selectedStatus,\n    setSelectedStatus,\n    selectedOwner,\n    setSelectedOwner,\n    isProcessing,\n    handleOpenDialog,\n    handleCloseDialog,\n    handleExecuteBulkAction,\n    handleBulkArchive,\n    canExecute,\n  };\n}\n","import { useGetList } from \"ra-core\";\nimport { Button } from \"@/components/ui/button\";\nimport { useBulkActionsState } from \"./hooks\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  CheckCircle2,\n  XCircle,\n  Layers,\n  CircleDot,\n  UserPlus,\n  Download,\n  Archive,\n  AlertTriangle,\n} from \"lucide-react\";\nimport type { Opportunity } from \"../types\";\nimport {\n  OPPORTUNITY_STAGES,\n  getOpportunityStageLabel,\n  getOpportunityStageColor,\n} from \"./constants/stageConstants\";\nimport { useExportOpportunities } from \"./hooks/useExportOpportunities\";\n\ninterface BulkActionsToolbarProps {\n  selectedIds: (string | number)[];\n  opportunities: Opportunity[];\n  onUnselectItems: () => void;\n}\n\nconst STATUS_OPTIONS = [\n  { value: \"active\", label: \"Active\", icon: CheckCircle2, variant: \"default\" as const },\n  { value: \"on_hold\", label: \"On Hold\", icon: CircleDot, variant: \"secondary\" as const },\n  { value: \"nurturing\", label: \"Nurturing\", icon: CircleDot, variant: \"secondary\" as const },\n  { value: \"stalled\", label: \"Stalled\", icon: XCircle, variant: \"outline\" as const },\n  { value: \"expired\", label: \"Expired\", icon: XCircle, variant: \"destructive\" as const },\n];\n\nexport const BulkActionsToolbar = ({\n  selectedIds,\n  opportunities,\n  onUnselectItems,\n}: BulkActionsToolbarProps) => {\n  const {\n    activeAction,\n    selectedStage,\n    setSelectedStage,\n    selectedStatus,\n    setSelectedStatus,\n    selectedOwner,\n    setSelectedOwner,\n    isProcessing,\n    handleOpenDialog,\n    handleCloseDialog,\n    handleExecuteBulkAction,\n    handleBulkArchive,\n    canExecute,\n  } = useBulkActionsState({\n    selectedIds,\n    opportunities,\n    onUnselectItems,\n  });\n  const { exportToCSV } = useExportOpportunities();\n\n  // Fetch sales list for owner assignment\n  const { data: salesList } = useGetList(\"sales\", {\n    pagination: { page: 1, perPage: 100 },\n    sort: { field: \"last_name\", order: \"ASC\" },\n  });\n\n  // Get selected opportunities\n  const selectedOpportunities = opportunities.filter((opp) => selectedIds.includes(opp.id));\n\n  const handleExport = () => {\n    exportToCSV(selectedOpportunities);\n  };\n\n  if (selectedIds.length === 0) return null;\n\n  return (\n    <>\n      <div className=\"mb-3 flex flex-wrap items-center gap-2 rounded-lg border border-border bg-muted/30 px-4 py-3\">\n        <span className=\"text-sm font-medium text-muted-foreground\">Bulk Actions:</span>\n\n        <Button\n          variant=\"outline\"\n          onClick={() => handleOpenDialog(\"change_stage\")}\n          className=\"h-11 gap-2 touch-manipulation\"\n        >\n          <Layers className=\"h-4 w-4\" />\n          Change Stage\n        </Button>\n\n        <Button\n          variant=\"outline\"\n          onClick={() => handleOpenDialog(\"change_status\")}\n          className=\"h-11 gap-2 touch-manipulation\"\n        >\n          <CircleDot className=\"h-4 w-4\" />\n          Change Status\n        </Button>\n\n        <Button\n          variant=\"outline\"\n          onClick={() => handleOpenDialog(\"assign_owner\")}\n          className=\"h-11 gap-2 touch-manipulation\"\n        >\n          <UserPlus className=\"h-4 w-4\" />\n          Assign Owner\n        </Button>\n\n        {/* Destructive actions - right side */}\n        <div className=\"ml-auto flex items-center gap-2\">\n          <Button\n            variant=\"default\"\n            onClick={handleExport}\n            className=\"h-11 gap-2 touch-manipulation\"\n          >\n            <Download className=\"h-4 w-4\" />\n            Export CSV\n          </Button>\n          <Button\n            variant=\"destructive\"\n            onClick={() => handleOpenDialog(\"archive\")}\n            className=\"h-11 gap-2 touch-manipulation\"\n          >\n            <Archive className=\"h-4 w-4\" />\n            Archive Selected\n          </Button>\n        </div>\n      </div>\n\n      {/* Change Stage Dialog */}\n      <Dialog\n        open={activeAction === \"change_stage\"}\n        onOpenChange={(open) => !open && handleCloseDialog()}\n      >\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Change Stage</DialogTitle>\n            <DialogDescription>\n              Update the stage for {selectedIds.length} selected opportunit\n              {selectedIds.length === 1 ? \"y\" : \"ies\"}\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4\">\n            {/* Show affected opportunities */}\n            <div className=\"rounded-lg border border-border bg-muted/50 p-3 max-h-40 overflow-y-auto\">\n              <p className=\"text-xs font-medium text-muted-foreground mb-2\">\n                Affected opportunities:\n              </p>\n              <div className=\"space-y-1\">\n                {selectedOpportunities.map((opp) => (\n                  <div key={opp.id} className=\"text-sm flex items-center justify-between\">\n                    <span className=\"truncate\">{opp.name}</span>\n                    <Badge\n                      className=\"ml-2 text-xs shrink-0\"\n                      style={{ backgroundColor: getOpportunityStageColor(opp.stage) }}\n                    >\n                      {getOpportunityStageLabel(opp.stage)}\n                    </Badge>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Stage selector */}\n            <div className=\"space-y-2\">\n              <label htmlFor=\"bulk-stage-select\" className=\"text-sm font-medium\">\n                New Stage\n              </label>\n              <Select value={selectedStage} onValueChange={setSelectedStage}>\n                <SelectTrigger id=\"bulk-stage-select\">\n                  <SelectValue placeholder=\"Select a stage\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {OPPORTUNITY_STAGES.map((stage) => (\n                    <SelectItem key={stage.value} value={stage.value}>\n                      {stage.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={handleCloseDialog} disabled={isProcessing}>\n              Cancel\n            </Button>\n            <Button onClick={handleExecuteBulkAction} disabled={!canExecute() || isProcessing}>\n              {isProcessing ? \"Updating...\" : \"Update Stage\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Change Status Dialog */}\n      <Dialog\n        open={activeAction === \"change_status\"}\n        onOpenChange={(open) => !open && handleCloseDialog()}\n      >\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Change Status</DialogTitle>\n            <DialogDescription>\n              Update the status for {selectedIds.length} selected opportunit\n              {selectedIds.length === 1 ? \"y\" : \"ies\"}\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4\">\n            {/* Show affected opportunities */}\n            <div className=\"rounded-lg border border-border bg-muted/50 p-3 max-h-40 overflow-y-auto\">\n              <p className=\"text-xs font-medium text-muted-foreground mb-2\">\n                Affected opportunities:\n              </p>\n              <div className=\"space-y-1\">\n                {selectedOpportunities.map((opp) => (\n                  <div key={opp.id} className=\"text-sm flex items-center justify-between\">\n                    <span className=\"truncate\">{opp.name}</span>\n                    <Badge variant=\"secondary\" className=\"ml-2 text-xs shrink-0\">\n                      {opp.status}\n                    </Badge>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Status selector */}\n            <div className=\"space-y-2\">\n              <label htmlFor=\"bulk-status-select\" className=\"text-sm font-medium\">\n                New Status\n              </label>\n              <Select value={selectedStatus} onValueChange={setSelectedStatus}>\n                <SelectTrigger id=\"bulk-status-select\">\n                  <SelectValue placeholder=\"Select a status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {STATUS_OPTIONS.map((status) => (\n                    <SelectItem key={status.value} value={status.value}>\n                      {status.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={handleCloseDialog} disabled={isProcessing}>\n              Cancel\n            </Button>\n            <Button onClick={handleExecuteBulkAction} disabled={!canExecute() || isProcessing}>\n              {isProcessing ? \"Updating...\" : \"Update Status\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Assign Owner Dialog */}\n      <Dialog\n        open={activeAction === \"assign_owner\"}\n        onOpenChange={(open) => !open && handleCloseDialog()}\n      >\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Assign Owner</DialogTitle>\n            <DialogDescription>\n              Assign an owner to {selectedIds.length} selected opportunit\n              {selectedIds.length === 1 ? \"y\" : \"ies\"}\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4\">\n            {/* Show affected opportunities */}\n            <div className=\"rounded-lg border border-border bg-muted/50 p-3 max-h-40 overflow-y-auto\">\n              <p className=\"text-xs font-medium text-muted-foreground mb-2\">\n                Affected opportunities:\n              </p>\n              <div className=\"space-y-1\">\n                {selectedOpportunities.map((opp) => (\n                  <div key={opp.id} className=\"text-sm\">\n                    {opp.name}\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Owner selector */}\n            <div className=\"space-y-2\">\n              <label htmlFor=\"bulk-owner-select\" className=\"text-sm font-medium\">\n                New Owner\n              </label>\n              <Select value={selectedOwner} onValueChange={setSelectedOwner}>\n                <SelectTrigger id=\"bulk-owner-select\">\n                  <SelectValue placeholder=\"Select an owner\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {salesList?.map((sales) => (\n                    <SelectItem key={sales.id} value={String(sales.id)}>\n                      {sales.first_name} {sales.last_name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={handleCloseDialog} disabled={isProcessing}>\n              Cancel\n            </Button>\n            <Button onClick={handleExecuteBulkAction} disabled={!canExecute() || isProcessing}>\n              {isProcessing ? \"Assigning...\" : \"Assign Owner\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Archive Confirmation Dialog */}\n      <Dialog\n        open={activeAction === \"archive\"}\n        onOpenChange={(open) => !open && handleCloseDialog()}\n      >\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2 text-destructive\">\n              <AlertTriangle className=\"h-5 w-5\" />\n              Archive Opportunities\n            </DialogTitle>\n            <DialogDescription>\n              Are you sure you want to archive {selectedIds.length} opportunit\n              {selectedIds.length === 1 ? \"y\" : \"ies\"}? Archived opportunities can be restored\n              later.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4\">\n            {/* Warning message */}\n            <div className=\"rounded-lg border border-destructive/30 bg-destructive/10 p-3\">\n              <p className=\"text-sm text-destructive\">\n                <strong>Note:</strong> Archived opportunities will be hidden from the main list but\n                remain in the database. You can view and restore them from the archived view.\n              </p>\n            </div>\n\n            {/* Show affected opportunities */}\n            <div className=\"rounded-lg border border-border bg-muted/50 p-3 max-h-40 overflow-y-auto\">\n              <p className=\"text-xs font-medium text-muted-foreground mb-2\">\n                Opportunities to archive:\n              </p>\n              <div className=\"space-y-1\">\n                {selectedOpportunities.map((opp) => (\n                  <div key={opp.id} className=\"text-sm flex items-center justify-between\">\n                    <span className=\"truncate\">{opp.name}</span>\n                    <Badge\n                      className=\"ml-2 text-xs shrink-0\"\n                      style={{ backgroundColor: getOpportunityStageColor(opp.stage) }}\n                    >\n                      {getOpportunityStageLabel(opp.stage)}\n                    </Badge>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={handleCloseDialog} disabled={isProcessing}>\n              Cancel\n            </Button>\n            <Button variant=\"destructive\" onClick={handleBulkArchive} disabled={isProcessing}>\n              {isProcessing\n                ? \"Archiving...\"\n                : `Archive ${selectedIds.length} Opportunit${selectedIds.length === 1 ? \"y\" : \"ies\"}`}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n","import { useListContext, RecordContextProvider } from \"ra-core\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Button } from \"@/components/ui/button\";\nimport { ReferenceField } from \"@/components/admin/reference-field\";\nimport { TextField } from \"@/components/admin/text-field\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card } from \"@/components/ui/card\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { EditButton } from \"@/components/admin/edit-button\";\nimport { formatDistance, format } from \"date-fns\";\nimport { Building2, X } from \"lucide-react\";\nimport type { Opportunity } from \"../types\";\nimport { getOpportunityStageLabel, getOpportunityStageColor } from \"./constants/stageConstants\";\nimport { BulkActionsToolbar } from \"./BulkActionsToolbar\";\nimport { useListKeyboardNavigation } from \"@/hooks/useListKeyboardNavigation\";\nimport { parseDateSafely } from \"@/lib/date-utils\";\n\ninterface OpportunityRowListViewProps {\n  openSlideOver: (id: number, mode?: \"view\" | \"edit\") => void;\n  isSlideOverOpen: boolean;\n}\n\nexport const OpportunityRowListView = ({\n  openSlideOver,\n  isSlideOverOpen,\n}: OpportunityRowListViewProps) => {\n  const {\n    data: opportunities,\n    error,\n    isPending,\n    onToggleItem,\n    selectedIds,\n    onSelect,\n    onUnselectItems,\n  } = useListContext<Opportunity>();\n\n  // Keyboard navigation for list rows\n  const { focusedIndex } = useListKeyboardNavigation({\n    onSelect: (id) => openSlideOver(Number(id), \"view\"),\n    enabled: !isSlideOverOpen,\n  });\n\n  if (isPending) {\n    return <Skeleton className=\"w-full h-9\" />;\n  }\n\n  if (error) {\n    return (\n      <Card className=\"bg-card border border-border shadow-sm rounded-xl p-4\">\n        <p className=\"text-center text-destructive\">\n          Error loading opportunities. Please try refreshing the page.\n        </p>\n      </Card>\n    );\n  }\n\n  if (!opportunities || opportunities.length === 0) {\n    return (\n      <Card className=\"bg-card border border-border shadow-sm rounded-xl p-4\">\n        <p className=\"text-center text-muted-foreground\">No opportunities to display</p>\n      </Card>\n    );\n  }\n\n  const allSelected = selectedIds.length === opportunities.length && opportunities.length > 0;\n  const someSelected = selectedIds.length > 0 && selectedIds.length < opportunities.length;\n\n  const handleSelectAll = () => {\n    if (allSelected) {\n      onUnselectItems();\n    } else {\n      onSelect(opportunities.map((opp) => opp.id));\n    }\n  };\n\n  return (\n    <>\n      {/* Bulk selection controls - shown when items are selected */}\n      {selectedIds.length > 0 && (\n        <div className=\"space-y-3\">\n          {/* Selection summary bar */}\n          <div className=\"flex items-center justify-between rounded-lg border border-border bg-muted/50 px-4 py-2\">\n            <div className=\"flex items-center gap-3\">\n              <Checkbox\n                checked={allSelected}\n                indeterminate={someSelected}\n                onCheckedChange={handleSelectAll}\n                aria-label=\"Select all opportunities\"\n              />\n              <span className=\"text-sm font-medium\">\n                {selectedIds.length} opportunit{selectedIds.length === 1 ? \"y\" : \"ies\"} selected\n              </span>\n            </div>\n            <Button\n              variant=\"ghost\"\n              onClick={onUnselectItems}\n              className=\"h-11 gap-1.5 touch-manipulation\"\n            >\n              <X className=\"h-4 w-4\" />\n              Clear selection\n            </Button>\n          </div>\n\n          {/* Bulk actions toolbar */}\n          <BulkActionsToolbar\n            selectedIds={selectedIds}\n            opportunities={opportunities}\n            onUnselectItems={onUnselectItems}\n          />\n        </div>\n      )}\n\n      <Card className=\"bg-card border border-border shadow-sm rounded-xl p-2\">\n        <div className=\"space-y-2\">\n          {opportunities.map((opportunity, index) => (\n            <RecordContextProvider key={opportunity.id} value={opportunity}>\n              <div\n                className={`group relative flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-3 rounded-lg border bg-card px-3 py-2 sm:py-1.5 transition-all duration-150 hover:border-border hover:shadow-md motion-safe:hover:-translate-y-0.5 active:scale-[0.98] focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 ${\n                  focusedIndex === index\n                    ? \"border-primary ring-2 ring-primary ring-offset-2\"\n                    : \"border-transparent\"\n                }`}\n              >\n                {/* Left cluster: Checkbox + Main Info */}\n                <div className=\"flex items-center gap-3 min-w-0 flex-1 w-full sm:w-auto\">\n                  <Checkbox\n                    checked={selectedIds.includes(opportunity.id)}\n                    onCheckedChange={() => onToggleItem(opportunity.id)}\n                    aria-label={`Select ${opportunity.name}`}\n                    className=\"relative z-10 shrink-0\"\n                  />\n\n                  <div className=\"flex-1 min-w-0\">\n                    {/* Opportunity name as the semantic link - clicks open slide-over */}\n                    <button\n                      onClick={(e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        openSlideOver(opportunity.id as number, \"view\");\n                      }}\n                      className=\"font-medium text-sm text-primary hover:underline focus:outline-none block truncate text-left w-full\"\n                    >\n                      {opportunity.name}\n                      {/* Stretched link overlay: makes entire card clickable */}\n                      <span className=\"absolute inset-0\" aria-hidden=\"true\" />\n                    </button>\n\n                    {/* Second line: Customer  Principal relationship */}\n                    <div className=\"text-xs text-muted-foreground flex items-center gap-1 flex-wrap mt-0.5\">\n                      {opportunity.customer_organization_id && (\n                        <>\n                          <ReferenceField\n                            source=\"customer_organization_id\"\n                            reference=\"organizations\"\n                            link={false}\n                          >\n                            <TextField source=\"name\" className=\"font-medium\" />\n                          </ReferenceField>\n                          <span className=\"opacity-60\"></span>\n                        </>\n                      )}\n                      {opportunity.principal_organization_id && (\n                        <ReferenceField\n                          source=\"principal_organization_id\"\n                          reference=\"organizations\"\n                          link=\"show\"\n                        >\n                          <div className=\"flex items-center gap-1 relative z-10\">\n                            <Building2 className=\"size-3 text-primary/80\" />\n                            <TextField\n                              source=\"name\"\n                              className=\"font-bold text-primary hover:underline cursor-pointer\"\n                            />\n                          </div>\n                        </ReferenceField>\n                      )}\n\n                      {/* Interaction metrics */}\n                      {opportunity.nb_interactions !== undefined &&\n                        opportunity.nb_interactions > 0 && (\n                          <>\n                            <span className=\"opacity-50 mx-0.5\"></span>\n                            <span className=\"font-medium\">\n                              {opportunity.nb_interactions} interaction\n                              {opportunity.nb_interactions !== 1 ? \"s\" : \"\"}\n                            </span>\n                          </>\n                        )}\n                      {opportunity.last_interaction_date &&\n                        parseDateSafely(opportunity.last_interaction_date) && (\n                          <>\n                            <span className=\"opacity-50 mx-0.5\"></span>\n                            <span className=\"opacity-75\">\n                              Last{\" \"}\n                              {formatDistance(\n                                parseDateSafely(opportunity.last_interaction_date)!,\n                                new Date(),\n                                { addSuffix: true }\n                              )}\n                            </span>\n                          </>\n                        )}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Right cluster: Stage, Priority, Close Date, Owner, Edit */}\n                <div className=\"flex flex-wrap items-center gap-2 sm:gap-3 shrink-0 w-full sm:w-auto justify-start sm:justify-end\">\n                  {/* Stage Badge */}\n                  <Badge\n                    className=\"border-0 text-xs relative z-10\"\n                    style={{ backgroundColor: getOpportunityStageColor(opportunity.stage) }}\n                  >\n                    {getOpportunityStageLabel(opportunity.stage)}\n                  </Badge>\n\n                  {/* Priority - Hidden on mobile, shown on md+ */}\n                  {opportunity.priority && (\n                    <Badge\n                      variant={\n                        opportunity.priority === \"critical\"\n                          ? \"destructive\"\n                          : opportunity.priority === \"high\"\n                            ? \"default\"\n                            : opportunity.priority === \"medium\"\n                              ? \"secondary\"\n                              : \"outline\"\n                      }\n                      className=\"hidden md:inline-flex text-xs relative z-10\"\n                    >\n                      {opportunity.priority}\n                    </Badge>\n                  )}\n\n                  {/* Close Date - Hidden on mobile, shown on sm+ */}\n                  {opportunity.estimated_close_date &&\n                    parseDateSafely(opportunity.estimated_close_date) && (\n                      <div className=\"hidden sm:block text-xs text-muted-foreground relative z-10\">\n                        <span className=\"opacity-75\">Close:</span>{\" \"}\n                        <span className=\"font-medium\">\n                          {format(\n                            parseDateSafely(opportunity.estimated_close_date)!,\n                            \"MMM d, yyyy\"\n                          )}\n                        </span>\n                      </div>\n                    )}\n\n                  {/* Owner - Hidden on mobile, shown on md+ */}\n                  {opportunity.opportunity_owner_id && (\n                    <div className=\"hidden md:block text-xs text-muted-foreground relative z-10\">\n                      <ReferenceField source=\"opportunity_owner_id\" reference=\"sales\" link={false}>\n                        <span>\n                          <TextField source=\"first_name\" /> <TextField source=\"last_name\" />\n                        </span>\n                      </ReferenceField>\n                    </div>\n                  )}\n\n                  {/* Edit Button - positioned above stretched link overlay */}\n                  <div className=\"relative z-10\">\n                    <EditButton resource=\"opportunities\" />\n                  </div>\n                </div>\n              </div>\n            </RecordContextProvider>\n          ))}\n        </div>\n      </Card>\n    </>\n  );\n};\n","import { useMemo } from \"react\";\nimport { useListContext } from \"ra-core\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"@/components/ui/accordion\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card } from \"@/components/ui/card\";\nimport { ExternalLink, FolderOpen, Building2, Factory } from \"lucide-react\";\nimport type { Opportunity } from \"../types\";\n\n/**\n * Campaign Grouped List View\n *\n * Displays opportunities in a hierarchical accordion structure:\n * Campaign  Principal Organization  Customer Organization  Opportunities\n *\n * Example:\n * \"Winter Fancy Food Show 2025\" (3 opportunities across 2 principals) \n *   \"Ocean Hugger\" (2 opportunities across 2 customers) \n *     \"Nobu Miami\" (1) \n *       - Ocean Hugger Seafood Alternative opportunity\n *     \"The French Laundry\" (1) \n *       - Ocean Hugger Premium Line opportunity\n *   \"Kaufholds\" (1 opportunity across 1 customer) \n *     \"The French Laundry\" (1) \n *       - Cheese Curd opportunity\n */\n\n/**\n * Type for 3-level nested grouping structure\n * Campaign  Principal  Customer  Opportunities\n */\ntype CampaignGroupedData = Record<\n  string, // Campaign name\n  Record<\n    string, // Principal organization name\n    Record<\n      string, // Customer organization name\n      Opportunity[]\n    >\n  >\n>;\ninterface CampaignGroupedListProps {\n  openSlideOver: (id: number, mode?: \"view\" | \"edit\") => void;\n}\n\nexport const CampaignGroupedList = ({ openSlideOver }: CampaignGroupedListProps) => {\n  const { data: opportunities, isPending } = useListContext<Opportunity>();\n\n  // Group opportunities by campaign  principal  customer organization\n  const groupedData = useMemo((): CampaignGroupedData => {\n    if (!opportunities) return {};\n\n    const campaignGroups: CampaignGroupedData = {};\n\n    opportunities.forEach((opp) => {\n      // Skip opportunities without campaign\n      if (!opp.campaign) return;\n\n      // Initialize campaign group if needed\n      if (!campaignGroups[opp.campaign]) {\n        campaignGroups[opp.campaign] = {};\n      }\n\n      // Group by principal organization within campaign\n      const principalKey = opp.principal_organization_name || \"Unknown Principal\";\n      if (!campaignGroups[opp.campaign][principalKey]) {\n        campaignGroups[opp.campaign][principalKey] = {};\n      }\n\n      // Group by customer organization within principal\n      const customerKey = opp.customer_organization_name || \"Unknown Customer\";\n      if (!campaignGroups[opp.campaign][principalKey][customerKey]) {\n        campaignGroups[opp.campaign][principalKey][customerKey] = [];\n      }\n\n      campaignGroups[opp.campaign][principalKey][customerKey].push(opp);\n    });\n\n    return campaignGroups;\n  }, [opportunities]);\n\n  const campaignNames = Object.keys(groupedData).sort();\n\n  if (isPending) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"text-muted-foreground\">Loading campaigns...</div>\n      </div>\n    );\n  }\n\n  if (campaignNames.length === 0) {\n    return (\n      <Card className=\"p-8\">\n        <div className=\"text-center\">\n          <FolderOpen className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground\" />\n          <h3 className=\"text-lg font-semibold mb-2\">No campaigns found</h3>\n          <p className=\"text-sm text-muted-foreground\">\n            Add a campaign name to opportunities to see them grouped here.\n          </p>\n        </div>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center gap-2 mb-2\">\n        <FolderOpen className=\"w-5 h-5 text-muted-foreground\" />\n        <h2 className=\"text-lg font-semibold\">Campaigns ({campaignNames.length})</h2>\n      </div>\n\n      {/* Level 1: Campaigns */}\n      <Accordion type=\"multiple\" className=\"space-y-2\">\n        {campaignNames.map((campaignName) => {\n          const principalGroups = groupedData[campaignName];\n          const principalNames = Object.keys(principalGroups).sort();\n\n          // Calculate total opportunities across all principals/customers in this campaign\n          const totalOpportunities = principalNames.reduce((sum, principal) => {\n            const customerGroups = principalGroups[principal];\n            return (\n              sum +\n              Object.values(customerGroups).reduce(\n                (customerSum, opps) => customerSum + opps.length,\n                0\n              )\n            );\n          }, 0);\n\n          return (\n            <AccordionItem\n              key={campaignName}\n              value={campaignName}\n              className=\"border border-border rounded-lg bg-card\"\n            >\n              <AccordionTrigger className=\"px-4 hover:no-underline hover:bg-muted/50\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"flex flex-col items-start\">\n                    <span className=\"font-semibold text-base\">{campaignName}</span>\n                    <span className=\"text-xs text-muted-foreground\">\n                      {totalOpportunities}{\" \"}\n                      {totalOpportunities === 1 ? \"opportunity\" : \"opportunities\"} across{\" \"}\n                      {principalNames.length}{\" \"}\n                      {principalNames.length === 1 ? \"principal\" : \"principals\"}\n                    </span>\n                  </div>\n                </div>\n              </AccordionTrigger>\n\n              <AccordionContent className=\"px-4 pb-4\">\n                {/* Level 2: Principals */}\n                <Accordion type=\"multiple\" className=\"space-y-2 mt-2\">\n                  {principalNames.map((principalName) => {\n                    const customerGroups = principalGroups[principalName];\n                    const customerNames = Object.keys(customerGroups).sort();\n\n                    // Calculate opportunities for this principal across all customers\n                    const principalTotalOpps = customerNames.reduce(\n                      (sum, customer) => sum + customerGroups[customer].length,\n                      0\n                    );\n\n                    return (\n                      <AccordionItem\n                        key={principalName}\n                        value={principalName}\n                        className=\"border border-border rounded-md bg-muted/50\"\n                      >\n                        <AccordionTrigger className=\"px-3 py-2 hover:no-underline hover:bg-muted/70\">\n                          <div className=\"flex items-center gap-2\">\n                            <Factory className=\"w-4 h-4 text-muted-foreground\" />\n                            <span className=\"font-medium text-sm\">{principalName}</span>\n                            <span className=\"text-xs text-muted-foreground ml-auto mr-2\">\n                              {principalTotalOpps}{\" \"}\n                              {principalTotalOpps === 1 ? \"opportunity\" : \"opportunities\"} across{\" \"}\n                              {customerNames.length}{\" \"}\n                              {customerNames.length === 1 ? \"customer\" : \"customers\"}\n                            </span>\n                          </div>\n                        </AccordionTrigger>\n\n                        <AccordionContent className=\"px-3 pb-2\">\n                          {/* Level 3: Customers */}\n                          <Accordion type=\"multiple\" className=\"space-y-1 mt-1\">\n                            {customerNames.map((customerName) => {\n                              const customerOpportunities = customerGroups[customerName];\n\n                              return (\n                                <AccordionItem\n                                  key={customerName}\n                                  value={customerName}\n                                  className=\"border border-border rounded-md bg-muted/30\"\n                                >\n                                  <AccordionTrigger className=\"px-3 py-2 hover:no-underline hover:bg-muted/50\">\n                                    <div className=\"flex items-center gap-2\">\n                                      <Building2 className=\"w-4 h-4 text-muted-foreground\" />\n                                      <span className=\"font-medium text-sm\">{customerName}</span>\n                                      <Badge variant=\"secondary\" className=\"text-xs\">\n                                        {customerOpportunities.length}\n                                      </Badge>\n                                    </div>\n                                  </AccordionTrigger>\n\n                                  <AccordionContent className=\"px-3 pb-2\">\n                                    {/* Level 4: Opportunity Items */}\n                                    <div className=\"space-y-1 mt-1\">\n                                      {customerOpportunities.map((opp) => (\n                                        <div\n                                          key={opp.id}\n                                          className=\"flex items-center gap-3 p-2 rounded-md hover:bg-muted/50 transition-colors cursor-pointer\"\n                                          role=\"button\"\n                                          tabIndex={0}\n                                          onClick={(e) => {\n                                            e.preventDefault();\n                                            e.stopPropagation();\n                                            openSlideOver(opp.id as number, \"view\");\n                                          }}\n                                          onKeyDown={(e) => {\n                                            if (e.key === \"Enter\" || e.key === \" \") {\n                                              e.preventDefault();\n                                              openSlideOver(opp.id as number, \"view\");\n                                            }\n                                          }}\n                                        >\n                                          <div className=\"flex-1 text-sm text-primary hover:underline flex items-center gap-2\">\n                                            {opp.name}\n                                            <ExternalLink className=\"w-3 h-3\" />\n                                          </div>\n                                          <div className=\"flex items-center gap-2\">\n                                            <Badge\n                                              variant={\n                                                opp.stage === \"closed_won\"\n                                                  ? \"default\"\n                                                  : opp.stage === \"closed_lost\"\n                                                    ? \"destructive\"\n                                                    : \"secondary\"\n                                              }\n                                              className=\"text-xs\"\n                                            >\n                                              {opp.stage?.replace(/_/g, \" \")}\n                                            </Badge>\n                                            {opp.priority && (\n                                              <Badge\n                                                variant={\n                                                  opp.priority === \"critical\"\n                                                    ? \"destructive\"\n                                                    : opp.priority === \"high\"\n                                                      ? \"default\"\n                                                      : \"outline\"\n                                                }\n                                                className={\n                                                  opp.priority === \"high\"\n                                                    ? \"border-transparent bg-warning text-warning-foreground\"\n                                                    : \"text-xs\"\n                                                }\n                                              >\n                                                {opp.priority}\n                                              </Badge>\n                                            )}\n                                          </div>\n                                        </div>\n                                      ))}\n                                    </div>\n                                  </AccordionContent>\n                                </AccordionItem>\n                              );\n                            })}\n                          </Accordion>\n                        </AccordionContent>\n                      </AccordionItem>\n                    );\n                  })}\n                </Accordion>\n              </AccordionContent>\n            </AccordionItem>\n          );\n        })}\n      </Accordion>\n    </div>\n  );\n};\n","\"use client\";\n\n// src/toggle.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NAME = \"Toggle\";\nvar Toggle = React.forwardRef((props, forwardedRef) => {\n  const { pressed: pressedProp, defaultPressed, onPressedChange, ...buttonProps } = props;\n  const [pressed, setPressed] = useControllableState({\n    prop: pressedProp,\n    onChange: onPressedChange,\n    defaultProp: defaultPressed ?? false,\n    caller: NAME\n  });\n  return /* @__PURE__ */ jsx(\n    Primitive.button,\n    {\n      type: \"button\",\n      \"aria-pressed\": pressed,\n      \"data-state\": pressed ? \"on\" : \"off\",\n      \"data-disabled\": props.disabled ? \"\" : void 0,\n      ...buttonProps,\n      ref: forwardedRef,\n      onClick: composeEventHandlers(props.onClick, () => {\n        if (!props.disabled) {\n          setPressed(!pressed);\n        }\n      })\n    }\n  );\n});\nToggle.displayName = NAME;\nvar Root = Toggle;\nexport {\n  Root,\n  Toggle\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// src/toggle-group.tsx\nimport React from \"react\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport * as RovingFocusGroup from \"@radix-ui/react-roving-focus\";\nimport { createRovingFocusGroupScope } from \"@radix-ui/react-roving-focus\";\nimport { Toggle } from \"@radix-ui/react-toggle\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { jsx } from \"react/jsx-runtime\";\nvar TOGGLE_GROUP_NAME = \"ToggleGroup\";\nvar [createToggleGroupContext, createToggleGroupScope] = createContextScope(TOGGLE_GROUP_NAME, [\n  createRovingFocusGroupScope\n]);\nvar useRovingFocusGroupScope = createRovingFocusGroupScope();\nvar ToggleGroup = React.forwardRef((props, forwardedRef) => {\n  const { type, ...toggleGroupProps } = props;\n  if (type === \"single\") {\n    const singleProps = toggleGroupProps;\n    return /* @__PURE__ */ jsx(ToggleGroupImplSingle, { ...singleProps, ref: forwardedRef });\n  }\n  if (type === \"multiple\") {\n    const multipleProps = toggleGroupProps;\n    return /* @__PURE__ */ jsx(ToggleGroupImplMultiple, { ...multipleProps, ref: forwardedRef });\n  }\n  throw new Error(`Missing prop \\`type\\` expected on \\`${TOGGLE_GROUP_NAME}\\``);\n});\nToggleGroup.displayName = TOGGLE_GROUP_NAME;\nvar [ToggleGroupValueProvider, useToggleGroupValueContext] = createToggleGroupContext(TOGGLE_GROUP_NAME);\nvar ToggleGroupImplSingle = React.forwardRef((props, forwardedRef) => {\n  const {\n    value: valueProp,\n    defaultValue,\n    onValueChange = () => {\n    },\n    ...toggleGroupSingleProps\n  } = props;\n  const [value, setValue] = useControllableState({\n    prop: valueProp,\n    defaultProp: defaultValue ?? \"\",\n    onChange: onValueChange,\n    caller: TOGGLE_GROUP_NAME\n  });\n  return /* @__PURE__ */ jsx(\n    ToggleGroupValueProvider,\n    {\n      scope: props.__scopeToggleGroup,\n      type: \"single\",\n      value: React.useMemo(() => value ? [value] : [], [value]),\n      onItemActivate: setValue,\n      onItemDeactivate: React.useCallback(() => setValue(\"\"), [setValue]),\n      children: /* @__PURE__ */ jsx(ToggleGroupImpl, { ...toggleGroupSingleProps, ref: forwardedRef })\n    }\n  );\n});\nvar ToggleGroupImplMultiple = React.forwardRef((props, forwardedRef) => {\n  const {\n    value: valueProp,\n    defaultValue,\n    onValueChange = () => {\n    },\n    ...toggleGroupMultipleProps\n  } = props;\n  const [value, setValue] = useControllableState({\n    prop: valueProp,\n    defaultProp: defaultValue ?? [],\n    onChange: onValueChange,\n    caller: TOGGLE_GROUP_NAME\n  });\n  const handleButtonActivate = React.useCallback(\n    (itemValue) => setValue((prevValue = []) => [...prevValue, itemValue]),\n    [setValue]\n  );\n  const handleButtonDeactivate = React.useCallback(\n    (itemValue) => setValue((prevValue = []) => prevValue.filter((value2) => value2 !== itemValue)),\n    [setValue]\n  );\n  return /* @__PURE__ */ jsx(\n    ToggleGroupValueProvider,\n    {\n      scope: props.__scopeToggleGroup,\n      type: \"multiple\",\n      value,\n      onItemActivate: handleButtonActivate,\n      onItemDeactivate: handleButtonDeactivate,\n      children: /* @__PURE__ */ jsx(ToggleGroupImpl, { ...toggleGroupMultipleProps, ref: forwardedRef })\n    }\n  );\n});\nToggleGroup.displayName = TOGGLE_GROUP_NAME;\nvar [ToggleGroupContext, useToggleGroupContext] = createToggleGroupContext(TOGGLE_GROUP_NAME);\nvar ToggleGroupImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeToggleGroup,\n      disabled = false,\n      rovingFocus = true,\n      orientation,\n      dir,\n      loop = true,\n      ...toggleGroupProps\n    } = props;\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeToggleGroup);\n    const direction = useDirection(dir);\n    const commonProps = { role: \"group\", dir: direction, ...toggleGroupProps };\n    return /* @__PURE__ */ jsx(ToggleGroupContext, { scope: __scopeToggleGroup, rovingFocus, disabled, children: rovingFocus ? /* @__PURE__ */ jsx(\n      RovingFocusGroup.Root,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        orientation,\n        dir: direction,\n        loop,\n        children: /* @__PURE__ */ jsx(Primitive.div, { ...commonProps, ref: forwardedRef })\n      }\n    ) : /* @__PURE__ */ jsx(Primitive.div, { ...commonProps, ref: forwardedRef }) });\n  }\n);\nvar ITEM_NAME = \"ToggleGroupItem\";\nvar ToggleGroupItem = React.forwardRef(\n  (props, forwardedRef) => {\n    const valueContext = useToggleGroupValueContext(ITEM_NAME, props.__scopeToggleGroup);\n    const context = useToggleGroupContext(ITEM_NAME, props.__scopeToggleGroup);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(props.__scopeToggleGroup);\n    const pressed = valueContext.value.includes(props.value);\n    const disabled = context.disabled || props.disabled;\n    const commonProps = { ...props, pressed, disabled };\n    const ref = React.useRef(null);\n    return context.rovingFocus ? /* @__PURE__ */ jsx(\n      RovingFocusGroup.Item,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        focusable: !disabled,\n        active: pressed,\n        ref,\n        children: /* @__PURE__ */ jsx(ToggleGroupItemImpl, { ...commonProps, ref: forwardedRef })\n      }\n    ) : /* @__PURE__ */ jsx(ToggleGroupItemImpl, { ...commonProps, ref: forwardedRef });\n  }\n);\nToggleGroupItem.displayName = ITEM_NAME;\nvar ToggleGroupItemImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeToggleGroup, value, ...itemProps } = props;\n    const valueContext = useToggleGroupValueContext(ITEM_NAME, __scopeToggleGroup);\n    const singleProps = { role: \"radio\", \"aria-checked\": props.pressed, \"aria-pressed\": void 0 };\n    const typeProps = valueContext.type === \"single\" ? singleProps : void 0;\n    return /* @__PURE__ */ jsx(\n      Toggle,\n      {\n        ...typeProps,\n        ...itemProps,\n        ref: forwardedRef,\n        onPressedChange: (pressed) => {\n          if (pressed) {\n            valueContext.onItemActivate(value);\n          } else {\n            valueContext.onItemDeactivate(value);\n          }\n        }\n      }\n    );\n  }\n);\nvar Root2 = ToggleGroup;\nvar Item2 = ToggleGroupItem;\nexport {\n  Item2 as Item,\n  Root2 as Root,\n  ToggleGroup,\n  ToggleGroupItem,\n  createToggleGroupScope\n};\n//# sourceMappingURL=index.mjs.map\n","/**\n * Toggle style variants\n * Extracted from toggle.tsx to support Fast Refresh\n */\n\nimport { cva } from \"class-variance-authority\";\n\nexport const toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline: \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-11 px-3\",\n        sm: \"h-11 px-2.5\",\n        lg: \"h-11 px-5\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n","\"use client\";\n\nimport * as React from \"react\";\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\";\nimport { type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\nimport { toggleVariants } from \"@/components/ui/toggle.constants\";\n\nconst ToggleGroupContext = React.createContext<VariantProps<typeof toggleVariants>>({\n  size: \"default\",\n  variant: \"default\",\n});\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>{children}</ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n));\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName;\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext);\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  );\n});\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName;\n\nexport { ToggleGroup, ToggleGroupItem };\n","import { LayoutGrid, List, FolderOpen } from \"lucide-react\";\nimport { ToggleGroup, ToggleGroupItem } from \"@/components/ui/toggle-group\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\n\nexport type OpportunityView = \"kanban\" | \"list\" | \"campaign\";\n\ninterface OpportunityViewSwitcherProps {\n  view: OpportunityView;\n  onViewChange: (view: OpportunityView) => void;\n}\n\nexport const OpportunityViewSwitcher = ({ view, onViewChange }: OpportunityViewSwitcherProps) => {\n  return (\n    <TooltipProvider>\n      <ToggleGroup\n        type=\"single\"\n        value={view}\n        onValueChange={(value) => value && onViewChange(value as OpportunityView)}\n        className=\"gap-0.5\"\n      >\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <ToggleGroupItem\n              value=\"kanban\"\n              aria-label=\"Kanban view\"\n              className=\"h-11 w-11 sm:h-11 sm:w-11 touch-manipulation\"\n            >\n              <LayoutGrid className=\"h-4 w-4\" />\n            </ToggleGroupItem>\n          </TooltipTrigger>\n          <TooltipContent>\n            <p>Kanban View</p>\n          </TooltipContent>\n        </Tooltip>\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <ToggleGroupItem\n              value=\"list\"\n              aria-label=\"List view\"\n              className=\"h-11 w-11 sm:h-11 sm:w-11 touch-manipulation\"\n            >\n              <List className=\"h-4 w-4\" />\n            </ToggleGroupItem>\n          </TooltipTrigger>\n          <TooltipContent>\n            <p>List View</p>\n          </TooltipContent>\n        </Tooltip>\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <ToggleGroupItem\n              value=\"campaign\"\n              aria-label=\"Campaign grouped view\"\n              className=\"h-11 w-11 sm:h-11 sm:w-11 touch-manipulation\"\n            >\n              <FolderOpen className=\"h-4 w-4\" />\n            </ToggleGroupItem>\n          </TooltipTrigger>\n          <TooltipContent>\n            <p>Campaign View</p>\n          </TooltipContent>\n        </Tooltip>\n      </ToggleGroup>\n    </TooltipProvider>\n  );\n};\n","/**\n * Lead source choices\n * Extracted from LeadSourceInput.tsx to support Fast Refresh\n */\n\nexport const LEAD_SOURCE_CHOICES = [\n  { id: \"referral\", name: \"Referral\" },\n  { id: \"trade_show\", name: \"Trade Show\" },\n  { id: \"website\", name: \"Website\" },\n  { id: \"cold_call\", name: \"Cold Call\" },\n  { id: \"email_campaign\", name: \"Email Campaign\" },\n  { id: \"social_media\", name: \"Social Media\" },\n  { id: \"partner\", name: \"Partner\" },\n  { id: \"existing_customer\", name: \"Existing Customer\" },\n];\n","import { SelectInput } from \"@/components/admin/select-input\";\nimport { LEAD_SOURCE_CHOICES } from \"./constants/LeadSourceInput.constants\";\n\nexport const LeadSourceInput = () => {\n  return (\n    <SelectInput\n      source=\"lead_source\"\n      label=\"Lead Source\"\n      choices={LEAD_SOURCE_CHOICES}\n      helperText={false}\n    />\n  );\n};\n","import { useState, useCallback, useRef } from \"react\";\nimport { Form, useUpdate, useNotify, ReferenceInput, useGetOne } from \"react-admin\";\nimport { Link } from \"react-router-dom\";\nimport { format } from \"date-fns\";\nimport { Building2, Trophy, XCircle } from \"lucide-react\";\nimport { TextInput } from \"@/components/admin/text-input\";\nimport { SelectInput } from \"@/components/admin/select-input\";\nimport { AutocompleteInput } from \"@/components/admin/autocomplete-input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { OPPORTUNITY_STAGE_CHOICES } from \"../constants/stageConstants\";\nimport { LeadSourceInput } from \"../LeadSourceInput\";\nimport { CloseOpportunityModal } from \"../components/CloseOpportunityModal\";\nimport type { CloseOpportunityInput } from \"@/atomic-crm/validation/opportunities\";\nimport { WIN_REASONS, LOSS_REASONS } from \"@/atomic-crm/validation/opportunities\";\nimport { parseDateSafely } from \"@/lib/date-utils\";\n\ninterface OpportunitySlideOverDetailsTabProps {\n  record: any;\n  mode: \"view\" | \"edit\";\n  onModeToggle?: () => void;\n  /** Whether this tab is currently active - available for conditional data fetching */\n  isActiveTab: boolean;\n}\n\nexport function OpportunitySlideOverDetailsTab({\n  record,\n  mode,\n  onModeToggle,\n  isActiveTab,\n}: OpportunitySlideOverDetailsTabProps) {\n  const [update] = useUpdate();\n  const notify = useNotify();\n  const [isSaving, setIsSaving] = useState(false);\n\n  // State for CloseOpportunityModal\n  const [showCloseModal, setShowCloseModal] = useState(false);\n  const [closeTargetStage, setCloseTargetStage] = useState<\"closed_won\" | \"closed_lost\">(\n    \"closed_won\"\n  );\n  const pendingFormDataRef = useRef<any>(null);\n\n  /**\n   * Perform the actual save operation\n   */\n  const performSave = useCallback(\n    async (data: any, additionalData?: Partial<CloseOpportunityInput>) => {\n      setIsSaving(true);\n      try {\n        await update(\n          \"opportunities\",\n          {\n            id: record.id,\n            data: { ...data, ...additionalData },\n            previousData: record,\n          },\n          {\n            onSuccess: () => {\n              notify(\"Opportunity updated successfully\", { type: \"success\" });\n              if (onModeToggle) {\n                onModeToggle(); // Switch back to view mode\n              }\n            },\n            onError: (error: any) => {\n              notify(error?.message || \"Failed to update opportunity\", { type: \"error\" });\n            },\n          }\n        );\n      } finally {\n        setIsSaving(false);\n      }\n    },\n    [update, record, notify, onModeToggle]\n  );\n\n  /**\n   * Handle form submission - intercept closed stage transitions\n   */\n  const handleSave = useCallback(\n    async (data: any) => {\n      const isClosingOpportunity =\n        (data.stage === \"closed_won\" || data.stage === \"closed_lost\") &&\n        record.stage !== data.stage;\n\n      if (isClosingOpportunity) {\n        // Store form data and show modal\n        pendingFormDataRef.current = data;\n        setCloseTargetStage(data.stage as \"closed_won\" | \"closed_lost\");\n        setShowCloseModal(true);\n        return;\n      }\n\n      // Regular save - no modal needed\n      await performSave(data);\n    },\n    [record.stage, performSave]\n  );\n\n  /**\n   * Handle confirmation from CloseOpportunityModal\n   */\n  const handleCloseConfirm = useCallback(\n    async (closeData: CloseOpportunityInput) => {\n      setShowCloseModal(false);\n      if (pendingFormDataRef.current) {\n        await performSave(pendingFormDataRef.current, {\n          win_reason: closeData.win_reason,\n          loss_reason: closeData.loss_reason,\n          close_reason_notes: closeData.close_reason_notes,\n        });\n        pendingFormDataRef.current = null;\n      }\n    },\n    [performSave]\n  );\n\n  /**\n   * Handle modal cancel\n   */\n  const handleCloseModalOpenChange = useCallback((open: boolean) => {\n    setShowCloseModal(open);\n    if (!open) {\n      pendingFormDataRef.current = null;\n    }\n  }, []);\n\n  if (mode === \"edit\") {\n    return (\n      <Form\n        id=\"slide-over-edit-form\"\n        defaultValues={record}\n        onSubmit={handleSave}\n        className=\"space-y-2\"\n      >\n        <TextInput source=\"name\" label=\"Opportunity Name\" helperText={false} fullWidth />\n        <TextInput\n          source=\"description\"\n          label=\"Description\"\n          helperText={false}\n          multiline\n          rows={3}\n          fullWidth\n        />\n        <SelectInput\n          source=\"stage\"\n          label=\"Stage\"\n          choices={OPPORTUNITY_STAGE_CHOICES}\n          helperText={false}\n          fullWidth\n        />\n        <SelectInput\n          source=\"priority\"\n          label=\"Priority\"\n          choices={[\n            { id: \"low\", name: \"Low\" },\n            { id: \"medium\", name: \"Medium\" },\n            { id: \"high\", name: \"High\" },\n            { id: \"critical\", name: \"Critical\" },\n          ]}\n          helperText={false}\n          fullWidth\n        />\n        <LeadSourceInput />\n        <TextInput\n          source=\"estimated_close_date\"\n          label=\"Estimated Close Date\"\n          type=\"date\"\n          helperText={false}\n          fullWidth\n        />\n\n        {/* Campaign and workflow fields */}\n        <TextInput source=\"campaign\" label=\"Campaign\" helperText={false} fullWidth />\n        <TextInput source=\"notes\" label=\"Notes\" multiline rows={2} helperText={false} fullWidth />\n        <TextInput source=\"next_action\" label=\"Next Action\" helperText={false} fullWidth />\n        <TextInput\n          source=\"next_action_date\"\n          label=\"Next Action Date\"\n          type=\"date\"\n          helperText={false}\n          fullWidth\n        />\n        <TextInput\n          source=\"decision_criteria\"\n          label=\"Decision Criteria\"\n          multiline\n          rows={2}\n          helperText={false}\n          fullWidth\n        />\n\n        {/* Organizations section */}\n        <div className=\"pt-2 border-t border-border\">\n          <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide block mb-2\">\n            Organizations\n          </span>\n          <div className=\"space-y-2\">\n            <ReferenceInput source=\"customer_organization_id\" reference=\"organizations\">\n              <AutocompleteInput\n                label=\"Customer Organization *\"\n                optionText=\"name\"\n                filterToQuery={(searchText: string) => ({ q: searchText })}\n                helperText=\"The customer organization for this opportunity\"\n                fullWidth\n              />\n            </ReferenceInput>\n\n            <ReferenceInput source=\"principal_organization_id\" reference=\"organizations\">\n              <AutocompleteInput\n                label=\"Principal Organization *\"\n                optionText=\"name\"\n                filterToQuery={(searchText: string) => ({ q: searchText })}\n                helperText=\"The principal/manufacturer organization\"\n                fullWidth\n              />\n            </ReferenceInput>\n\n            <ReferenceInput source=\"distributor_organization_id\" reference=\"organizations\">\n              <AutocompleteInput\n                label=\"Distributor Organization\"\n                optionText=\"name\"\n                filterToQuery={(searchText: string) => ({ q: searchText })}\n                helperText=\"Optional distributor organization\"\n                fullWidth\n              />\n            </ReferenceInput>\n          </div>\n        </div>\n\n        {/* CloseOpportunityModal - shown when changing stage to closed_won/closed_lost */}\n        <CloseOpportunityModal\n          open={showCloseModal}\n          onOpenChange={handleCloseModalOpenChange}\n          opportunityId={record.id}\n          opportunityName={record.name || \"Opportunity\"}\n          targetStage={closeTargetStage}\n          onConfirm={handleCloseConfirm}\n          isSubmitting={isSaving}\n        />\n      </Form>\n    );\n  }\n\n  // View mode\n  const formatDate = (date: string | null | undefined) => {\n    if (!date) return \"Not set\";\n    const parsed = parseDateSafely(date);\n    return parsed ? format(parsed, \"MMM d, yyyy\") : \"Invalid date\";\n  };\n\n  const getStageBadgeVariant = (stage: string) => {\n    if (stage === \"closed_won\") return \"default\";\n    if (stage === \"closed_lost\") return \"destructive\";\n    return \"secondary\";\n  };\n\n  const getPriorityBadgeVariant = (priority: string) => {\n    if (priority === \"critical\") return \"destructive\";\n    if (priority === \"high\") return \"default\";\n    if (priority === \"medium\") return \"secondary\";\n    return \"outline\";\n  };\n\n  // Organization card component for view mode\n  const OrganizationCard = ({\n    organizationId,\n    label,\n    required = false,\n  }: {\n    organizationId: number | null;\n    label: string;\n    required?: boolean;\n  }) => {\n    const { data: org, isLoading } = useGetOne(\n      \"organizations\",\n      { id: organizationId! },\n      { enabled: isActiveTab && !!organizationId }\n    );\n\n    if (!organizationId && !required) {\n      return null;\n    }\n\n    if (isLoading) {\n      return (\n        <div className=\"border border-border rounded-md p-2\">\n          <label className=\"text-xs font-medium text-muted-foreground block mb-1\">{label}</label>\n          <div className=\"h-4 bg-muted animate-pulse rounded\" />\n        </div>\n      );\n    }\n\n    if (!org) {\n      return (\n        <div className=\"border border-border rounded-md p-2\">\n          <label className=\"text-xs font-medium text-muted-foreground block mb-1\">{label}</label>\n          <p className=\"text-xs text-muted-foreground\">Not set</p>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"border border-border rounded-md p-2 hover:bg-muted/50 transition-colors\">\n        <label className=\"text-xs font-medium text-muted-foreground block mb-1\">{label}</label>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-6 h-6 rounded bg-primary/10 flex items-center justify-center shrink-0\">\n            <Building2 className=\"w-3.5 h-3.5 text-primary\" />\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <Link\n              to={`/organizations?view=${org.id}`}\n              className=\"text-sm font-medium hover:underline block truncate\"\n            >\n              {org.name}\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const stageName =\n    OPPORTUNITY_STAGE_CHOICES.find((choice) => choice.id === record.stage)?.name || record.stage;\n\n  /**\n   * Get the display name for a win/loss reason\n   */\n  const getReasonDisplayName = (\n    reason: string | null | undefined,\n    isWin: boolean\n  ): string | null => {\n    if (!reason) return null;\n    const reasons = isWin ? WIN_REASONS : LOSS_REASONS;\n    return reasons.find((r) => r.id === reason)?.name || reason;\n  };\n\n  // Determine if this is a closed opportunity with reason data\n  const isClosedOpportunity = record.stage === \"closed_won\" || record.stage === \"closed_lost\";\n  const closedReason =\n    record.stage === \"closed_won\"\n      ? getReasonDisplayName(record.win_reason, true)\n      : record.stage === \"closed_lost\"\n        ? getReasonDisplayName(record.loss_reason, false)\n        : null;\n\n  return (\n    <div className=\"space-y-2\">\n      {/* Name */}\n      <div>\n        <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n          Name\n        </span>\n        <p className=\"text-sm\">{record.name || \"N/A\"}</p>\n      </div>\n\n      {/* Description */}\n      {record.description && (\n        <div>\n          <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n            Description\n          </span>\n          <p className=\"text-sm whitespace-pre-wrap\">{record.description}</p>\n        </div>\n      )}\n\n      {/* Stage & Priority row */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        <div>\n          <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n            Stage\n          </span>\n          <div>\n            <Badge variant={getStageBadgeVariant(record.stage || \"\")}>{stageName}</Badge>\n          </div>\n        </div>\n        <div>\n          <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n            Priority\n          </span>\n          <div>\n            <Badge variant={getPriorityBadgeVariant(record.priority || \"low\")}>\n              {record.priority\n                ? record.priority.charAt(0).toUpperCase() + record.priority.slice(1)\n                : \"Low\"}\n            </Badge>\n          </div>\n        </div>\n      </div>\n\n      {/* Win/Loss Reason - shown for closed opportunities */}\n      {isClosedOpportunity && closedReason && (\n        <div\n          className={`rounded-lg p-3 ${\n            record.stage === \"closed_won\"\n              ? \"bg-success/10 border border-success/20\"\n              : \"bg-destructive/10 border border-destructive/20\"\n          }`}\n        >\n          <div className=\"flex items-center gap-2 mb-1\">\n            {record.stage === \"closed_won\" ? (\n              <Trophy className=\"h-4 w-4 text-success\" />\n            ) : (\n              <XCircle className=\"h-4 w-4 text-destructive\" />\n            )}\n            <span\n              className={`text-xs font-medium uppercase tracking-wide ${\n                record.stage === \"closed_won\" ? \"text-success\" : \"text-destructive\"\n              }`}\n            >\n              {record.stage === \"closed_won\" ? \"Won Reason\" : \"Lost Reason\"}\n            </span>\n          </div>\n          <p className=\"text-sm font-medium\">{closedReason}</p>\n          {record.close_reason_notes && (\n            <p className=\"text-sm text-muted-foreground mt-1\">{record.close_reason_notes}</p>\n          )}\n        </div>\n      )}\n\n      {/* Lead Source & Close Date row */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        <div>\n          <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n            Lead Source\n          </span>\n          <p className=\"text-sm\">\n            {record.lead_source\n              ? record.lead_source\n                  .replace(/_/g, \" \")\n                  .replace(/\\b\\w/g, (l: string) => l.toUpperCase())\n              : \"\"}\n          </p>\n        </div>\n        <div>\n          <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n            Est. Close\n          </span>\n          <p className=\"text-sm\">{formatDate(record.estimated_close_date)}</p>\n        </div>\n      </div>\n\n      {/* Campaign */}\n      {record.campaign && (\n        <div>\n          <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n            Campaign\n          </span>\n          <p className=\"text-sm\">{record.campaign}</p>\n        </div>\n      )}\n\n      {/* Notes */}\n      {record.notes && (\n        <div>\n          <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n            Notes\n          </span>\n          <p className=\"text-sm whitespace-pre-wrap\">{record.notes}</p>\n        </div>\n      )}\n\n      {/* Next Action row */}\n      {(record.next_action || record.next_action_date) && (\n        <div className=\"grid grid-cols-2 gap-3\">\n          <div>\n            <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n              Next Action\n            </span>\n            <p className=\"text-sm\">{record.next_action || \"\"}</p>\n          </div>\n          <div>\n            <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n              Action Date\n            </span>\n            <p className=\"text-sm\">{formatDate(record.next_action_date)}</p>\n          </div>\n        </div>\n      )}\n\n      {/* Decision Criteria */}\n      {record.decision_criteria && (\n        <div>\n          <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n            Decision Criteria\n          </span>\n          <p className=\"text-sm whitespace-pre-wrap\">{record.decision_criteria}</p>\n        </div>\n      )}\n\n      {/* Organizations - 3 column grid */}\n      <div className=\"pt-2 border-t border-border\">\n        <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide block mb-1.5\">\n          Organizations\n        </span>\n        <div className=\"grid grid-cols-3 gap-1.5\">\n          <OrganizationCard\n            organizationId={record.customer_organization_id}\n            label=\"Customer\"\n            required\n          />\n          <OrganizationCard\n            organizationId={record.principal_organization_id}\n            label=\"Principal\"\n            required\n          />\n          <OrganizationCard\n            organizationId={record.distributor_organization_id}\n            label=\"Distributor\"\n          />\n        </div>\n      </div>\n\n      {/* Timestamps */}\n      <div className=\"pt-2 border-t border-border flex gap-3 text-xs text-muted-foreground\">\n        <span>Created {formatDate(record.created_at)}</span>\n        <span></span>\n        <span>Updated {formatDate(record.updated_at)}</span>\n      </div>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport { useGetList, Form, useUpdate, useNotify, ReferenceArrayInput } from \"react-admin\";\nimport { Link } from \"react-router-dom\";\nimport { AutocompleteArrayInput } from \"@/components/admin/autocomplete-array-input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { UserIcon, Star } from \"lucide-react\";\n\ninterface OpportunityContactsTabProps {\n  record: any;\n  mode: \"view\" | \"edit\";\n  onModeToggle?: () => void;\n  /** Whether this tab is currently active - controls data fetching */\n  isActiveTab: boolean;\n}\n\nexport function OpportunityContactsTab({\n  record,\n  mode,\n  onModeToggle,\n  isActiveTab,\n}: OpportunityContactsTabProps) {\n  const [update] = useUpdate();\n  const notify = useNotify();\n  const [isSaving, setIsSaving] = useState(false);\n\n  // Fetch junction table data for view mode - only when tab is active AND in view mode\n  const { data: junctionRecords, isLoading } = useGetList(\n    \"opportunity_contacts\",\n    {\n      filter: { opportunity_id: record.id },\n      pagination: { page: 1, perPage: 100 },\n      sort: { field: \"is_primary\", order: \"DESC\" },\n    },\n    { enabled: isActiveTab && mode === \"view\" }\n  );\n\n  // Fetch contact details for view mode - only when tab is active\n  const contactIds = junctionRecords?.map((jr: any) => jr.contact_id) || [];\n  const { data: contacts } = useGetList(\n    \"contacts\",\n    {\n      filter: { id: contactIds },\n      pagination: { page: 1, perPage: 100 },\n    },\n    { enabled: isActiveTab && mode === \"view\" && contactIds.length > 0 }\n  );\n\n  const handleSave = async (data: any) => {\n    setIsSaving(true);\n    try {\n      await update(\n        \"opportunities\",\n        {\n          id: record.id,\n          data: { contact_ids: data.contact_ids || [] },\n          previousData: record,\n        },\n        {\n          onSuccess: () => {\n            notify(\"Contacts updated successfully\", { type: \"success\" });\n            if (onModeToggle) {\n              onModeToggle();\n            }\n          },\n          onError: (error: any) => {\n            notify(error?.message || \"Failed to update contacts\", { type: \"error\" });\n          },\n        }\n      );\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleCancel = () => {\n    if (onModeToggle) {\n      onModeToggle();\n    }\n  };\n\n  if (mode === \"edit\") {\n    return (\n      <Form\n        defaultValues={{ contact_ids: record.contact_ids || [] }}\n        onSubmit={handleSave}\n        className=\"space-y-4\"\n      >\n        <ReferenceArrayInput source=\"contact_ids\" reference=\"contacts\">\n          <AutocompleteArrayInput\n            label=\"Contacts\"\n            optionText={(choice: any) =>\n              choice ? `${choice.firstName || \"\"} ${choice.lastName || \"\"}`.trim() : \"\"\n            }\n            filterToQuery={(searchText: string) => ({ q: searchText })}\n            helperText=\"Search and select contacts associated with this opportunity\"\n          />\n        </ReferenceArrayInput>\n\n        <div className=\"flex gap-2 pt-4\">\n          <Button type=\"submit\" disabled={isSaving} className=\"flex-1\">\n            {isSaving ? \"Saving...\" : \"Save Changes\"}\n          </Button>\n          <Button type=\"button\" variant=\"outline\" onClick={handleCancel} disabled={isSaving}>\n            Cancel\n          </Button>\n        </div>\n      </Form>\n    );\n  }\n\n  // View mode\n  if (isLoading) {\n    return (\n      <div className=\"space-y-3\">\n        {[1, 2, 3].map((i) => (\n          <div key={i} className=\"h-16 bg-muted animate-pulse rounded-lg\" />\n        ))}\n      </div>\n    );\n  }\n\n  if (!junctionRecords || junctionRecords.length === 0) {\n    return (\n      <div className=\"text-center py-8\">\n        <UserIcon className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground\" />\n        <p className=\"text-muted-foreground\">No contacts associated with this opportunity</p>\n      </div>\n    );\n  }\n\n  // Create a map of junction data by contact_id\n  const junctionMap = new Map(junctionRecords.map((jr: any) => [jr.contact_id, jr]));\n\n  return (\n    <div className=\"space-y-3\">\n      {contacts?.map((contact: any) => {\n        const junctionData = junctionMap.get(contact.id);\n\n        return (\n          <div\n            key={contact.id}\n            className=\"border border-border rounded-lg p-4 hover:bg-muted/50 transition-colors\"\n          >\n            <div className=\"flex items-start justify-between\">\n              <div className=\"flex items-start gap-3 flex-1\">\n                {/* Avatar */}\n                <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center shrink-0\">\n                  <UserIcon className=\"w-5 h-5 text-primary\" />\n                </div>\n\n                {/* Contact info */}\n                <div className=\"flex-1 min-w-0\">\n                  <Link\n                    to={`/contacts?view=${contact.id}`}\n                    className=\"text-base font-medium hover:underline\"\n                  >\n                    {contact.firstName} {contact.lastName}\n                  </Link>\n\n                  {contact.title && (\n                    <p className=\"text-sm text-muted-foreground\">{contact.title}</p>\n                  )}\n\n                  {junctionData?.role && (\n                    <div className=\"mt-2\">\n                      <Badge variant=\"outline\" className=\"text-xs\">\n                        {junctionData.role}\n                      </Badge>\n                    </div>\n                  )}\n\n                  {junctionData?.notes && (\n                    <p className=\"text-sm text-muted-foreground mt-2 italic\">\n                      {junctionData.notes}\n                    </p>\n                  )}\n                </div>\n              </div>\n\n              {/* Primary badge */}\n              {junctionData?.is_primary && (\n                <Badge variant=\"default\" className=\"ml-2\">\n                  <Star className=\"w-3 h-3 mr-1\" />\n                  Primary\n                </Badge>\n              )}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport { useGetList, Form, useUpdate, useNotify, ReferenceArrayInput } from \"react-admin\";\nimport { Link } from \"react-router-dom\";\nimport { AutocompleteArrayInput } from \"@/components/admin/autocomplete-array-input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Package } from \"lucide-react\";\n\ninterface OpportunityProductsTabProps {\n  record: any;\n  mode: \"view\" | \"edit\";\n  onModeToggle?: () => void;\n  /** Whether this tab is currently active - controls data fetching */\n  isActiveTab: boolean;\n}\n\nexport function OpportunityProductsTab({\n  record,\n  mode,\n  onModeToggle,\n  isActiveTab,\n}: OpportunityProductsTabProps) {\n  const [update] = useUpdate();\n  const notify = useNotify();\n  const [isSaving, setIsSaving] = useState(false);\n\n  // Fetch junction table data for view mode - only when tab is active AND in view mode\n  const { data: junctionRecords, isLoading } = useGetList(\n    \"opportunity_products\",\n    {\n      filter: { opportunity_id: record.id },\n      pagination: { page: 1, perPage: 100 },\n      sort: { field: \"created_at\", order: \"DESC\" },\n    },\n    { enabled: isActiveTab && mode === \"view\" }\n  );\n\n  // Fetch product details for view mode - only when tab is active\n  const productIds = junctionRecords?.map((jr: any) => jr.product_id_reference) || [];\n  const { data: products } = useGetList(\n    \"products\",\n    {\n      filter: { id: productIds },\n      pagination: { page: 1, perPage: 100 },\n    },\n    { enabled: isActiveTab && mode === \"view\" && productIds.length > 0 }\n  );\n\n  const handleSave = async (data: any) => {\n    setIsSaving(true);\n    try {\n      // Convert product_ids array to products_to_sync format\n      const productsToSync = (data.product_ids || []).map((productId: any) => ({\n        product_id_reference: productId,\n        notes: null,\n      }));\n\n      await update(\n        \"opportunities\",\n        {\n          id: record.id,\n          data: { products_to_sync: productsToSync },\n          previousData: record,\n        },\n        {\n          onSuccess: () => {\n            notify(\"Products updated successfully\", { type: \"success\" });\n            if (onModeToggle) {\n              onModeToggle();\n            }\n          },\n          onError: (error: any) => {\n            notify(error?.message || \"Failed to update products\", { type: \"error\" });\n          },\n        }\n      );\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleCancel = () => {\n    if (onModeToggle) {\n      onModeToggle();\n    }\n  };\n\n  if (mode === \"edit\") {\n    // Get current product IDs from junction table\n    const currentProductIds = productIds;\n\n    return (\n      <Form\n        defaultValues={{ product_ids: currentProductIds }}\n        onSubmit={handleSave}\n        className=\"space-y-4\"\n      >\n        <ReferenceArrayInput source=\"product_ids\" reference=\"products\">\n          <AutocompleteArrayInput\n            label=\"Products\"\n            optionText=\"name\"\n            filterToQuery={(searchText: string) => ({ q: searchText })}\n            helperText=\"Search and select products for this opportunity\"\n          />\n        </ReferenceArrayInput>\n\n        <div className=\"flex gap-2 pt-4\">\n          <Button type=\"submit\" disabled={isSaving} className=\"flex-1\">\n            {isSaving ? \"Saving...\" : \"Save Changes\"}\n          </Button>\n          <Button type=\"button\" variant=\"outline\" onClick={handleCancel} disabled={isSaving}>\n            Cancel\n          </Button>\n        </div>\n      </Form>\n    );\n  }\n\n  // View mode\n  if (isLoading) {\n    return (\n      <div className=\"space-y-3\">\n        {[1, 2, 3].map((i) => (\n          <div key={i} className=\"h-16 bg-muted animate-pulse rounded-lg\" />\n        ))}\n      </div>\n    );\n  }\n\n  if (!junctionRecords || junctionRecords.length === 0) {\n    return (\n      <div className=\"text-center py-8\">\n        <Package className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground\" />\n        <p className=\"text-muted-foreground\">No products associated with this opportunity</p>\n      </div>\n    );\n  }\n\n  // Create a map of junction data by product_id\n  const junctionMap = new Map(junctionRecords.map((jr: any) => [jr.product_id_reference, jr]));\n\n  return (\n    <div className=\"space-y-3\">\n      {products?.map((product: any) => {\n        const junctionData = junctionMap.get(product.id);\n\n        return (\n          <div\n            key={product.id}\n            className=\"border border-border rounded-lg p-4 hover:bg-muted/50 transition-colors\"\n          >\n            <div className=\"flex items-start gap-3\">\n              {/* Icon */}\n              <div className=\"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center shrink-0\">\n                <Package className=\"w-5 h-5 text-primary\" />\n              </div>\n\n              {/* Product info */}\n              <div className=\"flex-1 min-w-0\">\n                <Link\n                  to={`/products?view=${product.id}`}\n                  className=\"text-base font-medium hover:underline block\"\n                >\n                  {product.name}\n                </Link>\n\n                {product.category && (\n                  <div className=\"mt-2\">\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      {product.category}\n                    </Badge>\n                  </div>\n                )}\n\n                {junctionData?.notes && (\n                  <p className=\"text-sm text-muted-foreground mt-2 italic\">{junctionData.notes}</p>\n                )}\n              </div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import { RecordContextProvider } from \"ra-core\";\nimport { ReferenceManyField } from \"@/components/admin/reference-many-field\";\nimport { NotesIterator } from \"../../notes\";\nimport type { Opportunity } from \"../../types\";\n\ninterface OpportunityNotesTabProps {\n  record: Opportunity;\n  mode: \"view\" | \"edit\";\n}\n\n/**\n * Notes tab for OpportunitySlideOver.\n *\n * Wrapper around existing NotesIterator component.\n * Displays opportunity notes with create/edit/delete functionality.\n *\n * Both view and edit modes allow note creation and editing.\n */\nexport function OpportunityNotesTab({ record, mode }: OpportunityNotesTabProps) {\n  return (\n    <RecordContextProvider value={record}>\n      <div className=\"space-y-4\">\n        {/* Notes list with create form - NotesIterator includes NoteCreate internally */}\n        <ReferenceManyField\n          target=\"opportunity_id\"\n          reference=\"opportunityNotes\"\n          sort={{ field: \"created_at\", order: \"DESC\" }}\n        >\n          <NotesIterator reference=\"opportunities\" />\n        </ReferenceManyField>\n\n        {/* Helper text for empty state */}\n        <div className=\"text-sm text-muted-foreground text-center py-4\">\n          {mode === \"view\"\n            ? \"Notes are visible to all team members\"\n            : \"Add notes to track important information about this opportunity\"}\n        </div>\n      </div>\n    </RecordContextProvider>\n  );\n}\n","import { TargetIcon, Users, Package, StickyNote } from \"lucide-react\";\nimport type { TabConfig } from \"@/components/layouts/ResourceSlideOver\";\nimport { ResourceSlideOver } from \"@/components/layouts/ResourceSlideOver\";\nimport { OpportunitySlideOverDetailsTab } from \"./slideOverTabs/OpportunitySlideOverDetailsTab\";\nimport { OpportunityContactsTab } from \"./slideOverTabs/OpportunityContactsTab\";\nimport { OpportunityProductsTab } from \"./slideOverTabs/OpportunityProductsTab\";\nimport { OpportunityNotesTab } from \"./slideOverTabs/OpportunityNotesTab\";\n\ninterface OpportunitySlideOverProps {\n  recordId: number | null;\n  isOpen: boolean;\n  onClose: () => void;\n  mode: \"view\" | \"edit\";\n  onModeToggle: () => void;\n}\n\nexport function OpportunitySlideOver({\n  recordId,\n  isOpen,\n  onClose,\n  mode,\n  onModeToggle,\n}: OpportunitySlideOverProps) {\n  const tabs: TabConfig[] = [\n    {\n      key: \"details\",\n      label: \"Details\",\n      component: OpportunitySlideOverDetailsTab,\n      icon: TargetIcon,\n    },\n    {\n      key: \"contacts\",\n      label: \"Contacts\",\n      component: OpportunityContactsTab,\n      icon: Users,\n    },\n    {\n      key: \"products\",\n      label: \"Products\",\n      component: OpportunityProductsTab,\n      icon: Package,\n    },\n    {\n      key: \"notes\",\n      label: \"Notes\",\n      component: OpportunityNotesTab,\n      icon: StickyNote,\n    },\n  ];\n\n  const recordRepresentation = (record: any) => {\n    return record.name || `Opportunity #${record.id}`;\n  };\n\n  return (\n    <ResourceSlideOver\n      resource=\"opportunities\"\n      recordId={recordId}\n      isOpen={isOpen}\n      onClose={onClose}\n      mode={mode}\n      onModeToggle={onModeToggle}\n      tabs={tabs}\n      recordRepresentation={recordRepresentation}\n    />\n  );\n}\n","import * as React from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Building2,\n  Flag,\n  Layers,\n  Megaphone,\n  Users,\n  Zap,\n  User,\n  Calendar,\n  AlertCircle,\n  Trophy,\n} from \"lucide-react\";\nimport { FilterLiveForm, useGetIdentity, useGetList, useListContext } from \"ra-core\";\nimport { addDays } from \"date-fns\";\n\nimport { ToggleFilterButton } from \"@/components/admin/toggle-filter-button\";\nimport { SearchInput } from \"@/components/admin/search-input\";\nimport { FilterCategory } from \"../filters/FilterCategory\";\nimport { OPPORTUNITY_STAGES } from \"./constants/stageConstants\";\nimport { priorityChoices } from \"./constants/priorityChoices\";\n\nexport const OpportunityListFilter = () => {\n  const { data: identity } = useGetIdentity();\n  const { filterValues, setFilters } = useListContext();\n\n  // Fetch principals (organizations with type principal)\n  const { data: principalsData } = useGetList(\"organizations\", {\n    pagination: { page: 1, perPage: 50 },\n    sort: { field: \"name\", order: \"ASC\" },\n    filter: { organization_type: \"principal\", deleted_at: null },\n  });\n\n  // Fetch customers (organizations with type customer)\n  const { data: customersData } = useGetList(\"organizations\", {\n    pagination: { page: 1, perPage: 50 },\n    sort: { field: \"name\", order: \"ASC\" },\n    filter: { \"organization_type@in\": \"(prospect,customer)\", deleted_at: null },\n  });\n\n  // Handle principal filter change via Select dropdown\n  const handlePrincipalChange = (value: string) => {\n    if (value === \"all\") {\n      const { principal_organization_id: _, ...rest } = filterValues || {};\n      setFilters(rest);\n    } else {\n      setFilters({\n        ...filterValues,\n        principal_organization_id: Number(value),\n      });\n    }\n  };\n\n  // Handle customer filter change via Select dropdown\n  const handleCustomerChange = (value: string) => {\n    if (value === \"all\") {\n      const { customer_organization_id: _, ...rest } = filterValues || {};\n      setFilters(rest);\n    } else {\n      setFilters({\n        ...filterValues,\n        customer_organization_id: Number(value),\n      });\n    }\n  };\n\n  // Handle campaign filter change via Select dropdown\n  const handleCampaignChange = (value: string) => {\n    if (value === \"all\") {\n      const { campaign: _, ...rest } = filterValues || {};\n      setFilters(rest);\n    } else {\n      setFilters({\n        ...filterValues,\n        campaign: value,\n      });\n    }\n  };\n\n  // Get current filter values for controlled Selects\n  const currentPrincipalFilter = filterValues?.principal_organization_id\n    ? String(filterValues.principal_organization_id)\n    : \"all\";\n\n  const currentCustomerFilter = filterValues?.customer_organization_id\n    ? String(filterValues.customer_organization_id)\n    : \"all\";\n\n  const currentCampaignFilter = filterValues?.campaign || \"all\";\n\n  // Extract unique campaign values from opportunities\n  const { data: opportunitiesData } = useGetList(\"opportunities\", {\n    pagination: { page: 1, perPage: 1000 },\n  });\n\n  const campaigns = React.useMemo(() => {\n    if (!opportunitiesData) return [];\n    const uniqueCampaigns = new Set<string>();\n    opportunitiesData.forEach((opp) => {\n      if (opp.campaign) {\n        uniqueCampaigns.add(opp.campaign);\n      }\n    });\n    return Array.from(uniqueCampaigns).sort();\n  }, [opportunitiesData]);\n\n  // Quick filter presets\n  const today = new Date();\n  const thirtyDaysFromNow = addDays(today, 30);\n\n  const handlePresetClick = (filters: Record<string, any>) => {\n    setFilters({ ...filterValues, ...filters });\n  };\n\n  const isPresetActive = (presetFilters: Record<string, any>): boolean => {\n    return Object.entries(presetFilters).every(([key, value]) => {\n      const currentValue = filterValues?.[key];\n      if (Array.isArray(value) && Array.isArray(currentValue)) {\n        return value.every((v) => currentValue.includes(v));\n      }\n      return currentValue === value;\n    });\n  };\n\n  return (\n    <div className=\"flex flex-col gap-4\" data-tutorial=\"opp-filters\">\n      {/* Search - Always visible */}\n      <FilterLiveForm>\n        <SearchInput source=\"q\" placeholder=\"Search opportunities...\" />\n      </FilterLiveForm>\n\n      {/* Collapsible Filter Sections */}\n      <div className=\"flex flex-col gap-2\">\n        <FilterCategory\n          label=\"Quick Filters\"\n          icon={<Zap className=\"h-4 w-4\" />}\n          defaultExpanded\n          data-tutorial=\"opp-quick-filters\"\n        >\n          <Button\n            type=\"button\"\n            variant={isPresetActive({ opportunity_owner_id: identity?.id }) ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => handlePresetClick({ opportunity_owner_id: identity?.id })}\n            className=\"w-full justify-start\"\n            title=\"Opportunities I manage\"\n          >\n            <User className=\"w-3.5 h-3.5 mr-2\" />\n            My Opportunities\n          </Button>\n\n          <Button\n            type=\"button\"\n            variant={\n              isPresetActive({\n                estimated_close_date_gte: today.toISOString().split(\"T\")[0],\n                estimated_close_date_lte: thirtyDaysFromNow.toISOString().split(\"T\")[0],\n              })\n                ? \"default\"\n                : \"outline\"\n            }\n            size=\"sm\"\n            onClick={() =>\n              handlePresetClick({\n                estimated_close_date_gte: today.toISOString().split(\"T\")[0],\n                estimated_close_date_lte: thirtyDaysFromNow.toISOString().split(\"T\")[0],\n              })\n            }\n            className=\"w-full justify-start\"\n            title=\"Opportunities with expected close date within 30 days\"\n          >\n            <Calendar className=\"w-3.5 h-3.5 mr-2\" />\n            Closing This Month\n          </Button>\n\n          <Button\n            type=\"button\"\n            variant={isPresetActive({ priority: [\"high\", \"critical\"] }) ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => handlePresetClick({ priority: [\"high\", \"critical\"] })}\n            className=\"w-full justify-start\"\n            title=\"Critical and high priority opportunities\"\n          >\n            <AlertCircle className=\"w-3.5 h-3.5 mr-2\" />\n            High Priority\n          </Button>\n\n          <Button\n            type=\"button\"\n            variant={\n              isPresetActive({ next_action_date_lte: today.toISOString().split(\"T\")[0] })\n                ? \"default\"\n                : \"outline\"\n            }\n            size=\"sm\"\n            onClick={() =>\n              handlePresetClick({ next_action_date_lte: today.toISOString().split(\"T\")[0] })\n            }\n            className=\"w-full justify-start\"\n            title=\"Opportunities with overdue or upcoming actions\"\n          >\n            <Flag className=\"w-3.5 h-3.5 mr-2\" />\n            Needs Action\n          </Button>\n\n          <Button\n            type=\"button\"\n            variant={\n              isPresetActive({\n                stage: \"closed_won\",\n                updated_at_gte: addDays(today, -30).toISOString().split(\"T\")[0],\n              })\n                ? \"default\"\n                : \"outline\"\n            }\n            size=\"sm\"\n            onClick={() =>\n              handlePresetClick({\n                stage: \"closed_won\",\n                updated_at_gte: addDays(today, -30).toISOString().split(\"T\")[0],\n              })\n            }\n            className=\"w-full justify-start\"\n            title=\"Opportunities closed won in the last 30 days\"\n          >\n            <Trophy className=\"w-3.5 h-3.5 mr-2\" />\n            Recent Wins\n          </Button>\n        </FilterCategory>\n\n        <FilterCategory\n          label=\"Stage\"\n          icon={<Layers className=\"h-4 w-4\" />}\n          data-tutorial=\"opp-stage-filters\"\n        >\n          {OPPORTUNITY_STAGES.map((stage) => (\n            <ToggleFilterButton\n              multiselect\n              className=\"w-full justify-between\"\n              key={stage.value}\n              label={stage.label}\n              value={{ stage: stage.value }}\n            />\n          ))}\n        </FilterCategory>\n\n        <FilterCategory label=\"Priority\" icon={<Flag className=\"h-4 w-4\" />}>\n          {priorityChoices.map((priority) => (\n            <ToggleFilterButton\n              multiselect\n              className=\"w-full justify-between\"\n              key={priority.id}\n              label={priority.name}\n              value={{ priority: priority.id }}\n            />\n          ))}\n        </FilterCategory>\n\n        <FilterCategory label=\"Principal\" icon={<Building2 className=\"h-4 w-4\" />}>\n          <Select value={currentPrincipalFilter} onValueChange={handlePrincipalChange}>\n            <SelectTrigger\n              className=\"w-full min-h-11 bg-background border-border text-foreground\"\n              aria-label=\"Filter by principal\"\n            >\n              <SelectValue placeholder=\"All Principals\" />\n            </SelectTrigger>\n            <SelectContent className=\"max-h-60\">\n              <SelectItem value=\"all\" className=\"min-h-11\">\n                <span className=\"text-muted-foreground\">All Principals</span>\n              </SelectItem>\n              {principalsData?.map((org) => (\n                <SelectItem key={org.id} value={String(org.id)} className=\"min-h-11\">\n                  <span className=\"truncate\" title={org.name}>\n                    {org.name}\n                  </span>\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </FilterCategory>\n\n        <FilterCategory label=\"Customer\" icon={<Building2 className=\"h-4 w-4\" />}>\n          <Select value={currentCustomerFilter} onValueChange={handleCustomerChange}>\n            <SelectTrigger\n              className=\"w-full min-h-11 bg-background border-border text-foreground\"\n              aria-label=\"Filter by customer\"\n            >\n              <SelectValue placeholder=\"All Customers\" />\n            </SelectTrigger>\n            <SelectContent className=\"max-h-60\">\n              <SelectItem value=\"all\" className=\"min-h-11\">\n                <span className=\"text-muted-foreground\">All Customers</span>\n              </SelectItem>\n              {customersData?.map((org) => (\n                <SelectItem key={org.id} value={String(org.id)} className=\"min-h-11\">\n                  <span className=\"truncate\" title={org.name}>\n                    {org.name}\n                  </span>\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </FilterCategory>\n\n        <FilterCategory label=\"Campaign\" icon={<Megaphone className=\"h-4 w-4\" />}>\n          <Select value={currentCampaignFilter} onValueChange={handleCampaignChange}>\n            <SelectTrigger\n              className=\"w-full min-h-11 bg-background border-border text-foreground\"\n              aria-label=\"Filter by campaign\"\n            >\n              <SelectValue placeholder=\"All Campaigns\" />\n            </SelectTrigger>\n            <SelectContent className=\"max-h-60\">\n              <SelectItem value=\"all\" className=\"min-h-11\">\n                <span className=\"text-muted-foreground\">All Campaigns</span>\n              </SelectItem>\n              {campaigns.map((campaign) => (\n                <SelectItem key={campaign} value={campaign} className=\"min-h-11\">\n                  <span className=\"truncate\" title={campaign}>\n                    {campaign}\n                  </span>\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </FilterCategory>\n\n        <FilterCategory icon={<Users className=\"h-4 w-4\" />} label=\"Owner\">\n          <ToggleFilterButton\n            className=\"w-full justify-between\"\n            label=\"Me\"\n            value={{ opportunity_owner_id: identity?.id }}\n          />\n        </FilterCategory>\n      </div>\n    </div>\n  );\n};\n","/**\n * Opportunity Filter Configuration\n *\n * Defines how opportunity filters are displayed in the FilterChipBar.\n * Imports from existing constants to prevent label drift.\n *\n * @module opportunities/opportunityFilterConfig\n */\n\nimport { validateFilterConfig } from \"../filters/filterConfigSchema\";\nimport { format, isToday, isThisWeek, isThisMonth } from \"date-fns\";\n// Import from existing constants - note camelCase exports\nimport { stageChoices, priorityChoices } from \"./constants/filterChoices\";\n\n/**\n * Format date values for chip display\n */\nfunction formatDateLabel(value: unknown): string {\n  if (!value || typeof value !== \"string\") return String(value);\n\n  const date = new Date(value);\n  if (isNaN(date.getTime())) return String(value);\n\n  if (isToday(date)) return \"Today\";\n  if (isThisWeek(date)) return \"This week\";\n  if (isThisMonth(date)) return \"This month\";\n  return format(date, \"MMM d, yyyy\");\n}\n\n/**\n * Filter configuration for Opportunities list\n *\n * Matches filters available in OpportunityListFilter.tsx:\n * - stage: Pipeline stage (multiselect)\n * - principal_organization_id: Principal reference\n * - customer_organization_id: Customer reference\n * - campaign: Campaign name\n * - opportunity_owner_id: Owner reference\n * - priority: Priority level\n * - estimated_close_date_*: Close date range\n * - next_action_date_*: Action date range\n * - updated_at_gte: Recent wins filter\n *\n *  NOTE: Opportunities use UNDERSCORE format (_gte/_lte) for date filters,\n * unlike Activities/Tasks which use @gte/@lte\n */\nexport const OPPORTUNITY_FILTER_CONFIG = validateFilterConfig([\n  {\n    key: \"stage\",\n    label: \"Stage\",\n    type: \"multiselect\",\n    choices: [...stageChoices],\n  },\n  {\n    key: \"principal_organization_id\",\n    label: \"Principal\",\n    type: \"reference\",\n    reference: \"organizations\",\n  },\n  {\n    key: \"customer_organization_id\",\n    label: \"Customer\",\n    type: \"reference\",\n    reference: \"organizations\",\n  },\n  {\n    key: \"campaign\",\n    label: \"Campaign\",\n    type: \"select\",\n    // Choices loaded dynamically in OpportunityListFilter\n  },\n  {\n    key: \"opportunity_owner_id\",\n    label: \"Owner\",\n    type: \"reference\",\n    reference: \"sales\",\n  },\n  {\n    key: \"priority\",\n    label: \"Priority\",\n    type: \"multiselect\",\n    choices: [...priorityChoices],\n  },\n  // Date ranges use underscore format for opportunities\n  {\n    key: \"estimated_close_date_gte\",\n    label: \"Close after\",\n    type: \"date-range\",\n    formatLabel: formatDateLabel,\n    removalGroup: \"estimated_close_date_range\",\n  },\n  {\n    key: \"estimated_close_date_lte\",\n    label: \"Close before\",\n    type: \"date-range\",\n    formatLabel: formatDateLabel,\n    removalGroup: \"estimated_close_date_range\",\n  },\n  {\n    key: \"next_action_date_gte\",\n    label: \"Action after\",\n    type: \"date-range\",\n    formatLabel: formatDateLabel,\n    removalGroup: \"next_action_date_range\",\n  },\n  {\n    key: \"next_action_date_lte\",\n    label: \"Action before\",\n    type: \"date-range\",\n    formatLabel: formatDateLabel,\n    removalGroup: \"next_action_date_range\",\n  },\n  // \"Recent Wins\" preset filter\n  {\n    key: \"updated_at_gte\",\n    label: \"Updated after\",\n    type: \"date-range\",\n    formatLabel: formatDateLabel,\n  },\n]);\n","import { useRef, useCallback } from \"react\";\nimport { driver, type DriveStep } from \"driver.js\";\nimport \"driver.js/dist/driver.css\";\nimport { HelpCircle } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tooltip, TooltipContent, TooltipTrigger } from \"@/components/ui/tooltip\";\n\n/**\n * Tutorial steps for the Opportunities Pipeline.\n * Guides users through view options, filters, pipeline stages, and card interactions.\n */\nconst PIPELINE_TUTORIAL_STEPS: DriveStep[] = [\n  // 1. Intro\n  {\n    popover: {\n      title: \" Welcome to the Pipeline\",\n      description:\n        \"This is your sales pipeline - track deals from lead to close. Let me show you around!\",\n    },\n  },\n  // 2. View Switcher\n  {\n    element: '[data-tutorial=\"opp-view-switcher\"]',\n    popover: {\n      title: \"View Options\",\n      description:\n        \"Switch between Kanban board (drag & drop), List view (table), or Campaign view (grouped).\",\n      side: \"bottom\",\n      align: \"start\",\n    },\n  },\n  // 3. Filter Sidebar\n  {\n    element: '[data-tutorial=\"opp-filters\"]',\n    popover: {\n      title: \"Filter Your Pipeline\",\n      description:\n        \"Use Quick Filters for common views, or filter by Stage, Priority, Principal, Customer, Campaign, or Owner.\",\n      side: \"right\",\n      align: \"start\",\n    },\n  },\n  // 4. Quick Filters\n  {\n    element: '[data-tutorial=\"opp-quick-filters\"]',\n    popover: {\n      title: \"Quick Filters\",\n      description:\n        '\"My Opportunities\", \"Closing This Month\", \"High Priority\", \"Needs Action\", and \"Recent Wins\" - one click away.',\n      side: \"right\",\n      align: \"start\",\n    },\n  },\n  // 5. Stage Filters\n  {\n    element: '[data-tutorial=\"opp-stage-filters\"]',\n    popover: {\n      title: \"Filter by Stage\",\n      description: \"Toggle stages on/off to focus on specific parts of your pipeline.\",\n      side: \"right\",\n      align: \"start\",\n    },\n  },\n  // 6. Pipeline Columns\n  {\n    element: '[data-tutorial=\"opp-kanban-board\"]',\n    popover: {\n      title: \"Pipeline Stages\",\n      description:\n        \"7 stages from New Lead to Closed. Each column shows count, avg days, and stuck deals.\",\n      side: \"top\",\n      align: \"center\",\n    },\n  },\n  // 7. Opportunity Card\n  {\n    element: '[data-tutorial=\"opp-card\"]',\n    popover: {\n      title: \"Opportunity Cards\",\n      description:\n        \"Each card shows deal name, activity status (green/yellow/red dot), and key details. Click to expand.\",\n      side: \"left\",\n      align: \"start\",\n    },\n  },\n  // 8. Card Drag Handle\n  {\n    element: '[data-tutorial=\"opp-drag-handle\"]',\n    popover: {\n      title: \"Drag & Drop\",\n      description:\n        \"Grab the handle to drag deals between stages. Moving to Closed stages prompts for win/loss reason.\",\n      side: \"right\",\n      align: \"start\",\n    },\n  },\n  // 9. Quick Add Button\n  {\n    element: '[data-tutorial=\"opp-quick-add\"]',\n    popover: {\n      title: \"Quick Add\",\n      description: \"Rapidly add new opportunities without leaving the pipeline.\",\n      side: \"bottom\",\n      align: \"end\",\n    },\n  },\n  // 10. Export Button\n  {\n    element: '[data-tutorial=\"opp-export\"]',\n    popover: {\n      title: \"Export Data\",\n      description: \"Export your pipeline to CSV for reports or principal reviews.\",\n      side: \"bottom\",\n      align: \"end\",\n    },\n  },\n  // 11. Create Button\n  {\n    element: '[data-tutorial=\"create-opportunity-btn\"]',\n    popover: {\n      title: \"New Opportunity\",\n      description: \"Open the full form to create a detailed opportunity with all fields.\",\n      side: \"bottom\",\n      align: \"end\",\n    },\n  },\n  // 12. Completion\n  {\n    popover: {\n      title: \" Ready to Sell!\",\n      description:\n        \"You now know how to navigate the pipeline. Click the ? button anytime to replay this tour.\",\n    },\n  },\n];\n\n/**\n * Standalone tutorial component for the Opportunities List/Pipeline page.\n * Displays a floating help button that triggers a Driver.js tutorial\n * walking users through the pipeline view, filters, and card interactions.\n *\n * Only renders on the /opportunities page (where OpportunityList mounts this).\n * Does NOT integrate with the chapter/progress system - fully standalone.\n */\nexport function OpportunityListTutorial() {\n  const driverRef = useRef<ReturnType<typeof driver> | null>(null);\n\n  const startTutorial = useCallback(() => {\n    // Clean up any existing instance\n    if (driverRef.current) {\n      driverRef.current.destroy();\n    }\n\n    // Create new Driver.js instance\n    driverRef.current = driver({\n      showProgress: true,\n      animate: true,\n      smoothScroll: true,\n      overlayOpacity: 0.75,\n      popoverClass: \"tutorial-popover\",\n      nextBtnText: \"Next \",\n      prevBtnText: \" Back\",\n      doneBtnText: \"Done \",\n      steps: PIPELINE_TUTORIAL_STEPS,\n      onDestroyStarted: () => {\n        // Cleanup on close\n        driverRef.current?.destroy();\n        driverRef.current = null;\n      },\n    });\n\n    driverRef.current.drive();\n  }, []);\n\n  return (\n    <div className=\"fixed bottom-4 left-4 z-50\">\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <Button\n            variant=\"default\"\n            size=\"icon\"\n            onClick={startTutorial}\n            className=\"h-11 w-11 rounded-full shadow-lg bg-primary text-primary-foreground hover:scale-105 transition-transform\"\n            aria-label=\"Start pipeline tutorial\"\n          >\n            <HelpCircle className=\"h-5 w-5\" />\n          </Button>\n        </TooltipTrigger>\n        <TooltipContent side=\"right\">\n          <p>Learn to use the pipeline</p>\n        </TooltipContent>\n      </Tooltip>\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { CreateButton } from \"@/components/admin/create-button\";\nimport { ExportButton } from \"@/components/admin/export-button\";\nimport { opportunityExporter } from \"./opportunityExporter\";\nimport { List } from \"@/components/admin/list\";\nimport { FloatingCreateButton } from \"@/components/admin/FloatingCreateButton\";\nimport { QuickAddButton } from \"./quick-add/QuickAddButton\";\nimport { StandardListLayout } from \"@/components/layouts/StandardListLayout\";\nimport { ListSkeleton } from \"@/components/ui/list-skeleton\";\n\nimport { useGetIdentity, useListContext } from \"ra-core\";\n\nimport { TopToolbar } from \"../layout/TopToolbar\";\nimport { OpportunityArchivedList } from \"./OpportunityArchivedList\";\nimport { OpportunityEmpty } from \"./OpportunityEmpty\";\nimport { OpportunityListContent } from \"./kanban\";\nimport { OpportunityRowListView } from \"./OpportunityRowListView\";\nimport { CampaignGroupedList } from \"./CampaignGroupedList\";\nimport { OpportunityViewSwitcher, type OpportunityView } from \"./OpportunityViewSwitcher\";\nimport { saveStagePreferences } from \"../filters/opportunityStagePreferences\";\nimport { useSlideOverState } from \"@/hooks/useSlideOverState\";\nimport { OpportunitySlideOver } from \"./OpportunitySlideOver\";\nimport { useFilterCleanup } from \"../hooks/useFilterCleanup\";\nimport { FilterChipBar } from \"../filters\";\nimport { OpportunityListFilter } from \"./OpportunityListFilter\";\nimport { OPPORTUNITY_FILTER_CONFIG } from \"./opportunityFilterConfig\";\nimport { OpportunityListTutorial } from \"./OpportunityListTutorial\";\n\n// Helper functions for view preference persistence\nconst OPPORTUNITY_VIEW_KEY = \"opportunity.view.preference\";\n\nconst getViewPreference = (): OpportunityView => {\n  const saved = localStorage.getItem(OPPORTUNITY_VIEW_KEY);\n  return saved === \"list\" || saved === \"kanban\" || saved === \"campaign\" ? saved : \"kanban\";\n};\n\nconst saveViewPreference = (view: OpportunityView) => {\n  localStorage.setItem(OPPORTUNITY_VIEW_KEY, view);\n};\n\nconst OpportunityList = () => {\n  const { data: identity, isPending: isIdentityPending } = useGetIdentity();\n  const [view, setView] = useState<OpportunityView>(getViewPreference);\n\n  // Clean up stale cached filters from localStorage\n  useFilterCleanup(\"opportunities\");\n\n  // Slide-over state\n  const { slideOverId, isOpen, mode, openSlideOver, closeSlideOver, toggleMode } =\n    useSlideOverState();\n\n  const handleViewChange = (newView: OpportunityView) => {\n    setView(newView);\n    saveViewPreference(newView);\n  };\n\n  if (isIdentityPending) return <ListSkeleton rows={8} columns={5} />;\n  if (!identity) return null;\n\n  return (\n    <>\n      <div data-tutorial=\"opportunities-list\">\n        <List\n          perPage={100}\n          filter={{\n            \"deleted_at@is\": null,\n          }}\n          title={false}\n          sort={{ field: \"created_at\", order: \"DESC\" }}\n          actions={<OpportunityActions view={view} onViewChange={handleViewChange} />}\n          exporter={opportunityExporter}\n          pagination={null}\n        >\n          <OpportunityListLayout\n            view={view}\n            openSlideOver={openSlideOver}\n            isSlideOverOpen={isOpen}\n            slideOverId={slideOverId}\n            closeSlideOver={closeSlideOver}\n          />\n          <FloatingCreateButton />\n        </List>\n      </div>\n\n      {/* Slide-over panel */}\n      <OpportunitySlideOver\n        recordId={slideOverId}\n        isOpen={isOpen}\n        onClose={closeSlideOver}\n        mode={mode}\n        onModeToggle={toggleMode}\n      />\n      <OpportunityListTutorial />\n    </>\n  );\n};\n\n/**\n * OpportunityListLayout - Renders inside List context to access ListContext\n * Must be a child of <List> to use useListContext() for filter state\n * Note: Breadcrumb is handled by List wrapper (list.tsx) - no longer needed here\n */\nconst OpportunityListLayout = ({\n  view,\n  openSlideOver,\n  isSlideOverOpen,\n  slideOverId,\n  closeSlideOver,\n}: {\n  view: OpportunityView;\n  openSlideOver: (id: number, mode?: \"view\" | \"edit\") => void;\n  isSlideOverOpen: boolean;\n  slideOverId: number | null;\n  closeSlideOver: () => void;\n}) => {\n  const { data, isPending, filterValues } = useListContext();\n  const hasFilters = filterValues && Object.keys(filterValues).length > 0;\n\n  // Monitor stage filter changes and update localStorage preferences\n  useEffect(() => {\n    if (filterValues?.stage && Array.isArray(filterValues.stage)) {\n      saveStagePreferences(filterValues.stage);\n    }\n  }, [filterValues?.stage]);\n\n  // Show skeleton during loading\n  if (isPending) {\n    return (\n      <StandardListLayout resource=\"opportunities\" filterComponent={<OpportunityListFilter />}>\n        <ListSkeleton rows={8} columns={5} />\n      </StandardListLayout>\n    );\n  }\n\n  // Empty state when no data and no filters applied\n  if (!data?.length && !hasFilters) {\n    return (\n      <StandardListLayout resource=\"opportunities\" filterComponent={<OpportunityListFilter />}>\n        <OpportunityEmpty>\n          <OpportunityArchivedList />\n        </OpportunityEmpty>\n      </StandardListLayout>\n    );\n  }\n\n  // Note: Breadcrumb is now handled by the List component wrapper (list.tsx)\n  // Use flex column layout so kanban can fill remaining height\n  // CRITICAL: h-full + min-h-0 + overflow-hidden enables scroll in child components\n  return (\n    <StandardListLayout resource=\"opportunities\" filterComponent={<OpportunityListFilter />}>\n      <FilterChipBar filterConfig={OPPORTUNITY_FILTER_CONFIG} />\n      <div className=\"flex h-full min-h-0 w-full flex-1 flex-col overflow-hidden\">\n        {view === \"kanban\" ? (\n          <OpportunityListContent\n            openSlideOver={openSlideOver}\n            slideOverId={slideOverId}\n            closeSlideOver={closeSlideOver}\n          />\n        ) : view === \"campaign\" ? (\n          <CampaignGroupedList openSlideOver={openSlideOver} />\n        ) : (\n          <OpportunityRowListView openSlideOver={openSlideOver} isSlideOverOpen={isSlideOverOpen} />\n        )}\n        <OpportunityArchivedList />\n      </div>\n    </StandardListLayout>\n  );\n};\n\nconst OpportunityActions = ({\n  view,\n  onViewChange,\n}: {\n  view: OpportunityView;\n  onViewChange: (view: OpportunityView) => void;\n}) => {\n  return (\n    <TopToolbar>\n      <span data-tutorial=\"opp-view-switcher\">\n        <OpportunityViewSwitcher view={view} onViewChange={onViewChange} />\n      </span>\n      <span data-tutorial=\"opp-export\">\n        <ExportButton />\n      </span>\n      <span data-tutorial=\"opp-quick-add\">\n        <QuickAddButton />\n      </span>\n      <span data-tutorial=\"create-opportunity-btn\">\n        <CreateButton label=\"New Opportunity\" />\n      </span>\n    </TopToolbar>\n  );\n};\n\nexport default OpportunityList;\n"],"names":["isPlainObject","value","proto","Object","getPrototypeOf","prototype","toString","call","isEqualWith","a","b","areValuesEqual","isEqualWithImpl","property","aParent","bParent","stack","result","is","areObjectsEqual","aTag","getTag","bTag","argumentsTag","objectTag","stringTag","numberTag","x","valueOf","y","eq","booleanTag","dateTag","symbolTag","regexpTag","source","flags","functionTag","aStack","Map","get","bStack","set","mapTag","size","key","entries","has","setTag","aValues","Array","from","values","bValues","i","length","aValue","index","findIndex","bValue","splice","arrayTag","uint8ArrayTag","uint8ClampedArrayTag","uint16ArrayTag","uint32ArrayTag","bigUint64ArrayTag","int8ArrayTag","int16ArrayTag","int32ArrayTag","bigInt64ArrayTag","float32ArrayTag","float64ArrayTag","Buffer","isBuffer","arrayBufferTag","byteLength","Uint8Array","dataViewTag","byteOffset","errorTag","name","message","constructor","aKeys","keys","getSymbols","bKeys","propKey","aProp","hasOwn","delete","noop","isEqual","usePreviousProps","ref","React.useRef","React.useEffect","current","areArraysSame","array1","array2","parser","__name","every","prevOption","stripDiacritics","string","normalize","replace","createFilterOptions","config","ignoreAccents","ignoreCase","limit","matchFrom","stringify","trim","options","inputValue","getOptionLabel","input","toLowerCase","filteredOptions","filter","option","candidate","startsWith","includes","slice","defaultFilterOptions","defaultIsActiveElementInListbox","listboxRef","parentElement","contains","document","activeElement","MULTIPLE_DEFAULT_VALUE","getInputValue","multiple","renderValue","optionLabel","useAutocomplete","props","unstable_isActiveElementInListbox","unstable_classNamePrefix","autoComplete","autoHighlight","autoSelect","blurOnSelect","clearOnBlur","freeSolo","clearOnEscape","componentName","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledProp","disabledItemsFocusable","disableListWrap","filterOptions","filterSelectedOptions","getOptionDisabled","getOptionKey","getOptionLabelProp","label","groupBy","handleHomeEndKeys","id","idProp","includeInputInList","inputValueProp","isOptionEqualToValue","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openProp","openOnFocus","readOnly","selectOnFocus","valueProp","useId","String","ignoreFocus","firstFocus","inputRef","anchorEl","setAnchorEl","React.useState","focusedItem","setFocusedItem","defaultHighlighted","highlightedIndexRef","initialInputValue","setValueState","useControlled","controlled","default","setInputValueState","state","focused","setFocused","resetInputValue","React.useCallback","event","newValue","reason","newInputValue","setOpenState","inputPristine","setInputPristine","inputValueIsSelectedValue","popupOpen","some","value2","previousProps","valueChange","listboxAvailable","focusItem","useEventCallback","itemToFocus","focus","indexType","querySelector","validOptionIndex","direction","nextFocus","nextFocusDisabled","getAttribute","hasAttribute","setHighlightedIndex","removeAttribute","setAttribute","prev","classList","remove","listboxNode","scrollTop","add","scrollHeight","clientHeight","element","scrollBottom","elementBottom","offsetTop","offsetHeight","changeHighlightedIndex","diff","nextIndex","maxIndex","newIndex","Math","abs","getNextIndex","indexOf","setSelectionRange","filteredOptionsChanged","getPreviousHighlightedOptionIndex","isSameValue","value1","val","previousHighlightedOption","syncHighlightedIndex","previousHighlightedOptionIndex","valueItem","currentOption","itemIndex","optionItem","handleListboxRef","node","setRef","handleOpen","handleClose","handleValue","details","isTouch","selectNewValue","reasonProp","origin","isArray","push","ctrlKey","metaKey","blur","validItemIndex","handleFocusItem","nextItem","handleClear","handleKeyDown","other","onKeyDown","defaultMuiPrevented","which","preventDefault","stopPropagation","handleFocus","handleBlur","handleInputChange","target","handleOptionMouseMove","Number","currentTarget","handleOptionTouchStart","handleOptionClick","handleItemDelete","handleSingleItemDelete","handlePopupIndicator","handleMouseDown","handleClick","selectionEnd","selectionStart","select","handleInputMouseDown","dirty","groupedOptions","reduce","acc","group","getRootProps","onMouseDown","onClick","getInputLabelProps","htmlFor","getInputProps","onBlur","onFocus","autoCapitalize","spellCheck","role","getClearProps","tabIndex","type","getItemProps","onDelete","getPopupIndicatorProps","getTagProps","getListboxProps","getOptionProps","selected","onMouseMove","onTouchStart","expanded","focusedTag","getListSubheaderUtilityClass","slot","generateUtilityClass","generateUtilityClasses","useUtilityClasses","ownerState","classes","color","disableGutters","inset","disableSticky","slots","root","capitalize","composeClasses","ListSubheaderRoot","styled","overridesResolver","styles","gutters","sticky","memoTheme","theme","boxSizing","lineHeight","listStyle","vars","palette","text","secondary","fontFamily","typography","fontWeight","fontWeightMedium","fontSize","pxToRem","variants","style","primary","main","paddingLeft","paddingRight","position","top","zIndex","backgroundColor","background","paper","ListSubheader","React.forwardRef","inProps","useDefaultProps","className","component","as","clsx","muiSkipListHighlight","CancelIcon","createSvgIcon","_jsx","d","getChipUtilityClass","chipClasses","iconColor","clickable","variant","avatar","icon","deleteIcon","ChipRoot","deletable","textColor","mode","grey","maxWidth","display","alignItems","justifyContent","height","action","borderRadius","whiteSpace","transition","transitions","create","cursor","outline","textDecoration","border","padding","verticalAlign","opacity","disabledOpacity","pointerEvents","marginLeft","marginRight","width","Chip","defaultAvatarColor","avatarColorPrimary","contrastText","dark","avatarColorSecondary","avatarSmall","WebkitTapHighlightColor","alpha","margin","createSimplePaletteValueFilter","map","defaultIconColor","focusVisible","selectedOpacity","focusOpacity","userSelect","hoverOpacity","boxShadow","shadows","defaultBorder","hover","iconSmall","deleteIconSmall","ChipLabel","overflow","textOverflow","isDeleteKeyboardEvent","keyboardEvent","avatarProp","clickableProp","ComponentProp","deleteIconProp","iconProp","onKeyUp","skipFocusWhenDisabled","slotProps","chipRef","handleRef","useForkRef","handleDeleteIconClick","handleKeyUp","ButtonBase","moreProps","focusVisibleClassName","disableRipple","React.isValidElement","React.cloneElement","externalForwardedProps","RootSlot","rootProps","useSlot","elementType","shouldForwardComponentProp","additionalProps","getSlotProps","handlers","LabelSlot","labelProps","children","getAutocompleteUtilityClass","autocompleteClasses","_ClearIcon","_ArrowDropDownIcon","disablePortal","fullWidth","hasClearIcon","hasPopupIcon","inputFocused","inputRoot","tag","endAdornment","clearIndicator","popupIndicator","popper","listbox","loading","noOptions","groupLabel","groupUl","AutocompleteRoot","visibility","minWidth","inputClasses","paddingBottom","inputBaseClasses","sizeSmall","outlinedInputClasses","right","paddingTop","filledInputClasses","hiddenLabel","flexGrow","flexWrap","AutocompleteEndAdornment","transform","AutocompleteClearIndicator","IconButton","AutocompletePopupIndicator","popupIndicatorOpen","AutocompletePopper","Popper","popperDisablePortal","modal","AutocompletePaper","Paper","body1","AutocompleteLoading","AutocompleteNoOptions","AutocompleteListbox","maxHeight","minHeight","breakpoints","up","AutocompleteGroupLabel","AutocompleteGroupUl","Autocomplete","ChipProps","ChipPropsProp","clearIcon","ClearIcon","clearText","closeText","componentsProps","forcePopupIcon","getLimitTagsText","more","limitTags","ListboxComponent","ListboxComponentProp","ListboxProps","ListboxPropsProp","loadingText","noOptionsText","openText","PaperComponent","PaperComponentProp","PopperComponent","PopperComponentProp","popupIcon","ArrowDropDownIcon","renderGroup","renderGroupProp","renderInput","renderOption","renderOptionProp","renderTags","otherListboxProps","chip","ListboxSlot","listboxProps","PaperSlot","paperProps","PopperSlot","popperProps","clientWidth","startAdornment","getCustomizedItemProps","params","customItemProps","_jsxs","props2","otherProps","renderListOption","optionProps","clearIndicatorSlotProps","popupIndicatorSlotProps","React.Fragment","InputLabelProps","InputProps","title","inputProps","option2","index2","useSupportCreateSuggestion","_a","createLabel","createItemLabel","_b","createValue","_c","createHintValue","_d","optionText","handleChange","onCreate","translate","useTranslate","_e","useState","renderOnCreate","setRenderOnCreate","filterRef","useRef","createId","createHintId","getCreateItem","item","_","eventOrValue","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","e","rejected","done","then","apply","__awaiter","finalValue","newSuggestion","body","f","t","sent","trys","ops","g","Iterator","verb","Symbol","iterator","this","n","v","op","TypeError","pop","__generator","to","pack","arguments","ar","l","concat","__spreadArray","isValidElement","Error","createElement","React.createElement","CreateSuggestionContext","Provider","onCancel","createContext","__assign","assign","s","p","hasOwnProperty","__rest","getOwnPropertySymbols","propertyIsEnumerable","AutocompleteInput","useThemeProps","PREFIX","choicesProp","choices","debounce","debounceDelay","emptyText","_f","emptyValue","fieldOverride","field","format","helperText","idOverride","inputText","isFetchingProp","isFetching","isLoadingProp","isLoading","isPendingProp","isPending","isRequiredOverride","isRequired","limitChoicesToValue","_g","matchSuggestion","fieldStateOverride","fieldState","_h","filterToQuery","filterToQueryProp","DefaultFilterToQuery","formStateOverride","formState","_j","_k","offline","defaultOffline","_l","optionValue","parse","resourceProp","resource","shouldRenderSuggestions","setFilter","sourceProp","_m","suggestionLimit","Infinity","TextFieldProps","translateChoice","validate","getOptionDisabledProp","rest","useEvent","_o","useChoicesContext","allChoices","isPaused","isPlaceholderData","fetchError","error","setFilters","isFromReference","_p","useInput","_q","invalid","finalChoices","useMemo","selectedChoice","useSelectedChoice","useEffect","warning","getRecordRepresentation","useGetRecordRepresentation","_r","useSuggestions","selectedItem","getChoiceText","getChoiceValue","getSuggestions","_s","filterValue","setFilterValue","debouncedSetFilter","useCallback","currentValue","_t","handleChangeWithCreateSupport","getOptionDisabledWithCreateSupport","isListItem","getOptionLabelString","finalOnBlur","doesQueryMatchSelection","createOptionLabel","doesQueryMatchSuggestion","hasOption","choice","handleAutocompleteChange","oneSecondHasPassed","useTimeout","suggestions","renderHelperText","handleInputRef","finalLoadingText","StyledAutocomplete","mergedTextFieldProps","mergedSlotProps","TextField","FieldTitle","InputHelperText","AutocompleteInputClasses","textField","emptyLabel","tagProps","sanitizeInputRestProps","record","spacing","selectedChoiceRef","getSelectedItems","setSelectedChoice","newSelectedItems","areSelectedItemsEqual","find","newSelectedChoice","selectedChoiceArray","newSelectedChoiceArray_1","newChoice","searchText","q","Offline","AutocompleteArrayInput","ReferenceArrayInput","defaultChildren","React.Children","count","ReferenceArrayInputBase","ReferenceInput","React","ReferenceInputBase","Accordion","AccordionPrimitive.Root","AccordionItem","jsx","AccordionPrimitive.Item","cn","AccordionTrigger","AccordionPrimitive.Header","jsxs","AccordionPrimitive.Trigger","ChevronDownIcon","AccordionContent","AccordionPrimitive.Content","priorityChoices","sanitizeForCSV","str","char","opportunityExporter","async","records","fetchRelatedRecords","sales","accountManagers","customers","principals","distributors","safeOpportunities","opp","stage","getOpportunityStageLabel","status","priority","customer_name","customer_organization_id","principal_name","principal_organization_id","distributor_name","distributor_organization_id","opportunity_owner","formatSalesName","opportunity_owner_id","account_manager","account_manager_id","lead_source","estimated_close_date","actual_close_date","campaign","competition","decision_criteria","next_action","next_action_date","tags","join","description","notes","nb_interactions","last_interaction_date","days_in_stage","created_at","stage_changed_at","row","fromEntries","jsonExport","rowDelimiter","endOfLine","err","csv","downloadCSV","useQuickAdd","dataProvider","useDataProvider","notify","useNotify","useMutation","mutationFn","formData","createBoothVisitor","onSuccess","localStorage","setItem","principal_id","first_name","last_name","org_name","autoHideDuration","onError","useFilteredProducts","principalId","data","products","useGetList","pagination","page","perPage","sort","order","enabled","isReady","isEmpty","Combobox","onValueChange","placeholder","searchPlaceholder","setOpen","searchValue","setSearchValue","selectedOption","Popover","onOpenChange","PopoverTrigger","asChild","Button","ChevronsUpDown","PopoverContent","Command","CommandInput","CommandList","CommandEmpty","CommandGroup","CommandItem","onSelect","Check","MultiSelectCombobox","selectedLabels","displayText","handleSelect","US_CITIES","city","getLocalStorageString","getItem","QuickAddForm","mutate","firstNameRef","principalsList","principalsLoading","organization_type","schemaDefaults","quickAddSchema","partial","defaultValues","register","handleSubmit","errors","setValue","control","reset","clearErrors","useForm","resolver","zodResolver","cityValue","phoneValue","emailValue","productIds","useWatch","productsList","productsLoading","productsReady","phone","handleCitySelect","cityName","selectedCity","c","onSubmit","closeAfter","product_ids","email","quick_note","setTimeout","principalOptions","org","productOptions","product","cityOptions","Label","Input","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","QuickAddDialog","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","QuickAddButton","Fragment","OpportunityArchivedList","identity","useGetIdentity","archivedLists","total","openDialog","setOpenDialog","archivedListsByDate","opportunity","parsedDate","parseDateSafely","deleted_at","date","toDateString","opportunities","getRelativeTimeString","dateString","Date","setHours","today","getTime","unitDiff","round","Intl","DateTimeFormat","day","month","ucFirst","RelativeTimeFormat","numeric","charAt","toUpperCase","OpportunityEmpty","appbarHeight","useAppBarHeight","contacts","contactsLoading","Progress","src","alt","CreateButton","Link","useOpportunityContacts","contactIds","stableIds","JSON","useGetMany","ids","primaryContact","calculateStageMetrics","avgDaysInStage","stuckCount","totalDays","sum","avgDays","stuck","useStageMetrics","CloseOpportunityModal","opportunityId","opportunityName","targetStage","onConfirm","isSubmitting","isWin","closeOpportunitySchema","form","trigger","isValid","winReason","lossReason","closeReasonNotes","showNotesField","win_reason","loss_reason","close_reason_notes","handleCancel","Trophy","XCircle","FormProvider","SelectInput","WIN_REASONS","LOSS_REASONS","TextInput","multiline","rows","AlertCircle","DialogFooter","OpportunityCardActions","navigate","useNavigate","update","useUpdate","deleteOne","useDelete","refresh","useRefresh","useRecordContext","showCloseModal","setShowCloseModal","closeTargetStage","setCloseTargetStage","isClosing","setIsClosing","handleViewDetails","handleEdit","handleOpenCloseModal","handleCloseConfirm","previousData","handleCloseModalOpenChange","handleDelete","window","confirm","DropdownMenu","DropdownMenuTrigger","MoreVertical","DropdownMenuContent","align","DropdownMenuItem","Eye","Pencil","DropdownMenuSeparator","Trash2","ActivityPulseDot","daysSinceLastActivity","colorClass","getActivityPulseConfig","days","priorityColors","low","medium","high","critical","OpportunityCard","memo","openSlideOver","isExpanded","setIsExpanded","contact_ids","handleCardClick","closest","handleExpandClick","daysInStage","isStuck","priorityClass","priorityLabel","closeDateParsed","closeDate","daysUntilClose","differenceInDays","closeDateUrgency","pendingTasks","pending_task_count","overdueTasks","overdue_task_count","productsCount","Draggable","draggableId","provided","snapshot","innerRef","draggableProps","isDragging","dragHandleProps","GripVertical","days_since_last_activity","ChevronUp","ChevronDown","principal_organization_name","User","firstName","lastName","Calendar","Clock","CheckSquare","Package","r","QuickAddOpportunity","isOpen","setIsOpen","setName","customerId","setCustomerId","useCreate","customersLoading","validatedData","quickCreateOpportunitySchema","stageLabel","autoFocus","customer","Loader2","arePropsEqual","prevProps","nextProps","isCollapsed","onToggleCollapse","onDeleteOpportunity","prevOpps","nextOpps","OpportunityColumn","metrics","shadowConfig","getOpportunityStageElevation","Tooltip","TooltipTrigger","borderBottom","getOpportunityStageColor","TooltipContent","side","getOpportunityStageDescription","getOpportunityMfbPhase","phase","context","Droppable","droppableId","droppableProps","isDraggingOver","RecordContextProvider","getOpportunitiesByStage","unorderedOpportunities","opportunityStages","stages","OPPORTUNITY_STAGES","opportunitiesByStage","obj","forEach","recordA","recordB","COLLAPSED_KEY","VISIBLE_KEY","useColumnPreferences","allStages","collapsedStages","setCollapsedStages","stored","visibleStages","setVisibleStages","toggleCollapse","toggleVisibility","collapseAll","expandAll","ColumnCustomizationMenu","menuRef","handleClickOutside","addEventListener","removeEventListener","Settings2","Checkbox","checked","onCheckedChange","OpportunityListContent","slideOverId","closeSlideOver","allOpportunityStages","OPPORTUNITY_STAGES_LEGACY","filterValues","useListContext","pendingCloseData","setPendingCloseData","userVisibleStages","setOpportunitiesByStage","newOpportunitiesByStage","performStageUpdate","newStage","previousState","draggedItem","additionalData","handleCloseCancel","handleDeleteOpportunity","prevState","newState","stageOpps","filteredOpps","handleDragStart","start","sourceStage","stageName","announce","handleDragUpdate","destination","handleDragEnd","sourceColId","destColId","sourceCol","destCol","newSourceCol","newDestCol","DragDropContext","onDragStart","onDragUpdate","onDragEnd","useExportOpportunities","exportToCSV","filename","headers","customer_organization_name","distributor_organization_name","related_opportunity_id","csvContent","cell","cellStr","blob","Blob","link","url","URL","createObjectURL","defaultFilename","appendChild","click","removeChild","_error","useBulkActionsState","selectedIds","onUnselectItems","activeAction","setActiveAction","selectedStage","setSelectedStage","selectedStatus","setSelectedStatus","selectedOwner","setSelectedOwner","isProcessing","setIsProcessing","handleOpenDialog","handleCloseDialog","handleExecuteBulkAction","successCount","failureCount","updateData","stage_manual","status_manual","parseInt","handleBulkArchive","deleteMany","canExecute","STATUS_OPTIONS","CheckCircle2","CircleDot","BulkActionsToolbar","salesList","selectedOpportunities","handleExport","Layers","UserPlus","Download","Archive","Badge","AlertTriangle","OpportunityRowListView","isSlideOverOpen","onToggleItem","focusedIndex","useListKeyboardNavigation","Skeleton","Card","allSelected","someSelected","handleSelectAll","indeterminate","X","ReferenceField","reference","Building2","formatDistance","addSuffix","EditButton","CampaignGroupedList","groupedData","campaignGroups","principalKey","customerKey","campaignNames","FolderOpen","campaignName","principalGroups","principalNames","totalOpportunities","principal","customerGroups","customerSum","opps","principalName","customerNames","principalTotalOpps","Factory","customerName","customerOpportunities","ExternalLink","NAME","Toggle","forwardedRef","pressed","pressedProp","defaultPressed","onPressedChange","buttonProps","setPressed","useControllableState","prop","defaultProp","caller","Primitive","button","composeEventHandlers","displayName","TOGGLE_GROUP_NAME","createToggleGroupContext","createContextScope","createRovingFocusGroupScope","useRovingFocusGroupScope","ToggleGroup","forwardRef","toggleGroupProps","singleProps","ToggleGroupImplSingle","multipleProps","ToggleGroupImplMultiple","ToggleGroupValueProvider","useToggleGroupValueContext","toggleGroupSingleProps","scope","__scopeToggleGroup","onItemActivate","onItemDeactivate","ToggleGroupImpl","toggleGroupMultipleProps","handleButtonActivate","itemValue","prevValue","handleButtonDeactivate","ToggleGroupContext","useToggleGroupContext","rovingFocus","orientation","dir","loop","rovingFocusGroupScope","useDirection","commonProps","RovingFocusGroup.Root","div","ITEM_NAME","ToggleGroupItem","valueContext","RovingFocusGroup.Item","focusable","active","ToggleGroupItemImpl","itemProps","typeProps","Root2","Item2","toggleVariants","cva","sm","lg","defaultVariants","React.createContext","ToggleGroupPrimitive.Root","React.useContext","ToggleGroupPrimitive.Item","OpportunityViewSwitcher","view","onViewChange","TooltipProvider","LayoutGrid","List","LEAD_SOURCE_CHOICES","LeadSourceInput","OpportunitySlideOverDetailsTab","onModeToggle","isActiveTab","isSaving","setIsSaving","pendingFormDataRef","performSave","handleSave","closeData","Form","OPPORTUNITY_STAGE_CHOICES","formatDate","parsed","getStageBadgeVariant","getPriorityBadgeVariant","OrganizationCard","organizationId","required","useGetOne","getReasonDisplayName","reasons","isClosedOpportunity","closedReason","updated_at","OpportunityContactsTab","junctionRecords","opportunity_id","jr","contact_id","UserIcon","junctionMap","contact","junctionData","is_primary","Star","OpportunityProductsTab","product_id_reference","productsToSync","productId","products_to_sync","currentProductIds","category","OpportunityNotesTab","ReferenceManyField","NotesIterator","OpportunitySlideOver","recordId","tabs","TargetIcon","Users","StickyNote","recordRepresentation","ResourceSlideOver","OpportunityListFilter","principalsData","customersData","handlePrincipalChange","handleCustomerChange","handleCampaignChange","currentPrincipalFilter","currentCustomerFilter","currentCampaignFilter","opportunitiesData","campaigns","React.useMemo","uniqueCampaigns","Set","thirtyDaysFromNow","addDays","handlePresetClick","filters","isPresetActive","presetFilters","FilterLiveForm","SearchInput","FilterCategory","Zap","defaultExpanded","estimated_close_date_gte","toISOString","split","estimated_close_date_lte","next_action_date_lte","Flag","updated_at_gte","ToggleFilterButton","multiselect","Megaphone","formatDateLabel","isNaN","isToday","isThisWeek","isThisMonth","OPPORTUNITY_FILTER_CONFIG","validateFilterConfig","stageChoices","formatLabel","removalGroup","PIPELINE_TUTORIAL_STEPS","popover","OpportunityListTutorial","driverRef","startTutorial","destroy","driver","showProgress","animate","smoothScroll","overlayOpacity","popoverClass","nextBtnText","prevBtnText","doneBtnText","steps","onDestroyStarted","drive","HelpCircle","OPPORTUNITY_VIEW_KEY","getViewPreference","saved","saveViewPreference","OpportunityList","isIdentityPending","setView","useFilterCleanup","toggleMode","useSlideOverState","handleViewChange","newView","ListSkeleton","columns","actions","OpportunityActions","exporter","OpportunityListLayout","FloatingCreateButton","hasFilters","saveStagePreferences","StandardListLayout","filterComponent","FilterChipBar","filterConfig","TopToolbar","ExportButton"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,48,49]}