var t=Object.defineProperty,e=(e,a)=>t(e,"name",{value:a,configurable:!0});import{j as a,u as r,c as o,at as s,J as n}from"./chunk-ByJg_QQB.js";import{u as i,c}from"./chunk-JxeXaC9i.js";import{r as l}from"./chunk-1NZFT-6z.js";import{a7 as d,V as u,W as m,B as p,X as h,a8 as f,w as j}from"../assets/index-BoLku8RR.js";import{u as x,F as g}from"./chunk-mWIjHQDe.js";import{C as v}from"./chunk-B8xrZQJc.js";import{af as k}from"./chunk-Bc6KM1xM.js";import"./chunk-DwAffUXc.js";import"./chunk-knA4lag3.js";import"./chunk-Tyyhsnez.js";import"./chunk-XoqkUGE_.js";import"./chunk-CRKBdUTG.js";import"./chunk-DpghI3EP.js";import"./chunk-D6FmavVW.js";import"./chunk-nUtrHAIa.js";import"./chunk-CMQLDEz_.js";import"./chunk-C_u3nriX.js";import"./chunk-C5fZsuMg.js";import"./chunk-DhfTvo06.js";import"./chunk-B9H_70fs.js";import"./chunk-C4sNritB.js";import"./chunk-DsNwAyt-.js";const y=[{popover:{title:"ðŸ“ Create a Contact",description:"Let's walk through adding a new contact. Fields marked with * are required."}},{element:'[data-tutorial="contact-first-name"]',popover:{title:"First Name *",description:"Enter the contact's first name. This field is required for all contacts.",side:"right",align:"start"}},{element:'[data-tutorial="contact-last-name"]',popover:{title:"Last Name *",description:"Enter the contact's last name. Together with first name, this identifies the person.",side:"right",align:"start"}},{element:'[data-tutorial="contact-organization"]',popover:{title:"Organization *",description:"Select which organization this contact belongs to. Start typing to search existing organizations.",side:"right",align:"start"}},{element:'[data-tutorial="contact-account-manager"]',popover:{title:"Account Manager *",description:"Choose who will own this contact. This determines who sees it in their pipeline.",side:"right",align:"start"}},{element:'[data-tutorial="contact-email"]',popover:{title:"Email Address *",description:"Add at least one email address. You can add multiple with different types (Work, Home, Other). Pro tip: paste an email to auto-fill names!",side:"right",align:"start"}},{element:'[data-tutorial="contact-phone"]',popover:{title:"Phone Numbers",description:"Optional: Add phone numbers with different types. You can add multiple phone numbers.",side:"right",align:"start"}},{element:'[data-tutorial="contact-save-btn"]',popover:{title:"Save Your Contact",description:'Click "Save & Close" to create the contact, or "Save & Add Another" to continue adding more contacts.',side:"top",align:"end"}},{popover:{title:"âœ… Ready to Go!",description:"You now know how to create a contact. Fill in the required fields and click Save when you're ready."}}];function w(){const t=l.useRef(null),r=l.useCallback(()=>{t.current&&t.current.destroy(),t.current=d({showProgress:!0,animate:!0,smoothScroll:!0,overlayOpacity:.75,popoverClass:"tutorial-popover",nextBtnText:"Next â†’",prevBtnText:"â† Back",doneBtnText:"Done âœ“",steps:y,onDestroyStarted:e(()=>{t.current?.destroy(),t.current=null},"onDestroyStarted")}),t.current.drive()},[]);return a.jsx("div",{className:"fixed bottom-4 left-4 z-50",children:a.jsxs(u,{children:[a.jsx(m,{asChild:!0,children:a.jsx(p,{variant:"default",size:"icon",onClick:r,className:"h-11 w-11 rounded-full shadow-lg bg-primary text-primary-foreground hover:scale-105 transition-transform","aria-label":"Start contact form tutorial",children:a.jsx(k,{className:"h-5 w-5"})})}),a.jsx(h,{side:"right",children:a.jsx("p",{children:"Learn how to add a contact"})})]})})}e(w,"ContactFormTutorial");const b=e(()=>{const t=r(),i=o(),{defaults:c,isLoading:l}=x(),d=e(t=>({...t,first_seen:(new Date).toISOString(),last_seen:(new Date).toISOString(),tags:[]}),"transformData");if(l)return a.jsx("div",{className:"bg-muted px-6 py-6",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsx(g,{rows:4})})});const u={...f.partial().parse({}),sales_id:c.sales_id};return a.jsxs(s,{redirect:"list",transform:d,children:[a.jsx("div",{className:"bg-muted px-6 py-6",children:a.jsx("div",{className:"max-w-4xl mx-auto create-form-card",children:a.jsx(n,{defaultValues:u,children:a.jsx(C,{notify:t,redirect:i})})})}),a.jsx(w,{})]})},"ContactCreate"),C=e(({notify:t,redirect:e})=>a.jsxs(a.Fragment,{children:[a.jsx(v,{}),a.jsx(S,{notify:t,redirect:e})]}),"ContactFormContent"),S=e(({notify:t,redirect:r})=>{const{reset:o}=i(),{isDirty:s}=c(),n=l.useCallback(()=>{if(s){if(!window.confirm("You have unsaved changes. Are you sure you want to leave?"))return}r("/contacts")},[s,r]),d=l.useCallback(e=>{t(e.message||"Failed to create contact",{type:"error"})},[t]);return a.jsxs("div",{className:"sticky bottom-12 bg-card border-t border-border p-4 flex justify-between mt-6",children:[a.jsx(p,{variant:"outline",onClick:n,children:"Cancel"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(j,{type:"button",label:"Save & Close","data-tutorial":"contact-save-btn",mutationOptions:{onSuccess:e(()=>{t("Contact created successfully",{type:"success"}),r("/contacts")},"onSuccess"),onError:d}}),a.jsx(j,{type:"button",label:"Save & Add Another",mutationOptions:{onSuccess:e(()=>{t("Contact created successfully",{type:"success"}),o()},"onSuccess"),onError:d}})]})]})},"ContactCreateFooter");export{b as default};
