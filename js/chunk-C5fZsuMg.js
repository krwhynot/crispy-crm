var e=Object.defineProperty,a=(a,s)=>e(a,"name",{value:s,configurable:!0});import{l as s,aF as n,aG as r,av as t,G as l,j as o,H as i}from"./chunk-ByJg_QQB.js";import{r as c}from"./chunk-1NZFT-6z.js";import{br as u,F as d,s as h,H as p,S as m,I as f,J as x,G as g,bs as j,i as v,j as b,k as y,m as C,n as w}from"../assets/index-BoLku8RR.js";import{X as V}from"./chunk-Bc6KM1xM.js";const k=a(e=>{const{choices:k,isLoading:I,isFetching:N,isPending:T,resource:S,source:R,optionText:E,optionValue:F,disableValue:H="disabled",translateChoice:O,createValue:P,createHintValue:D,alwaysOn:L,defaultValue:q,format:G,label:B,helperText:K,name:J,onBlur:U,onChange:$,parse:_,validate:z,readOnly:A,disabled:M,className:Q,emptyText:W="",emptyValue:X="",filter:Y,create:Z,createLabel:ee,onCreate:ae,...se}=e,ne=s();c.useEffect(()=>{if(null==X)throw new Error("emptyValue being set to null or undefined is not supported. Use parse to turn the empty string into null.")},[X]);const{allChoices:re,isPending:te,error:le,source:oe,resource:ie,isFromReference:ce}=n({choices:k,isLoading:I,isFetching:N,isPending:T,resource:S,source:R});if(void 0===oe)throw new Error("If you're not wrapping the SelectInput inside a ReferenceInput, you must provide the source prop");if(!te&&!le&&void 0===re)throw new Error("If you're not wrapping the SelectInput inside a ReferenceInput, you must provide the choices prop");const ue=r(ie),{getChoiceText:de,getChoiceValue:he,getDisableValue:pe}=t({optionText:E??(ce?ue:void 0),optionValue:F,disableValue:H,translateChoice:O??!ce,createValue:P,createHintValue:D}),{id:me,field:fe,isRequired:xe}=l({alwaysOn:L,defaultValue:q,format:G,label:B,helperText:K,name:J,onBlur:U,onChange:$,parse:_,resource:ie,source:oe,validate:z,readOnly:A,disabled:M}),ge=c.useCallback(()=>"string"==typeof W?""===W?"â€ƒ":ne(W,{_:W}):W,[W,ne]),je=c.useCallback(e=>de(e),[de]),ve=c.useCallback(async e=>{if(e===X)fe.onChange(X);else{const a=re?.find(a=>he(a)===e);fe.onChange(a?he(a):e)}},[fe,he,X,re]),{getCreateItem:be,handleChange:ye,createElement:Ce}=u({create:Z,createLabel:ee,createValue:P,createHintValue:D,onCreate:ae,handleChange:ve,optionText:E});if(te)return o.jsxs(d,{id:me,name:fe.name,className:h("w-full min-w-20",Q),children:[""!==B&&!1!==B&&o.jsx(p,{children:o.jsx(i,{label:B,source:oe,resource:S,isRequired:xe})}),o.jsx("div",{className:"relative",children:o.jsx(m,{className:"w-full h-9"})}),o.jsx(f,{helperText:K}),o.jsx(x,{})]});const we=Z||ae?be():null;let Ve=le?[]:re;(Z||ae)&&(Ve=[...Ve,we]);const ke=a(e=>{e.stopPropagation(),fe.onChange(X)},"handleReset");return o.jsxs(o.Fragment,{children:[o.jsxs(d,{id:me,name:fe.name,className:h("w-full min-w-20",Q),...g(se),children:[""!==B&&!1!==B&&o.jsx(p,{children:o.jsx(i,{label:B,source:oe,resource:S,isRequired:xe})}),o.jsx(j,{children:o.jsx("div",{className:"relative",children:o.jsxs(v,{value:fe.value?.toString()||X,onValueChange:ye,children:[o.jsxs(b,{className:h("w-full transition-all hover:bg-accent"),children:[o.jsx(y,{placeholder:ge()}),fe.value&&fe.value!==X?o.jsx("div",{role:"button",className:"p-0 ml-auto pointer-events-auto hover:bg-transparent text-muted-foreground opacity-50 hover:opacity-100",onClick:ke,onKeyDown:a(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),ke(e))},"onKeyDown"),tabIndex:0,children:o.jsx(V,{className:"h-4 w-4"})}):null]}),o.jsx(C,{children:Ve?.map(e=>{if(!e)return null;const a=he(e),s=pe(e);return o.jsx(w,{value:a?.toString(),disabled:s,children:je(we&&e?.id===we.id?we:e)},a)})})]},`select:${fe.value?.toString()??X}`)})}),o.jsx(f,{helperText:K})]}),Ce]})},"SelectInput");export{k as S};
