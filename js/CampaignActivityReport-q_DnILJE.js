var e=Object.defineProperty,t=(t,s)=>e(t,"name",{value:s,configurable:!0});import{j as s,u as a,U as n,am as i,an as l}from"./chunk-ByJg_QQB.js";import{e as r,r as c,R as d}from"./chunk-1NZFT-6z.js";import{R as o}from"./chunk-MaXPr535.js";import{C as m,b as h,a as p,q as x,bx as u,c as g,d as j,B as y,av as f,ag as v,bA as N,L as b,i as w,j as C,k as _,m as k,n as M}from"../assets/index-BoLku8RR.js";import{C as A}from"./chunk-Dn-NAOCt.js";import{p as S,a as T}from"./chunk-Bc6KM1xM.js";import{d as z,g as D,x as O}from"./chunk-DwAffUXc.js";import{s as $}from"./chunk-BnJ5ohE_.js";import"./chunk-JxeXaC9i.js";import"./chunk-knA4lag3.js";import"./chunk-Tyyhsnez.js";import"./chunk-XoqkUGE_.js";import"./chunk-CRKBdUTG.js";const E={call:"ðŸ“ž",email:"âœ‰ï¸",meeting:"ðŸ¤",note:"ðŸ“",demo:"ðŸŽ¯",proposal:"ðŸ“‹","follow-up":"ðŸ”„","trade-show":"ðŸŽª","site-visit":"ðŸ¢","contract-review":"ðŸ“„","check-in":"âœ”ï¸",social:"ðŸ’¬"},F=t(e=>e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),"getActivityTypeLabel"),L=t(({group:e,isExpanded:t,onToggle:a,salesMap:n})=>{const i=E[e.type.toLowerCase()]||"ðŸ“Œ",l=F(e.type),r=e.percentage??0;let c,d;if(e.mostActiveOrg&&void 0!==e.mostActiveCount)c=e.mostActiveOrg,d=e.mostActiveCount;else{const t=new Map;e.activities.forEach(e=>{t.set(e.organization_id,(t.get(e.organization_id)||0)+1)});const s=Array.from(t.entries()).sort((e,t)=>t[1]-e[1]),a=s[0]?.[0];d=t.get(a||0)||0,c=`Organization ${a}`}return s.jsxs(m,{className:"mb-4",children:[s.jsx(h,{className:"pb-3",children:s.jsx("button",{onClick:a,className:"w-full text-left cursor-pointer hover:opacity-80 transition-opacity","aria-expanded":t,"aria-label":`${t?"Collapse":"Expand"} ${l} section with ${e.totalCount} activities`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl","aria-hidden":"true",children:i}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-base",children:l}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.totalCount," activities â€¢ ",e.uniqueOrgs," unique orgs â€¢ ",r,"%"]})]})]}),t?s.jsx(S,{className:"h-5 w-5","aria-hidden":"true"}):s.jsx(T,{className:"h-5 w-5","aria-hidden":"true"})]})})}),!t&&s.jsx(p,{className:"pt-0",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Most active:"," ",s.jsxs("span",{className:"font-medium",children:[c," (",d," ",e.type,1!==d?"s":"",")"]})]})}),t&&s.jsx(p,{className:"pt-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{scope:"col",className:"text-left py-2 px-3 font-semibold sticky left-0 bg-card",children:"Organization"}),s.jsx("th",{scope:"col",className:"text-left py-2 px-3 font-semibold",children:"Contact"}),s.jsx("th",{scope:"col",className:"text-left py-2 px-3 font-semibold",children:"Date"}),s.jsx("th",{scope:"col",className:"text-left py-2 px-3 font-semibold",children:"Rep"}),s.jsx("th",{scope:"col",className:"text-left py-2 px-3 font-semibold",children:"Subject"}),s.jsx("th",{scope:"col",className:"text-center py-2 px-3 font-semibold",children:"Action"})]})}),s.jsx("tbody",{children:e.activities.map(e=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"py-2 px-3 truncate max-w-xs sticky left-0 bg-card",children:e.organization_name||`Organization ${e.organization_id}`}),s.jsx("td",{className:"py-2 px-3 truncate max-w-xs",children:e.contact_name?e.contact_name:"â€”"}),s.jsx("td",{className:"py-2 px-3 whitespace-nowrap",children:x(e.created_at)?.toLocaleDateString()||"â€”"}),s.jsx("td",{className:"py-2 px-3 whitespace-nowrap",children:n.get(e.created_by)||"Unassigned"}),s.jsx("td",{className:"py-2 px-3 truncate max-w-xs",children:e.subject}),s.jsx("td",{className:"py-2 px-3 text-center",children:s.jsx("button",{className:"text-primary hover:underline min-w-[44px] min-h-[44px] inline-flex items-center justify-center",children:"View"})})]},e.id))})]})})})]})},"ActivityTypeCard"),R=t(({campaignName:e,staleOpportunities:a})=>{const n=r(),i=t(e=>{if(!e)return"Never";const t=x(e);return t?z(t,"MMM d, yyyy"):"Never"},"formatLastActivity"),l=t(e=>e?e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"Unknown","formatStageName"),c=t(e=>e.stageThreshold?Math.max(0,e.daysInactive-e.stageThreshold):0,"getDaysOverThreshold");return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Stale Leads Report: ",e]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",a.length," ",1===a.length?"opportunity":"opportunities"," exceeding per-stage activity thresholds (PRD Section 6.3)"]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Thresholds: New Lead ",u.new_lead,"d â€¢ Outreach/Sample/Demo"," ",u.initial_outreach,"d â€¢ Feedback"," ",u.feedback_logged,"d â€¢ Closed stages excluded"]})]}),0===a.length?s.jsx(m,{children:s.jsx(p,{className:"py-8 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"No stale leads found! All open opportunities are within their stage-specific activity thresholds."})})}):s.jsxs(m,{children:[s.jsx(h,{children:s.jsx(g,{className:"text-base",children:"Opportunities Requiring Follow-up"})}),s.jsx(p,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{scope:"col",className:"text-left py-3 px-3 font-semibold sticky left-0 bg-card",children:"Opportunity"}),s.jsx("th",{scope:"col",className:"text-left py-3 px-3 font-semibold",children:"Organization"}),s.jsx("th",{scope:"col",className:"text-left py-3 px-3 font-semibold",children:"Stage"}),s.jsx("th",{scope:"col",className:"text-left py-3 px-3 font-semibold",children:"Last Activity"}),s.jsx("th",{scope:"col",className:"text-left py-3 px-3 font-semibold",children:"Days Over Threshold"}),s.jsx("th",{scope:"col",className:"text-center py-3 px-3 font-semibold",children:"Action"})]})}),s.jsx("tbody",{children:a.map(e=>{const a=c(e);return s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"py-3 px-3 truncate max-w-xs sticky left-0 bg-card",children:e.name||`Opportunity ${e.id}`}),s.jsx("td",{className:"py-3 px-3 truncate max-w-xs",children:e.customer_organization_name||"â€”"}),s.jsxs("td",{className:"py-3 px-3 whitespace-nowrap",children:[s.jsx(j,{variant:"outline",className:"text-xs",children:l(e.stage)}),s.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",e.stageThreshold,"d threshold)"]})]}),s.jsx("td",{className:"py-3 px-3 whitespace-nowrap",children:i(e.lastActivityDate)}),s.jsx("td",{className:"py-3 px-3 whitespace-nowrap",children:s.jsx("span",{className:e.daysInactive>=999999||a>=(e.stageThreshold||7)?"text-destructive font-semibold":a>=Math.floor((e.stageThreshold||7)/2)?"text-warning font-semibold":"text-muted-foreground",children:e.daysInactive>=999999?"Never contacted":`+${a}d over (${e.daysInactive}d inactive)`})}),s.jsx("td",{className:"py-3 px-3 text-center",children:s.jsx(y,{variant:"link",size:"sm",onClick:t(()=>n(`/opportunities/${e.id}/show`),"onClick"),className:"h-auto p-0 min-w-[44px] min-h-[44px]","aria-label":`View opportunity ${e.name||e.id}`,children:"View Opportunity"})})]},e.id)})})]})})})]})]})},"StaleLeadsView");function P(){const e=a(),[r,S]=c.useState(new Set),[T,E]=c.useState("Grand Rapids Trade Show"),[F,P]=c.useState(null),[I,U]=c.useState(f.map(e=>e.value)),[V,q]=c.useState("allTime"),[B,G]=c.useState(null),[H,J]=c.useState(!1),[K,Q]=c.useState(""),W=d.useRef(!1),{data:X=[],isPending:Y}=n("opportunities",{pagination:{page:1,perPage:1e4},filter:{"deleted_at@is":null}}),Z=c.useMemo(()=>{const e=new Map;return X.forEach(t=>{t.campaign&&e.set(t.campaign,(e.get(t.campaign)||0)+1)}),Array.from(e.entries()).map(([e,t])=>({name:e,count:t})).sort((e,t)=>t.count-e.count)},[X]),{data:ee=[],isPending:te}=n("activities",{pagination:{page:1,perPage:1e4},filter:{"opportunities.campaign":T,"opportunities.deleted_at@is":null},sort:{field:"created_at",order:"DESC"}}),{data:se=[],isPending:ae}=n("activities",{pagination:{page:1,perPage:1e4},filter:{"opportunities.campaign":T,"opportunities.deleted_at@is":null,...F?.start&&{"created_at@gte":F.start},...F?.end&&{"created_at@lte":F.end},...I.length>0&&I.length<f.length&&{type:I},...null!==B&&{created_by:B}},sort:{field:"created_at",order:"DESC"}}),ne=c.useMemo(()=>Array.from(new Set((se||[]).map(e=>e.created_by).filter(Boolean))),[se]),{data:ie=[]}=n("sales",{filter:ne.length>0?{id:ne}:void 0,pagination:{page:1,perPage:100}}),le=c.useMemo(()=>new Map((ie||[]).map(e=>[e.id,`${e.first_name} ${e.last_name}`])),[ie]),re=c.useMemo(()=>new Map((X||[]).map(e=>[e.id,e])),[X]),ce=c.useMemo(()=>{const e=new Map;return ee.forEach(t=>{t.created_by&&e.set(t.created_by,(e.get(t.created_by)||0)+1)}),Array.from(e.entries()).map(([e,t])=>({id:e,name:le.get(e)||`Rep ${e}`,count:t})).sort((e,t)=>t.count-e.count)},[ee,le]),de=c.useMemo(()=>{if(!se||0===se.length)return[];const e=new Map,t=se.length;se.forEach(t=>{const s=t.type||"Unknown";e.has(s)||e.set(s,{type:s,activities:[],totalCount:0,uniqueOrgs:0,percentage:0,mostActiveOrg:"",mostActiveCount:0});const a=e.get(s);a.activities.push(t),a.totalCount+=1});return Array.from(e.values()).map(e=>{const s=new Map;e.activities.forEach(e=>{const t=e.organization_id;s.has(t)||s.set(t,{name:e.organization_name||`Organization ${t}`,count:0}),s.get(t).count+=1});const a=s.size,n=Array.from(s.entries()).sort((e,t)=>t[1].count-e[1].count),[,i]=n[0]||[null,{name:"N/A",count:0}];return{...e,uniqueOrgs:a,percentage:Math.round(e.totalCount/t*100),mostActiveOrg:i.name,mostActiveCount:i.count}}).sort((e,t)=>t.totalCount-e.totalCount)},[se]),oe=t((e,t)=>{const s=t.filter(t=>t.opportunity_id===e);if(0===s.length)return null;return s.sort((e,t)=>{const s=x(e.created_at),a=x(t.created_at);return s&&a?a.getTime()-s.getTime():0})[0].created_at},"getLastActivityForOpportunity"),me=c.useMemo(()=>{if(!H||!X)return[];const e=X.filter(e=>e.campaign===T),t=new Date;return e.map(e=>{const s=oe(e.id,ee),a=s?x(s):null,n=a?Math.floor((t.getTime()-a.getTime())/864e5):999999,i=e.stage||"new_lead",l=N(i);return{...e,lastActivityDate:s,daysInactive:n,stageThreshold:l,isStale:v(i,s,t)}}).filter(e=>e.isStale&&void 0!==e.stageThreshold).sort((e,t)=>{const s=e.daysInactive-(e.stageThreshold||0);return t.daysInactive-(t.stageThreshold||0)-s})},[H,X,T,ee]);d.useEffect(()=>{if(de.length>0&&!W.current){const e=new Set(de.slice(0,3).map(e=>e.type));S(e),W.current=!0}},[de]),d.useEffect(()=>{Q(H?`Switched to stale leads view. Showing ${me.length} opportunities exceeding their per-stage activity thresholds.`:`Switched to activity breakdown view. Showing ${de.length} activity types.`);const e=setTimeout(()=>Q(""),1e3);return()=>clearTimeout(e)},[H,me.length,de.length]);const he=se.length,pe=new Set(se.map(e=>e.organization_id)).size,xe=X.filter(e=>e.campaign===T).length||1,ue=xe>0?Math.round(pe/xe*100):0,ge=xe>0?(he/xe).toFixed(1):"0.0",je=t(e=>{const t=new Set(r);t.has(e)?t.delete(e):t.add(e),S(t)},"handleToggle"),ye=t(e=>{q(e);const t=new Date;switch(e){case"last7":P({start:z(O(t,7),"yyyy-MM-dd"),end:z(t,"yyyy-MM-dd")});break;case"last30":P({start:z(O(t,30),"yyyy-MM-dd"),end:z(t,"yyyy-MM-dd")});break;case"thisMonth":P({start:z(D(t),"yyyy-MM-dd"),end:z(t,"yyyy-MM-dd")});break;default:P(null)}},"setDatePresetHandler"),fe=t(e=>{I.includes(e)?I.length>1&&U(I.filter(t=>t!==e)):U([...I,e])},"toggleActivityType"),ve=t(()=>{I.length===f.length?U([]):U(f.map(e=>e.value))},"toggleAllActivityTypes"),Ne=t(()=>{P(null),U(f.map(e=>e.value)),q("allTime"),G(null),J(!1)},"clearFilters"),be=null!==F||I.length<f.length||null!==B||H,we=Y,Ce=ae||te,_e=c.useMemo(()=>{const e=new Map;return ee.forEach(t=>{const s=t.type||"Unknown";e.set(s,(e.get(s)||0)+1)}),e},[ee]),ke=t(()=>{if(H){if(0===me.length)return void e("No stale leads to export",{type:"warning"});const t=me.map(e=>{const t=e.lastActivityDate?x(e.lastActivityDate):null;return{campaign:$(T),opportunity_name:$(e.name),organization:$(e.customer_organization_name||""),last_activity_date:t?z(t,"yyyy-MM-dd"):"Never",days_inactive:e.daysInactive>=999999?"Never contacted":e.daysInactive.toString(),notes:""}});i(t,(t,s)=>{if(t)return void e("Export failed. Please try again.",{type:"error"});const a=T.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),n=z(new Date,"yyyy-MM-dd");l(s,`campaign-stale-leads-${a}-${n}`),e(`${me.length} stale leads exported successfully`,{type:"success"})})}else{if(0===de.length||0===se.length)return void e("No activities to export",{type:"warning"});const t=de.flatMap(e=>e.activities.map(e=>{const t=e.opportunity_id?re.get(e.opportunity_id):null,s=x(e.created_at),a=s?Math.floor((Date.now()-s.getTime())/864e5):0;return{campaign:$(T),activity_type:$(e.type),activity_category:$(e.type),subject:$(e.subject),organization:$(e.organization_name),contact_name:$(e.contact_name||""),date:s?z(s,"yyyy-MM-dd"):"",sales_rep:$(le.get(e.created_by)||"Unassigned"),days_since_activity:a,opportunity_name:$(t?.name||""),opportunity_stage:$(t?.stage||"")}}));i(t,(s,a)=>{if(s)return void e("Export failed. Please try again.",{type:"error"});const n=T.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,""),i=z(new Date,"yyyy-MM-dd");l(a,`campaign-activity-${n}-${i}`),e(`${t.length} activities exported successfully`,{type:"success"})})}},"handleExport");return s.jsxs(o,{title:"Campaign Activity Report",children:[s.jsx("div",{className:"sr-only",role:"status","aria-live":"polite","aria-atomic":"true",children:K}),s.jsxs("div",{className:"mb-section",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4 mb-4",children:[s.jsxs("div",{className:"flex-1 sm:max-w-xs",children:[s.jsx(b,{htmlFor:"campaign-select",className:"block text-sm font-medium mb-2",children:"Select Campaign"}),we?s.jsx("div",{className:"h-10 bg-muted animate-pulse rounded-md",role:"status","aria-label":"Loading campaigns"}):s.jsxs(w,{value:T,onValueChange:E,children:[s.jsx(C,{id:"campaign-select",children:s.jsx(_,{placeholder:"Choose a campaign"})}),s.jsx(k,{children:Z.map(e=>s.jsxs(M,{value:e.name,children:[e.name," (",e.count," opportunities)"]},e.name))})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[be&&s.jsx(y,{variant:"outline",onClick:Ne,className:"w-full sm:w-auto",children:"Clear Filters"}),s.jsx(y,{variant:"default",onClick:ke,disabled:Ce||(H?0===me.length:0===se.length),className:"w-full sm:w-auto",children:"Export to CSV"})]})]}),s.jsx(m,{children:s.jsx(p,{className:"pt-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-section",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-3",children:"Date Range"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx(y,{variant:"allTime"===V?"default":"outline",size:"sm",onClick:t(()=>ye("allTime"),"onClick"),children:"All time"}),s.jsx(y,{variant:"last7"===V?"default":"outline",size:"sm",onClick:t(()=>ye("last7"),"onClick"),children:"Last 7 days"}),s.jsx(y,{variant:"last30"===V?"default":"outline",size:"sm",onClick:t(()=>ye("last30"),"onClick"),children:"Last 30 days"}),s.jsx(y,{variant:"thisMonth"===V?"default":"outline",size:"sm",onClick:t(()=>ye("thisMonth"),"onClick"),children:"This month"})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(b,{htmlFor:"start-date",className:"text-xs",children:"Start Date"}),s.jsx("input",{id:"start-date",type:"date",value:F?.start||"",onChange:t(e=>{const t=e.target.value;q("");const s=F?.end||z(new Date,"yyyy-MM-dd");t<=s&&P({start:t,end:s})},"onChange"),className:"w-full mt-1 px-3 py-2 border rounded-md text-sm"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(b,{htmlFor:"end-date",className:"text-xs",children:"End Date"}),s.jsx("input",{id:"end-date",type:"date",value:F?.end||"",onChange:t(e=>{const t=e.target.value;q("");const s=F?.start||z(new Date,"yyyy-MM-dd");s<=t&&P({start:s,end:t})},"onChange"),className:"w-full mt-1 px-3 py-2 border rounded-md text-sm"})]})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Activity Type"}),s.jsx(y,{variant:"link",size:"sm",onClick:ve,className:"h-auto p-0 text-xs",children:I.length===f.length?"Deselect All":"Select All"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-64 overflow-y-auto",children:f.map(e=>{const a=_e.get(e.value)||0;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(A,{id:`activity-type-${e.value}`,checked:I.includes(e.value),onCheckedChange:t(()=>fe(e.value),"onCheckedChange")}),s.jsxs(b,{htmlFor:`activity-type-${e.value}`,className:"text-sm font-normal cursor-pointer flex-1",children:[e.label," (",a,")"]})]},e.value)})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-3",children:"Sales Rep"}),s.jsxs(w,{value:B?.toString()||"all",onValueChange:t(e=>G("all"===e?null:parseInt(e,10)),"onValueChange"),children:[s.jsx(C,{children:s.jsx(_,{placeholder:"All Reps"})}),s.jsxs(k,{children:[s.jsxs(M,{value:"all",children:["All Reps (",ee.length,")"]}),ce.map(e=>s.jsxs(M,{value:e.id.toString(),children:[e.name," (",e.count,")"]},e.id))]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-3",children:"Stale Leads"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(A,{id:"show-stale-leads",checked:H,onCheckedChange:t(e=>J(!0===e),"onCheckedChange")}),s.jsx(b,{htmlFor:"show-stale-leads",className:"text-sm font-normal cursor-pointer",children:"Show stale leads (per-stage thresholds)"})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-0.5",children:[s.jsx("p",{children:"Thresholds by stage:"}),s.jsxs("p",{className:"pl-2",children:["â€¢ New Lead: ",u.new_lead,"d"]}),s.jsxs("p",{className:"pl-2",children:["â€¢ Outreach/Sample/Demo: ",u.initial_outreach,"d"]}),s.jsxs("p",{className:"pl-2",children:["â€¢ Feedback: ",u.feedback_logged,"d"]}),s.jsx("p",{className:"pl-2 italic",children:"Closed stages excluded"})]}),H&&me.length>0&&s.jsxs("div",{className:"text-xs font-medium text-warning bg-warning/10 px-2 py-1 rounded",children:["âš ï¸ ",me.length," ",1===me.length?"lead needs":"leads need"," follow-up"]})]})]})]})})})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-content mb-section",children:Ce?s.jsx(s.Fragment,{children:[1,2,3,4].map(e=>s.jsxs(m,{children:[s.jsx(h,{className:"pb-2",children:s.jsx("div",{className:"h-4 bg-muted animate-pulse rounded w-3/4"})}),s.jsx(p,{children:s.jsx("div",{className:"h-8 bg-muted animate-pulse rounded w-1/2"})})]},e))}):s.jsxs(s.Fragment,{children:[s.jsxs(m,{children:[s.jsx(h,{className:"pb-2",children:s.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:"Total Activities"})}),s.jsx(p,{children:s.jsx("div",{className:"text-2xl font-bold",children:he})})]}),s.jsxs(m,{children:[s.jsx(h,{className:"pb-2",children:s.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:"Organizations Contacted"})}),s.jsx(p,{children:s.jsx("div",{className:"text-2xl font-bold",children:pe})})]}),s.jsxs(m,{children:[s.jsx(h,{className:"pb-2",children:s.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:"Coverage Rate"})}),s.jsx(p,{children:s.jsxs("div",{className:"text-2xl font-bold",children:[ue,"%"]})})]}),s.jsxs(m,{children:[s.jsx(h,{className:"pb-2",children:s.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:"Avg Activities per Lead"})}),s.jsx(p,{children:s.jsx("div",{className:"text-2xl font-bold",children:ge})})]})]})}),Ce?s.jsxs("div",{className:"space-y-4",role:"status","aria-label":"Loading campaign activities",children:[s.jsx("div",{className:"h-6 bg-muted animate-pulse rounded w-48 mb-4"}),[1,2,3].map(e=>s.jsx(m,{children:s.jsx(h,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-5 bg-muted animate-pulse rounded w-32 mb-2"}),s.jsx("div",{className:"h-4 bg-muted animate-pulse rounded w-64"})]})]})})},e))]}):H?s.jsx(R,{campaignName:T,staleOpportunities:me}):de.length>0?s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Activity Type Breakdown"}),de.map(e=>s.jsx(L,{group:e,isExpanded:r.has(e.type),onToggle:t(()=>je(e.type),"onToggle"),salesMap:le},e.type))]}):s.jsx(m,{children:s.jsxs(p,{className:"py-12 text-center",children:[s.jsx("div",{className:"mb-4 text-4xl",children:"ðŸ“­"}),be?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No activities match the current filters"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Try adjusting your filters to see more results"}),s.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mb-4",children:[F&&s.jsxs(j,{variant:"secondary",children:["Date Range: ",F.start," to ",F.end]}),I.length<f.length&&s.jsxs(j,{variant:"secondary",children:[I.length," Activity"," ",1===I.length?"Type":"Types"," Selected"]}),B&&s.jsxs(j,{variant:"secondary",children:["Sales Rep: ",le.get(B)||"Unknown"]})]}),s.jsx(y,{variant:"outline",onClick:Ne,size:"sm",children:"Clear All Filters"})]}):0===xe?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-lg font-medium text-muted-foreground mb-2",children:"This campaign has no opportunities yet"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Add opportunities to this campaign to start tracking activities"})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No activities found for this campaign"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Activities will appear here once your team starts engaging with leads"})]})]})})]})}t(P,"CampaignActivityReport");export{P as default};
