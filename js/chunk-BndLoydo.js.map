{"version":3,"file":"chunk-BndLoydo.js","sources":["../../src/components/admin/bulk-delete-button.tsx","../../src/hooks/useBulkExport.tsx","../../src/components/admin/bulk-export-button.tsx","../../src/components/admin/bulk-actions-toolbar.tsx"],"sourcesContent":["import { Button } from \"@/components/ui/button\";\nimport { Trash } from \"lucide-react\";\nimport {\n  Translate,\n  useDeleteMany,\n  useListContext,\n  useNotify,\n  useRefresh,\n  useResourceContext,\n  useTranslate,\n  type MutationMode,\n  type RaRecord,\n  type UseDeleteManyOptions,\n} from \"ra-core\";\nimport { cn } from \"@/lib/utils\";\nimport type { ReactNode } from \"react\";\n\nexport interface BulkDeleteButtonProps<\n  RecordType extends RaRecord = any,\n  MutationOptionsError = unknown,\n> extends React.HTMLAttributes<HTMLButtonElement> {\n  mutationMode?: MutationMode;\n  label?: string;\n  resource?: string;\n  className?: string;\n  icon?: ReactNode;\n  mutationOptions?: UseDeleteManyOptions<RecordType, MutationOptionsError> & {\n    meta?: any;\n  };\n}\n\nexport const BulkDeleteButton = <RecordType extends RaRecord = any, MutationOptionsError = unknown>(\n  props: BulkDeleteButtonProps<RecordType, MutationOptionsError>\n) => {\n  const {\n    mutationMode = \"undoable\",\n    icon = defaultIcon,\n    label,\n    className,\n    mutationOptions = {},\n  } = props;\n  const { meta: mutationMeta, ...otherMutationOptions } = mutationOptions;\n  const resource = useResourceContext(props);\n  const [deleteMany, { isPending }] = useDeleteMany<RecordType, MutationOptionsError>();\n  const { selectedIds, onUnselectItems } = useListContext();\n  const notify = useNotify();\n  const refresh = useRefresh();\n  const translate = useTranslate();\n  const handleClick = (e: React.MouseEvent) => {\n    stopPropagation(e);\n    deleteMany(\n      resource,\n      { ids: selectedIds, meta: mutationMeta },\n      {\n        mutationMode,\n        onSuccess: () => {\n          onUnselectItems();\n          notify(`resources.${resource}.notifications.deleted`, {\n            messageArgs: {\n              smart_count: selectedIds.length,\n              _: translate(\"ra.notification.deleted\", {\n                smart_count: selectedIds.length,\n                _: `${selectedIds.length} elements deleted`,\n              }),\n            },\n            undoable: mutationMode === \"undoable\",\n          });\n        },\n        onError: (error: MutationOptionsError) => {\n          const errorMessage = typeof error === \"string\" ? error : (error as any)?.message;\n          notify(errorMessage || \"ra.notification.http_error\", {\n            type: \"error\",\n            messageArgs: { _: errorMessage },\n          });\n          refresh();\n        },\n        ...otherMutationOptions,\n      }\n    );\n  };\n  return (\n    <Button\n      variant=\"destructive\"\n      type=\"button\"\n      onClick={handleClick}\n      disabled={isPending}\n      className={cn(\"h-9\", className)}\n    >\n      {icon}\n      <Translate i18nKey={label ?? \"ra.action.delete\"}>{label ?? \"Delete\"}</Translate>\n    </Button>\n  );\n};\n\nconst defaultIcon = <Trash />;\n\n// useful to prevent click bubbling in a datagrid with rowClick\nconst stopPropagation = (e: React.MouseEvent) => e.stopPropagation();\n","import type { Exporter } from \"ra-core\";\nimport {\n  fetchRelatedRecords,\n  useDataProvider,\n  useListContext,\n  useNotify,\n  useResourceContext,\n} from \"ra-core\";\nimport { useCallback, useMemo } from \"react\";\n\n/**\n * This fill will be backported to 'ra-core' in the future.\n *\n * @deprecated Import from 'ra-core' instead.\n */\nexport function useBulkExport<ResourceInformationsType extends Partial<{ resource: string }>>(\n  props: UseBulkExportProps<ResourceInformationsType>\n) {\n  const { exporter: customExporter, meta } = props;\n\n  const resource = useResourceContext(props);\n  const { exporter: exporterFromContext, selectedIds } = useListContext();\n  const exporter = customExporter || exporterFromContext;\n  const dataProvider = useDataProvider();\n  const notify = useNotify();\n\n  const bulkExport = useCallback(() => {\n    if (exporter && resource) {\n      dataProvider\n        .getMany(resource, { ids: selectedIds, meta })\n        .then(({ data }) =>\n          exporter(data, fetchRelatedRecords(dataProvider), dataProvider, resource)\n        )\n        .catch((error) => {\n          console.error(\n            \"Bulk export failed:\",\n            error instanceof Error ? error.message : String(error)\n          );\n          notify(\"ra.notification.http_error\", {\n            type: \"error\",\n          });\n        });\n    }\n  }, [dataProvider, exporter, notify, resource, selectedIds, meta]);\n\n  return useMemo(() => {\n    return {\n      bulkExport,\n    };\n  }, [bulkExport]);\n}\n\nexport type ResourceInformation = Partial<{ resource: string }>;\n\nexport type UseBulkExportProps<T extends ResourceInformation> = T & {\n  exporter?: Exporter;\n\n  meta?: any;\n};\n","import { Download } from \"lucide-react\";\nimport { Translate } from \"ra-core\";\n\nimport { Button } from \"../ui/button\";\nimport type { ResourceInformation, UseBulkExportProps } from \"@/hooks/useBulkExport\";\nimport { useBulkExport } from \"@/hooks/useBulkExport\";\n\n/**\n * Export the selected rows\n *\n * To be used inside the <DataTable bulkActionsButtons> prop.\n *\n * @example // basic usage\n * import { BulkDeleteButton, BulkExportButton, DataTable, List } from '@/components/admin';\n *\n * export const PostList = () => (\n *   <List>\n *     <DataTable\n *       bulkActionsButtons={\n *         <>\n *           <BulkExportButton />\n *           <BulkDeleteButton />\n *         </>\n *       }\n *     >\n *       ...\n *     </DataTable>\n *   </List>\n * );\n */\nexport const BulkExportButton = <T extends ResourceInformation>({\n  icon = defaultIcon,\n  label = \"ra.action.export\",\n  onClick,\n  ...props\n}: BulkExportButtonProps<T>) => {\n  const { bulkExport } = useBulkExport(props);\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    bulkExport();\n    onClick?.(event);\n  };\n\n  return (\n    <Button\n      onClick={handleClick}\n      role=\"button\"\n      variant=\"outline\"\n      size=\"sm\"\n      className=\"flex items-center gap-2 h-9\"\n      {...sanitizeRestProps(props)}\n    >\n      {icon}\n      {label && <Translate i18nKey={label}>{label}</Translate>}\n    </Button>\n  );\n};\n\nconst defaultIcon = <Download className=\"h-4 w-4\" />;\n\nexport type BulkExportButtonProps<T extends ResourceInformation> = UseBulkExportProps<T> & {\n  icon?: React.ReactNode;\n  label?: string;\n} & React.ComponentProps<typeof Button>;\n\nconst sanitizeRestProps = <T extends ResourceInformation>({\n  resource: _resource,\n  exporter: _exporter,\n  onClick: _onClick,\n  label: _label,\n  icon: _icon,\n  meta: _meta,\n  ...rest\n}: BulkExportButtonProps<T>) => rest;\n","import type { ReactNode } from \"react\";\nimport { useListContext, Translate } from \"ra-core\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { BulkDeleteButton } from \"@/components/admin/bulk-delete-button\";\nimport { X } from \"lucide-react\";\nimport { BulkExportButton } from \"./bulk-export-button\";\n\nexport function BulkActionsToolbarChildren() {\n  return (\n    <>\n      <BulkExportButton />\n      <BulkDeleteButton />\n    </>\n  );\n}\n\nexport const BulkActionsToolbar = ({\n  children = <BulkActionsToolbarChildren />,\n}: {\n  children?: ReactNode;\n}) => {\n  const { selectedIds, onUnselectItems } = useListContext();\n  if (!selectedIds?.length) {\n    return null;\n  }\n  const handleUnselectAll = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    onUnselectItems();\n  };\n  return (\n    <Card className=\"flex flex-col gap-2 md:gap-6 md:flex-row items-stretch sm:items-center p-2 px-4 w-[90%] sm:w-fit mx-auto fixed bottom-2 left-0 right-0 z-10 bg-card dark:bg-card\">\n      <div className=\"flex items-center gap-2\">\n        <Button variant=\"ghost\" className=\"has-[>svg]:px-0\" onClick={handleUnselectAll}>\n          <X />\n        </Button>\n        <span className=\"text-sm text-muted-foreground\">\n          <Translate i18nKey=\"ra.action.bulk_actions\" options={{ smart_count: selectedIds.length }}>\n            {selectedIds.length} rows selected\n          </Translate>\n        </span>\n      </div>\n      {children}\n    </Card>\n  );\n};\n"],"names":["BulkDeleteButton","props","mutationMode","icon","defaultIcon","label","className","mutationOptions","meta","mutationMeta","otherMutationOptions","resource","useResourceContext","deleteMany","isPending","useDeleteMany","selectedIds","onUnselectItems","useListContext","notify","useNotify","refresh","useRefresh","translate","useTranslate","handleClick","e","stopPropagation","ids","onSuccess","__name","messageArgs","smart_count","length","_","undoable","onError","error","errorMessage","message","type","jsxs","Button","variant","onClick","disabled","cn","children","Translate","i18nKey","Trash","useBulkExport","exporter","customExporter","exporterFromContext","dataProvider","useDataProvider","bulkExport","useCallback","getMany","then","data","fetchRelatedRecords","catch","useMemo","BulkExportButton","event","role","size","sanitizeRestProps","jsx","Download","_resource","_exporter","_onClick","_label","_icon","_meta","rest","BulkActionsToolbarChildren","Fragment","BulkActionsToolbar","handleUnselectAll","Card","X","options"],"mappings":"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"}