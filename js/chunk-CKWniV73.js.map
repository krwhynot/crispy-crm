{"version":3,"file":"chunk-CKWniV73.js","sources":["../../src/components/admin/PremiumDatagrid.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport type { DatagridProps } from \"react-admin\";\nimport { Datagrid, useListContext } from \"react-admin\";\nimport { cn } from \"@/lib/utils\";\n\n/**\n * PremiumDatagrid - Enhanced Datagrid wrapper with premium hover effects\n *\n * A thin wrapper around React Admin's Datagrid component that applies premium\n * table row styling and optionally customizes row click behavior.\n *\n * @example\n * ```tsx\n * <PremiumDatagrid onRowClick={(id) => openSlideOver(id)}>\n *   <TextField source=\"name\" />\n *   <TextField source=\"email\" />\n * </PremiumDatagrid>\n * ```\n *\n * Features:\n * - Automatic premium hover effects (border reveal, shadow, lift animation)\n * - Custom row click handling (e.g., open slide-over instead of navigation)\n * - Keyboard navigation support with visual focus indicator\n * - Full compatibility with all React Admin Datagrid features\n * - Sorting, filtering, bulk actions, and pagination work out of the box\n *\n * @see {@link https://marmelab.com/react-admin/Datagrid.html} React Admin Datagrid docs\n */\nexport interface PremiumDatagridProps extends DatagridProps {\n  /**\n   * Custom row click handler.\n   * When provided, overrides the default rowClick behavior.\n   * Return value is ignored - use this for side effects like opening slide-overs.\n   *\n   * @param id - The record ID (number or string)\n   * @returns void\n   */\n  onRowClick?: (id: number | string) => void;\n\n  /**\n   * Index of the row that should show keyboard focus styling.\n   * Use with useListKeyboardNavigation hook for arrow key navigation.\n   * Pass -1 or undefined to disable focus styling.\n   */\n  focusedIndex?: number;\n}\n\n/**\n * PremiumDatagrid Component\n *\n * Wraps React Admin's Datagrid with premium styling and custom row click handling.\n * All Datagrid props are passed through, ensuring full feature compatibility.\n */\nexport function PremiumDatagrid({\n  onRowClick,\n  focusedIndex,\n  rowClassName: _, // Extract and ignore - we always use our own getRowClassName\n  ...props\n}: PremiumDatagridProps) {\n  const { data } = useListContext();\n\n  // Stable row click handler using useCallback to prevent infinite re-renders\n  // Only wraps onRowClick - props.rowClick is passed directly when onRowClick is not provided\n  const handleRowClick = useCallback(\n    (id: string | number) => {\n      onRowClick?.(id);\n      return false; // Prevent default navigation\n    },\n    [onRowClick]\n  );\n\n  // Generate row className with keyboard focus indicator\n  // React Admin's rowClassName receives (record, index) as arguments\n  const getRowClassName = useCallback(\n    (_record: unknown, index: number) => {\n      const isFocused = focusedIndex !== undefined && focusedIndex >= 0 && index === focusedIndex;\n      return cn(\"table-row-premium\", isFocused && \"ring-2 ring-primary ring-inset bg-primary/5\");\n    },\n    [focusedIndex]\n  );\n\n  // Scroll focused row into view\n  // This effect ensures keyboard-navigated rows are visible\n  const scrollFocusedRowIntoView = useCallback(() => {\n    if (focusedIndex === undefined || focusedIndex < 0 || !data) return;\n\n    // Find the table row by index (0-based, excluding header)\n    const tableBody = document.querySelector(\".RaDatagrid-tableWrapper tbody\");\n    if (!tableBody) return;\n\n    const rows = tableBody.querySelectorAll(\"tr\");\n    const focusedRow = rows[focusedIndex] as HTMLElement | undefined;\n    if (focusedRow) {\n      focusedRow.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\n    }\n  }, [focusedIndex, data]);\n\n  // Trigger scroll when focused index changes\n  // Using setTimeout to ensure DOM has updated\n  if (focusedIndex !== undefined && focusedIndex >= 0) {\n    setTimeout(scrollFocusedRowIntoView, 0);\n  }\n\n  return (\n    <Datagrid\n      {...props}\n      rowClassName={getRowClassName}\n      rowClick={onRowClick ? handleRowClick : props.rowClick}\n    />\n  );\n}\n"],"names":["PremiumDatagrid","onRowClick","focusedIndex","rowClassName","_","props","data","useListContext","handleRowClick","useCallback","id","getRowClassName","_record","index","cn","scrollFocusedRowIntoView","tableBody","document","querySelector","focusedRow","querySelectorAll","scrollIntoView","behavior","block","setTimeout","jsx","Datagrid","rowClick"],"mappings":"gLAqDO,SAASA,GAAgBC,WAC9BA,EAAAC,aACAA,EACAC,aAAcC,KACXC,IAEH,MAAMC,KAAEA,GAASC,IAIXC,EAAiBC,EAAAA,YACpBC,IACCT,IAAaS,IACN,GAET,CAACT,IAKGU,EAAkBF,EAAAA,YACtB,CAACG,EAAkBC,IAEVC,EAAG,yBADyB,IAAjBZ,GAA8BA,GAAgB,GAAKW,IAAUX,GACnC,+CAE9C,CAACA,IAKGa,EAA2BN,EAAAA,YAAY,KAC3C,QAAqB,IAAjBP,GAA8BA,EAAe,IAAMI,EAAM,OAG7D,MAAMU,EAAYC,SAASC,cAAc,kCACzC,IAAKF,EAAW,OAEhB,MACMG,EADOH,EAAUI,iBAAiB,MAChBlB,GACpBiB,GACFA,EAAWE,eAAe,CAAEC,SAAU,SAAUC,MAAO,aAExD,CAACrB,EAAcI,IAQlB,YAJqB,IAAjBJ,GAA8BA,GAAgB,GAChDsB,WAAWT,EAA0B,GAIrCU,EAAAA,IAACC,EAAA,IACKrB,EACJF,aAAcQ,EACdgB,SAAU1B,EAAaO,EAAiBH,EAAMsB,UAGpD,2BAzDgB3B,gBAAA"}