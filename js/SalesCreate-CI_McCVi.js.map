{"version":3,"file":"SalesCreate-CI_McCVi.js","sources":["../../src/atomic-crm/sales/SalesCreate.tsx"],"sourcesContent":["import { SimpleForm } from \"@/components/admin/simple-form\";\nimport { FormErrorSummary } from \"@/components/admin/FormErrorSummary\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useDataProvider, useNotify, useRedirect } from \"ra-core\";\nimport { useFormState } from \"react-hook-form\";\nimport type { SubmitHandler } from \"react-hook-form\";\nimport { SalesService } from \"../services\";\nimport type { SalesFormData } from \"../types\";\nimport { createSalesSchema } from \"../validation/sales\";\nimport { SalesInputs } from \"./SalesInputs\";\n\nexport default function SalesCreate() {\n  const dataProvider = useDataProvider();\n  const notify = useNotify();\n  const redirect = useRedirect();\n\n  const salesService = new SalesService(dataProvider);\n\n  const formDefaults = {\n    ...createSalesSchema.partial().parse({}),\n  };\n\n  const { mutate } = useMutation({\n    mutationKey: [\"signup\"],\n    mutationFn: async (data: SalesFormData) => {\n      return salesService.salesCreate(data);\n    },\n    onSuccess: () => {\n      notify(\"User created. They will soon receive an email to set their password.\");\n      redirect(\"/sales\");\n    },\n    onError: () => {\n      notify(\"An error occurred while creating the user.\", {\n        type: \"error\",\n      });\n    },\n  });\n  const onSubmit: SubmitHandler<SalesFormData> = async (data) => {\n    mutate(data);\n  };\n\n  return (\n    <div className=\"bg-muted max-w-lg w-full mx-auto mt-8 px-6 py-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle>Create a new user</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <SimpleForm onSubmit={onSubmit as SubmitHandler<any>} defaultValues={formDefaults}>\n            <SalesFormContent />\n          </SimpleForm>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nconst SalesFormContent = () => {\n  const { errors } = useFormState();\n\n  return (\n    <>\n      <FormErrorSummary errors={errors} />\n      <SalesInputs />\n    </>\n  );\n};\n"],"names":["SalesCreate","dataProvider","useDataProvider","notify","useNotify","redirect","useRedirect","salesService","SalesService","formDefaults","createSalesSchema","partial","parse","mutate","useMutation","mutationKey","mutationFn","data","salesCreate","onSuccess","__name","onError","type","onSubmit","jsx","className","children","Card","CardHeader","CardTitle","CardContent","SimpleForm","defaultValues","SalesFormContent","errors","useFormState","jsxs","Fragment","FormErrorSummary","SalesInputs"],"mappings":"4pBAYA,SAAwBA,IACtB,MAAMC,EAAeC,IACfC,EAASC,IACTC,EAAWC,IAEXC,EAAe,IAAIC,EAAaP,GAEhCQ,EAAe,IAChBC,EAAkBC,UAAUC,MAAM,CAAA,KAGjCC,OAAEA,GAAWC,EAAY,CAC7BC,YAAa,CAAC,UACdC,mBAAmBC,GACVV,EAAaW,YAAYD,GADtB,cAGZE,UAAWC,EAAA,KACTjB,EAAO,wEACPE,EAAS,WAFA,aAIXgB,QAASD,EAAA,KACPjB,EAAO,6CAA8C,CACnDmB,KAAM,WAFD,aAMLC,UAAgDN,IACpDJ,EAAOI,IADsC,YAI/C,OACEO,EAAAA,IAAC,MAAA,CAAIC,UAAU,kDACbC,gBAACC,EAAA,CACCD,SAAA,CAAAF,MAACI,EAAA,CACCF,SAAAF,EAAAA,IAACK,EAAA,CAAUH,SAAA,wBAEbF,EAAAA,IAACM,EAAA,CACCJ,SAAAF,EAAAA,IAACO,EAAA,CAAWR,WAA0CS,cAAevB,EACnEiB,WAAAF,IAACS,EAAA,CAAA,WAMb,CA5CwBb,EAAApB,EAAA,eA8CxB,MAAMiC,EAAmBb,EAAA,KACvB,MAAMc,OAAEA,GAAWC,IAEnB,OACEC,EAAAA,KAAAC,WAAA,CACEX,SAAA,CAAAF,MAACc,GAAiBJ,iBACjBK,EAAA,CAAA,OANkB"}