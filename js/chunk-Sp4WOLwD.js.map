{"version":3,"file":"chunk-Sp4WOLwD.js","sources":["../../src/components/admin/reference-many-field.tsx"],"sourcesContent":["import type { ReactNode } from \"react\";\nimport type {\n  RaRecord,\n  UseReferenceManyFieldControllerParams,\n  ListControllerResult,\n} from \"ra-core\";\nimport { ReferenceManyFieldBase, useListContext } from \"ra-core\";\n\nexport const ReferenceManyField = <\n  RecordType extends RaRecord = RaRecord,\n  ReferenceRecordType extends RaRecord = RaRecord,\n>(\n  props: ReferenceManyFieldProps<RecordType, ReferenceRecordType>\n) => {\n  const {\n    children,\n    empty,\n    error,\n    loading,\n    pagination,\n    render,\n    // Filter out React Admin-specific props that shouldn't be passed to child components\n    label: _label,\n    sortable: _sortable,\n    sortBy: _sortBy,\n    textAlign: _textAlign,\n    rowClassName: _rowClassName,\n    cellClassName: _cellClassName,\n    headerClassName: _headerClassName,\n    ...rest\n  } = props;\n\n  return (\n    <ReferenceManyFieldBase {...rest}>\n      <ReferenceManyFieldView<ReferenceRecordType>\n        empty={empty}\n        error={error}\n        loading={loading}\n        pagination={pagination}\n        render={render}\n      >\n        {children}\n      </ReferenceManyFieldView>\n    </ReferenceManyFieldBase>\n  );\n};\n\nexport interface ReferenceManyFieldProps<\n  RecordType extends RaRecord = RaRecord,\n  ReferenceRecordType extends RaRecord = RaRecord,\n> extends UseReferenceManyFieldControllerParams<RecordType, ReferenceRecordType>,\n    ReferenceManyFieldViewProps<ReferenceRecordType> {}\n\nconst ReferenceManyFieldView = <ReferenceRecordType extends RaRecord = RaRecord>(\n  props: ReferenceManyFieldViewProps<ReferenceRecordType>\n) => {\n  const { children, empty, error: errorElement, loading, pagination, render } = props;\n  const listContext = useListContext();\n  const { isPending, error, total, hasPreviousPage, hasNextPage, data, filterValues } = listContext;\n\n  if (isPending && loading !== false) {\n    return loading;\n  }\n  if (error && errorElement !== false) {\n    return errorElement;\n  }\n  if (\n    (total === 0 ||\n      (total == null &&\n        hasPreviousPage === false &&\n        hasNextPage === false &&\n        // @ts-expect-error FIXME total may be undefined when using partial pagination but the ListControllerResult type is wrong about it\n        data.length === 0 &&\n        // the user didn't set any filters\n        !Object.keys(filterValues).length)) &&\n    empty !== false\n  ) {\n    return empty;\n  }\n\n  return (\n    <>\n      {render && render(listContext)}\n      {children}\n      {pagination}\n    </>\n  );\n};\n\nexport interface ReferenceManyFieldViewProps<ReferenceRecordType extends RaRecord = RaRecord> {\n  children?: ReactNode;\n  empty?: ReactNode;\n  error?: ReactNode;\n  loading?: ReactNode;\n  pagination?: ReactNode;\n  render?: (props: ListControllerResult<ReferenceRecordType>) => ReactNode;\n}\n"],"names":["ReferenceManyField","props","children","empty","error","loading","pagination","render","label","_label","sortable","_sortable","sortBy","_sortBy","textAlign","_textAlign","rowClassName","_rowClassName","cellClassName","_cellClassName","headerClassName","_headerClassName","rest","jsx","ReferenceManyFieldBase","ReferenceManyFieldView","errorElement","listContext","useListContext","isPending","total","hasPreviousPage","hasNextPage","data","filterValues","length","Object","keys","jsxs","Fragment"],"mappings":"mIAQO,MAAMA,IAIXC,IAEA,MAAMC,SACJA,EAAAC,MACAA,EAAAC,MACAA,EAAAC,QACAA,EAAAC,WACAA,EAAAC,OACAA,EAEAC,MAAOC,EACPC,SAAUC,EACVC,OAAQC,EACRC,UAAWC,EACXC,aAAcC,EACdC,cAAeC,EACfC,gBAAiBC,KACdC,GACDrB,EAEJ,SACEsB,IAACC,EAAA,IAA2BF,EAC1BpB,SAAAqB,EAAAA,IAACE,EAAA,CACCtB,QACAC,QACAC,UACAC,aACAC,SAECL,gBAjCyB,sBA6C5BuB,IACJxB,IAEA,MAAMC,SAAEA,QAAUC,EAAOC,MAAOsB,UAAcrB,EAAAC,WAASA,EAAAC,OAAYA,GAAWN,EACxE0B,EAAcC,KACdC,UAAEA,QAAWzB,EAAA0B,MAAOA,EAAAC,gBAAOA,cAAiBC,EAAAC,KAAaA,EAAAC,aAAMA,GAAiBP,EAEtF,OAAIE,IAAyB,IAAZxB,EACRA,EAELD,IAA0B,IAAjBsB,EACJA,EAGI,IAAVI,IACW,MAATA,IACqB,IAApBC,IACgB,IAAhBC,GAEgB,IAAhBC,EAAKE,QAEJC,OAAOC,KAAKH,GAAcC,UACrB,IAAVhC,EAMAmC,EAAAA,KAAAC,WAAA,CACGrC,SAAA,CAAAK,GAAUA,EAAOoB,GACjBzB,EACAI,KAPIH,GAxBoB"}