{"version":3,"file":"chunk-B8iwsXIk.js","sources":["../../src/atomic-crm/activities/components/ActivityTimelineEntry.tsx","../../src/atomic-crm/activities/constants.ts"],"sourcesContent":["import { Check, Mail, Phone, Users, FileText, Target } from \"lucide-react\";\nimport { RecordContextProvider } from \"ra-core\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { format } from \"date-fns\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ReferenceField } from \"@/components/admin/reference-field\";\nimport type { ActivityRecord } from \"../../types\";\nimport { parseDateSafely } from \"@/lib/date-utils\";\n\ninterface ActivityTimelineEntryProps {\n  activity: ActivityRecord;\n}\n\nexport const ActivityTimelineEntry = ({ activity }: ActivityTimelineEntryProps) => {\n  const getActivityIcon = (type: string) => {\n    switch (type) {\n      case \"call\":\n        return <Phone className=\"h-4 w-4\" />;\n      case \"email\":\n        return <Mail className=\"h-4 w-4\" />;\n      case \"meeting\":\n        return <Users className=\"h-4 w-4\" />;\n      case \"note\":\n        return <FileText className=\"h-4 w-4\" />;\n      default:\n        return <Target className=\"h-4 w-4\" />;\n    }\n  };\n\n  return (\n    <RecordContextProvider value={activity}>\n      <div className=\"flex gap-4 p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors\">\n        <div className=\"flex-shrink-0 mt-1\">\n          <div className=\"w-11 h-11 rounded-full bg-primary/10 flex items-center justify-center\">\n            {getActivityIcon(activity.type)}\n          </div>\n        </div>\n\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-start justify-between mb-1\">\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <span className=\"font-medium text-sm\">\n                {activity.type.charAt(0).toUpperCase() + activity.type.slice(1).replace(\"_\", \" \")}\n              </span>\n              {activity.created_by && (\n                <span className=\"text-sm text-muted-foreground\">\n                  by <ReferenceField source=\"created_by\" reference=\"sales\" link={false} />\n                </span>\n              )}\n            </div>\n            <span className=\"text-xs text-muted-foreground ml-2\">\n              {format(\n                parseDateSafely(activity.activity_date || activity.created_at) ?? new Date(),\n                \"MMM d, yyyy h:mm a\"\n              )}\n            </span>\n          </div>\n\n          {activity.subject && <div className=\"text-sm font-medium mb-1\">{activity.subject}</div>}\n          {activity.description && (\n            <div className=\"text-sm text-foreground whitespace-pre-line\">\n              {activity.description}\n            </div>\n          )}\n\n          <div className=\"flex items-center gap-2 mt-2 -ml-2\">\n            {(activity as ActivityRecord & { related_task_id?: string | number })\n              .related_task_id && (\n              <RouterLink\n                to={`/tasks/${(activity as ActivityRecord & { related_task_id?: string | number }).related_task_id}`}\n                className=\"inline-flex items-center gap-1.5 min-h-11 px-2 text-xs text-primary hover:underline hover:bg-muted/50 rounded-md transition-colors\"\n              >\n                <Check className=\"h-4 w-4\" />\n                Related Task\n              </RouterLink>\n            )}\n            {activity.opportunity_id && (\n              <RouterLink\n                to={`/opportunities/${activity.opportunity_id}/show`}\n                className=\"inline-flex items-center gap-1.5 min-h-11 px-2 text-xs text-primary hover:underline hover:bg-muted/50 rounded-md transition-colors\"\n              >\n                <Target className=\"h-4 w-4\" />\n                View Opportunity\n              </RouterLink>\n            )}\n            {activity.organization_id && (\n              <RouterLink\n                to={`/organizations/${activity.organization_id}/show`}\n                className=\"inline-flex items-center gap-1.5 min-h-11 px-2 text-xs text-primary hover:underline hover:bg-muted/50 rounded-md transition-colors\"\n              >\n                <FileText className=\"h-4 w-4\" />\n                View Organization\n              </RouterLink>\n            )}\n          </div>\n\n          {(activity.sentiment || activity.follow_up_required) && (\n            <div className=\"flex items-center gap-2 mt-2\">\n              {activity.sentiment && (\n                <Badge\n                  variant=\"outline\"\n                  className={\n                    activity.sentiment === \"positive\"\n                      ? \"border-success text-success\"\n                      : activity.sentiment === \"negative\"\n                        ? \"border-error text-error\"\n                        : \"\"\n                  }\n                >\n                  {activity.sentiment}\n                </Badge>\n              )}\n              {activity.follow_up_required && (\n                <Badge variant=\"outline\" className=\"border-warning text-warning\">\n                  Follow-up Required\n                </Badge>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </RecordContextProvider>\n  );\n};\n","/**\n * Centralized constants for activities module\n * Maintains single source of truth for pagination and activity-related configuration\n */\n\n/**\n * Default page size for activity timeline displays\n * Used across:\n * - Contact activities tab\n * - Organization activities tab\n * - Opportunity activities tab\n */\nexport const ACTIVITY_PAGE_SIZE = 50;\n"],"names":["ActivityTimelineEntry","__name","activity","getActivityIcon","type","jsx","Phone","className","Mail","Users","FileText","Target","RecordContextProvider","value","children","jsxs","charAt","toUpperCase","slice","replace","created_by","ReferenceField","source","reference","link","format","parseDateSafely","activity_date","created_at","Date","subject","description","related_task_id","RouterLink","to","Check","opportunity_id","organization_id","sentiment","follow_up_required","Badge","variant","ACTIVITY_PAGE_SIZE"],"mappings":"wXAaO,MAAMA,EAAwBC,EAAA,EAAGC,eACtC,MAAMC,IAAmBC,IACvB,OAAQA,GACN,IAAK,OACH,SAAOC,IAACC,EAAA,CAAMC,UAAU,YAC1B,IAAK,QACH,SAAOF,IAACG,EAAA,CAAKD,UAAU,YACzB,IAAK,UACH,SAAOF,IAACI,EAAA,CAAMF,UAAU,YAC1B,IAAK,OACH,SAAOF,IAACK,EAAA,CAASH,UAAU,YAC7B,QACE,SAAOF,IAACM,EAAA,CAAOJ,UAAU,cAXP,mBAexB,aACGK,EAAA,CAAsBC,MAAOX,EAC5BY,SAAAC,EAAAA,KAAC,MAAA,CAAIR,UAAU,qFACbO,SAAA,CAAAT,EAAAA,IAAC,MAAA,CAAIE,UAAU,qBACbO,WAAAT,IAAC,MAAA,CAAIE,UAAU,wEACZO,SAAAX,EAAgBD,EAASE,YAI9BW,KAAC,MAAA,CAAIR,UAAU,iBACbO,SAAA,GAAAC,KAAC,MAAA,CAAIR,UAAU,wCACbO,SAAA,GAAAC,KAAC,MAAA,CAAIR,UAAU,oCACbO,SAAA,CAAAT,MAAC,QAAKE,UAAU,sBACbO,WAASV,KAAKY,OAAO,GAAGC,cAAgBf,EAASE,KAAKc,MAAM,GAAGC,QAAQ,IAAK,OAE9EjB,EAASkB,YACRL,OAAC,OAAA,CAAKR,UAAU,gCAAgCO,SAAA,CAAA,YAC1CO,EAAA,CAAeC,OAAO,aAAaC,UAAU,QAAQC,MAAM,YAIrEnB,IAAC,OAAA,CAAKE,UAAU,qCACbO,SAAAW,EACCC,EAAgBxB,EAASyB,eAAiBzB,EAAS0B,iBAAmBC,KACtE,2BAKL3B,EAAS4B,SAAWzB,EAAAA,IAAC,OAAIE,UAAU,2BAA4BO,WAASgB,UACxE5B,EAAS6B,aACR1B,EAAAA,IAAC,OAAIE,UAAU,8CACZO,WAASiB,gBAIdhB,KAAC,MAAA,CAAIR,UAAU,qCACXO,SAAA,CAAAZ,EACC8B,iBACDjB,EAAAA,KAACkB,EAAA,CACCC,GAAI,UAAWhC,EAAoE8B,kBACnFzB,UAAU,qIAEVO,SAAA,GAAAT,IAAC8B,EAAA,CAAM5B,UAAU,YAAY,kBAIhCL,EAASkC,gBACRrB,EAAAA,KAACkB,EAAA,CACCC,GAAI,kBAAkBhC,EAASkC,sBAC/B7B,UAAU,qIAEVO,SAAA,GAAAT,IAACM,EAAA,CAAOJ,UAAU,YAAY,sBAIjCL,EAASmC,iBACRtB,EAAAA,KAACkB,EAAA,CACCC,GAAI,kBAAkBhC,EAASmC,uBAC/B9B,UAAU,qIAEVO,SAAA,GAAAT,IAACK,EAAA,CAASH,UAAU,YAAY,2BAMpCL,EAASoC,WAAapC,EAASqC,qBAC/BxB,OAAC,MAAA,CAAIR,UAAU,+BACZO,SAAA,CAAAZ,EAASoC,WACRjC,EAAAA,IAACmC,EAAA,CACCC,QAAQ,UACRlC,UACyB,aAAvBL,EAASoC,UACL,8BACuB,aAAvBpC,EAASoC,UACP,0BACA,GAGPxB,SAAAZ,EAASoC,YAGbpC,EAASqC,oBACRlC,MAACmC,EAAA,CAAMC,QAAQ,UAAUlC,UAAU,8BAA8BO,SAAA,mCApG5C,yBCDxB4B,EAAqB"}