{"version":3,"mappings":"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","names":["cleanupOldReportKeys","localStorage","getItem","forEach","key","removeItem","setItem","ReportPageShell","title","breadcrumbs","actions","children","jsxs","className","length","jsx","map","crumb","index","ChevronRight","href","Link","to","label","__name","OverviewTab","lazy","__vitePreload","import","__VITE_PRELOAD__","OpportunitiesTab","WeeklyActivityTab","CampaignActivityTab","TabSkeleton","Skeleton","Array","_","i","ReportsPage","searchParams","setSearchParams","useSearchParams","activeTab","get","useEffect","handleTabChange","value","tab","overview","opportunities","weekly","campaign","Tabs","onValueChange","TabsList","TabsTrigger","TabsContent","Suspense","fallback"],"ignoreList":[],"sources":["../../src/atomic-crm/reports/utils/cleanupMigration.ts","../../src/atomic-crm/reports/components/ReportPageShell.tsx","../../src/atomic-crm/reports/ReportsPage.tsx"],"sourcesContent":["/**\n * Cleanup migration utility for transitioning from old reports to tabbed interface\n * Removes localStorage keys used by the previous reports implementation\n *\n * This function is idempotent - it checks if migration was already performed\n * before cleaning up keys, avoiding unnecessary localStorage operations.\n */\nexport function cleanupOldReportKeys(): void {\n  // Skip if migration already completed\n  if (localStorage.getItem(\"reports.migration.completed\") === \"true\") {\n    return;\n  }\n\n  const oldKeys = [\n    \"reports.opportunities.filters\",\n    \"reports.weekly.filters\",\n    \"reports.campaign.filters\",\n    \"report-view-preference\",\n  ];\n\n  oldKeys.forEach((key) => {\n    localStorage.removeItem(key);\n  });\n\n  // Mark migration as complete\n  localStorage.setItem(\"reports.migration.completed\", \"true\");\n\n  if (process.env.NODE_ENV === \"development\") {\n    console.log(\"[Reports Migration] Cleaned up old localStorage keys\");\n  }\n}\n","import type { ReactNode } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { ChevronRight } from \"lucide-react\";\n\ninterface Breadcrumb {\n  label: string;\n  href?: string;\n}\n\ninterface ReportPageShellProps {\n  title: string;\n  breadcrumbs: Breadcrumb[];\n  actions?: ReactNode;\n  children: ReactNode;\n}\n\nexport function ReportPageShell({ title, breadcrumbs, actions, children }: ReportPageShellProps) {\n  return (\n    <div className=\"p-content lg:p-widget space-y-section\">\n      {breadcrumbs.length > 0 && (\n        <nav aria-label=\"Breadcrumb\" className=\"flex items-center gap-1 text-sm\">\n          {breadcrumbs.map((crumb, index) => (\n            <span key={crumb.label} className=\"flex items-center gap-1\">\n              {index > 0 && (\n                <ChevronRight className=\"h-4 w-4 text-muted-foreground\" aria-hidden=\"true\" />\n              )}\n              {crumb.href ? (\n                <Link\n                  to={crumb.href}\n                  className=\"text-muted-foreground hover:text-foreground transition-colors\"\n                >\n                  {crumb.label}\n                </Link>\n              ) : (\n                <span className=\"text-foreground font-medium\">{crumb.label}</span>\n              )}\n            </span>\n          ))}\n        </nav>\n      )}\n\n      <div className=\"flex items-center justify-between gap-content\">\n        <h1 className=\"text-3xl font-bold\">{title}</h1>\n        {actions && <div className=\"flex items-center gap-compact\">{actions}</div>}\n      </div>\n\n      <div className=\"space-y-section\">{children}</div>\n    </div>\n  );\n}\n","import { useSearchParams } from \"react-router-dom\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Suspense, lazy, useEffect } from \"react\";\nimport { cleanupOldReportKeys } from \"./utils/cleanupMigration\";\nimport { ReportPageShell } from \"./components/ReportPageShell\";\n\nconst OverviewTab = lazy(() => import(\"./tabs/OverviewTab\"));\nconst OpportunitiesTab = lazy(() => import(\"./tabs/OpportunitiesTab\"));\nconst WeeklyActivityTab = lazy(() => import(\"./tabs/WeeklyActivityTab\"));\nconst CampaignActivityTab = lazy(() => import(\"./tabs/CampaignActivityTab\"));\n\nfunction TabSkeleton() {\n  return (\n    <div className=\"space-y-section\">\n      <Skeleton className=\"h-14 w-full rounded-lg\" />\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-content\">\n        {[...Array(4)].map((_, i) => (\n          <Skeleton key={i} className=\"h-32 rounded-lg\" />\n        ))}\n      </div>\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-section\">\n        <Skeleton className=\"h-80 rounded-lg\" />\n        <Skeleton className=\"h-80 rounded-lg\" />\n      </div>\n    </div>\n  );\n}\n\nexport default function ReportsPage() {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const activeTab = searchParams.get(\"tab\") || \"overview\";\n\n  useEffect(() => {\n    cleanupOldReportKeys();\n  }, []);\n\n  const handleTabChange = (value: string) => {\n    setSearchParams({ tab: value });\n  };\n\n  const tabLabels: Record<string, string> = {\n    overview: \"Overview\",\n    opportunities: \"Opportunities by Principal\",\n    weekly: \"Weekly Activity\",\n    campaign: \"Campaign Activity\",\n  };\n\n  const breadcrumbs = [\n    { label: \"Reports\", href: \"/reports?tab=overview\" },\n    { label: tabLabels[activeTab] || \"Overview\" },\n  ];\n\n  return (\n    <ReportPageShell title=\"Reports & Analytics\" breadcrumbs={breadcrumbs}>\n      <Tabs value={activeTab} onValueChange={handleTabChange}>\n        <TabsList className=\"grid w-full grid-cols-2 lg:grid-cols-4 h-auto\">\n          <TabsTrigger value=\"overview\" className=\"h-11\">\n            Overview\n          </TabsTrigger>\n          <TabsTrigger value=\"opportunities\" className=\"h-11\">\n            Opportunities\n          </TabsTrigger>\n          <TabsTrigger value=\"weekly\" className=\"h-11\">\n            Weekly Activity\n          </TabsTrigger>\n          <TabsTrigger value=\"campaign\" className=\"h-11\">\n            Campaign\n          </TabsTrigger>\n        </TabsList>\n\n        <div className=\"mt-section\">\n          <TabsContent value=\"overview\" className=\"mt-0\">\n            <Suspense fallback={<TabSkeleton />}>\n              <OverviewTab />\n            </Suspense>\n          </TabsContent>\n\n          <TabsContent value=\"opportunities\" className=\"mt-0\">\n            <Suspense fallback={<TabSkeleton />}>\n              <OpportunitiesTab />\n            </Suspense>\n          </TabsContent>\n\n          <TabsContent value=\"weekly\" className=\"mt-0\">\n            <Suspense fallback={<TabSkeleton />}>\n              <WeeklyActivityTab />\n            </Suspense>\n          </TabsContent>\n\n          <TabsContent value=\"campaign\" className=\"mt-0\">\n            <Suspense fallback={<TabSkeleton />}>\n              <CampaignActivityTab />\n            </Suspense>\n          </TabsContent>\n        </div>\n      </Tabs>\n    </ReportPageShell>\n  );\n}\n"],"file":"ReportsPage-B699zXKf.js"}