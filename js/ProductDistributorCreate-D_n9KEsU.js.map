{"version":3,"file":"ProductDistributorCreate-D_n9KEsU.js","sources":["../../src/atomic-crm/productDistributors/ProductDistributorCreate.tsx"],"sourcesContent":["import { useMemo } from \"react\";\nimport { CreateBase, Form } from \"ra-core\";\nimport { useFormState } from \"react-hook-form\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { TextInput } from \"@/components/admin/text-input\";\nimport { SelectInput } from \"@/components/admin/select-input\";\nimport { ReferenceInput } from \"@/components/admin/reference-input\";\nimport { AutocompleteInput } from \"@/components/admin/autocomplete-input\";\nimport { CancelButton } from \"@/components/admin/cancel-button\";\nimport { SaveButton } from \"@/components/admin/form\";\nimport { FormToolbar } from \"@/components/admin/simple-form\";\nimport { FormErrorSummary } from \"@/components/admin/FormErrorSummary\";\nimport { productDistributorSchema } from \"../validation/productDistributors\";\nimport { PRODUCT_DISTRIBUTOR_STATUS_CHOICES } from \"./constants\";\n\n// Human-readable field labels for error messages\nconst FIELD_LABELS: Record<string, string> = {\n  product_id: \"Product\",\n  distributor_id: \"Distributor\",\n  vendor_item_number: \"DOT Number\",\n  status: \"Status\",\n  valid_from: \"Valid From\",\n  valid_to: \"Valid To\",\n  notes: \"Notes\",\n};\n\nexport const ProductDistributorCreate = () => {\n  // Constitution Rule #4: Form state from schema\n  const defaultValues = useMemo(\n    () => productDistributorSchema.partial().parse({}),\n    []\n  );\n\n  return (\n    <CreateBase redirect=\"list\">\n      <div className=\"bg-muted mt-2 px-6 py-6\">\n        <Card>\n          <CardContent>\n            <Form defaultValues={defaultValues} warnWhenUnsavedChanges>\n              <ProductDistributorFormContent />\n            </Form>\n          </CardContent>\n        </Card>\n      </div>\n    </CreateBase>\n  );\n};\n\nconst ProductDistributorFormContent = () => {\n  const { errors } = useFormState();\n\n  return (\n    <>\n      {/* Constitution: FormErrorSummary for error aggregation */}\n      <FormErrorSummary\n        errors={errors}\n        fieldLabels={FIELD_LABELS}\n        defaultExpanded={Object.keys(errors).length <= 3}\n      />\n\n      <ReferenceInput source=\"product_id\" reference=\"products\" isRequired>\n        <AutocompleteInput\n          optionText=\"name\"\n          label=\"Product *\"\n          filterToQuery={(q) => ({ \"name@ilike\": `%${q}%` })}\n          helperText=\"Select the product\"\n        />\n      </ReferenceInput>\n\n      <ReferenceInput source=\"distributor_id\" reference=\"organizations\" isRequired>\n        <AutocompleteInput\n          optionText=\"name\"\n          label=\"Distributor *\"\n          filterToQuery={(q) => ({ \"name@ilike\": `%${q}%`, organization_type: \"distributor\" })}\n          helperText=\"Select the distributor\"\n        />\n      </ReferenceInput>\n\n      <TextInput\n        source=\"vendor_item_number\"\n        label=\"DOT Number (Vendor Item #)\"\n        helperText=\"e.g., USF# 4587291, Sysco# 1092847\"\n        fullWidth\n      />\n\n      <SelectInput\n        source=\"status\"\n        label=\"Status\"\n        choices={PRODUCT_DISTRIBUTOR_STATUS_CHOICES}\n        helperText={false}\n      />\n\n      <TextInput\n        source=\"valid_from\"\n        label=\"Valid From\"\n        type=\"date\"\n        helperText={false}\n      />\n\n      <TextInput source=\"valid_to\" label=\"Valid To\" type=\"date\" helperText=\"Leave empty if ongoing\" />\n\n      <TextInput\n        source=\"notes\"\n        label=\"Notes\"\n        multiline\n        rows={3}\n        fullWidth\n        helperText={false}\n      />\n\n      <FormToolbar>\n        <div className=\"flex flex-row gap-2 justify-end\">\n          <CancelButton />\n          <SaveButton label=\"Create Authorization\" />\n        </div>\n      </FormToolbar>\n    </>\n  );\n};\n\nexport default ProductDistributorCreate;\n"],"names":["FIELD_LABELS","product_id","distributor_id","vendor_item_number","status","valid_from","valid_to","notes","ProductDistributorCreate","__name","defaultValues","useMemo","productDistributorSchema","partial","parse","jsx","CreateBase","redirect","children","className","Card","CardContent","Form","warnWhenUnsavedChanges","ProductDistributorFormContent","errors","useFormState","jsxs","Fragment","FormErrorSummary","fieldLabels","defaultExpanded","Object","keys","length","ReferenceInput","source","reference","isRequired","AutocompleteInput","optionText","label","filterToQuery","q","helperText","organization_type","TextInput","fullWidth","SelectInput","choices","PRODUCT_DISTRIBUTOR_STATUS_CHOICES","type","multiline","rows","FormToolbar","CancelButton","SaveButton"],"mappings":"svBAgBA,MAAMA,EAAuC,CAC3CC,WAAY,UACZC,eAAgB,cAChBC,mBAAoB,aACpBC,OAAQ,SACRC,WAAY,aACZC,SAAU,WACVC,MAAO,SAGIC,EAA2BC,EAAA,KAEtC,MAAMC,EAAgBC,EAAAA,QACpB,IAAMC,EAAyBC,UAAUC,MAAM,CAAA,GAC/C,IAGF,OACEC,EAAAA,IAACC,GAAWC,SAAS,OACnBC,eAAC,MAAA,CAAIC,UAAU,0BACbD,SAAAH,EAAAA,IAACK,EAAA,CACCF,SAAAH,EAAAA,IAACM,GACCH,SAAAH,EAAAA,IAACO,EAAA,CAAKZ,gBAA8Ba,wBAAsB,EACxDL,WAAAH,IAACS,iBAbyB,4BAsBlCA,EAAgCf,EAAA,KACpC,MAAMgB,OAAEA,GAAWC,IAEnB,OACEC,EAAAA,KAAAC,WAAA,CAEEV,SAAA,CAAAH,EAAAA,IAACc,EAAA,CACCJ,SACAK,YAAa9B,EACb+B,gBAAiBC,OAAOC,KAAKR,GAAQS,QAAU,UAGhDC,EAAA,CAAeC,OAAO,aAAaC,UAAU,WAAWC,YAAU,EACjEpB,SAAAH,EAAAA,IAACwB,EAAA,CACCC,WAAW,OACXC,MAAM,YACNC,gBAAgBC,IAAA,CAAS,aAAc,IAAIA,OAA5B,iBACfC,WAAW,+BAIdT,EAAA,CAAeC,OAAO,iBAAiBC,UAAU,gBAAgBC,YAAU,EAC1EpB,SAAAH,EAAAA,IAACwB,EAAA,CACCC,WAAW,OACXC,MAAM,gBACNC,cAAejC,EAACkC,IAAA,CAAS,aAAc,IAAIA,KAAME,kBAAmB,gBAArD,iBACfD,WAAW,6BAIf7B,EAAAA,IAAC+B,EAAA,CACCV,OAAO,qBACPK,MAAM,6BACNG,WAAW,qCACXG,WAAS,IAGXhC,EAAAA,IAACiC,EAAA,CACCZ,OAAO,SACPK,MAAM,SACNQ,QAASC,EACTN,YAAY,IAGd7B,EAAAA,IAAC+B,EAAA,CACCV,OAAO,aACPK,MAAM,aACNU,KAAK,OACLP,YAAY,IAGd7B,EAAAA,IAAC+B,GAAUV,OAAO,WAAWK,MAAM,WAAWU,KAAK,OAAOP,WAAW,2BAErE7B,EAAAA,IAAC+B,EAAA,CACCV,OAAO,QACPK,MAAM,QACNW,WAAS,EACTC,KAAM,EACNN,WAAS,EACTH,YAAY,IAGd7B,MAACuC,EAAA,CACCpC,SAAAS,EAAAA,KAAC,MAAA,CAAIR,UAAU,kCACbD,SAAA,CAAAH,EAAAA,IAACwC,EAAA,MACDxC,IAACyC,EAAA,CAAWf,MAAM,kCAjEU"}