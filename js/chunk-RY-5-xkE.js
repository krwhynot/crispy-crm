var e=Object.defineProperty,s=(s,r)=>e(s,"name",{value:r,configurable:!0});import{$ as r,v as a,Q as n,U as t,j as i,_ as o,l,av as c}from"./chunk-ByJg_QQB.js";import{E as d}from"./chunk-DfGVVS-c.js";import{R as m}from"./chunk-DbeoRBEW.js";import{S as x}from"./chunk-BI4rbfTW.js";import{C as h,b as u,c as p,a as j,d as g,s as f,r as N}from"../assets/index-BoLku8RR.js";import{g as _,D as b}from"./chunk-DkiUngdk.js";import{A as y}from"./chunk-BY7AmvEs.js";import{r as k,L as v}from"./chunk-1NZFT-6z.js";import"./chunk-CRKBdUTG.js";import{S as w}from"./chunk-j7Lqvg-1.js";import{a4 as z,a as C,U as S,ab as I,ac as A,ad as O}from"./chunk-Bc6KM1xM.js";import{b as P,P as V}from"./chunk-B0BZInrb.js";const L=s(()=>{const e=r(),o=a(),[l,c]=k.useState(!1),{data:d,isLoading:m}=n("organizations",{id:e?.parent_organization_id},{enabled:!!e?.parent_organization_id}),{data:x,isLoading:f}=t("organizations",{filter:{parent_organization_id:e?.parent_organization_id,"id@neq":e?.id},sort:{field:"name",order:"ASC"},pagination:{page:1,perPage:100}},{enabled:!!e?.parent_organization_id});if(!e||!e.parent_organization_id||m||f)return null;if(!d)return null;const N=x?.length||0,_=l?x:x?.slice(0,3),b=N>3;return i.jsxs(h,{children:[i.jsx(u,{children:i.jsxs(p,{className:"flex items-center gap-2 text-base",children:[i.jsx(z,{className:"h-4 w-4"}),"Organization Hierarchy"]})}),i.jsxs(j,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Parent Organization"}),i.jsxs(v,{to:o({resource:"organizations",type:"edit",id:d.id}),className:"flex items-center justify-between p-2 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(z,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-medium",children:d.name})]}),i.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]})]}),N>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm text-muted-foreground mb-2 flex items-center justify-between",children:[i.jsx("span",{children:"Sister Branches"}),i.jsx(g,{variant:"secondary",className:"text-xs",children:N})]}),i.jsx("div",{className:"space-y-1",children:_?.map(e=>i.jsxs(v,{to:o({resource:"organizations",type:"edit",id:e.id}),className:"flex items-center justify-between p-2 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(S,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm",children:e.name})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[e.city&&i.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.city,e.state&&`, ${e.state}`]}),i.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]})]},e.id))}),b&&!l&&i.jsxs("button",{onClick:s(()=>c(!0),"onClick"),className:"mt-2 text-sm text-primary hover:underline",children:["Show all ",N," sister branches"]}),b&&l&&i.jsx("button",{onClick:s(()=>c(!1),"onClick"),className:"mt-2 text-sm text-muted-foreground hover:text-primary",children:"Show less"})]})]})]})},"ParentOrganizationSection"),U=s(e=>{const{empty:s,className:r,defaultValue:a,source:n,record:t,label:c,sortable:d,sortBy:m,textAlign:x,rowClassName:h,cellClassName:u,headerClassName:p,resource:j,...g}=e,N=o({defaultValue:a,source:n,record:t}),_=l();return null==N?s?i.jsx("span",{className:r,...g,children:"string"==typeof s?_(s,{_:s}):s}):null:i.jsx("a",{className:f("underline hover:no-underline",r),href:N,onClick:T,...g,children:N})},"UrlFieldImpl");U.displayName="UrlFieldImpl";const F=_(U),T=s(e=>e.stopPropagation(),"stopPropagation"),$=s(e=>{const{className:s,empty:r,choices:a,defaultValue:n,source:t,record:d,optionValue:m="id",optionText:x="name",translateChoice:h=!0,label:u,sortable:p,sortBy:j,textAlign:g,rowClassName:f,cellClassName:N,headerClassName:_,resource:b,...y}=e,k=o({defaultValue:n,source:t,record:d}),{getChoiceText:v,getChoiceValue:w}=c({optionText:x,optionValue:m,translateChoice:h}),z=l(),C=a?a.find(e=>w(e)===k):null;if(!C)return r?i.jsx("span",{className:s,...y,children:"string"==typeof r?z(r,{_:r}):r}):null;const S=v(C);return i.jsx("span",{className:s,...y,children:S})},"SelectFieldImpl");$.displayName="SelectFieldImpl";const B=_($),R=s(({link:e="edit"})=>{const s=r();return s?i.jsxs("div",{className:"hidden sm:block w-[250px] min-w-[250px] space-y-4",children:[i.jsx("div",{className:"flex flex-row space-x-1",children:"edit"===e?i.jsx(d,{label:"Edit Organization"}):i.jsx(x,{label:"Show Organization"})}),i.jsx(q,{record:s}),i.jsx(L,{}),i.jsx(W,{record:s}),i.jsx(E,{record:s}),i.jsx(D,{record:s})]}):null},"OrganizationAside"),q=s(({record:e})=>e.website||e.linkedin_url||e.phone?i.jsxs(y,{title:"Organization Info",children:[e.website&&i.jsxs("div",{className:"flex flex-row items-center gap-1 min-h-[24px]",children:[i.jsx(I,{className:"w-4 h-4"}),i.jsx(F,{source:"website",target:"_blank",rel:"noopener",content:e.website.replace("http://","").replace("https://","")})]}),e.linkedin_url&&i.jsxs("div",{className:"flex flex-row items-center gap-1 min-h-[24px]",children:[i.jsx(A,{className:"w-4 h-4"}),i.jsx("a",{className:"underline hover:no-underline",href:e.linkedin_url,target:"_blank",rel:"noopener noreferrer",title:e.linkedin_url,children:"LinkedIn"})]}),e.phone&&i.jsxs("div",{className:"flex flex-row items-center gap-1 min-h-[24px]",children:[i.jsx(O,{className:"w-4 h-4"}),i.jsx("a",{href:`tel:${e.phone}`,className:"underline hover:no-underline",children:e.phone})]})]}):null,"OrganizationInfo"),E=s(({record:e})=>e.id?i.jsxs(y,{title:"Context",children:[e.organization_type&&i.jsxs("span",{children:["Type: ",i.jsx(B,{source:"organization_type",choices:P})]}),e.priority&&i.jsxs("span",{children:["Priority: ",i.jsx(B,{source:"priority",choices:V})]}),e.segment_id&&i.jsxs("span",{children:["Segment:"," ",i.jsx(m,{source:"segment_id",reference:"segments",link:!1,children:i.jsx(N,{source:"name"})})]})]}):null,"ContextInfo"),W=s(({record:e})=>e.address||e.city||e.postal_code||e.state?i.jsxs(y,{title:"Main Address",noGap:!0,children:[i.jsx(N,{source:"address"}),i.jsx(N,{source:"city"}),i.jsx(N,{source:"postal_code"}),i.jsx(N,{source:"state"})]}):null,"AddressInfo"),D=s(({record:e})=>{if(!(e.created_at||e.sales_id||e.description||e.context_links||e.parent_organization_id))return null;const r=s(e=>new URL(e.startsWith("http")?e:`https://${e}`).hostname,"getBaseURL");return i.jsxs(y,{title:"Additional Info",children:[e.description&&i.jsx("p",{className:"text-sm  mb-1",children:e.description}),e.parent_organization_id&&i.jsxs("div",{className:"text-sm text-muted-foreground mb-1",children:["Parent organization:"," ",i.jsx(m,{source:"parent_organization_id",reference:"organizations",record:e,children:i.jsx(N,{source:"name"})})]}),e.context_links&&i.jsx("div",{className:"flex flex-col",children:e.context_links.map((e,s)=>e?i.jsx("a",{className:"text-sm underline hover:no-underline mb-1",href:e.startsWith("http")?e:`https://${e}`,target:"_blank",rel:"noopener noreferrer",title:e,children:r(e)},s):null)}),null!==e.sales_id&&i.jsxs("div",{className:"text-sm text-muted-foreground mb-1",children:["Followed by"," ",i.jsx(m,{source:"sales_id",reference:"sales",record:e,children:i.jsx(w,{})})]}),e.created_at&&i.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:["Added on"," ",i.jsx(b,{source:"created_at",record:e,options:{year:"numeric",month:"long",day:"numeric"}})]})]})},"AdditionalInfo");export{R as O};
