{"version":3,"file":"chunk-l1wHq9zq.js","sources":["../../src/components/admin/array-field.tsx","../../src/components/admin/email-field.tsx"],"sourcesContent":["import type { ReactNode } from \"react\";\nimport * as React from \"react\";\nimport type { RaRecord, UseListOptions, UseFieldValueOptions } from \"ra-core\";\nimport { ListContextProvider, useList, useFieldValue } from \"ra-core\";\n\nexport const ArrayField = <RecordType extends RaRecord = RaRecord>(\n  props: ArrayFieldProps<RecordType>\n) => {\n  const { children, resource, perPage, sort, filter } = props;\n  const rawData = useFieldValue(props);\n\n  // Defensive check: ensure data is always an array\n  // This provides better debugging info if data normalization fails\n  const data = React.useMemo(() => {\n    if (!rawData) {\n      return emptyArray;\n    }\n    if (!Array.isArray(rawData)) {\n      console.error(\n        `[ArrayField] Expected array for source \"${props.source}\", but received:`,\n        rawData,\n        \"\\nThis may indicate missing data normalization in the data provider.\"\n      );\n      // Attempt to recover by wrapping in array or returning empty\n      return typeof rawData === \"object\" ? [rawData] : emptyArray;\n    }\n    return rawData;\n  }, [rawData, props.source]);\n\n  const listContext = useList({ data, resource, perPage, sort, filter });\n\n  return <ListContextProvider value={listContext}>{children}</ListContextProvider>;\n};\nexport type ArrayFieldProps<\n  RecordType extends RaRecord = RaRecord,\n  ErrorType = Error,\n> = UseListOptions<RecordType, ErrorType> &\n  UseFieldValueOptions<RecordType> & {\n    children?: ReactNode;\n  };\n\nconst emptyArray: any[] = [];\n","import { useFieldValue, useTranslate } from \"ra-core\";\nimport type { AnchorHTMLAttributes } from \"react\";\nimport React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\nimport { genericMemo } from \"@/lib/genericMemo\";\nimport type { FieldProps } from \"@/lib/field.type\";\n\nconst EmailFieldImpl = <RecordType extends Record<string, any> = Record<string, any>>(\n  inProps: EmailFieldProps<RecordType>\n) => {\n  const {\n    className,\n    empty,\n    defaultValue,\n    source,\n    record,\n    // Filter out React Admin-specific props that shouldn't be passed to DOM elements\n    label: _label,\n    sortable: _sortable,\n    sortBy: _sortBy,\n    textAlign: _textAlign,\n    rowClassName: _rowClassName,\n    cellClassName: _cellClassName,\n    headerClassName: _headerClassName,\n    resource: _resource,\n    ...rest\n  } = inProps;\n  const value = useFieldValue({ defaultValue, source, record });\n  const translate = useTranslate();\n\n  if (value == null) {\n    if (!empty) {\n      return null;\n    }\n\n    return (\n      <span className={className} {...rest}>\n        {typeof empty === \"string\" ? translate(empty, { _: empty }) : empty}\n      </span>\n    );\n  }\n\n  return (\n    <a\n      className={cn(\"underline hover:no-underline\", className)}\n      href={`mailto:${value}`}\n      onClick={stopPropagation}\n      {...rest}\n    >\n      {value}\n    </a>\n  );\n};\nEmailFieldImpl.displayName = \"EmailFieldImpl\";\n\nexport const EmailField = genericMemo(EmailFieldImpl);\n\nexport interface EmailFieldProps<RecordType extends Record<string, any> = Record<string, any>>\n  extends FieldProps<RecordType>,\n    AnchorHTMLAttributes<HTMLAnchorElement> {}\n\n// useful to prevent click bubbling in a DataTable with rowClick\nconst stopPropagation = (e: React.MouseEvent<HTMLAnchorElement>) => e.stopPropagation();\n"],"names":["ArrayField","props","children","resource","perPage","sort","filter","rawData","useFieldValue","data","React.useMemo","Array","isArray","emptyArray","source","listContext","useList","jsx","ListContextProvider","value","EmailFieldImpl","inProps","className","empty","defaultValue","record","label","_label","sortable","_sortable","sortBy","_sortBy","textAlign","_textAlign","rowClassName","_rowClassName","cellClassName","_cellClassName","headerClassName","_headerClassName","_resource","rest","translate","useTranslate","_","cn","href","onClick","stopPropagation","displayName","EmailField","genericMemo","__name","e"],"mappings":"iRAKO,MAAMA,IACXC,IAEA,MAAMC,SAAEA,EAAAC,SAAUA,EAAAC,QAAUA,EAAAC,KAASA,EAAAC,OAAMA,GAAWL,EAChDM,EAAUC,EAAcP,GAIxBQ,EAAOC,EAAAA,QAAc,IACpBH,EAGAI,MAAMC,QAAQL,GASZA,EAFqB,iBAAZA,EAAuB,CAACA,GAAWM,EAT1CA,EAYR,CAACN,EAASN,EAAMa,SAEbC,EAAcC,EAAQ,CAAEP,OAAMN,WAAUC,UAASC,OAAMC,WAE7D,SAAOW,IAACC,EAAA,CAAoBC,MAAOJ,EAAcb,cA1BzB,cAoCpBW,EAAoB,GCjCpBO,IACJC,IAEA,MAAMC,UACJA,EAAAC,MACAA,EAAAC,aACAA,EAAAV,OACAA,EAAAW,OACAA,EAEAC,MAAOC,EACPC,SAAUC,EACVC,OAAQC,EACRC,UAAWC,EACXC,aAAcC,EACdC,cAAeC,EACfC,gBAAiBC,EACjBpC,SAAUqC,KACPC,GACDpB,EACEF,EAAQX,EAAc,CAAEgB,eAAcV,SAAQW,WAC9CiB,EAAYC,IAElB,OAAa,MAATxB,EACGI,IAKHN,IAAC,OAAA,CAAKK,eAA0BmB,EAC7BvC,SAAiB,iBAAVqB,EAAqBmB,EAAUnB,EAAO,CAAEqB,EAAGrB,IAAWA,IALzD,KAWTN,EAAAA,IAAC,IAAA,CACCK,UAAWuB,EAAG,+BAAgCvB,GAC9CwB,KAAM,UAAU3B,IAChB4B,QAASC,KACLP,EAEHvC,SAAAiB,KA1CgB,kBA8CvBC,EAAe6B,YAAc,iBAEtB,MAAMC,EAAaC,EAAY/B,GAOhC4B,EAAkBI,EAACC,GAA2CA,EAAEL,kBAA9C"}